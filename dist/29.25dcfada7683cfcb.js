(self.webpackChunkadmin_site=self.webpackChunkadmin_site||[]).push([[29],{2029:(d,E,t)=>{"use strict";t.r(E),t.d(E,{AdminModule:()=>Ji});var n=t(9808),i=t(1083),r=t(8111),e=t(5e3);let o=(()=>{class j{}return j.\u0275fac=function(m){return new(m||j)},j.\u0275mod=e.oAB({type:j}),j.\u0275inj=e.cJS({imports:[r.m,n.ez,i.Bz]}),j})();var s=t(7574),a=t(6931),c=t(9533);let l=(()=>{class j{constructor(m,M){this.apiService=m,this.utilService=M}uploadFileApi(m){const M=new FormData;return M.append("file",m),this.apiService.postFormData("/files/media",M)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(a.s),e.LFG(c.f))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),h=(()=>{class j{constructor(m){this.fileApiService=m}uploadFile(m){return this.fileApiService.uploadFileApi(m)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(l))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var p=t(1888),y=t(6556),O=t(312),v=t(7206),b=t(7051),T=t(5113),C=t(3075),w=t(8675),N=t(4004),k=t(3322),L=t(7423),D=t(7322),W=t(7531);function Z(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"h4",6),e._uU(1," Messages "),e.TgZ(2,"button",7),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.triggerSearch())}),e._UZ(3,"img",8),e.qZA()()}}function oe(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",9)(1,"mat-form-field",10),e._UZ(2,"input",11),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.triggerSearch())}),e._uU(4,"Cancel"),e.qZA()()}if(2&j){const m=e.oxw();e.xp6(2),e.Q6J("formControl",m.searchControl)}}function Q(j,U){1&j&&(e.TgZ(0,"div",13)(1,"div",14),e._UZ(2,"img",15),e.qZA(),e.TgZ(3,"div",16),e._uU(4," NO CHAT HISTORY "),e.qZA()())}function ne(j,U){if(1&j&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&j){const m=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==m?null:m.totalUnreadMessage,"")}}const he=function(j){return{"message-lst-item":j}};function ae(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div")(1,"div",19),e.NdJ("click",function(){const Ie=e.CHM(m).$implicit,qe=e.oxw(2);return e.KtG(qe.onSelectChannel(Ie))}),e.TgZ(2,"div",20),e._UZ(3,"img",21)(4,"div",22),e.qZA(),e.TgZ(5,"div",23)(6,"div",24)(7,"div",25),e._uU(8),e.qZA(),e.TgZ(9,"div",26),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",27)(13,"div",28),e._uU(14),e.qZA(),e.YNc(15,ne,2,1,"div",29),e.qZA()()(),e._UZ(16,"hr",30),e.qZA()}if(2&j){const m=U.$implicit,M=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(11,he,(null==M.channelSelected?null:M.channelSelected.channelId)===m.channelId)),e.xp6(2),e.s9C("src",m.channelAvatar,e.LSH),e.xp6(5),e.Oqu(m.channelName),e.xp6(2),e.Oqu(e.xi3(11,8,null==m||null==m.lastMessage?null:m.lastMessage.timestamp,"hh:mm a")),e.xp6(4),e.Oqu(null==m||null==m.lastMessage?null:m.lastMessage.text),e.xp6(1),e.Q6J("ngIf",null==m?null:m.totalUnreadMessage),e.xp6(1),e.ekj("transparent",(null==M.channelSelected?null:M.channelSelected.channelId)===m.channelId)}}function ye(j,U){if(1&j&&(e.TgZ(0,"div",17),e.YNc(1,ae,17,13,"div",18),e.ALo(2,"async"),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,m.filteredOptions))}}let Le=(()=>{class j{constructor(){this.channels=[],this.selectedChannelChange=new e.vpe,this.showSearch=!1,this.searchControl=new C.NI}ngOnInit(){this.filteredOptions=this.searchControl.valueChanges.pipe((0,w.O)(""),(0,N.U)(m=>this._filter(m||"")))}ngOnChanges(m){var M;null!==(M=m.channels)&&void 0!==M&&M.currentValue&&this.searchControl.updateValueAndValidity({onlySelf:!1,emitEvent:!0})}onSelectChannel(m){this.selectedChannelChange.emit(m)}_filter(m){return m.toLowerCase()?this.channels.filter(M=>M.channelName.toLowerCase().includes(m.toLowerCase())):this.channels}triggerSearch(){this.showSearch=!this.showSearch,this.searchControl.setValue("")}}return j.\u0275fac=function(m){return new(m||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-chat-list"]],inputs:{hasData:"hasData",channels:"channels",channelSelected:"channelSelected"},outputs:{selectedChannelChange:"selectedChannelChange"},features:[e.TTD],decls:6,vars:5,consts:[[1,"message-lst","d-flex","flex-column"],[1,"title",3,"ngClass"],["class","h4 d-flex justify-content-between align-items-end",4,"ngIf"],["class","search-block d-flex align-items-center justify-content-between",4,"ngIf"],["class","no-content flex-grow-1",4,"ngIf"],["class","message-lst-items flex-grow-1",4,"ngIf"],[1,"h4","d-flex","justify-content-between","align-items-end"],["mat-icon-button","",1,"text-end","search-mes",3,"click"],["src","assets/images/search.svg"],[1,"search-block","d-flex","align-items-center","justify-content-between"],["appearance","outline",1,"custom-input"],["type","text","aria-label","Number","placeholder","Search","matInput","",3,"formControl"],["mat-button","","color","primary",3,"click"],[1,"no-content","flex-grow-1"],[1,"no-content-img"],["src","assets/images/no-message.png","width","150"],[1,"no-content-desc"],[1,"message-lst-items","flex-grow-1"],[4,"ngFor","ngForOf"],[1,"lnk","p-3","px-lg-2","py-lg-3","p-xl-3","d-flex","align-items-center",3,"ngClass","click"],[1,"channel-avatar","inline"],["width","30","alt","avatar",1,"img-circle-small",3,"src"],[1,"status"],[1,"channel-content","text-truncate","inline","flex-grow-1"],[1,"channel-content-lst-detail","mb-1"],[1,"c-left","inline","name"],[1,"c-right","inline","time"],[1,"channel-content-lst-detail"],[1,"c-left","inline","overflow"],["class","c-right inline unread-message",4,"ngIf"],[1,"line-item"],[1,"c-right","inline","unread-message"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Z,4,0,"h4",2),e.YNc(3,oe,5,1,"div",3),e.qZA(),e.YNc(4,Q,5,0,"div",4),e.YNc(5,ye,3,3,"div",5),e.qZA()),2&m&&(e.xp6(1),e.Q6J("ngClass",M.showSearch?"p-0 pe-2 ps-2":""),e.xp6(1),e.Q6J("ngIf",!M.showSearch),e.xp6(1),e.Q6J("ngIf",M.showSearch),e.xp6(1),e.Q6J("ngIf",!M.hasData),e.xp6(1),e.Q6J("ngIf",M.hasData))},dependencies:[C.Fj,C.JJ,C.oH,n.mk,n.sg,n.O5,k.oO,L.lW,D.KE,W.Nt,n.Ov,n.uU],styles:[".message-lst[_ngcontent-%COMP%]{height:100%;position:relative}.message-lst[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.message-lst[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]   .no-content-desc[_ngcontent-%COMP%]{margin-top:50px;color:#33333380}.message-lst[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;padding:0 15px 10px}.message-lst[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-mes[_ngcontent-%COMP%]{scale:.9}.message-lst[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-block[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.message-lst[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-block[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-infix{width:auto;font-size:16px}.message-lst[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.message-lst[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#b0b9b2;float:right;padding-left:10px}.message-lst[_ngcontent-%COMP%]   .overflow[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:1;-webkit-box-orient:vertical;min-height:20px;white-space:nowrap;max-width:85%}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]{overflow-y:auto}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .line-item[_ngcontent-%COMP%]{margin:0 -5px;border:1px solid #D3D3D3;width:95%}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .line-item.transparent[_ngcontent-%COMP%]{border-color:transparent}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700!important}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .lnk[_ngcontent-%COMP%]{cursor:pointer}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .channel-avatar[_ngcontent-%COMP%]{margin-right:20px}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .channel-content[_ngcontent-%COMP%]{position:relative}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .message-lst-item[_ngcontent-%COMP%]{background:white}.message-lst[_ngcontent-%COMP%]   .message-lst-items[_ngcontent-%COMP%]   .channel-content-lst-detail[_ngcontent-%COMP%]   .unread-message[_ngcontent-%COMP%]{width:23px;height:23px;background:#47A7EE;text-align:center;border-radius:50%;color:#fff;font-size:12px;font-weight:700;padding-top:2px}.message-lst[_ngcontent-%COMP%]   .add-channel[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:0}"]}),j})();var me=(()=>{return(j=me||(me={}))[j.NONE=0]="NONE",j[j.IMAGE=1]="IMAGE",j[j.VIDEO=2]="VIDEO",j[j.AUDIO=3]="AUDIO",me;var j})(),Oe=t(7579),ge=function(){return ge=Object.assign||function(U){for(var m,M=1,q=arguments.length;M<q;M++)for(var Ie in m=arguments[M])Object.prototype.hasOwnProperty.call(m,Ie)&&(U[Ie]=m[Ie]);return U},ge.apply(this,arguments)},ce={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}};const ve=function(){function j(U,m){return this.core=U,this.$LG=m,this.settings=ge(ge({},ce),this.core.settings),this}return j.prototype.buildTemplates=function(){var U=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(U+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(U)},j.prototype.enableZoom=function(U){var m=this,M=this.settings.enableZoomAfter+U.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&U.detail.delay?M=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){!m.isImageSlide(m.core.index)||(m.core.getSlideItem(U.detail.index).addClass("lg-zoomable"),U.detail.index===m.core.index&&m.setZoomEssentials())},M+30)},j.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on("lgSlideItemLoad.zoom",this.enableZoom.bind(this))},j.prototype.getDragCords=function(U){return{x:U.pageX,y:U.pageY}},j.prototype.getSwipeCords=function(U){return{x:U.touches[0].pageX,y:U.touches[0].pageY}},j.prototype.getDragAllowedAxises=function(U,m){var M=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),q=0,Ie=0,qe=M.getBoundingClientRect();return U?(q=M.offsetHeight*U,Ie=M.offsetWidth*U):m?(q=qe.height+m*qe.height,Ie=qe.width+m*qe.width):(q=qe.height,Ie=qe.width),{allowX:Ie>this.containerRect.width,allowY:q>this.containerRect.height}},j.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},j.prototype.zoomImage=function(U,m,M,q){if(!(Math.abs(m)<=0)){var rn,Ie=this.containerRect.width/2+this.containerRect.left,qe=this.containerRect.height/2+this.containerRect.top+this.scrollTop;1===U&&(this.positionChanged=!1);var Ln=this.getDragAllowedAxises(0,m),Or=Ln.allowY,Vn=Ln.allowX;this.positionChanged&&(rn=this.top/(this.scale-m),this.pageX=Ie-this.left/(this.scale-m),this.pageY=qe-rn,this.positionChanged=!1);var ir,Nr,mn=this.getPossibleSwipeDragCords(m),oi=Ie-this.pageX,to=qe-this.pageY;if(U-m>1){var Vr=(U-m)/Math.abs(m);ir=(oi=(m<0?-oi:oi)+this.left*(Vr+(m<0?-1:1)))/Vr,Nr=(to=(m<0?-to:to)+this.top*(Vr+(m<0?-1:1)))/Vr}else ir=oi*(Vr=(U-m)*m),Nr=to*Vr;M&&(Vn?this.isBeyondPossibleLeft(ir,mn.minX)?ir=mn.minX:this.isBeyondPossibleRight(ir,mn.maxX)&&(ir=mn.maxX):U>1&&(ir<mn.minX?ir=mn.minX:ir>mn.maxX&&(ir=mn.maxX)),Or?this.isBeyondPossibleTop(Nr,mn.minY)?Nr=mn.minY:this.isBeyondPossibleBottom(Nr,mn.maxY)&&(Nr=mn.maxY):U>1&&(Nr<mn.minY?Nr=mn.minY:Nr>mn.maxY&&(Nr=mn.maxY))),this.setZoomStyles({x:ir,y:Nr,scale:U}),this.left=ir,this.top=Nr,q&&this.setZoomImageSize()}},j.prototype.resetImageTranslate=function(U){if(this.isImageSlide(U)){var m=this.core.getSlideItem(U).find(".lg-image").first();this.imageReset=!1,m.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),m.css("width","auto").css("height","auto"),setTimeout(function(){m.removeClass("no-transition")},10)}},j.prototype.setZoomImageSize=function(){var U=this,m=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var M=U.getCurrentImageActualSizeScale();U.scale>=M&&(m.addClass("no-transition"),U.imageReset=!0)},500),setTimeout(function(){var M=U.getCurrentImageActualSizeScale();if(U.scale>=M){var q=U.getDragAllowedAxises(U.scale);m.css("width",m.get().naturalWidth+"px").css("height",m.get().naturalHeight+"px"),U.core.outer.addClass("lg-actual-size"),q.allowX&&q.allowY?m.addClass("reset-transition"):q.allowX&&!q.allowY?m.addClass("reset-transition-x"):!q.allowX&&q.allowY&&m.addClass("reset-transition-y")}},550)},j.prototype.setZoomStyles=function(U){var m=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),M=this.core.getSlideItem(this.core.index).find(".lg-image").first(),q=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=U.scale,M.css("transform","scale3d("+U.scale+", "+U.scale+", 1)"),q.css("transform","scale3d("+U.scale+", "+U.scale+", 1)"),m.css("transform","translate3d("+U.x+"px, "+U.y+"px, 0)")},j.prototype.setActualSize=function(U,m){var M=this,q=this.core.galleryItems[this.core.index];this.resetImageTranslate(U),setTimeout(function(){if(q.src&&!M.core.outer.hasClass("lg-first-slide-loading")){var Ie=M.getCurrentImageActualSizeScale(),qe=M.scale;M.scale=M.core.outer.hasClass("lg-zoomed")?1:M.getScale(Ie),M.setPageCords(m),M.beginZoom(M.scale),M.zoomImage(M.scale,M.scale-qe,!0,!0),setTimeout(function(){M.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},10)}},50)},j.prototype.getNaturalWidth=function(U){var m=this.core.getSlideItem(U).find(".lg-image").first(),M=this.core.galleryItems[U].width;return M?parseFloat(M):m.get().naturalWidth},j.prototype.getActualSizeScale=function(U,m){return U>=m?U/m||2:1},j.prototype.getCurrentImageActualSizeScale=function(){var m=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,M=this.getNaturalWidth(this.core.index)||m;return this.getActualSizeScale(M,m)},j.prototype.getPageCords=function(U){var m={};if(U)m.x=U.pageX||U.touches[0].pageX,m.y=U.pageY||U.touches[0].pageY;else{var M=this.core.$content.get().getBoundingClientRect();m.x=M.width/2+M.left,m.y=M.height/2+this.scrollTop+M.top}return m},j.prototype.setPageCords=function(U){var m=this.getPageCords(U);this.pageX=m.x,this.pageY=m.y},j.prototype.manageActualPixelClassNames=function(){this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},j.prototype.beginZoom=function(U){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),U>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),U>1},j.prototype.getScale=function(U){var m=this.getCurrentImageActualSizeScale();return U<1?U=1:U>m&&(U=m),U},j.prototype.init=function(){var U=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var m=null;this.core.outer.on("dblclick.lg",function(M){!U.$LG(M.target).hasClass("lg-image")||U.setActualSize(U.core.index,M)}),this.core.outer.on("touchstart.lg",function(M){var q=U.$LG(M.target);1===M.touches.length&&q.hasClass("lg-image")&&(m?(clearTimeout(m),m=null,M.preventDefault(),U.setActualSize(U.core.index,M)):m=setTimeout(function(){m=null},300))}),this.core.LGel.on("lgContainerResize.zoom lgRotateRight.zoom lgRotateLeft.zoom lgFlipHorizontal.zoom lgFlipVertical.zoom",function(){if(U.core.lgOpened&&U.isImageSlide(U.core.index)&&!U.core.touchAction){var M=U.core.getSlideItem(U.core.index).find(".lg-img-wrap").first();U.top=0,U.left=0,U.setZoomEssentials(),U.setZoomSwipeStyles(M,{x:0,y:0}),U.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){!U.core.lgOpened||(U.scrollTop=U.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(U.isImageSlide(U.core.index)){var M=0;U.imageReset&&(U.resetImageTranslate(U.core.index),M=50),setTimeout(function(){var q=U.scale-U.settings.scale;q<1&&(q=1),U.beginZoom(q),U.zoomImage(q,-U.settings.scale,!0,!0)},M)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){U.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){U.setActualSize(U.core.index)}),this.core.LGel.on("lgBeforeOpen.zoom",function(){U.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on("lgAfterOpen.zoom",function(){U.scrollTop=U.$LG(window).scrollTop(),U.pageX=U.core.outer.width()/2,U.pageY=U.core.outer.height()/2+U.scrollTop,U.scale=1}),this.core.LGel.on("lgAfterSlide.zoom",function(M){var q=M.detail.prevIndex;U.scale=1,U.positionChanged=!1,U.resetZoom(q),U.resetImageTranslate(q),U.isImageSlide(U.core.index)&&U.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1}},j.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var U=this.scale+this.settings.scale;U=this.getScale(U),this.beginZoom(U),this.zoomImage(U,this.settings.scale,!0,!0)}},j.prototype.resetZoom=function(U){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var m=this.core.getElementById("lg-actual-size"),M=this.core.getSlideItem(void 0!==U?U:this.core.index);m.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),M.find(".lg-img-wrap").first().removeAttr("style"),M.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},j.prototype.getTouchDistance=function(U){return Math.sqrt((U.touches[0].pageX-U.touches[1].pageX)*(U.touches[0].pageX-U.touches[1].pageX)+(U.touches[0].pageY-U.touches[1].pageY)*(U.touches[0].pageY-U.touches[1].pageY))},j.prototype.pinchZoom=function(){var U=this,m=0,M=!1,q=1,Ie=0,qe=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(Xt){if(qe=U.core.getSlideItem(U.core.index),U.isImageSlide(U.core.index)&&2===Xt.touches.length){if(Xt.preventDefault(),U.core.outer.hasClass("lg-first-slide-loading"))return;q=U.scale||1,U.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),U.setPageCords(Xt),U.resetImageTranslate(U.core.index),U.core.touchAction="pinch",m=U.getTouchDistance(Xt)}}),this.core.$inner.on("touchmove.lg",function(Xt){if(2===Xt.touches.length&&"pinch"===U.core.touchAction&&(U.$LG(Xt.target).hasClass("lg-item")||qe.get().contains(Xt.target))){Xt.preventDefault();var rn=U.getTouchDistance(Xt),Ln=m-rn;if(!M&&Math.abs(Ln)>5&&(M=!0),M){Ie=U.scale;var Or=Math.max(1,q+.02*-Ln);U.scale=Math.round(100*(Or+Number.EPSILON))/100,U.zoomImage(U.scale,Math.round(100*(U.scale-Ie+Number.EPSILON))/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(Xt){if("pinch"===U.core.touchAction&&(U.$LG(Xt.target).hasClass("lg-item")||qe.get().contains(Xt.target))){if(M=!1,m=0,U.scale<=1)U.resetZoom();else{var rn=U.getCurrentImageActualSizeScale();if(U.scale>=rn){var Ln=rn-U.scale;0===Ln&&(Ln=.01),U.zoomImage(rn,Ln,!1,!0)}U.manageActualPixelClassNames(),U.core.outer.addClass("lg-zoomed")}U.core.touchAction=void 0}})},j.prototype.touchendZoom=function(U,m,M,q,Ie){var qe=m.x-U.x,Xt=m.y-U.y,rn=Math.abs(qe)/Ie+1,Ln=Math.abs(Xt)/Ie+1;rn>2&&(rn+=1),Ln>2&&(Ln+=1),qe*=rn,Xt*=Ln;var Or=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),Vn={};Vn.x=this.left+qe,Vn.y=this.top+Xt;var mn=this.getPossibleSwipeDragCords();(Math.abs(qe)>15||Math.abs(Xt)>15)&&(q&&(this.isBeyondPossibleTop(Vn.y,mn.minY)?Vn.y=mn.minY:this.isBeyondPossibleBottom(Vn.y,mn.maxY)&&(Vn.y=mn.maxY)),M&&(this.isBeyondPossibleLeft(Vn.x,mn.minX)?Vn.x=mn.minX:this.isBeyondPossibleRight(Vn.x,mn.maxX)&&(Vn.x=mn.maxX)),q?this.top=Vn.y:Vn.y=this.top,M?this.left=Vn.x:Vn.x=this.left,this.setZoomSwipeStyles(Or,Vn),this.positionChanged=!0)},j.prototype.getZoomSwipeCords=function(U,m,M,q,Ie){var qe={};return q?(qe.y=this.top+(m.y-U.y),this.isBeyondPossibleTop(qe.y,Ie.minY)?qe.y=Ie.minY-(Ie.minY-qe.y)/6:this.isBeyondPossibleBottom(qe.y,Ie.maxY)&&(qe.y=Ie.maxY+(qe.y-Ie.maxY)/6)):qe.y=this.top,M?(qe.x=this.left+(m.x-U.x),this.isBeyondPossibleLeft(qe.x,Ie.minX)?qe.x=Ie.minX-(Ie.minX-qe.x)/6:this.isBeyondPossibleRight(qe.x,Ie.maxX)&&(qe.x=Ie.maxX+(qe.x-Ie.maxX)/6)):qe.x=this.left,qe},j.prototype.isBeyondPossibleLeft=function(U,m){return U>=m},j.prototype.isBeyondPossibleRight=function(U,m){return U<=m},j.prototype.isBeyondPossibleTop=function(U,m){return U>=m},j.prototype.isBeyondPossibleBottom=function(U,m){return U<=m},j.prototype.isImageSlide=function(U){return"image"===this.core.getSlideType(this.core.galleryItems[U])},j.prototype.getPossibleSwipeDragCords=function(U){var m=this.core.getSlideItem(this.core.index).find(".lg-image").first(),M=this.core.mediaContainerPosition.bottom,q=m.get().getBoundingClientRect(),Ie=q.height,qe=q.width;return U&&(Ie+=U*Ie,qe+=U*qe),{minY:(Ie-this.containerRect.height)/2,maxY:(this.containerRect.height-Ie)/2+M,minX:(qe-this.containerRect.width)/2,maxX:(this.containerRect.width-qe)/2}},j.prototype.setZoomSwipeStyles=function(U,m){U.css("transform","translate3d("+m.x+"px, "+m.y+"px, 0)")},j.prototype.zoomSwipe=function(){var Ln,Or,U=this,m={},M={},q=!1,Ie=!1,qe=!1,Xt=new Date,Vn=(new Date,this.core.getSlideItem(this.core.index));this.core.$inner.on("touchstart.lg",function(mn){if(U.isImageSlide(U.core.index)&&(Vn=U.core.getSlideItem(U.core.index),(U.$LG(mn.target).hasClass("lg-item")||Vn.get().contains(mn.target))&&1===mn.touches.length&&U.core.outer.hasClass("lg-zoomed"))){mn.preventDefault(),Xt=new Date,U.core.touchAction="zoomSwipe",Or=U.core.getSlideItem(U.core.index).find(".lg-img-wrap").first();var ir=U.getDragAllowedAxises(0);qe=ir.allowY,((Ie=ir.allowX)||qe)&&(m=U.getSwipeCords(mn)),Ln=U.getPossibleSwipeDragCords(),U.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(mn){if(1===mn.touches.length&&"zoomSwipe"===U.core.touchAction&&(U.$LG(mn.target).hasClass("lg-item")||Vn.get().contains(mn.target))){mn.preventDefault(),U.core.touchAction="zoomSwipe",M=U.getSwipeCords(mn);var ir=U.getZoomSwipeCords(m,M,Ie,qe,Ln);(Math.abs(M.x-m.x)>15||Math.abs(M.y-m.y)>15)&&(q=!0,U.setZoomSwipeStyles(Or,ir))}}),this.core.$inner.on("touchend.lg",function(mn){if("zoomSwipe"===U.core.touchAction&&(U.$LG(mn.target).hasClass("lg-item")||Vn.get().contains(mn.target))){if(mn.preventDefault(),U.core.touchAction=void 0,U.core.outer.removeClass("lg-zoom-dragging"),!q)return;q=!1;var ir=(new Date).valueOf()-Xt.valueOf();U.touchendZoom(m,M,Ie,qe,ir)}})},j.prototype.zoomDrag=function(){var rn,Ln,Or,Vn,U=this,m={},M={},q=!1,Ie=!1,qe=!1,Xt=!1;this.core.outer.on("mousedown.lg.zoom",function(mn){if(U.isImageSlide(U.core.index)){var ir=U.core.getSlideItem(U.core.index);if(U.$LG(mn.target).hasClass("lg-item")||ir.get().contains(mn.target)){rn=new Date,Vn=U.core.getSlideItem(U.core.index).find(".lg-img-wrap").first();var Nr=U.getDragAllowedAxises(0);Xt=Nr.allowY,qe=Nr.allowX,U.core.outer.hasClass("lg-zoomed")&&U.$LG(mn.target).hasClass("lg-object")&&(qe||Xt)&&(mn.preventDefault(),m=U.getDragCords(mn),Or=U.getPossibleSwipeDragCords(),q=!0,U.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(mn){if(q){Ie=!0,M=U.getDragCords(mn);var ir=U.getZoomSwipeCords(m,M,qe,Xt,Or);U.setZoomSwipeStyles(Vn,ir)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(mn){if(q){if(Ln=new Date,q=!1,U.core.outer.removeClass("lg-zoom-dragging"),Ie&&(m.x!==M.x||m.y!==M.y)){M=U.getDragCords(mn);var ir=Ln.valueOf()-rn.valueOf();U.touchendZoom(m,M,qe,Xt,ir)}Ie=!1}U.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},j.prototype.closeGallery=function(){this.resetZoom()},j.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},j}();var Ae=function(){return Ae=Object.assign||function(U){for(var m,M=1,q=arguments.length;M<q;M++)for(var Ie in m=arguments[M])Object.prototype.hasOwnProperty.call(m,Ie)&&(U[Ie]=m[Ie]);return U},Ae.apply(this,arguments)},Xe={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",alignThumbnails:"middle",thumbWidth:100,thumbHeight:"80px",thumbMargin:5,appendThumbnailsTo:".lg-components",toggleThumb:!1,enableThumbDrag:!0,enableThumbSwipe:!0,thumbnailSwipeThreshold:10,loadYouTubeThumbnail:!0,youTubeThumbSize:1,thumbnailPluginStrings:{toggleThumbnails:"Toggle thumbnails"}};const at=function(){function j(U,m){return this.thumbOuterWidth=0,this.thumbTotalWidth=0,this.translateX=0,this.thumbClickable=!1,this.core=U,this.$LG=m,this}return j.prototype.init=function(){this.settings=Ae(Ae({},Xe),this.core.settings),this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.galleryItems.length*(this.settings.thumbWidth+this.settings.thumbMargin),this.translateX=0,this.setAnimateThumbStyles(),this.core.settings.allowMediaOverlap||(this.settings.toggleThumb=!1),this.settings.thumbnail&&(this.build(),this.settings.animateThumb?(this.settings.enableThumbDrag&&this.enableThumbDrag(),this.settings.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggleThumbBar(),this.thumbKeyPress())},j.prototype.build=function(){var U=this;this.setThumbMarkup(),this.manageActiveClassOnSlideChange(),this.$lgThumb.first().on("click.lg touchend.lg",function(m){var M=U.$LG(m.target);!M.hasAttribute("data-lg-item-id")||setTimeout(function(){if(U.thumbClickable&&!U.core.lgBusy){var q=parseInt(M.attr("data-lg-item-id"));U.core.slide(q,!1,!0,!1)}},50)}),this.core.LGel.on("lgBeforeSlide.thumb",function(m){U.animateThumb(m.detail.index)}),this.core.LGel.on("lgBeforeOpen.thumb",function(){U.thumbOuterWidth=U.core.outer.get().offsetWidth}),this.core.LGel.on("lgUpdateSlides.thumb",function(){U.rebuildThumbnails()}),this.core.LGel.on("lgContainerResize.thumb",function(){!U.core.lgOpened||setTimeout(function(){U.thumbOuterWidth=U.core.outer.get().offsetWidth,U.animateThumb(U.core.index),U.thumbOuterWidth=U.core.outer.get().offsetWidth},50)})},j.prototype.setThumbMarkup=function(){var U="lg-thumb-outer ";this.settings.alignThumbnails&&(U+="lg-thumb-align-"+this.settings.alignThumbnails);var m='<div class="'+U+'">\n        <div class="lg-thumb lg-group">\n        </div>\n        </div>';this.core.outer.addClass("lg-has-thumb"),".lg-components"===this.settings.appendThumbnailsTo?this.core.$lgComponents.append(m):this.core.outer.append(m),this.$thumbOuter=this.core.outer.find(".lg-thumb-outer").first(),this.$lgThumb=this.core.outer.find(".lg-thumb").first(),this.settings.animateThumb&&this.core.outer.find(".lg-thumb").css("transition-duration",this.core.settings.speed+"ms").css("width",this.thumbTotalWidth+"px").css("position","relative"),this.setThumbItemHtml(this.core.galleryItems)},j.prototype.enableThumbDrag=function(){var U=this,m={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0},M=!1;this.$thumbOuter.addClass("lg-grab"),this.core.outer.find(".lg-thumb").first().on("mousedown.lg.thumb",function(q){U.thumbTotalWidth>U.thumbOuterWidth&&(q.preventDefault(),m.cords.startX=q.pageX,m.startTime=new Date,U.thumbClickable=!1,M=!0,U.core.outer.get().scrollLeft+=1,U.core.outer.get().scrollLeft-=1,U.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),this.$LG(window).on("mousemove.lg.thumb.global"+this.core.lgId,function(q){!U.core.lgOpened||M&&(m.cords.endX=q.pageX,m=U.onThumbTouchMove(m))}),this.$LG(window).on("mouseup.lg.thumb.global"+this.core.lgId,function(){!U.core.lgOpened||(m.isMoved?m=U.onThumbTouchEnd(m):U.thumbClickable=!0,M&&(M=!1,U.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab")))})},j.prototype.enableThumbSwipe=function(){var U=this,m={cords:{startX:0,endX:0},isMoved:!1,newTranslateX:0,startTime:new Date,endTime:new Date,touchMoveTime:0};this.$lgThumb.on("touchstart.lg",function(M){U.thumbTotalWidth>U.thumbOuterWidth&&(M.preventDefault(),m.cords.startX=M.targetTouches[0].pageX,U.thumbClickable=!1,m.startTime=new Date)}),this.$lgThumb.on("touchmove.lg",function(M){U.thumbTotalWidth>U.thumbOuterWidth&&(M.preventDefault(),m.cords.endX=M.targetTouches[0].pageX,m=U.onThumbTouchMove(m))}),this.$lgThumb.on("touchend.lg",function(){m.isMoved?m=U.onThumbTouchEnd(m):U.thumbClickable=!0})},j.prototype.rebuildThumbnails=function(){var U=this;this.$thumbOuter.addClass("lg-rebuilding-thumbnails"),setTimeout(function(){U.thumbTotalWidth=U.core.galleryItems.length*(U.settings.thumbWidth+U.settings.thumbMargin),U.$lgThumb.css("width",U.thumbTotalWidth+"px"),U.$lgThumb.empty(),U.setThumbItemHtml(U.core.galleryItems),U.animateThumb(U.core.index)},50),setTimeout(function(){U.$thumbOuter.removeClass("lg-rebuilding-thumbnails")},200)},j.prototype.setTranslate=function(U){this.$lgThumb.css("transform","translate3d(-"+U+"px, 0px, 0px)")},j.prototype.getPossibleTransformX=function(U){return U>this.thumbTotalWidth-this.thumbOuterWidth&&(U=this.thumbTotalWidth-this.thumbOuterWidth),U<0&&(U=0),U},j.prototype.animateThumb=function(U){if(this.$lgThumb.css("transition-duration",this.core.settings.speed+"ms"),this.settings.animateThumb){var m=0;switch(this.settings.currentPagerPosition){case"left":m=0;break;case"middle":m=this.thumbOuterWidth/2-this.settings.thumbWidth/2;break;case"right":m=this.thumbOuterWidth-this.settings.thumbWidth}this.translateX=(this.settings.thumbWidth+this.settings.thumbMargin)*U-1-m,this.translateX>this.thumbTotalWidth-this.thumbOuterWidth&&(this.translateX=this.thumbTotalWidth-this.thumbOuterWidth),this.translateX<0&&(this.translateX=0),this.setTranslate(this.translateX)}},j.prototype.onThumbTouchMove=function(U){return U.newTranslateX=this.translateX,U.isMoved=!0,U.touchMoveTime=(new Date).valueOf(),U.newTranslateX-=U.cords.endX-U.cords.startX,U.newTranslateX=this.getPossibleTransformX(U.newTranslateX),this.setTranslate(U.newTranslateX),this.$thumbOuter.addClass("lg-dragging"),U},j.prototype.onThumbTouchEnd=function(U){U.isMoved=!1,U.endTime=new Date,this.$thumbOuter.removeClass("lg-dragging");var m=U.endTime.valueOf()-U.startTime.valueOf(),M=U.cords.endX-U.cords.startX,q=Math.abs(M)/m;return q>.15&&U.endTime.valueOf()-U.touchMoveTime<30?((q+=1)>2&&(q+=1),q+=q*(Math.abs(M)/this.thumbOuterWidth),this.$lgThumb.css("transition-duration",Math.min(q-1,2)+"settings"),this.translateX=this.getPossibleTransformX(this.translateX-(M*=q)),this.setTranslate(this.translateX)):this.translateX=U.newTranslateX,Math.abs(U.cords.endX-U.cords.startX)<this.settings.thumbnailSwipeThreshold&&(this.thumbClickable=!0),U},j.prototype.getThumbHtml=function(U,m){var M=this.core.galleryItems[m].__slideVideoInfo||{};return'<div data-lg-item-id="'+m+'" class="lg-thumb-item '+(m===this.core.index?" active":"")+'" \n        style="width:'+this.settings.thumbWidth+"px; height: "+this.settings.thumbHeight+";\n            margin-right: "+this.settings.thumbMargin+'px;">\n            <img data-lg-item-id="'+m+'" src="'+(M.youtube&&this.settings.loadYouTubeThumbnail?"//img.youtube.com/vi/"+M.youtube[1]+"/"+this.settings.youTubeThumbSize+".jpg":U)+'" />\n        </div>'},j.prototype.getThumbItemHtml=function(U){for(var m="",M=0;M<U.length;M++)m+=this.getThumbHtml(U[M].thumb,M);return m},j.prototype.setThumbItemHtml=function(U){var m=this.getThumbItemHtml(U);this.$lgThumb.html(m)},j.prototype.setAnimateThumbStyles=function(){this.settings.animateThumb&&this.core.outer.addClass("lg-animate-thumb")},j.prototype.manageActiveClassOnSlideChange=function(){var U=this;this.core.LGel.on("lgBeforeSlide.thumb",function(m){var M=U.core.outer.find(".lg-thumb-item"),q=m.detail.index;M.removeClass("active"),M.eq(q).addClass("active")})},j.prototype.toggleThumbBar=function(){var U=this;this.settings.toggleThumb&&(this.core.outer.addClass("lg-can-toggle"),this.core.$toolbar.append('<button type="button" aria-label="'+this.settings.thumbnailPluginStrings.toggleThumbnails+'" class="lg-toggle-thumb lg-icon"></button>'),this.core.outer.find(".lg-toggle-thumb").first().on("click.lg",function(){U.core.outer.toggleClass("lg-components-open")}))},j.prototype.thumbKeyPress=function(){var U=this;this.$LG(window).on("keydown.lg.thumb.global"+this.core.lgId,function(m){!U.core.lgOpened||!U.settings.toggleThumb||(38===m.keyCode?(m.preventDefault(),U.core.outer.addClass("lg-components-open")):40===m.keyCode&&(m.preventDefault(),U.core.outer.removeClass("lg-components-open")))})},j.prototype.destroy=function(){this.settings.thumbnail&&(this.$LG(window).off(".lg.thumb.global"+this.core.lgId),this.core.LGel.off(".lg.thumb"),this.core.LGel.off(".thumb"),this.$thumbOuter.remove(),this.core.outer.removeClass("lg-has-thumb"))},j}();var At=function(){return At=Object.assign||function(U){for(var m,M=1,q=arguments.length;M<q;M++)for(var Ie in m=arguments[M])Object.prototype.hasOwnProperty.call(m,Ie)&&(U[Ie]=m[Ie]);return U},At.apply(this,arguments)},Wt={autoplay:!0,slideShowAutoplay:!1,slideShowInterval:5e3,progressBar:!0,forceSlideShowAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar",autoplayPluginStrings:{toggleAutoplay:"Toggle Autoplay"}};const un=function(){function j(U){return this.core=U,this.settings=At(At({},Wt),this.core.settings),this}return j.prototype.init=function(){var U=this;!this.settings.autoplay||(this.interval=!1,this.fromAuto=!0,this.pausedOnTouchDrag=!1,this.pausedOnSlideChange=!1,this.settings.autoplayControls&&this.controls(),this.settings.progressBar&&this.core.outer.append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),this.settings.slideShowAutoplay&&this.core.LGel.once("lgSlideItemLoad.autoplay",function(){U.startAutoPlay()}),this.core.LGel.on("lgDragStart.autoplay touchstart.lg.autoplay",function(){U.interval&&(U.stopAutoPlay(),U.pausedOnTouchDrag=!0)}),this.core.LGel.on("lgDragEnd.autoplay touchend.lg.autoplay",function(){!U.interval&&U.pausedOnTouchDrag&&(U.startAutoPlay(),U.pausedOnTouchDrag=!1)}),this.core.LGel.on("lgBeforeSlide.autoplay",function(){U.showProgressBar(),!U.fromAuto&&U.interval?(U.stopAutoPlay(),U.pausedOnSlideChange=!0):U.pausedOnSlideChange=!1,U.fromAuto=!1}),this.core.LGel.on("lgAfterSlide.autoplay",function(){U.pausedOnSlideChange&&!U.interval&&U.settings.forceSlideShowAutoplay&&(U.startAutoPlay(),U.pausedOnSlideChange=!1)}),this.showProgressBar())},j.prototype.showProgressBar=function(){var U=this;if(this.settings.progressBar&&this.fromAuto){var m=this.core.outer.find(".lg-progress-bar"),M=this.core.outer.find(".lg-progress");this.interval&&(M.removeAttr("style"),m.removeClass("lg-start"),setTimeout(function(){M.css("transition","width "+(U.core.settings.speed+U.settings.slideShowInterval)+"ms ease 0s"),m.addClass("lg-start")},20))}},j.prototype.controls=function(){var U=this,m='<button aria-label="'+this.settings.autoplayPluginStrings.toggleAutoplay+'" type="button" class="lg-autoplay-button lg-icon"></button>';this.core.outer.find(this.settings.appendAutoplayControlsTo).append(m),this.core.outer.find(".lg-autoplay-button").first().on("click.lg.autoplay",function(){U.core.outer.hasClass("lg-show-autoplay")?U.stopAutoPlay():U.interval||U.startAutoPlay()})},j.prototype.startAutoPlay=function(){var U=this;this.core.outer.find(".lg-progress").css("transition","width "+(this.core.settings.speed+this.settings.slideShowInterval)+"ms ease 0s"),this.core.outer.addClass("lg-show-autoplay"),this.core.outer.find(".lg-progress-bar").addClass("lg-start"),this.core.LGel.trigger("lgAutoplayStart",{index:this.core.index}),this.interval=setInterval(function(){U.core.index+1<U.core.galleryItems.length?U.core.index++:U.core.index=0,U.core.LGel.trigger("lgAutoplay",{index:U.core.index}),U.fromAuto=!0,U.core.slide(U.core.index,!1,!1,"next")},this.core.settings.speed+this.settings.slideShowInterval)},j.prototype.stopAutoPlay=function(){this.interval&&(this.core.LGel.trigger("lgAutoplayStop",{index:this.core.index}),this.core.outer.find(".lg-progress").removeAttr("style"),this.core.outer.removeClass("lg-show-autoplay"),this.core.outer.find(".lg-progress-bar").removeClass("lg-start")),clearInterval(this.interval),this.interval=!1},j.prototype.closeGallery=function(){this.stopAutoPlay()},j.prototype.destroy=function(){this.settings.autoplay&&this.core.outer.find(".lg-progress-bar").remove(),this.core.LGel.off(".lg.autoplay"),this.core.LGel.off(".autoplay")},j}();var En=t(7261),nt=t(1095),ct=t(8401),De=t(4516),lt=t(5001),wt=t(2926),In=t(1630),Gn=t(6312);let ft=(()=>{class j{transform(m,M){const q=Date.now()-new Date(m).getTime(),Ie=new Date(q);return Math.abs(Ie.getUTCFullYear()-1970)}}return j.\u0275fac=function(m){return new(m||j)},j.\u0275pipe=e.Yjl({name:"birthdate",type:j,pure:!0}),j})();var ut=t(7625);const Vt=["detailMessages"],nn=["detailContent"],Rn=["dropzone"],Pn=["inputMessage"];function Jt(j,U){if(1&j&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.hij(", ",null==m.patientInfo||null==m.patientInfo.address?null:m.patientInfo.address.city,"")}}function Mr(j,U){if(1&j&&(e.TgZ(0,"div",44)(1,"div",45),e._uU(2),e.qZA(),e.TgZ(3,"div",46),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&j){const m=e.oxw(3).$implicit;e.xp6(2),e.hij(" ",m.text," "),e.xp6(2),e.Oqu(e.xi3(5,2,m.timestamp,"hh:mm a"))}}function bn(j,U){}const Zn=function(j){return{item:j}};function Ht(j,U){if(1&j&&(e.TgZ(0,"div",40),e.YNc(1,Mr,6,5,"div",41),e.TgZ(2,"div",42),e.YNc(3,bn,0,0,"ng-template",43),e.qZA()()),2&j){const m=e.oxw(2).$implicit;e.oxw(2);const M=e.MAs(25);e.xp6(1),e.Q6J("ngIf",m.text),e.xp6(2),e.Q6J("ngTemplateOutlet",M)("ngTemplateOutletContext",e.VKq(3,Zn,m))}}function rr(j,U){if(1&j&&(e.TgZ(0,"div",54)(1,"div",55),e._uU(2),e.qZA(),e.TgZ(3,"div",45),e._uU(4),e.qZA(),e.TgZ(5,"div",46),e._uU(6),e.ALo(7,"date"),e.qZA()()),2&j){const m=e.oxw(3).$implicit;e.xp6(2),e.hij(" ",m.name," "),e.xp6(2),e.hij(" ",m.text," "),e.xp6(2),e.Oqu(e.xi3(7,3,m.timestamp,"hh:mm a"))}}function Ti(j,U){}function bo(j,U){if(1&j&&(e.TgZ(0,"div",47)(1,"div",48)(2,"div",49),e._UZ(3,"img",50),e.qZA(),e.TgZ(4,"div",51),e.YNc(5,rr,8,6,"div",52),e.TgZ(6,"div",53),e.YNc(7,Ti,0,0,"ng-template",43),e.qZA()()()()),2&j){const m=e.oxw(2).$implicit,M=e.oxw(2),q=e.MAs(25);e.xp6(3),e.s9C("src",M.channelSelected.channelAvatar,e.LSH),e.xp6(2),e.Q6J("ngIf",m.text),e.xp6(2),e.Q6J("ngTemplateOutlet",q)("ngTemplateOutletContext",e.VKq(4,Zn,m))}}function Gr(j,U){if(1&j&&(e.TgZ(0,"td"),e.YNc(1,Ht,4,5,"div",38),e.YNc(2,bo,8,6,"div",39),e.qZA()),2&j){const m=e.oxw().$implicit,M=e.oxw(2);e.xp6(1),e.Q6J("ngIf",m.uid===(null==M.currentUser||null==M.currentUser.id?null:M.currentUser.id.toString())),e.xp6(1),e.Q6J("ngIf",m.uid!==(null==M.currentUser||null==M.currentUser.id?null:M.currentUser.id.toString()))}}function pi(j,U){if(1&j&&(e.TgZ(0,"tr"),e.YNc(1,Gr,3,2,"td",13),e.qZA()),2&j){const m=U.$implicit;e.xp6(1),e.Q6J("ngIf",m.text||m.media)}}function uo(j,U){if(1&j&&(e.TgZ(0,"lightgallery",36)(1,"table",37)(2,"tbody"),e.YNc(3,pi,2,1,"tr",26),e.qZA()()()),2&j){const m=e.oxw();e.Q6J("onInit",m.onInit)("settings",m.settings),e.xp6(3),e.Q6J("ngForOf",null==m.channelSelected?null:m.channelSelected.messages)}}function gi(j,U){if(1&j&&(e.TgZ(0,"div",57)(1,"a",58),e.ALo(2,"date"),e._UZ(3,"img",59),e.ALo(4,"safe"),e.qZA()()),2&j){const m=e.oxw().item;e.xp6(1),e.Q6J("href",m.media,e.LSH),e.uIk("data-sub-html","<h4 class='h4'>"+m.name+"</h4><p>Published on "+e.xi3(2,3,m.timestamp,"medium")+"</p>"),e.xp6(2),e.Q6J("src",e.xi3(4,6,m.media,"url"),e.LSH)}}function qr(j,U){if(1&j&&(e.TgZ(0,"div",57)(1,"vg-player"),e._UZ(2,"vg-overlay-play")(3,"vg-buffering"),e.TgZ(4,"vg-controls",60)(5,"div",61),e._UZ(6,"vg-play-pause")(7,"vg-time-display",62),e.TgZ(8,"vg-scrub-bar",63),e._UZ(9,"vg-scrub-bar-current-time")(10,"vg-scrub-bar-buffering-time"),e.qZA(),e._UZ(11,"vg-time-display",64),e.qZA(),e.TgZ(12,"div",48),e._UZ(13,"vg-mute")(14,"vg-volume")(15,"vg-fullscreen"),e.qZA()(),e.TgZ(16,"video",65,66),e._UZ(18,"source",67),e.ALo(19,"safe"),e.qZA()()()),2&j){const m=e.MAs(17),M=e.oxw().item;e.xp6(4),e.Q6J("vgAutohide",!0)("vgAutohideTime",2),e.xp6(12),e.Q6J("vgMedia",m),e.xp6(2),e.Q6J("src",e.xi3(19,4,M.media,"url"),e.LSH)}}function Di(j,U){if(1&j&&(e.YNc(0,gi,5,9,"div",56),e.YNc(1,qr,20,7,"div",56)),2&j){const m=U.item,M=e.oxw();e.Q6J("ngIf",m.media&&1===M.getFileTypeByContentType(m.mediaType)),e.xp6(1),e.Q6J("ngIf",m.media&&2===M.getFileTypeByContentType(m.mediaType))}}function Ir(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",69),e.NdJ("removed",function(){e.CHM(m);const q=e.oxw().index,Ie=e.oxw();return e.KtG(Ie.onRemove(q))}),e.qZA()}if(2&j){const m=e.oxw().$implicit;e.Q6J("file",m.file)("removable",!0)}}function go(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"ngx-dropzone-video-preview",69),e.NdJ("removed",function(){e.CHM(m);const q=e.oxw().index,Ie=e.oxw();return e.KtG(Ie.onRemove(q))}),e.qZA()}if(2&j){const m=e.oxw().$implicit;e.Q6J("file",m.file)("removable",!0)}}function $i(j,U){if(1&j&&(e.ynx(0),e.YNc(1,Ir,1,2,"ngx-dropzone-image-preview",68),e.YNc(2,go,1,2,"ngx-dropzone-video-preview",68),e.BQk()),2&j){const m=U.$implicit;e.xp6(1),e.Q6J("ngIf",1===m.fileType),e.xp6(1),e.Q6J("ngIf",2===m.fileType)}}const Zo=function(j){return{"has-file":j}};let On=(()=>{class j{constructor(m,M,q,Ie,qe,Xt){this.fileService=m,this.authService=M,this.formBuilder=q,this.utilService=Ie,this.chatService=qe,this.snackBar=Xt,this.isExpandProfile=!1,this.openProfile=new e.vpe,this.mediaList=[],this.footerHeight=0,this.settings={counter:!1,plugins:[ve,at,un],selector:".media-preview .light-gallery"},this.onInit=rn=>{this.lightGallery=rn.instance},this.currentUser=this.authService.getUser(),this.chatDetailForm=this.formBuilder.group({message:new C.NI})}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(m){m.channelSelected&&this.client&&this.currentUser&&this.channelSelected&&(this.detailMessages&&(this.detailMessages.nativeElement.scrollTop=this.detailMessages.nativeElement.scrollHeight),this.channel=this.client.channels.get(this.channelSelected.channelId),setTimeout(()=>{var M;return null===(M=this.lightGallery)||void 0===M?void 0:M.refresh()}))}onOpenProfile(){this.openProfile.emit()}onSelectFile(m){var M;const q=null==m?void 0:m.target;null!==(M=null==q?void 0:q.files)&&void 0!==M&&M.length&&(Array.from(q.files).forEach(qe=>{if(qe.size/1024<25e3){const rn=this.getFileType(qe);this.mediaList.push({file:qe,fileType:rn})}else this.snackBar.open("Max file upload size 25MB","OK",{duration:5e3})}),q.value="")}onRemove(m){this.mediaList.splice(m,1)}onResized(m){if(!this.detailContent||!this.detailContent.nativeElement)return;this.footerHeight=m||this.inputMessage.nativeElement.offsetHeight;let q=this.footerHeight+20;q<=0&&(q=0);let Ie=q;this.mediaList.length&&(Ie+=this.dropzone.nativeElement.offsetHeight),this.detailContent.nativeElement.style.height=`calc(100% - ${Ie}px)`}publish(){var m,M;const q={name:`${this.currentUser.firstName} ${this.currentUser.lastName}`,avatar:this.currentUser.avatarUrl,uid:this.currentUser.id.toString()},Ie=new Oe.x,qe=Object.assign({id:"",text:this.chatDetailForm.value.message,timestamp:Math.floor(Date.now()/1e3),trackingId:this.utilService.getUUIDv4()},q);if(this.mediaList.length){const Xt=this.mediaList.length;let rn=0;this.mediaList.forEach(Ln=>{var Or,Vn;const mn=Object.assign(Object.assign({id:"",trackingId:this.utilService.getUUIDv4(),media:URL.createObjectURL(Ln.file)},q),{mediaType:Ln.file.type,timestamp:Math.floor(Date.now()/1e3),text:""});null===(Vn=null===(Or=this.channelSelected)||void 0===Or?void 0:Or.messages)||void 0===Vn||Vn.push(mn),this.fileService.uploadFile(Ln.file).subscribe(ir=>{rn++,mn.media=ir.path,mn.mediaType=ir.contentType,this.sendMessageData(mn),rn>=Xt&&setTimeout(()=>Ie.next(!0))})}),qe.text&&(null===(M=null===(m=this.channelSelected)||void 0===m?void 0:m.messages)||void 0===M||M.push(qe))}else setTimeout(()=>Ie.next(!0));Ie.subscribe(()=>{qe.text&&this.sendMessageData(qe)}),this.chatDetailForm.reset(),this.mediaList=[]}sendMessageData(m){!this.channel||!this.currentUser||this.channel.publish("update",m,M=>{M&&401===M.statusCode?window.location.href="/login":M&&alert("publish failed with error "+M)})}onHandleKeyPress(m){13===m.keyCode&&(m.preventDefault(),this.publish())}getFileType(m){return m&&m.type.indexOf("video")>-1?me.VIDEO:m&&m.type.indexOf("image")>-1?me.IMAGE:m&&m.type.indexOf("audio")>-1?me.AUDIO:me.NONE}getFileTypeByContentType(m){return m?m&&m.indexOf("video")>-1?me.VIDEO:m&&m.indexOf("image")>-1?me.IMAGE:m&&m.indexOf("audio")>-1?me.AUDIO:me.NONE:me.NONE}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(h),e.Y36(p.e),e.Y36(C.qu),e.Y36(c.f),e.Y36(y.a),e.Y36(En.ux))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-chat-detail"]],viewQuery:function(m,M){if(1&m&&(e.Gf(Vt,5),e.Gf(nn,5),e.Gf(Rn,5),e.Gf(Pn,5)),2&m){let q;e.iGM(q=e.CRH())&&(M.detailMessages=q.first),e.iGM(q=e.CRH())&&(M.detailContent=q.first),e.iGM(q=e.CRH())&&(M.dropzone=q.first),e.iGM(q=e.CRH())&&(M.inputMessage=q.first)}},inputs:{patientInfo:"patientInfo",channelSelected:"channelSelected",client:"client",isExpandProfile:"isExpandProfile"},outputs:{openProfile:"openProfile"},features:[e.TTD],decls:42,vars:14,consts:[[1,"channel-detail","d-flex","flex-column","h-100","w-100",3,"ngClass"],[1,"detail-content","overflow-hidden","d-flex","flex-column","px-4","pt-3","flex-grow-1"],["detailContent",""],[1,"detail-title","d-flex","align-items-center","header-height","pb-3","overflow-hidden"],[1,"channel-avatar"],["width","30","alt","avatar",1,"img-circle-small",3,"src"],[1,"status"],[1,"channel-content-item","flex-grow-1","d-flex","align-items-center","justify-content-between","inline"],[1,"channel-content-detail","flex-grow-1","overflow-hidden","d-flex","flex-column"],[1,"c-left","d-flex","name","mb-2","ff-GoogleSans","text-truncate","fw-bold"],[1,"c-right","d-flex"],[1,"channel-content-detail","detail-status","text-truncate","d-flex"],[1,"c-left","d-flex","status"],[4,"ngIf"],[1,"inline","ic"],[1,"lnk",3,"click"],["width","50","src","assets/images/icons/ic-vertital-dot.png"],[1,"table-wrapper-scroll-y","flex-grow-1","my-custom-scrollbar"],["detailMessages",""],[3,"onInit","settings",4,"ngIf"],["mediaView",""],[1,"mb-0","mt-0","flex-grow-0"],[1,"channel-detail-footer","d-flex","flex-column","flex-grow-0"],[1,"channel-detail-footer-content","w-100","d-flex","flex-column","flex-grow-1"],[1,"custsom-dropzone","d-flex","overflow-auto",2,"width","calc(100% - 20px)"],["dropzone",""],[4,"ngFor","ngForOf"],[1,"detail-footer","mt-2","send-message",3,"formGroup","ngSubmit"],["type","button","mat-icon-button","","title","Attach file",1,"conversation__btn","btn","btn--send",3,"click"],["type","file","hidden","","multiple","",3,"change"],["fileInput",""],["height","30","src","assets/images/icons/ic-chat-attach.png"],["formControlName","message","placeholder","Type a message...","autofocus","","autosize","",1,"form-control",2,"resize","none",3,"minRows","maxRows","keydown"],["inputMessage",""],["mat-icon-button","","type","submit","title","Send message",1,"conversation__btn","btn","btn--send"],["height","30","src","assets/images/icons/ic-chat-send.png"],[3,"onInit","settings"],[1,"table","table"],["class","post-own",4,"ngIf"],["class","post-friend",4,"ngIf"],[1,"post-own"],["class","receiver-content-text",4,"ngIf"],[1,"receiver-content-attach"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"receiver-content-text"],[1,"text","text-break"],[1,"time"],[1,"post-friend"],[1,"d-flex"],[1,"sender-avatar","inline"],["width","43","alt","avatar",1,"img-circle-small","detail",3,"src"],[1,"sender-content","inline"],["class","sender-content-text",4,"ngIf"],[1,"sender-content-attach"],[1,"sender-content-text"],[1,"sender-name"],["class","media-preview",4,"ngIf"],[1,"media-preview"],[1,"light-gallery",3,"href"],[3,"src"],[1,"justify-content-between",3,"vgAutohide","vgAutohideTime"],[1,"d-flex","flex-grow-1"],["vgProperty","current","vgFormat","mm:ss"],[1,"flex-grow-1"],["vgProperty","total","vgFormat","mm:ss"],["preload","auto",3,"vgMedia"],["videoView",""],["type","video/mp4",3,"src"],[3,"file","removable","removed",4,"ngIf"],[3,"file","removable","removed"]],template:function(m,M){if(1&m){const q=e.EpF();e.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5)(6,"div",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"span"),e._uU(15),e.ALo(16,"birthdate"),e.qZA(),e.YNc(17,Jt,2,1,"span",13),e.qZA()()()(),e.TgZ(18,"div",14)(19,"a",15),e.NdJ("click",function(){return M.onOpenProfile()}),e._UZ(20,"img",16),e.qZA()()()(),e.TgZ(21,"div",17,18),e.YNc(23,uo,4,3,"lightgallery",19),e.YNc(24,Di,2,2,"ng-template",null,20,e.W1O),e.qZA()(),e._UZ(26,"hr",21),e.TgZ(27,"div",22)(28,"div",23)(29,"div",24,25),e.YNc(31,$i,3,2,"ng-container",26),e.qZA(),e.TgZ(32,"form",27),e.NdJ("ngSubmit",function(){return M.publish()}),e.TgZ(33,"button",28),e.NdJ("click",function(){e.CHM(q);const qe=e.MAs(35);return e.KtG(qe.click())}),e.TgZ(34,"input",29,30),e.NdJ("change",function(qe){return M.onSelectFile(qe)}),e.qZA(),e._UZ(36,"img",31),e.qZA(),e.TgZ(37,"textarea",32,33),e.NdJ("keydown",function(qe){return M.onHandleKeyPress(qe)}),e._uU(39,"          "),e.qZA(),e.TgZ(40,"button",34),e._UZ(41,"img",35),e.qZA()()()()()}2&m&&(e.Q6J("ngClass",e.VKq(12,Zo,M.mediaList.length)),e.xp6(5),e.s9C("src",null==M.channelSelected?null:M.channelSelected.channelAvatar,e.LSH),e.xp6(5),e.Oqu(null==M.channelSelected?null:M.channelSelected.channelName),e.xp6(5),e.hij("",e.lcZ(16,10,null==M.patientInfo?null:M.patientInfo.birthday)," years old"),e.xp6(2),e.Q6J("ngIf",null==M.patientInfo||null==M.patientInfo.address?null:M.patientInfo.address.city),e.xp6(6),e.Q6J("ngIf",M.channelSelected&&(null==M.channelSelected||null==M.channelSelected.messages?null:M.channelSelected.messages.length)),e.xp6(8),e.Q6J("ngForOf",M.mediaList),e.xp6(1),e.Q6J("formGroup",M.chatDetailForm),e.xp6(5),e.Q6J("minRows",2)("maxRows",5))},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,n.mk,n.sg,n.O5,n.tP,k.oO,nt.sv,nt.yH,L.lW,ct.xo,ct.xJ,De.tN,De.wK,De.nf,De.EC,De.bU,De.du,De.Zk,De.r3,De.cg,lt.B,wt.p,In.Rk,Gn.Nm,n.uU,ft,ut.y],styles:[".media-preview img{margin-top:10px;border-radius:15px;max-width:100%}  .media-preview vg-player{margin-top:10px;border-radius:15px}.channel-detail[_ngcontent-%COMP%]{position:relative}.channel-detail[_ngcontent-%COMP%]   .ic[_ngcontent-%COMP%]{color:#bcc1d1;font-size:1.5em}.channel-detail[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{display:block}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#979da0}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{border-bottom:1px solid #D3D3D3}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   .channel-avatar[_ngcontent-%COMP%]{flex:0 0 70px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]   .channel-content-item[_ngcontent-%COMP%]{position:relative;width:calc(100% - 70px)}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]{padding-top:15px;display:flex;flex-direction:column-reverse}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]{max-width:80%}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]   .sender-avatar[_ngcontent-%COMP%]{vertical-align:top}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]   .sender-content[_ngcontent-%COMP%]{vertical-align:top;margin-left:10px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]   .sender-content[_ngcontent-%COMP%]   .sender-content-text[_ngcontent-%COMP%]{background:#F2F2F2;border-top-right-radius:15px;border-bottom-right-radius:15px;border-bottom-left-radius:15px;padding:10px;min-width:100px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]   .sender-content[_ngcontent-%COMP%]   .sender-content-text[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{font-size:15px;color:#47a7ee;font-weight:700;line-height:17px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-friend[_ngcontent-%COMP%]   .sender-content[_ngcontent-%COMP%]   .sender-content-text[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right;color:#ccc;font-size:12px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]{float:right;max-width:80%}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]   .receiver-content-text[_ngcontent-%COMP%]{background:#47A7EE;border-top-left-radius:15px;border-bottom-right-radius:15px;border-bottom-left-radius:15px;padding:10px;min-width:100px;box-shadow:0 3px 6px #00000029}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]   .receiver-content-text[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#fff}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]   .receiver-content-text[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right;color:#ccc;font-size:12px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;font-size:12px;float:right;padding-left:10px}.channel-detail[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .table-wrapper-scroll-y[_ngcontent-%COMP%]   .post-own[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;height:15px}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]{width:100%;margin-bottom:0}@media (max-width: 575.98px){.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]{margin:0 10px}}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin:0 15px}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{margin-top:5px}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 0 0 10px}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:0}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{border:0}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:0}.channel-detail[_ngcontent-%COMP%]   .channel-detail-footer[_ngcontent-%COMP%]   .channel-detail-footer-content[_ngcontent-%COMP%]   .detail-footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:none}"]}),j})();var Lr=t(7335),Yr=(()=>{return(j=Yr||(Yr={})).HEIGHT="8302-2",j.WEIGHT="29463-7",j.WAIST="8280-0",j.TEMP="8310-5",j.HEART_RATE="8867-4",j.BLOOD_PRESSURE="85354-9",j.SPO2="20564-1",j.CALORIES="75302-0",j.BMI="39156-5",j.BODY_FAT="41982-0",Yr;var j})();const mi=[{code:Yr.CALORIES,background:"#F0FAF8",chartColor:"#51CCA9"},{code:Yr.WEIGHT,background:"#FFFBF0",chartColor:"#FECD54"},{code:Yr.BMI,background:"#FFF7F8",chartColor:"#F46363"},{code:Yr.BODY_FAT,background:"rgb(240 245 252)",chartColor:"#61A0F7"},{code:Yr.HEIGHT,background:"rgb(240 245 252)",chartColor:"#61A0F7"},{code:Yr.BLOOD_PRESSURE,background:"#FFFBF0",chartColor:"#FECD54"},{code:Yr.HEART_RATE,background:"#FFF7F8",chartColor:"#F46363"},{code:Yr.SPO2,background:"rgb(240 245 252)",chartColor:"#61A0F7"},{code:Yr.TEMP,background:"#F0FAF8",chartColor:"#51CCA9"},{code:Yr.WAIST,background:"rgb(240 245 252)",chartColor:"#61A0F7"}];var Zt=t(1158),yr=t.n(Zt),Cr=t(520),ki=t(6451);let Gi=(()=>{class j{constructor(m){this.apiService=m}getVitalChartPatient(m){return this.apiService.get("/charts",m)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(a.s))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();const zr=j=>({borderColor:j,pointHoverBorderColor:j,pointBackgroundColor:j,backgroundColor:j,hoverBorderColor:j}),Hn={data:[],borderDash:[2,3],borderWidth:2,borderRadius:50,cubicInterpolationMode:"monotone",pointHoverRadius:10,fill:!0},so={interaction:{intersect:!1}};let Nt=(()=>{class j{constructor(m){this.chartsApiService=m,this.charts=[]}groupVitalCharts(m,M,q="week"){const Ie=M.map(qe=>this.chartsApiService.getVitalChartPatient((new Cr.LE).set("patientId",m).set("fromdevice",!1).set("type",q).set("code",qe.code)).pipe((0,N.U)(Xt=>(Xt.background=qe.background,Xt.chartColor=qe.chartColor,Xt))));return(0,ki.T)(...Ie)}dataChartToChartJS({chartData:{dataSets:m,labels:M},info:q,period:Ie,chartColor:qe,background:Xt}){var rn,Ln;const Or=yr()(Ie.startDate),Vn=yr()(Ie.endDate);for(M=[];Or.isBefore(Vn,"days");)M.push(Or.format("ddd, MMM D, YYYY")),Or.add(1,"days");const mn=null===(rn=m.find(Boolean))||void 0===rn?void 0:rn.data.map(oi=>oi||0),ir=q.find(Boolean);return{chartData:[Object.assign(Object.assign(Object.assign({label:null==ir?void 0:ir.display},Hn),{data:mn}),zr(qe))],chartLabels:M,chartOptions:so,unit:q[0].avg.split(" ")[1],total:null===(Ln=m.find(Boolean))||void 0===Ln?void 0:Ln.data.reduce((oi,to)=>oi+(to||0),0),display:null==ir?void 0:ir.display,background:Xt,chartColor:qe}}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(Gi))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var Po=t(7296);const Fo=["canvasElement"],lo=["chart"];let dr=(()=>{class j{constructor(){this.chartData=[],this.chartOptions={},this.optionsDefault={responsive:!0,scales:{xAxis:{display:!1,grid:{drawBorder:!1}},yAxis:{display:!1}},elements:{point:{hoverBackgroundColor:"rgba(0,0,0,0)"}},plugins:{legend:{display:!1},tooltip:{titleFont:{size:10},bodyFont:{size:10},displayColors:!1,includeInvisible:!0,callbacks:{label:m=>m.formattedValue+" "+this.unit}}}}}ngOnInit(){var m;this.plugins&&(this.chartPlugins=null===(m=Object.keys(this.plugins))||void 0===m?void 0:m.map(M=>Object.assign({id:M},this.plugins[M]))),this.chartOptions=Object.assign(Object.assign({},this.optionsDefault),this.chartOptions)}ngAfterViewInit(){var m;if(this.canvasElement&&this.chartColor&&this.background){const M=null===(m=this.canvasElement.nativeElement.getContext("2d"))||void 0===m?void 0:m.createLinearGradient(0,0,100,600);null==M||M.addColorStop(0,this.chartColor),null==M||M.addColorStop(.2,this.background),null==M||M.addColorStop(.3,this.background),null==M||M.addColorStop(.4,this.background),null==M||M.addColorStop(1,this.background),this.chartData[0].backgroundColor=M,this.chart.render()}}}return j.\u0275fac=function(m){return new(m||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-charts-device-reading"]],viewQuery:function(m,M){if(1&m&&(e.Gf(Fo,5),e.Gf(lo,5)),2&m){let q;e.iGM(q=e.CRH())&&(M.canvasElement=q.first),e.iGM(q=e.CRH())&&(M.chart=q.first)}},inputs:{chartData:"chartData",plugins:"plugins",leftText:"leftText",rightText:"rightText",chartLabels:"chartLabels",chartOptions:"chartOptions",background:"background",chartColor:"chartColor",unit:"unit"},decls:7,vars:9,consts:[[1,"chart","position-relative"],[1,"d-flex","pe-none","position-absolute","start-0","end-0","justify-content-between"],[3,"ngTemplateOutlet"],["baseChart","",3,"type","datasets","plugins","labels","options"],["canvasElement","","chart","base-chart"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e.GkF(2,2)(3,2),e.qZA(),e._UZ(4,"canvas",3,4),e.qZA()),2&m&&(e.Udp("background-color",M.background),e.xp6(2),e.Q6J("ngTemplateOutlet",M.leftText),e.xp6(1),e.Q6J("ngTemplateOutlet",M.rightText),e.xp6(1),e.Q6J("type","line")("datasets",M.chartData)("plugins",M.chartPlugins)("labels",M.chartLabels)("options",M.chartOptions))},dependencies:[n.tP,Po.jh],styles:[".chart[_ngcontent-%COMP%]{padding:30px 15px 20px}.chart[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:inherit;padding-right:inherit;top:20px}@media (max-width: 575.98px){.chart[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{top:10px}}"]}),j})();const Uo=["canvasElement"];function Wi(j,U){if(1&j&&(e.TgZ(0,"h5",8),e._uU(1),e.qZA()),2&j){const m=e.oxw(2).$implicit;e.xp6(1),e.Oqu(m.display)}}function Ei(j,U){if(1&j&&e.YNc(0,Wi,2,1,"h5",7),2&j){const m=e.oxw().$implicit;e.Q6J("ngIf",m.display)}}function Ri(j,U){if(1&j&&(e.TgZ(0,"small",12),e._uU(1),e.qZA()),2&j){const m=e.oxw(3).$implicit;e.xp6(1),e.Oqu(m.unit)}}function xo(j,U){if(1&j&&(e.TgZ(0,"h4",10),e._uU(1),e.ALo(2,"number"),e.YNc(3,Ri,2,1,"small",11),e.qZA()),2&j){const m=e.oxw(2).$implicit;e.Udp("color",m.chartColor),e.xp6(1),e.hij(" ",e.xi3(2,4,m.total,"1.0-2"),""),e.xp6(2),e.Q6J("ngIf",m.unit)}}function Mo(j,U){if(1&j&&e.YNc(0,xo,4,7,"h4",9),2&j){const m=e.oxw().$implicit;e.Q6J("ngIf",m.total)}}function Vo(j,U){if(1&j&&(e.TgZ(0,"app-charts-device-reading",4),e.YNc(1,Ei,1,1,"ng-template",null,5,e.W1O),e.YNc(3,Mo,1,1,"ng-template",null,6,e.W1O),e.qZA()),2&j){const m=U.$implicit,M=e.MAs(2),q=e.MAs(4);e.Q6J("chartData",m.chartData)("chartLabels",m.chartLabels)("chartOptions",m.chartOptions)("background",m.background)("chartColor",m.chartColor)("leftText",M)("rightText",q)("unit",m.unit)}}let es=(()=>{class j{constructor(m){this.chartService=m,this.charts=[],this.vitalCode=[Yr.CALORIES,Yr.WEIGHT,Yr.BMI,Yr.BODY_FAT],this.chartTimeRange="week"}ngOnInit(){}ngOnChanges(m){var M;null!==(M=m.firebaseId)&&void 0!==M&&M.currentValue&&(this.charts=[],this.loadingChart())}loadingChart(){const m=[];this.chartService.groupVitalCharts(this.firebaseId,mi.filter(M=>this.vitalCode.includes(M.code)),this.chartTimeRange).subscribe(M=>{m.push(this.chartService.dataChartToChartJS(M))}),this.charts=m}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nt))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-device-reading"]],viewQuery:function(m,M){if(1&m&&e.Gf(Uo,5),2&m){let q;e.iGM(q=e.CRH())&&(M.canvasElement=q.first)}},inputs:{firebaseId:"firebaseId"},features:[e.TTD],decls:5,vars:1,consts:[[1,"device-reading"],[1,"title"],[1,"charts","d-flex","flex-column"],["class","my-2",3,"chartData","chartLabels","chartOptions","background","chartColor","leftText","rightText","unit",4,"ngFor","ngForOf"],[1,"my-2",3,"chartData","chartLabels","chartOptions","background","chartColor","leftText","rightText","unit"],["leftText",""],["rightText",""],["class","h5 fs-6 text-uppercase d-flex flex-column fw-bold",4,"ngIf"],[1,"h5","fs-6","text-uppercase","d-flex","flex-column","fw-bold"],["class","h4 text-uppercase fs-5 d-flex fw-bold",3,"color",4,"ngIf"],[1,"h4","text-uppercase","fs-5","d-flex","fw-bold"],["class","text-muted ms-2 fw-normal small text-capitalize",4,"ngIf"],[1,"text-muted","ms-2","fw-normal","small","text-capitalize"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Device Reading "),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Vo,5,8,"app-charts-device-reading",3),e.qZA()()),2&m&&(e.xp6(4),e.Q6J("ngForOf",M.charts))},dependencies:[n.sg,n.O5,dr,n.JJ],styles:[".device-reading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#47a7ee;font-weight:700;margin-bottom:15px}.device-reading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin:15px 0}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]{font-size:16px}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#646d82;text-transform:uppercase}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#a6b1c2!important;text-transform:none}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.8em!important}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1em!important}@media (max-width: 991.98px){.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px!important}.device-reading[_ngcontent-%COMP%]   .charts[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px!important}}"]}),j})(),Io=(()=>{class j{transform(m){if(!m)return"";const M=parseInt((m/12).toString()),q=parseInt(m.toString())%12;return`${M} ft ${0!==q?q.toString()+" in":""}`}}return j.\u0275fac=function(m){return new(m||j)},j.\u0275pipe=e.Yjl({name:"height",type:j,pure:!0}),j})();function ts(j,U){if(1&j&&e._UZ(0,"app-patient-device-reading",18),2&j){const m=e.oxw();e.Q6J("firebaseId",m.patientInfo.firebaseUserId)}}let $o=(()=>{class j{constructor(m){this._doctorService=m,this.hideProfile=new e.vpe,this.getPatientProfile=new e.vpe,this.noAvatar="assets/images/users/no-avatar.png"}ngOnChanges(m){m.patientId&&this.getPatientInfo()}onHideProfile(){this.hideProfile.emit()}getPatientInfo(){!this.patientId||this._doctorService.getPatientInfo(this.patientId).subscribe(m=>{this.patientInfo=m,this.getPatientProfile.emit(m)})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Lr.Q))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-profile"]],inputs:{patientId:"patientId",firebaseUserId:"firebaseUserId"},outputs:{hideProfile:"hideProfile",getPatientProfile:"getPatientProfile"},features:[e.TTD],decls:47,vars:15,consts:[[1,"profile","d-flex","flex-column","px-4","pt-3"],[1,"header-height","pb-3","mb-0","border-bottom","border-1",2,"--bs-border-color","#d3d3d3"],[1,"lnk",3,"click"],["width","15","src","assets/images/icons/ic-metro-cross.png"],[1,"title"],[1,"profile-content","d-flex","flex-column","overflow-auto","flex-grow-1"],[1,"patient-common-info","mt-3","mb-3"],[1,"patient-avatar","inline"],["width","90","height","90","alt","avatar",1,"img-circle-small",3,"src"],[1,"patient-content-item","inline"],[1,"name","text-truncate"],[1,"info","text-truncate"],[1,"table-wrapper-scroll-y","my-custom-scrollbar"],[1,"patient-general","pt-0"],[1,"patient-common"],[1,"patient-field","inline"],[1,"patient-value","inline"],[3,"firebaseId",4,"ngIf"],[3,"firebaseId"]],template:function(m,M){if(1&m&&(e.TgZ(0,"div",0)(1,"h3",1)(2,"a",2),e.NdJ("click",function(){return M.onHideProfile()}),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"span",4),e._uU(5,"Patient Info "),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7),e._UZ(9,"img",8),e.qZA(),e.TgZ(10,"div",9)(11,"div",10),e._uU(12),e.qZA(),e.TgZ(13,"div",11),e._uU(14),e.qZA(),e.TgZ(15,"div",11),e._uU(16),e.qZA()()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),e._uU(21,"Gender"),e.qZA(),e.TgZ(22,"div",16),e._uU(23),e.qZA()(),e.TgZ(24,"div",14)(25,"div",15),e._uU(26,"Age"),e.qZA(),e.TgZ(27,"div",16),e._uU(28),e.ALo(29,"birthdate"),e.qZA()(),e.TgZ(30,"div",14)(31,"div",15),e._uU(32,"Height"),e.qZA(),e.TgZ(33,"div",16),e._uU(34),e.ALo(35,"height"),e.qZA()(),e.TgZ(36,"div",14)(37,"div",15),e._uU(38,"Weight"),e.qZA(),e.TgZ(39,"div",16),e._uU(40),e.qZA()(),e.TgZ(41,"div",14)(42,"div",15),e._uU(43,"Waist"),e.qZA(),e.TgZ(44,"div",16),e._uU(45),e.qZA()()(),e.YNc(46,ts,1,1,"app-patient-device-reading",17),e.qZA()()()),2&m){let q;e.xp6(9),e.s9C("src",null!==(q=null==M.patientInfo?null:M.patientInfo.avatarUrl)&&void 0!==q?q:M.noAvatar,e.LSH),e.xp6(3),e.AsE("",null==M.patientInfo?null:M.patientInfo.firstName," ",null==M.patientInfo?null:M.patientInfo.lastName,""),e.xp6(2),e.Oqu(null==M.patientInfo?null:M.patientInfo.email),e.xp6(2),e.Oqu(null==M.patientInfo?null:M.patientInfo.phoneNumber),e.xp6(7),e.Oqu(0===(null==M.patientInfo?null:M.patientInfo.gender)?"Male":"Female"),e.xp6(5),e.hij(" ",e.lcZ(29,11,null==M.patientInfo?null:M.patientInfo.birthday)," years old "),e.xp6(6),e.Oqu(e.lcZ(35,13,null==M.patientInfo?null:M.patientInfo.height)),e.xp6(6),e.Oqu((null==M.patientInfo?null:M.patientInfo.weight)+" lb"),e.xp6(5),e.Oqu((null==M.patientInfo?null:M.patientInfo.waist)+" in"),e.xp6(1),e.Q6J("ngIf",M.patientInfo)}},dependencies:[n.O5,es,ft,Io],styles:[".profile[_ngcontent-%COMP%]{margin-bottom:15px;height:100%}.profile[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:20px;font-size:16px}.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.profile[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]{margin-bottom:20px}.profile[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-avatar[_ngcontent-%COMP%]{margin-right:10px;vertical-align:top}.profile[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]{vertical-align:top;position:relative;width:calc(100% - 90px)}.profile[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-bottom:5px}.profile[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#33333380}.profile[_ngcontent-%COMP%]   .patient-general[_ngcontent-%COMP%]{padding:15px 0}.profile[_ngcontent-%COMP%]   .patient-general[_ngcontent-%COMP%]   .patient-common[_ngcontent-%COMP%]   .patient-field[_ngcontent-%COMP%]{line-height:22px;color:#707070;width:80px}.profile[_ngcontent-%COMP%]   .patient-general[_ngcontent-%COMP%]   .patient-common[_ngcontent-%COMP%]   .patient-value[_ngcontent-%COMP%]{line-height:22px;font-weight:700}@media (max-width: 575.98px){.profile[_ngcontent-%COMP%]   .header-height[_ngcontent-%COMP%]{height:auto}}.profile[_ngcontent-%COMP%]   .profile-content[_ngcontent-%COMP%]{height:calc(100% - 90px)}@media (max-width: 575.98px){.profile[_ngcontent-%COMP%]   .profile-content[_ngcontent-%COMP%]{height:auto}}"]}),j})();const fi=["detailMessages"],Oi=function(j,U,m,M){return{"expand-detail col-lg-4 pe-lg-0":j,"mobile-chat":U,"d-none":m,"col-lg-12":M}};function Qo(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",4)(1,"app-chat-list",5),e.NdJ("selectedChannelChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onSelectChannel(q))}),e.qZA()()}if(2&j){const m=e.oxw();e.Q6J("ngClass",e.l5B(4,Oi,m.channelSelected,!0===m.showChat,!1===m.showChat,!m.channelSelected)),e.xp6(1),e.Q6J("channels",m.channels)("channelSelected",m.channelSelected)("hasData",m.hasData)}}const No=function(j){return{"expand-profile":j}},Yt=function(j){return{"active-profile":j}};function en(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"app-chat-detail",10),e.NdJ("openProfile",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.onToogleProfile(!0))}),e.qZA()(),e.TgZ(5,"div",11)(6,"app-patient-profile",12),e.NdJ("hideProfile",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.onToogleProfile(!1))})("getPatientProfile",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.getPatientProfile(q))}),e.qZA()()()()()}if(2&j){const m=e.oxw();e.ekj("d-block",!1===m.showChat||null===m.showChat)("d-none",!0===m.showChat),e.xp6(3),e.Q6J("ngClass",e.VKq(10,No,m.isExpandProfile)),e.xp6(1),e.Q6J("client",m.client)("channelSelected",m.channelSelected)("patientInfo",m.patientInfo),e.xp6(1),e.Q6J("ngClass",e.VKq(12,Yt,m.isExpandProfile)),e.xp6(1),e.Q6J("patientId",null==m.channelSelected?null:m.channelSelected.partnerId)}}let Sn=(()=>{class j{constructor(m,M,q,Ie,qe,Xt,rn,Ln,Or){this.fileService=m,this.authService=M,this.chatService=Ie,this.chatSharedService=qe,this.backShareService=Xt,this.stateService=rn,this.media=Ln,this.differs=Or,this.isExpandProfile=!1,this.showChat=null,this.currentUser=this.authService.getUser(),this.mobileQuery=Ln.matchMedia("(max-width: 991.98px)"),this.mobileQueryListener=()=>q.detectChanges(),this.mobileQuery.addListener(this.mobileQueryListener),this.stateService.backActions.subscribe(Vn=>{Vn&&(this.showChat=!0,this.onToogleProfile(!1))})}playAudio(){const m=new Audio;m.src="/assets/audio/ably-audio-ping.wav",m.load(),m.play()}ngOnInit(){var m,M;const q=null!==(M=null===(m=this.channelSelected)||void 0===m?void 0:m.messages)&&void 0!==M?M:[];this.detailMessagesDiffer=this.differs.find(q).create(),this.showSelectChat()}onResize(){this.showSelectChat()}showSelectChat(){this.mobileQuery.matches?(this.showChat=!1,this.stateService.backBtnText.next("Select chat"),this.backShareService.change(!0)):(this.showChat=null,this.stateService.backBtnText.next(null),this.backShareService.change(!1))}ngDoCheck(){var m,M;if(this.detailMessagesDiffer){const q=null!==(M=null===(m=this.channelSelected)||void 0===m?void 0:m.messages)&&void 0!==M?M:[],Ie=this.detailMessagesDiffer.diff(q);Ie&&this.detailMessageLstChanged(Ie)}}detailMessageLstChanged(m){this.scrollToBottom()}onToogleProfile(m){this.isExpandProfile=m}onSelectChannel(m){const M=this.chatSharedService.chatSharedMessage.channelSelected;this.isExpandProfile=!1,"boolean"==typeof this.showChat&&this.showSelectChat(),this.chatSharedService.saveChannelLocalStorage(m.channelId),this.chatSharedService.chatSharedMessage.channelSelected=m,this.client&&this.currentUser&&(M&&this.chatService.removeChannelLocalStorage(M.channelId,this.currentUser.id.toString()),this.chatSharedService.calculateUnreadChannel(m.channelId))}get client(){return this.chatSharedService.chatSharedMessage.client}get channelSelected(){if(!this.chatSharedService.chatSharedMessage.channelSelected&&this.chatSharedService.chatSharedMessage.channels.every(m=>m.hasMessage)){const m=this.channels.find(Boolean);m&&(m.isSelected=!0,this.chatSharedService.chatSharedMessage.channelSelected=m,this.chatSharedService.saveChannelLocalStorage(m.channelId))}return this.chatSharedService.chatSharedMessage.channelSelected}get channels(){return this.chatSharedService.chatSharedMessage.channels.sort((m,M)=>{var q,Ie;const qe=null===(q=m.messages)||void 0===q?void 0:q.map(rn=>rn.timestamp),Xt=null===(Ie=M.messages)||void 0===Ie?void 0:Ie.map(rn=>rn.timestamp);if(qe&&Xt){if(Math.max(...qe)<Math.max(...Xt))return 1;if(Math.max(...qe)>Math.max(...Xt))return-1}return 0})}get hasData(){return this.chatSharedService.chatSharedMessage.hasData}scrollToBottom(){this.detailMessages&&(this.detailMessages.nativeElement.scrollTop=this.detailMessages.nativeElement.scrollHeight)}getPatientProfile(m){this.patientInfo=m}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(h),e.Y36(p.e),e.Y36(e.sBO),e.Y36(y.a),e.Y36(O.d),e.Y36(v.Y),e.Y36(b.b),e.Y36(T.vx),e.Y36(e.aQg))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-chats"]],viewQuery:function(m,M){if(1&m&&e.Gf(fi,7),2&m){let q;e.iGM(q=e.CRH())&&(M.detailMessages=q.first)}},hostBindings:function(m,M){1&m&&e.NdJ("resize",function(Ie){return M.onResize(Ie)},!1,e.Jf7)},decls:4,vars:2,consts:[[1,"chat-page"],[1,"row","h-100"],["class","chat-lst d-flex h-100 col-12 d-lg-block",3,"ngClass",4,"ngIf"],["class","d-flex h-100 col-12 ps-lg-0 col-lg-8",3,"d-block","d-none",4,"ngIf"],[1,"chat-lst","d-flex","h-100","col-12","d-lg-block",3,"ngClass"],[1,"mb-3","w-100","flex-grow-1",3,"channels","channelSelected","hasData","selectedChannelChange"],[1,"d-flex","h-100","col-12","ps-lg-0","col-lg-8"],[1,"ps-lg-0","pb-3","pe-3","ps-3","d-flex","w-100"],[1,"detail-page","d-flex","h-100"],[1,"chat-details",3,"ngClass"],[1,"d-flex","w-100",3,"client","channelSelected","patientInfo","openProfile"],[1,"chat-patient-profile",3,"ngClass"],[1,"h-100",3,"patientId","hideProfile","getPatientProfile"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Qo,2,9,"div",2),e.YNc(3,en,7,14,"div",3),e.qZA()()),2&m&&(e.xp6(2),e.Q6J("ngIf",null===M.showChat||!0===M.showChat),e.xp6(1),e.Q6J("ngIf",M.channelSelected))},dependencies:[Le,On,$o,n.mk,n.O5,k.oO],styles:[".chat-page[_ngcontent-%COMP%]{height:100%}.chat-page[_ngcontent-%COMP%]     .img-circle-small{width:60px;height:60px;border-radius:50%;margin-bottom:2px}.chat-page[_ngcontent-%COMP%]     .img-circle-small.detail{width:44px;height:44px}.chat-page[_ngcontent-%COMP%]     .c-right{float:right}.chat-page[_ngcontent-%COMP%]     .lnk{cursor:pointer;color:#000}.chat-page[_ngcontent-%COMP%]     .inline{display:inline-block}.chat-page[_ngcontent-%COMP%]     .my-custom-scrollbar{position:relative;margin-bottom:15px}.chat-page[_ngcontent-%COMP%]   .chat-lst[_ngcontent-%COMP%]{display:inline-block}.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;width:100%;background:white;border-radius:20px;filter:drop-shadow(0px 3px 2px rgba(0,0,0,.078))}.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-details[_ngcontent-%COMP%]{width:100%;display:flex;vertical-align:top}.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-details.expand-profile[_ngcontent-%COMP%]{width:50%}@media (max-width: 575.98px){.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-details.expand-profile[_ngcontent-%COMP%]{width:0;overflow:hidden}}.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-patient-profile[_ngcontent-%COMP%]{display:none;vertical-align:top}.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-patient-profile.active-profile[_ngcontent-%COMP%]{display:inline-block;width:50%;border-left:1px solid #D3D3D3}@media (max-width: 575.98px){.chat-page[_ngcontent-%COMP%]   .detail-page[_ngcontent-%COMP%]   .chat-patient-profile.active-profile[_ngcontent-%COMP%]{width:100%;border-left:0}}"]}),j})();const jt_startOfMonth=()=>{const j=new Date;return new Date(j.getFullYear(),j.getMonth(),1)},jt_endOfMonth=()=>{const j=new Date;return new Date(j.getFullYear(),j.getMonth()+1,0)};var qt=(()=>{return(j=qt||(qt={})).UpComing="UpComing",j.Completed="Completed",j.Cancelled="Cancelled",j.DroppedCall="DroppedCall",qt;var j})(),gn=(()=>{return(j=gn||(gn={}))[j.NewAppointment=30]="NewAppointment",j[j.CommingAppointment=40]="CommingAppointment",j[j.RescheduleAppointment=50]="RescheduleAppointment",j[j.CancelAppointment=60]="CancelAppointment",gn;var j})(),Nn=t(2349);let li=(()=>{class j{constructor(m,M){this.dialogRef=m,this.data=M,this.onRejoinSubmit=new e.vpe,this.onEndSubmit=new e.vpe}ngOnInit(){}onRejoin(){this.onRejoinSubmit.emit(),this.dialogRef.close()}onEnd(){this.onEndSubmit.emit(),this.dialogRef.close()}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.so),e.Y36(Nn.WI))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-pending-call-dialog"]],decls:16,vars:4,consts:[[1,"text-center","popup"],["mat-dialog-title","",1,"header-text"],[1,"patient-name"],[1,"patient-info"],[1,"body-text"],[1,"btn-action-group"],["type","button",1,"btn","btn-cancel",3,"mat-dialog-close","click"],["type","button",1,"btn","btn-ok",3,"mat-dialog-close","click"]],template:function(m,M){1&m&&(e.TgZ(0,"mat-dialog-content",0)(1,"h4",1),e._uU(2,"ENCOUNTER IS IN PROGRESS"),e.qZA(),e.TgZ(3,"div")(4,"label",2),e._uU(5),e.qZA(),e.TgZ(6,"label",3),e._uU(7),e.qZA()(),e._UZ(8,"hr"),e.TgZ(9,"p",4),e._uU(10,"Your encounter with this patient is still in progress. Do you want to rejoin and continue the session?"),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return M.onEnd()}),e._uU(13,"End"),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return M.onRejoin()}),e._uU(15,"Rejoin"),e.qZA()()()),2&m&&(e.xp6(5),e.Oqu(M.data.patientName),e.xp6(2),e.Oqu(M.data.patientExtraInfo),e.xp6(5),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[Nn.ZT,Nn.uh,Nn.xY],styles:[".header-text[_ngcontent-%COMP%]{color:#273943;font-weight:900!important;font-family:Google Sans!important;font-size:22px!important;margin-top:18px}.patient-name[_ngcontent-%COMP%]{font-size:20px!important;border-right:solid 1px #C5C5C5;height:24px;padding-top:1px;padding-right:2px;margin-right:5px}.patient-info[_ngcontent-%COMP%]{font-size:16px!important}.btn-cancel[_ngcontent-%COMP%]{border:1px solid #707070;min-width:100px;background-color:#fff;color:#707070}.btn-ok[_ngcontent-%COMP%]{margin-left:25px;border:1px solid transparent;min-width:100px;background-color:#47a7ee;color:#fff}.body-text[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px;font-size:16px!important}.mat-dialog-content[_ngcontent-%COMP%]{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:hidden;-webkit-overflow-scrolling:touch}hr[_ngcontent-%COMP%]{margin-left:-48px;margin-right:-48px;margin-top:25px}"]}),j})();let yi=(()=>{class j{constructor(m,M){this._apiService=m,this._utilService=M}getAppointmentQuestionaire(m){return this._apiService.get((j=>`/videocall/appointment-questionaires?appointmentId=${j}`)(m))}dropCall(m){return this._apiService.put((j=>`/videocall/appointment-dropcall/${j}`)(m))}getTotalAppointmentToday(){return this._apiService.get("/videoCall/total-appointment-today")}getAppointments(m){const M=this._utilService.buildParams(m);return this._apiService.get("/videoCall/appointments",M)}getAppointment(m){return this._apiService.get((j=>`/videoCall/appointments/${j}`)(m))}cancelAppointment(m){return this._apiService.put((j=>`/videoCall/appointment-cancel/${j}`)(m))}getPendingCallAppointment(){return this._apiService.get("/videoCall/check-pending-call")}getVisitHistories(m){return this._apiService.get((j=>`/videoCall/patient-visit-history/${j}`)(m))}getAppointmentSoapNote(m){return this._apiService.get((j=>`/videoCall/appointment-soapnote/${j}`)(m))}upsertAppointmentSoapNote(m){return this._apiService.post("/videoCall/appointment-soapnote",m)}getOpenTokSession(m){return this._apiService.post("/videocall/session",{roomName:m})}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(a.s),e.LFG(c.f))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),Br=(()=>{class j{constructor(m){this.videoApiService=m}getTotalAppointmentToday(){return this.videoApiService.getTotalAppointmentToday()}getAppointments(m){return this.videoApiService.getAppointments(m)}getAppointment(m){return this.videoApiService.getAppointment(m)}cancelAppointment(m){return this.videoApiService.cancelAppointment(m)}getPendingCallAppointment(){return this.videoApiService.getPendingCallAppointment()}getVisitHistories(m){return this.videoApiService.getVisitHistories(m)}getAppointmentSoapNote(m){return this.videoApiService.getAppointmentSoapNote(m)}upsertAppointmentSoapNote(m){return this.videoApiService.upsertAppointmentSoapNote(m)}getAppointmentQuestionaire(m){return this.videoApiService.getAppointmentQuestionaire(m)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(yi))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var ei=t(7740),vi=t(1645),ti=t(655),Qn=t(2382),Zi=t(2340);let ai=(()=>{class j{constructor(m,M){this.http=m,this._videoService=M}getOT(){return Qn}getOpenTokSession(m){return this._videoService.getOpenTokSession(m)}sendChatHistory(m){return(0,ti.mG)(this,void 0,void 0,function*(){let M=`${Zi.N.apiUrl}/videocall/chat-history`;yield this.http.post(M,m).toPromise()})}getChatHistory(m){return(0,ti.mG)(this,void 0,void 0,function*(){let M=`${Zi.N.apiUrl}/videocall/chat-history/${m}`;var q=(new Cr.WM).set("x-time-zone","SE Asia Standard Time");return yield this.http.get(M,{headers:q}).toPromise()})}dropCall(m){return this._videoService.dropCall(m)}endVisit(m){return(0,ti.mG)(this,void 0,void 0,function*(){let M=`${Zi.N.apiUrl}/videocall/end-call-visit`;yield this.http.post(M,m).toPromise()})}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(Cr.eN),e.LFG(yi))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var Qi=t(8372),Mn=t(316),Lo=t(508),ao=t(6856),Yo=t(288),Ao=t(4107);function kt(j,U){1&j&&(e.TgZ(0,"mat-expansion-panel-header",20)(1,"mat-panel-title"),e._uU(2," Filter "),e.qZA()())}function Jr(j,U){if(1&j&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.AsE(" ",e.xi3(2,2,m.range.value.start,"dd MMM yyyy")," - ",e.xi3(3,5,m.range.value.end,"dd MMM yyyy")," ")}}function Fi(j,U){1&j&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function co(j,U){1&j&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}function rs(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"mat-form-field",22)(1,"mat-date-range-input",23),e._UZ(2,"input",24),e.TgZ(3,"input",25),e.NdJ("dateChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onEndDateChange(q))}),e.qZA()(),e._UZ(4,"mat-datepicker-toggle",26)(5,"mat-date-range-picker",null,27),e.YNc(7,Fi,2,0,"mat-error",28),e.YNc(8,co,2,0,"mat-error",28),e.qZA()}if(2&j){const m=e.MAs(6),M=e.oxw();e.xp6(1),e.Q6J("formGroup",M.range)("rangePicker",m),e.xp6(3),e.Q6J("for",m),e.xp6(3),e.Q6J("ngIf",M.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",M.range.controls.end.hasError("matEndDateInvalid"))}}let Xr=(()=>{class j{constructor(m,M,q){this.videoService=m,this.responsiveUtil=M,this.ref=q,this.rangeDateChange=new e.vpe,this.statusChange=new e.vpe,this.filterAppt=new e.vpe,this.totalAppointmentToday=0,this.patient=new C.NI,this.hidePanel=!0,this.responsiveUtil.init(q),this.hidePanel=!this.responsiveUtil.isMobile()}onResize(){this.hidePanel=!this.responsiveUtil.isMobile()}ngOnInit(){this.getTotalToday(),this.patient.valueChanges.pipe((0,Qi.b)(500)).subscribe(m=>this.filterAppt.emit(m))}onEndDateChange(m){var M;this.range&&(null===(M=this.range.value)||void 0===M?void 0:M.end)&&this.rangeDateChange.emit(this.range.value)}onStatusChange(m){const{value:M}=m;this.statusChange.emit(M)}getTotalToday(){this.videoService.getTotalAppointmentToday().subscribe(m=>{this.totalAppointmentToday=m.totalForToday})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Br),e.Y36(Mn.S),e.Y36(e.sBO))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-appointment-filter"]],hostBindings:function(m,M){1&m&&e.NdJ("resize",function(Ie){return M.onResize(Ie)},!1,e.Jf7)},inputs:{range:"range",statusSelected:"statusSelected"},outputs:{rangeDateChange:"rangeDateChange",statusChange:"statusChange",filterAppt:"filterAppt"},decls:25,vars:8,consts:[[1,"filter","row","justify-content-between","align-items-center"],[1,"expan-custom"],[3,"expanded"],["collapsedHeight","30",4,"ngIf"],[1,"row"],[1,"title","flex-grow-1","col-md-5","col-lg-6"],[1,"filter-info","d-flex","flex-lg-wrap","flex-wrap","flex-md-wrap","flex-xxl-nowrap","align-items-center"],[1,"d-flex","justify-content-start","align-items-center","me-sm-4"],[1,"h4","text-truncate","filter-title","mb-0"],[1,"filter-select","flex-grow-1","ms-2","mb-1"],["disableOptionCentering","",1,"appointment-dropdown",3,"value","valueChange","selectionChange"],["value","UpComing"],["value","Cancelled"],["value","Completed"],[1,"total","flex-grow-1","ff-ProximaNova","text-truncate"],["class","filter-date-info mt-1",4,"ngIf"],[1,"date-range","flex-column","flex-sm-row","mt-md-0","mt-2","col-md-7","col-lg-6","f-right","d-flex","flex-grow-1","align-items-center"],["appearance","outline",1,"custom-input","search-text","col-md-6"],["matInput","","placeholder","Search by name",3,"formControl"],["appearance","outline","class","custom-input col-md-6",4,"ngIf"],["collapsedHeight","30"],[1,"filter-date-info","mt-1"],["appearance","outline",1,"custom-input","col-md-6"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"mat-accordion",1)(2,"mat-expansion-panel",2),e.YNc(3,kt,3,0,"mat-expansion-panel-header",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h4",8),e._uU(9),e.qZA(),e.TgZ(10,"div",9)(11,"mat-select",10),e.NdJ("valueChange",function(Ie){return M.statusSelected=Ie})("selectionChange",function(Ie){return M.onStatusChange(Ie)}),e.TgZ(12,"mat-option",11),e._uU(13,"UPCOMING"),e.qZA(),e.TgZ(14,"mat-option",12),e._uU(15,"CANCELED"),e.qZA(),e.TgZ(16,"mat-option",13),e._uU(17,"COMPLETED"),e.qZA()()()(),e.TgZ(18,"div",14),e._uU(19),e.qZA()(),e.YNc(20,Jr,4,8,"div",15),e.qZA(),e.TgZ(21,"div",16)(22,"mat-form-field",17),e._UZ(23,"input",18),e.qZA(),e.YNc(24,rs,9,5,"mat-form-field",19),e.qZA()()()()()),2&m&&(e.xp6(2),e.Q6J("expanded",M.hidePanel),e.xp6(1),e.Q6J("ngIf",!M.hidePanel),e.xp6(6),e.hij("","UpComing"===M.statusSelected?"Upcoming":"Completed"===M.statusSelected?"Completed":"Cancelled"," Appointments"),e.xp6(2),e.Q6J("value",M.statusSelected),e.xp6(8),e.hij(" (Today ",M.totalAppointmentToday," appointments)"),e.xp6(1),e.Q6J("ngIf",M.range),e.xp6(3),e.Q6J("formControl",M.patient),e.xp6(1),e.Q6J("ngIf",M.range))},dependencies:[C.Fj,C.JJ,C.JL,C.oH,C.sg,C.u,n.O5,Lo.ey,ao.nW,ao.wx,ao.zY,ao.By,ao._g,Yo.pp,Yo.ib,Yo.yz,Yo.yK,D.TO,D.KE,D.R9,W.Nt,Ao.gD,n.uU],styles:[".mat-calendar-body-selected{background-color:#47a7ee!important}  .mat-calendar-body-in-range:before{background:rgba(71,167,238,.2)}  .mat-datepicker-toggle-active{color:#47a7ee!important}  .mat-datepicker-toggle button{top:5px}.filter[_ngcontent-%COMP%]{display:flex}.filter[_ngcontent-%COMP%]   .f-right[_ngcontent-%COMP%]{margin-left:auto}.filter[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filter-info[_ngcontent-%COMP%]{display:flex}@media (max-width: 575.98px){.filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filter-info[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:18px}}.filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filter-info[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filter-date-info[_ngcontent-%COMP%]{color:#33333380}.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]     .mat-form-field-type-mat-date-range-input .mat-form-field-infix{width:auto}.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{margin-right:10px;color:#33333380}.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-flex{padding-top:0}@media (max-width: 575.98px){.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}}.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   .search-text[_ngcontent-%COMP%]{padding-right:1%}@media (max-width: 575.98px){.filter[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   .search-text[_ngcontent-%COMP%]{padding-right:0}}.filter[_ngcontent-%COMP%]   .expan-custom[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 5px 0 0;height:34px}.filter[_ngcontent-%COMP%]   .expan-custom[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background:transparent!important}.filter[_ngcontent-%COMP%]   .expan-custom[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.filter[_ngcontent-%COMP%]   .expan-custom[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}"]}),j})();function Co(j,U){if(1&j&&(e.TgZ(0,"button",5),e._uU(1),e.qZA()),2&j){const m=e.oxw();e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Oqu(m.data.btnCancelText)}}function Bo(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.onSubmit())}),e._uU(1),e.qZA()}if(2&j){const m=e.oxw();e.Q6J("mat-dialog-close",!0),e.xp6(1),e.Oqu(m.data.btnOkText)}}let bi=(()=>{class j{constructor(m,M){this.dialogRef=m,this.data=M,this.onDialogSubmit=new e.vpe}onSubmit(){this.onDialogSubmit.emit(),this.dialogRef.close()}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.so),e.Y36(Nn.WI))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-action-confirm-dialog"]],decls:8,vars:4,consts:[[1,"text-center","popup"],["mat-dialog-title",""],[1,"btn-action-group"],["class","m-right",3,"mat-dialog-close",4,"ngIf"],[3,"mat-dialog-close","click",4,"ngIf"],[1,"m-right",3,"mat-dialog-close"],[3,"mat-dialog-close","click"]],template:function(m,M){1&m&&(e.TgZ(0,"mat-dialog-content",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"div",2),e.YNc(6,Co,2,2,"button",3),e.YNc(7,Bo,2,2,"button",4),e.qZA()()),2&m&&(e.xp6(2),e.Oqu(M.data.headerText),e.xp6(2),e.Oqu(M.data.content),e.xp6(2),e.Q6J("ngIf",M.data.btnCancelText),e.xp6(1),e.Q6J("ngIf",M.data.btnOkText))},dependencies:[n.O5,Nn.ZT,Nn.uh,Nn.xY],styles:[".popup[_ngcontent-%COMP%]   .m-right[_ngcontent-%COMP%]{margin-right:10px}.popup[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#47a7ee}.popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]{float:right;margin-top:15px}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#47a7ee;border:0;background:none}"]}),j})();class jo{constructor(U,m){this.callback=U,this.interval=m}start(){this.timer=setInterval(this.callback,this.interval)}stop(){clearInterval(this.timer),this.timer=void 0}restart(U=0){this.stop(),U&&(this.interval=U),this.start()}}var cs=t(2313),ns=t(5245);let zo=(()=>{class j{constructor(m,M,q,Ie){this.dialogRef=m,this.data=M,this.sanitizer=q,this._doctorService=Ie,this.isVerifyingIDMe=!1;let qe=M.doctorAuthToken.subDomain,Xt=M.doctorAuthToken.applicationKey,rn=M.doctorAuthToken.token;M.doctorAuthToken.isVerifiedIDMe?this.url=`https://${qe}.eazyscripts.com/Api/Public/V3/${qe}/Browser/New-Prescription?ApplicationKey=${Xt}&Token=${rn}&PatientId=${M.eazyscriptPatientId}&RedirectUrl=/&Notes=`:(this.isVerifyingIDMe=!0,this.url=`https://${qe}.eazyscripts.com/Api/Public/V3/${qe}/Browser/auto-login?ez_redirectUrl=/app/my-account/prescriber&ApplicationKey=${Xt}&Token=${rn}`),console.log(this.url),this.urlSafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.url),m.afterClosed().subscribe(Or=>{this.isVerifyingIDMe&&this._doctorService.checkAndUpdateIDMe().subscribe(Vn=>{console.log(`ID.Me verification result : ${Vn}`)})})}ngOnInit(){}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.so),e.Y36(Nn.WI),e.Y36(cs.H7),e.Y36(Lr.Q))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-prescription-dialog"]],decls:5,vars:2,consts:[[1,"w-100","h-100","position-relative","background"],["mat-icon-button","",1,"close-button","position-absolute",3,"mat-dialog-close"],["color","primary",1,"close-icon"],["scrolling","auto",2,"width","100%","height","101%",3,"src"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"button",1)(2,"mat-icon",2),e._uU(3,"close"),e.qZA()(),e._UZ(4,"iframe",3),e.qZA()),2&m&&(e.xp6(1),e.Q6J("mat-dialog-close",!0),e.xp6(3),e.Q6J("src",M.urlSafe,e.uOi))},dependencies:[L.lW,Nn.ZT,ns.Hw],styles:[".background[_ngcontent-%COMP%]{background:url(eazyscript-bg.ba432c199026f64b.jpg);background-repeat:no-repeat;background-size:100%}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}"]}),j})();var Jo=t(773);function _o(j,U){if(1&j&&(e.TgZ(0,"div",4)(1,"div",5),e._UZ(2,"img",6),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()),2&j){const m=e.oxw();e.xp6(4),e.hij(" THERE ARE NO ","UpComing"===m.status?"UPCOMING":"Completed"===m.status?"COMPLETED":"CANCELED"," APPOINTMENT SCHEDULED ")}}function Er(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2).$implicit,Ie=e.oxw(2);return e.KtG(Ie.onStartCall(q))}),e._uU(1,"Start"),e.qZA()}}function Wn(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2).$implicit,Ie=e.oxw(2);return e.KtG(Ie.onCancelAppointment(q.id))}),e._uU(1,"Cancel"),e.qZA()}}function ss(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",8)(1,"div",23),e.YNc(2,Er,2,0,"button",24),e.YNc(3,Wn,2,0,"button",25),e.qZA(),e.TgZ(4,"div",23)(5,"button",26),e.NdJ("click",function(){e.CHM(m);const q=e.oxw().$implicit,Ie=e.oxw(2);return e.KtG(Ie.onViewProfile(q))}),e._uU(6,"View Detail"),e.qZA()()()}if(2&j){const m=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",m&&!(null==m||!m.canStart)),e.xp6(1),e.Q6J("ngIf",!(null!=m&&m.canStart))}}function us(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",29)(1,"button",26),e.NdJ("click",function(){e.CHM(m);const q=e.oxw().$implicit,Ie=e.oxw(2);return e.KtG(Ie.onViewProfile(q))}),e._uU(2,"View Detail"),e.qZA()()}}function as(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",8)(1,"div",23)(2,"button",27),e.NdJ("click",function(){e.CHM(m);const q=e.oxw().$implicit,Ie=e.oxw(2);return e.KtG(Ie.addPrescription(null==q||null==q.patient?null:q.patient.eazyscriptId))}),e._uU(3,"Prescribe"),e.qZA()(),e.TgZ(4,"div",23)(5,"button",26),e.NdJ("click",function(){e.CHM(m);const q=e.oxw().$implicit,Ie=e.oxw(2);return e.KtG(Ie.onViewProfile(q))}),e._uU(6,"View Detail"),e.qZA()()()}}function To(j,U){if(1&j&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&j){const m=U.ngIf;e.xp6(1),e.lnq(" ",m.hours,"h ",m.minutes,"m ",m.seconds,"s ")}}function ke(j,U){if(1&j&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),e._UZ(4,"img",14),e.qZA(),e.TgZ(5,"div",15)(6,"div",16),e._uU(7),e.qZA(),e.TgZ(8,"div",17),e._uU(9),e.qZA()()(),e.TgZ(10,"div",18)(11,"div",19)(12,"mat-icon"),e._uU(13,"calendar_today_outlined"),e.qZA(),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.TgZ(17,"div",19)(18,"mat-icon"),e._uU(19,"access_time_outlined"),e.qZA(),e.TgZ(20,"span"),e._uU(21),e.ALo(22,"date"),e.ALo(23,"date"),e.qZA()()(),e.TgZ(24,"div",20),e.YNc(25,ss,7,2,"div",2),e.YNc(26,us,3,0,"div",21),e.YNc(27,as,7,0,"div",2),e.qZA(),e.YNc(28,To,2,3,"div",22),e.qZA()()),2&j){const m=U.$implicit,M=e.oxw(2);e.xp6(4),e.s9C("src",null!=m&&null!=m.patient&&m.patient.avatarUrl?null==m||null==m.patient?null:m.patient.avatarUrl:M.noAvatar,e.LSH),e.xp6(3),e.AsE("",null==m||null==m.patient?null:m.patient.firstName," ",null==m||null==m.patient?null:m.patient.lastName,""),e.xp6(2),e.Oqu(null==m||null==m.patient?null:m.patient.email),e.xp6(6),e.Oqu(e.xi3(16,11,m.time,"EEE, MMM dd, yyyy")),e.xp6(6),e.AsE("",e.xi3(22,14,m.time,"hh:mm a")," - ",e.xi3(23,17,m.endTime,"hh:mm a"),""),e.xp6(4),e.Q6J("ngIf","UpComing"===m.status),e.xp6(1),e.Q6J("ngIf","Cancelled"===m.status),e.xp6(1),e.Q6J("ngIf","Completed"===m.status),e.xp6(1),e.Q6J("ngIf",M.getElapsedTime(m))}}function _(j,U){if(1&j&&(e.TgZ(0,"div",8),e.YNc(1,ke,29,20,"div",9),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.Q6J("ngForOf",m.appointments)}}function Pe(j,U){1&j&&(e.TgZ(0,"div",31),e._UZ(1,"mat-spinner",32),e.qZA())}let He=(()=>{class j{constructor(m,M,q,Ie,qe,Xt,rn){this._dialog=m,this._backShareService=M,this._router=q,this._stateService=Ie,this._doctorService=qe,this._authService=Xt,this._changeDetector=rn,this.destroyed$=new Oe.x,this.subscriptions=[],this.appointments=[],this.scroll=new e.vpe,this.cancelAppointment=new e.vpe,this.viewProfile=new e.vpe,this.totalSecondShowCountDown=86400,this.totalSecondChangeAction=900,this.intervalReset=120,this.noAvatar="assets/images/users/no-avatar.png"}ngOnDestroy(){this.destroyed$.next(null),this.destroyed$.complete(),this.interval&&this.interval.stop(),this.subscriptions.forEach(m=>{m.unsubscribe()})}ngAfterViewChecked(){let m=0;this.interval||(this.interval=function qo(j,U){return new jo(j,U)}(()=>{m+=1,this.resetOnIntevalAppointment(),this._changeDetector.destroyed||this._changeDetector.detectChanges(),m>=this.intervalReset&&(m=0,this.interval.restart())},1e3),this.interval.start(),this._changeDetector.detectChanges())}resetOnIntevalAppointment(){this.status===qt.UpComing&&!this.isProcessing&&(this.appointments=this.appointments.filter(m=>new Date(m.endTime)>=new Date))}getElapsedTime(m){if(this.status!==qt.UpComing)return;const M=Math.floor((new Date(m.endTime).getTime()-(new Date).getTime())/1e3);let q=Math.floor((new Date(m.time).getTime()-(new Date).getTime())/1e3);if(M>0&&q<this.totalSecondChangeAction&&(m.canStart=!0),q>this.totalSecondShowCountDown)return;if(q<=0)return{hours:0,minutes:0,seconds:0};let Ie=0,qe=0,Xt=0;return q>=3600&&(Ie=Math.floor(q/3600),q-=3600*Ie),q>=60&&(qe=Math.floor(q/60),q-=60*qe),Xt=q,{hours:Ie,minutes:qe,seconds:Xt}}onScroll(m){m.target.offsetHeight+m.target.scrollTop>=m.target.scrollHeight-1&&this.scroll.emit()}onCancelAppointment(m){this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"CANCEL",btnOkText:"OK",content:"Are you sure you want to cancel this appointment?",headerText:"Cancel Appointment"}}).componentInstance.onDialogSubmit.subscribe(()=>{this.cancelAppointment.emit(m)})}onStartCall(m){this._stateService.videoCallPublisherAudioIsOn.next(!0),this._stateService.videoCallPublisherVideoIsOn.next(!0),this._router.navigate(["video-chat"],{queryParams:{roomName:m.roomName,appointmentId:m.id,patientId:m.patient.id}})}onViewProfile(m){this.viewProfile.emit(m.patient.id),this._backShareService.change(!0)}addPrescription(m){if(this._authService.getUser().eazyScriptId)if(m){let Ie=this._doctorService.getEazyscriptAuthToken().subscribe(qe=>{let Xt={eazyscriptPatientId:m,doctorAuthToken:qe};qe.isVerifiedIDMe?this.showNewPrescription(Xt):this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"Continue",content:"Current prescriber account does not verify ID.Me. Please click \u201cContinue\u201d to complete your ID.Me verification before you are able to prescribe.",headerText:"ID.Me verification"}}).componentInstance.onDialogSubmit.subscribe(()=>{this.showNewPrescription(Xt)})});this.subscriptions.push(Ie)}else this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"This patient doesn't have an Eazyscript account.",headerText:"Add prescription"}});else this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"Current presciber doesn't have an Eazyscript account.",headerText:"Eazyscript account"}})}showNewPrescription(m){this.currentRxDialog=this._dialog.open(zo,{height:"80%",width:"70%",maxWidth:"70vw",maxHeight:"80vh",data:m})}onPostMessage(m){}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.uw),e.Y36(v.Y),e.Y36(i.F0),e.Y36(b.b),e.Y36(Lr.Q),e.Y36(p.e),e.Y36(e.sBO))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-appointment-list"]],hostBindings:function(m,M){1&m&&e.NdJ("message",function(Ie){return M.onPostMessage(Ie)},!1,e.Jf7)},inputs:{appointments:"appointments",status:"status",hasData:"hasData",isProcessing:"isProcessing"},outputs:{scroll:"scroll",cancelAppointment:"cancelAppointment",viewProfile:"viewProfile"},decls:4,vars:3,consts:[[1,"appointment-list",3,"scroll"],["class","no-content",4,"ngIf"],["class","row",4,"ngIf"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"no-content"],[1,"no-content-img"],["src","assets/images/schedule.png","width","150"],[1,"no-content-desc"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-4","col-xl-3"],[1,"appointment-item","position-relative"],[1,"patient-common-info"],[1,"patient-avatar"],["width","110","height","110","alt","avatar",1,"img-circle-small",3,"src"],[1,"patient-content-item"],[1,"name"],[1,"info","text-truncate"],[1,"appointment-item-info"],[1,"appointment-date"],[1,"appointment-item-action"],["class","center",4,"ngIf"],["class","count-down",4,"ngIf"],[1,"col-sm-6","col-md-6","col-6"],["class","button warn",3,"click",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[1,"button","primary",3,"click"],[1,"button","warn",3,"click"],[1,"button",3,"click"],[1,"center"],[1,"count-down"],[1,"d-flex","justify-content-center","align-items-center"],["diameter","50"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0),e.NdJ("scroll",function(Ie){return M.onScroll(Ie)}),e.YNc(1,_o,5,1,"div",1),e.YNc(2,_,2,1,"div",2),e.YNc(3,Pe,2,0,"div",3),e.qZA()),2&m&&(e.xp6(1),e.Q6J("ngIf",!M.hasData),e.xp6(1),e.Q6J("ngIf",M.hasData),e.xp6(1),e.Q6J("ngIf",M.isProcessing))},dependencies:[n.sg,n.O5,ns.Hw,Jo.Ou,n.uU],styles:[".appointment-list[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;position:relative;flex:1}.appointment-list[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.appointment-list[_ngcontent-%COMP%]   .no-content[_ngcontent-%COMP%]   .no-content-desc[_ngcontent-%COMP%]{margin-top:50px;color:#33333380}.appointment-list[_ngcontent-%COMP%]   .count-down[_ngcontent-%COMP%]{text-align:center;position:absolute;background:#E3646E;padding:2px 2px 2px 10px;border-top-left-radius:20px;border-bottom-left-radius:20px;right:0;top:15px;color:#fff}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]{padding:20px 15px;margin:15px 0;background:white;border-radius:15px;filter:drop-shadow(0px 3px 6px rgba(0,0,0,.078))}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-avatar[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]{text-align:center}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .patient-common-info[_ngcontent-%COMP%]   .patient-content-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-weight:400;color:#33333380}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .appointment-item-info[_ngcontent-%COMP%]{margin:15px 0}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .appointment-item-info[_ngcontent-%COMP%]   .appointment-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:top;padding-left:10px}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .appointment-item-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#b0b9b2}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .appointment-item-action[_ngcontent-%COMP%]{text-align:center}.appointment-list[_ngcontent-%COMP%]   .appointment-item[_ngcontent-%COMP%]   .appointment-item-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:100px;font-size:12px;font-weight:700}"]}),j})();var it=t(3251);function on(j,U){if(1&j&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&j){const m=e.oxw(2);e.xp6(1),e.HOy(" ",m.patientInfo.address.street," ",m.patientInfo.address.city," ",m.patientInfo.address.state," ",m.patientInfo.address.postalCode," ")}}function ln(j,U){if(1&j&&(e.TgZ(0,"div",1)(1,"div",2),e._uU(2," CONTACT DETAIL "),e.qZA(),e.TgZ(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th",5),e._uU(8,"First Name"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"Last Name"),e.qZA(),e.TgZ(11,"th",5),e._uU(12,"Birth Date"),e.qZA()()(),e.TgZ(13,"tbody")(14,"tr")(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"date"),e.qZA()()()()(),e.TgZ(22,"div",6)(23,"div",7),e._uU(24,"Address "),e.qZA(),e.YNc(25,on,2,4,"div",8),e.qZA(),e.TgZ(26,"div",9)(27,"table",4)(28,"thead")(29,"tr")(30,"th",5),e._uU(31,"Email"),e.qZA(),e.TgZ(32,"th",5),e._uU(33,"Phone Number"),e.qZA()()(),e.TgZ(34,"tbody")(35,"tr")(36,"td"),e._uU(37),e.qZA(),e.TgZ(38,"td"),e._uU(39),e.qZA()()()()(),e.TgZ(40,"div",10)(41,"div",11),e._uU(42,"Note"),e.qZA(),e.TgZ(43,"div",12),e._UZ(44,"p"),e.qZA()()()),2&j){const m=e.oxw();e.xp6(16),e.Oqu(m.patientInfo.firstName),e.xp6(2),e.Oqu(m.patientInfo.lastName),e.xp6(2),e.Oqu(e.xi3(21,6,m.patientInfo.birthday,"MM/dd/yyyy")),e.xp6(5),e.Q6J("ngIf",m.patientInfo.address),e.xp6(12),e.Oqu(m.patientInfo.email),e.xp6(2),e.Oqu(m.patientInfo.phoneNumber)}}let xn=(()=>{class j{}return j.\u0275fac=function(m){return new(m||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-general-info"]],inputs:{patientInfo:"patientInfo"},decls:1,vars:1,consts:[["class","contact",4,"ngIf"],[1,"contact"],[1,"contact-title","m-b-15"],[1,"info"],[1,"table"],[1,"item-title"],[1,"address","m-b-15"],[1,"title","m-b-10","item-title"],["class","desc",4,"ngIf"],[1,"private-info"],[1,"note","hide"],[1,"title","m-b-10"],[1,"desc"]],template:function(m,M){1&m&&e.YNc(0,ln,45,9,"div",0),2&m&&e.Q6J("ngIf",M.patientInfo)},dependencies:[n.O5,n.uU],styles:[".contact[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#707070}.contact[_ngcontent-%COMP%]   .m-b-15[_ngcontent-%COMP%]{margin-bottom:15px}.contact[_ngcontent-%COMP%]   .m-b-10[_ngcontent-%COMP%]{margin-bottom:10px}.contact[_ngcontent-%COMP%]   .contact-title[_ngcontent-%COMP%]{font-size:18px}.contact[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;border:0;padding:0}.contact[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding:8px 0 0;font-weight:700}.contact[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-weight:700}.contact[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px}"]}),j})();function tr(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.onSubmit())}),e.TgZ(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12),e._uU(5," Subjective "),e.qZA(),e.TgZ(6,"div",13),e._UZ(7,"textarea",14),e.qZA()(),e.TgZ(8,"div",11)(9,"div",12),e._uU(10," Assessment "),e.qZA(),e.TgZ(11,"div",13),e._UZ(12,"textarea",15),e.qZA()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"div",12),e._uU(16," Objective "),e.qZA(),e.TgZ(17,"div",13),e._UZ(18,"textarea",16),e.qZA()(),e.TgZ(19,"div",11)(20,"div",12),e._uU(21," Plan "),e.qZA(),e.TgZ(22,"div",13),e._UZ(23,"textarea",17),e.qZA()()()(),e.TgZ(24,"div",18)(25,"button",19),e._uU(26,"Cancel"),e.qZA(),e.TgZ(27,"button",20),e._uU(28,"Save"),e.qZA()()()}if(2&j){const m=e.oxw();e.Q6J("formGroup",m.soapForm),e.xp6(25),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0)}}let Fn=(()=>{class j{constructor(m,M){var q,Ie,qe,Xt;this.dialogRef=m,this.data=M,this.onDialogSubmit=new e.vpe,this.soapForm=new C.cw({subjective:new C.NI(null===(q=this.data.soapNote)||void 0===q?void 0:q.subjective),objective:new C.NI(null===(Ie=this.data.soapNote)||void 0===Ie?void 0:Ie.objective),assessment:new C.NI(null===(qe=this.data.soapNote)||void 0===qe?void 0:qe.assessment),plan:new C.NI(null===(Xt=this.data.soapNote)||void 0===Xt?void 0:Xt.plan)})}onSubmit(){this.onDialogSubmit.emit(this.soapForm.value),this.dialogRef.close()}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.so),e.Y36(Nn.WI))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-soap-dialog"]],decls:14,vars:7,consts:[[1,"popup"],[1,"subject"],["mat-dialog-title","",1,"header-text"],[1,"sub-title"],[1,"name"],[1,"v-hr"],[1,"info"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"content"],[1,"row"],[1,"col-md-6","col-xs-12"],[1,"sub"],[1,"desc"],["rows","4","formControlName","subjective"],["rows","4","formControlName","assessment"],["rows","4","formControlName","objective"],["rows","4","formControlName","plan"],[1,"btn-action-group"],["type","button",1,"btn","btn-cancel",3,"mat-dialog-close"],["type","submit",1,"btn","btn-save",3,"mat-dialog-close"]],template:function(m,M){1&m&&(e.TgZ(0,"mat-dialog-content",0)(1,"div",1)(2,"h3",2),e._uU(3,"SOAP NOTE"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._UZ(8,"hr"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.ALo(11,"birthdate"),e.qZA()()(),e._UZ(12,"hr"),e.YNc(13,tr,29,3,"form",7),e.qZA()),2&m&&(e.xp6(6),e.AsE("",M.data.patientInfo.firstName," ",M.data.patientInfo.lastName,""),e.xp6(4),e.AsE("",e.lcZ(11,5,null==M.data.patientInfo?null:M.data.patientInfo.birthday)," years, ",null==M.data.patientInfo.address?null:M.data.patientInfo.address.city,""),e.xp6(3),e.Q6J("ngIf",M.soapForm))},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,n.O5,Nn.ZT,Nn.uh,Nn.xY,ft],styles:[".popup[_ngcontent-%COMP%]{padding:0 40px;max-height:68vh!important}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{text-align:center}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700!important}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{display:flex;justify-content:center}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:21px}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   .v-hr[_ngcontent-%COMP%]{background:#C5C5C5;display:inline-flex;width:1px;margin:0 10px}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   .v-hr[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 0 0 12.5px}.popup[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:16px}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:25px 0}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:25px}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:16px;color:#1fb5eb;line-height:27px}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid #BFBCBC;border-radius:10px;width:100%;height:8em;padding:10px}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]{float:right}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:100px}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]   .btn.btn-cancel[_ngcontent-%COMP%]{border:1px solid #707070;margin-right:30px}.popup[_ngcontent-%COMP%]   .btn-action-group[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{border:0;background:#47A7EE;color:#fff}"]}),j})();function yn(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"a",3),e.NdJ("click",function(){const Ie=e.CHM(m).$implicit,qe=e.oxw();return e.KtG(qe.onOpenSoapPopup(Ie.appointmentId))}),e._uU(14,"Add Note"),e.qZA()()()}if(2&j){const m=U.$implicit;e.xp6(2),e.Oqu(m.doctorName),e.xp6(2),e.Oqu(e.xi3(5,5,m.time,"MMM dd, yyyy")),e.xp6(3),e.AsE("",e.xi3(8,8,m.time,"hh:mm a")," - ",e.xi3(9,11,m.endTime,"hh:mm a"),""),e.xp6(4),e.Oqu(m.status)}}let Si=(()=>{class j{constructor(m,M,q){this._dialog=m,this._notificationService=M,this._videoService=q,this.visitHistories=[]}onOpenSoapPopup(m){!this.patientInfo||this._videoService.getAppointmentSoapNote(m).subscribe(M=>{this._dialog.open(Fn,{panelClass:"custom-dialog",width:"800px",data:{patientInfo:this.patientInfo,soapNote:M}}).componentInstance.onDialogSubmit.subscribe(qe=>{qe.appointmentId=m,this._videoService.upsertAppointmentSoapNote(qe).subscribe(()=>{},Xt=>{const{message:rn}=Xt;this._notificationService.error(rn)})})})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.uw),e.Y36(vi.g),e.Y36(Br))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-visit-history"]],inputs:{visitHistories:"visitHistories",patientInfo:"patientInfo"},decls:15,vars:1,consts:[[1,"visit-history"],[1,"table"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"DOCTOR NAME"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"DATE"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"TIME"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"STATUS"),e.qZA(),e._UZ(12,"th"),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,yn,15,14,"tr",2),e.qZA()()()),2&m&&(e.xp6(14),e.Q6J("ngForOf",M.visitHistories))},dependencies:[n.sg,n.uU],styles:[".visit-history[_ngcontent-%COMP%]   .bold[_ngcontent-%COMP%]{font-weight:700}.visit-history[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:0;font-size:11px;font-family:poppins-bold,sans-serif!important}.visit-history[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:700}"]}),j})();function Eo(j,U){if(1&j&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),e._uU(4,"Front Side"),e.qZA(),e.TgZ(5,"div",7),e._UZ(6,"img",8),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6),e._uU(9,"Back Side"),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"img",8),e.qZA()()()()),2&j){const m=e.oxw();e.xp6(6),e.s9C("src",null==m.patientInfo.insuranceCard?null:m.patientInfo.insuranceCard.frontSide,e.LSH),e.xp6(5),e.s9C("src",null==m.patientInfo.insuranceCard?null:m.patientInfo.insuranceCard.backSide,e.LSH)}}let mo=(()=>{class j{}return j.\u0275fac=function(m){return new(m||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-insurance-info"]],inputs:{patientInfo:"patientInfo"},decls:4,vars:1,consts:[[1,"insurance"],[1,"insurance-title","m-b-15"],["class","info",4,"ngIf"],[1,"info"],[1,"row"],[1,"col-md-6"],[1,"title"],[1,"desc"],["height","200",3,"src"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," INSURANCE CARD "),e.qZA(),e.YNc(3,Eo,12,2,"div",2),e.qZA()),2&m&&(e.xp6(3),e.Q6J("ngIf",M.patientInfo&&(null==M.patientInfo?null:M.patientInfo.insuranceCard)))},dependencies:[n.O5],styles:[".insurance[_ngcontent-%COMP%]   .insurance-title[_ngcontent-%COMP%]{font-size:18px}.insurance[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#47a7ee}.insurance[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{margin-top:20px}.insurance[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px;border:2px solid gray;filter:drop-shadow(0px 3px 6px rgba(0,0,0,.078));width:100%}"]}),j})();function Bi(j,U){if(1&j&&e._UZ(0,"iframe",2),2&j){const m=e.oxw();e.Q6J("src",m.urlSafe,e.uOi)}}let Xo=(()=>{class j{constructor(m,M){this.sanitizer=m,this._doctorService=M,this.subscriptions=[],this.getEazyscriptAuthenData()}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(m=>{m.unsubscribe()})}getEazyscriptAuthenData(){let m=this._doctorService.getEazyscriptAuthToken().subscribe(M=>{var q;this.eazyscriptData={eazyscriptPatientId:null===(q=this.patientInfo)||void 0===q?void 0:q.eazyscriptId,doctorAuthToken:M},this.eazyscriptData.eazyscriptPatientId&&(this.url=`https://${this.eazyscriptData.doctorAuthToken.subDomain}.eazyscripts.com/Api/Public/V3/demo-move78/Browser/auto-login?ez_redirectUrl=/app/patients/${this.eazyscriptData.eazyscriptPatientId}/med-history&ApplicationKey=${this.eazyscriptData.doctorAuthToken.applicationKey}&&Token=${this.eazyscriptData.doctorAuthToken.token}&hideLeftMenu=true&hideTopMenu=false`,this.urlSafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.url))});this.subscriptions.push(m)}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(cs.H7),e.Y36(Lr.Q))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-medication-history"]],inputs:{patientInfo:"patientInfo"},decls:2,vars:1,consts:[[1,"w-100","h-100","position-relative","background"],["style","width:100%; height:101%","scrolling","auto",3,"src",4,"ngIf"],["scrolling","auto",2,"width","100%","height","101%",3,"src"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0),e.YNc(1,Bi,1,1,"iframe",1),e.qZA()),2&m&&(e.xp6(1),e.Q6J("ngIf",M.urlSafe))},dependencies:[n.O5],styles:[".background[_ngcontent-%COMP%]{background:url(eazyscript-bg.ba432c199026f64b.jpg) no-repeat;background-size:100%}"]}),j})();function ue(j,U){if(1&j&&(e.TgZ(0,"h5",6),e._uU(1),e.qZA()),2&j){const m=e.oxw(2).$implicit;e.xp6(1),e.Oqu(m.display)}}function J(j,U){if(1&j&&e.YNc(0,ue,2,1,"h5",5),2&j){const m=e.oxw().$implicit;e.Q6J("ngIf",m.display)}}function le(j,U){if(1&j&&(e.TgZ(0,"small",10),e._uU(1),e.qZA()),2&j){const m=e.oxw(3).$implicit;e.xp6(1),e.Oqu(m.unit)}}function we(j,U){if(1&j&&(e.TgZ(0,"h4",8),e._uU(1),e.ALo(2,"number"),e.YNc(3,le,2,1,"small",9),e.qZA()),2&j){const m=e.oxw(2).$implicit;e.Udp("color",m.chartColor),e.xp6(1),e.hij(" ",e.xi3(2,4,m.total,"1.0-2"),""),e.xp6(2),e.Q6J("ngIf",m.unit)}}function Re(j,U){if(1&j&&e.YNc(0,we,4,7,"h4",7),2&j){const m=e.oxw().$implicit;e.Q6J("ngIf",m.total)}}function rt(j,U){if(1&j&&(e.TgZ(0,"app-charts-device-reading",2),e.YNc(1,J,1,1,"ng-template",null,3,e.W1O),e.YNc(3,Re,1,1,"ng-template",null,4,e.W1O),e.qZA()),2&j){const m=U.$implicit,M=e.MAs(2),q=e.MAs(4);e.Q6J("chartData",m.chartData)("chartLabels",m.chartLabels)("chartOptions",m.chartOptions)("background",m.background)("chartColor",m.chartColor)("leftText",M)("rightText",q)("unit",m.unit)}}let yt=(()=>{class j{constructor(m){this.chartsService=m,this.chartTimeRange="week",this.charts=[]}ngOnInit(){this.chartsService.groupVitalCharts(this.firebaseId,mi,this.chartTimeRange).subscribe(m=>{this.charts.push(this.chartsService.dataChartToChartJS(m))})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nt))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-health-data"]],inputs:{firebaseId:"firebaseId"},decls:2,vars:1,consts:[[1,"d-flex","flex-wrap"],["class","my-2 col-12 col-sm-6 col-md-6 px-2",3,"chartData","chartLabels","chartOptions","background","chartColor","leftText","rightText","unit",4,"ngFor","ngForOf"],[1,"my-2","col-12","col-sm-6","col-md-6","px-2",3,"chartData","chartLabels","chartOptions","background","chartColor","leftText","rightText","unit"],["leftText",""],["rightText",""],["class","h5 fs-6 text-uppercase d-flex flex-column fw-bold",4,"ngIf"],[1,"h5","fs-6","text-uppercase","d-flex","flex-column","fw-bold"],["class","h4 text-uppercase fs-5 d-flex fw-bold",3,"color",4,"ngIf"],[1,"h4","text-uppercase","fs-5","d-flex","fw-bold"],["class","text-muted ms-2 fw-normal small text-capitalize",4,"ngIf"],[1,"text-muted","ms-2","fw-normal","small","text-capitalize"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0),e.YNc(1,rt,5,8,"app-charts-device-reading",1),e.qZA()),2&m&&(e.xp6(1),e.Q6J("ngForOf",M.charts))},dependencies:[n.sg,n.O5,dr,n.JJ]}),j})();function Qe(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),e._UZ(7,"img",8),e.ALo(8,"safe"),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e._uU(12,"Active"),e.qZA()(),e.TgZ(13,"div",11)(14,"table",12)(15,"tbody")(16,"tr")(17,"td",13),e._uU(18,"Gender"),e.qZA(),e.TgZ(19,"td",14),e._uU(20),e.qZA()(),e.TgZ(21,"tr")(22,"td",13),e._uU(23,"Age"),e.qZA(),e.TgZ(24,"td",14),e._uU(25),e.ALo(26,"birthdate"),e.qZA()(),e.TgZ(27,"tr")(28,"td",13),e._uU(29,"Height"),e.qZA(),e.TgZ(30,"td",14),e._uU(31),e.ALo(32,"height"),e.qZA()(),e.TgZ(33,"tr")(34,"td",13),e._uU(35,"Weight"),e.qZA(),e.TgZ(36,"td",14),e._uU(37),e.qZA()(),e.TgZ(38,"tr")(39,"td",13),e._uU(40,"Waist"),e.qZA(),e.TgZ(41,"td",14),e._uU(42),e.qZA()()()()()()(),e._UZ(43,"div",15),e.TgZ(44,"div",16)(45,"div",5)(46,"div",17),e._uU(47,"Vitals"),e.qZA(),e.TgZ(48,"div",18)(49,"table",12)(50,"tbody")(51,"tr")(52,"td",13),e._uU(53,"Temp"),e.qZA(),e.TgZ(54,"td",14),e._uU(55),e.qZA(),e.TgZ(56,"td",19),e._uU(57),e.ALo(58,"date"),e.qZA()(),e.TgZ(59,"tr")(60,"td",13),e._uU(61,"SPO2"),e.qZA(),e.TgZ(62,"td",14),e._uU(63),e.qZA(),e.TgZ(64,"td",19),e._uU(65),e.ALo(66,"date"),e.qZA()(),e.TgZ(67,"tr")(68,"td",13),e._uU(69,"HR"),e.qZA(),e.TgZ(70,"td",14),e._uU(71),e.qZA(),e.TgZ(72,"td",19),e._uU(73),e.ALo(74,"date"),e.qZA()(),e.TgZ(75,"tr")(76,"td",13),e._uU(77,"BP"),e.qZA(),e.TgZ(78,"td",14),e._uU(79),e.qZA(),e.TgZ(80,"td",19),e._uU(81),e.ALo(82,"date"),e.qZA()(),e.TgZ(83,"tr")(84,"td",13),e._uU(85,"Glucose"),e.qZA(),e._UZ(86,"td",14)(87,"td",19),e.qZA()()()()()()(),e.TgZ(88,"div",20)(89,"div",21)(90,"mat-tab-group",22),e.NdJ("selectedTabChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onMedicationHistoryClick(q))}),e.TgZ(91,"mat-tab",23)(92,"div",24),e._UZ(93,"app-patient-health-data",25),e.qZA()(),e.TgZ(94,"mat-tab",26)(95,"div",27),e._UZ(96,"app-patient-general-info",28),e.qZA()(),e.TgZ(97,"mat-tab",29)(98,"div",30),e._UZ(99,"app-patient-insurance-info",31),e.qZA()(),e.TgZ(100,"mat-tab",32)(101,"div",33),e._UZ(102,"app-patient-visit-history",34),e.qZA()(),e.TgZ(103,"mat-tab",35)(104,"div",30),e._UZ(105,"app-patient-medication-history",31),e.qZA()()()()()()()}if(2&j){const m=e.oxw();let M,q,Ie,qe,Xt,rn,Ln,Or,Vn;e.xp6(7),e.Q6J("src",e.xi3(8,27,null!==(M=m.patientInfo.avatarUrl)&&void 0!==M?M:m.noAvatar,"url"),e.LSH),e.xp6(3),e.AsE("",m.patientInfo.firstName," ",m.patientInfo.lastName,""),e.xp6(10),e.Oqu(0===m.patientInfo.gender?"Male":"Female"),e.xp6(5),e.hij(" ",e.lcZ(26,30,m.patientInfo.birthday)," years old"),e.xp6(6),e.Oqu(e.lcZ(32,32,m.patientInfo.height)),e.xp6(6),e.Oqu(m.patientInfo.weight+" lb"),e.xp6(5),e.Oqu(m.patientInfo.waist+" in"),e.xp6(13),e.AsE("",null==(q=m.getVitalDetail("8310-5"))?null:q.value," ",null==(q=m.getVitalDetail("8310-5"))?null:q.uom,""),e.xp6(2),e.Oqu(e.xi3(58,34,null==(Ie=m.getVitalDetail("8310-5"))?null:Ie.issued,"MM/dd/yyyy")),e.xp6(6),e.AsE("",null==(qe=m.getVitalDetail("20564-1"))?null:qe.value," ",null==(qe=m.getVitalDetail("20564-1"))?null:qe.uom,""),e.xp6(2),e.Oqu(e.xi3(66,37,null==(Xt=m.getVitalDetail("20564-1"))?null:Xt.issued,"MM/dd/yyyy")),e.xp6(6),e.AsE("",null==(rn=m.getVitalDetail("8867-4"))?null:rn.value," ",null==(rn=m.getVitalDetail("8867-4"))?null:rn.uom,""),e.xp6(2),e.Oqu(e.xi3(74,40,null==(Ln=m.getVitalDetail("8867-4"))?null:Ln.issued,"MM/dd/yyyy")),e.xp6(6),e.AsE("",null==(Or=m.getVitalDetail("85354-9"))?null:Or.valueToStr," ",null==(Or=m.getVitalDetail("85354-9"))?null:Or.uom,""),e.xp6(2),e.Oqu(e.xi3(82,43,null==(Vn=m.getVitalDetail("85354-9"))?null:Vn.issued,"MM/dd/yyyy")),e.xp6(9),e.Q6J("selectedIndex",0),e.xp6(3),e.Q6J("firebaseId",m.patientInfo.firebaseUserId),e.xp6(3),e.Q6J("patientInfo",m.patientInfo),e.xp6(3),e.Q6J("patientInfo",m.patientInfo),e.xp6(3),e.Q6J("patientInfo",m.patientInfo)("visitHistories",m.visitHistories),e.xp6(3),e.Q6J("patientInfo",m.patientInfo)}}let Bt=(()=>{class j{constructor(m,M,q){this._doctorService=m,this._videoService=M,this._dialog=q,this.noAvatar="assets/images/users/no-avatar.png",this.vitals=[],this.visitHistories=[],this.subscriptions=[]}ngOnInit(){this.getPatientInfo(),this.getVitals(),this.getVisitHistories()}getPatientInfo(){!this.userId||this._doctorService.getPatientInfo(this.userId).subscribe(m=>{this.patientInfo=m})}getVisitHistories(){!this.userId||this._videoService.getVisitHistories(this.userId).subscribe(m=>{this.visitHistories=m})}getVitals(){!this.userId||this._doctorService.getVitals(this.userId).subscribe(m=>{this.vitals=m})}getVitalDetail(m){var M,q;if(!this.vitals||!this.vitals.length)return;const Ie=this.vitals.filter(function(qe){return qe.code===m})[0];if(Ie&&"85354-9"===m){const qe=null===(M=Ie.components)||void 0===M?void 0:M.filter(function(rn){return"8480-6"===rn.code})[0],Xt=null===(q=Ie.components)||void 0===q?void 0:q.filter(function(rn){return"8462-4"===rn.code})[0];Ie.uom=null==qe?void 0:qe.uom,Ie.valueToStr=`${null==qe?void 0:qe.value}/${null==Xt?void 0:Xt.value}`}return Ie}onMedicationHistoryClick(m){var M;4!=m.index||null!==(M=this.patientInfo)&&void 0!==M&&M.eazyscriptId||this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"This patient doesn't have an Eazyscript account.",headerText:"Eazyscript account"}})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Lr.Q),e.Y36(Br),e.Y36(Nn.uw))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-patient-info"]],inputs:{userId:"userId"},decls:1,vars:1,consts:[["class","patient-info overflow-hidden",4,"ngIf"],[1,"patient-info","overflow-hidden"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","col-md-4","flex-column","flex-sm-row","flex-md-column","col-12"],[1,"personal-info","d-flex","flex-column","flex-grow-1","bg-item","overflow-auto"],[1,"overflow-auto","flex-grow-1"],[1,"general","flex-grow-1"],[1,"avatar"],["width","80","height","80",3,"src"],[1,"name"],[1,"status"],[1,"other-info","flex-grow-1"],[1,"table"],[1,"item-title"],[1,"desc"],[1,"my-2","d-none","d-md-block","clearfix"],[1,"vitals","d-flex","bg-item"],[1,"title"],[1,"vital-items"],[1,"date"],[1,"col-md-8","col-12","mt-md-0","mt-3","ps-md-0"],[1,"detail-info","d-flex"],[1,"col-12",3,"selectedIndex","selectedTabChange"],["label","Health Data"],[1,"bg-item","height-bottom","d-flex"],[1,"flex-grow-1","overflow-auto",3,"firebaseId"],["label","General"],[1,"bg-item","height-bottom","h-100","d-flex"],[1,"flex-grow-1","overflow-auto",3,"patientInfo"],["label","Insurance Info"],[1,"bg-item","height-bottom"],[3,"patientInfo"],["label","Visit History"],[1,"bg-item","height-bottom","h-100","d-flex","overflow-auto"],[1,"flex-grow-1","overflow-auto",3,"patientInfo","visitHistories"],["label","Medication History"]],template:function(m,M){1&m&&e.YNc(0,Qe,106,46,"div",0),2&m&&e.Q6J("ngIf",M.patientInfo)},dependencies:[n.O5,it.SP,it.uX,xn,Si,mo,Xo,yt,n.uU,ft,Io,ut.y],styles:[".patient-info[_ngcontent-%COMP%]{margin:0 15px 15px;font-family:Google Sans,sans-serif!important;flex:1 1 100%;display:flex}.patient-info[_ngcontent-%COMP%]     .visit-history{font-family:Google Sans,sans-serif!important}.patient-info[_ngcontent-%COMP%]     .contact{font-family:Google Sans,sans-serif!important}.patient-info[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:100%}.patient-info[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{color:#707070}.patient-info[_ngcontent-%COMP%]   .bg-item[_ngcontent-%COMP%]{background:white;border:2px solid #FFFFFF;box-shadow:1px 1px 2px #00000014;padding:15px 20px}.patient-info[_ngcontent-%COMP%]   .bg-item.height-bottom[_ngcontent-%COMP%]{height:100%}@media (max-width: 767.98px){.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]{height:auto!important;width:50%}}@media (max-width: 575.98px){.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]{width:100%}}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .general[_ngcontent-%COMP%]{text-align:center}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .general[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .general[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:15px;font-weight:700;font-size:16px;line-height:27px}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .general[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#14b470}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-info[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-info[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding-left:0}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-info[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.desc[_ngcontent-%COMP%]{text-align:right;font-weight:700}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-item[_ngcontent-%COMP%]{margin:10px 0;min-height:24px}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline;float:left}.patient-info[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   .other-item[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{display:inline;float:right;font-weight:700}@media (max-width: 767.98px){.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]{height:auto!important;width:50%}}@media (max-width: 575.98px){.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]{width:100%}}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-bottom:0}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:0;padding-left:0;padding-bottom:0}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.item-title[_ngcontent-%COMP%]{width:30%}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.desc[_ngcontent-%COMP%]{font-weight:700}.patient-info[_ngcontent-%COMP%]   .vitals[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.date[_ngcontent-%COMP%]{text-align:right}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-header-pagination-before, .patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-header-pagination-after{padding:0}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header{border-bottom:0!important}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-labels .mat-tab-label{border:1px solid #EDEDED;background:#ffffff}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-labels .mat-tab-label.mat-tab-label-active{background:#F80D38;opacity:1!important;color:#fff}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-list .mat-ink-bar{visibility:hidden!important}.patient-info[_ngcontent-%COMP%]     mat-tab-group mat-tab-header .mat-tab-list .mat-tab-label-content{font-weight:400!important;font-size:16px}.patient-info[_ngcontent-%COMP%]     .patient-info .visit-history{font-family:Google Sans,sans-serif!important}.patient-info[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]{height:100%}.patient-info[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]    >mat-tab-group .mat-tab-body-wrapper{flex:1;position:relative;overflow:hidden;display:flex;transition:height .5s cubic-bezier(.35,0,.25,1)}"]}),j})();const br=["appointmentPage"],Ut=["appList"],fr=["appFilter"];function xi(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",2,3)(2,"div",4,5)(4,"app-appointment-filter",6),e.NdJ("rangeDateChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onDateRangeChange(q))})("statusChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onStatusChange(q))})("filterAppt",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.filterAppt(q))}),e.qZA()(),e.TgZ(5,"div",7,8)(7,"app-appointment-list",9),e.NdJ("viewProfile",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onViewProfile(q))})("scroll",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.onScroll())})("cancelAppointment",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onCancelAppointment(q))}),e.qZA()()()}if(2&j){const m=e.oxw();e.xp6(4),e.Q6J("range",m.range)("statusSelected",m.status),e.xp6(3),e.Q6J("appointments",m.appointments)("status",m.status)("hasData",m.hasData)("isProcessing",m.isProcessing)}}function ci(j,U){if(1&j&&(e.TgZ(0,"div",10),e._UZ(1,"app-patient-info",11),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.Q6J("userId",m.viewUserId)}}let Ur=(()=>{class j{constructor(m,M,q,Ie,qe,Xt,rn,Ln){this._videoService=m,this._backShareService=M,this._dataShareService=q,this._notificationService=Ie,this._opentokService=qe,this._dialog=Xt,this._stateService=rn,this._router=Ln,this.appointments=[],this.start=jt_startOfMonth(),this.end=jt_endOfMonth(),this.take=20,this.hasMore=!1,this.hasData=!0,this.isProcessing=!1,this.status=qt.UpComing,this.range=new C.cw({start:new C.NI(jt_startOfMonth()),end:new C.NI(jt_endOfMonth())}),this.filterAppointment="",this.viewUserId=void 0,this._backShareService.change(!1)}ngAfterViewInit(){this.calculatorHeight()}calculatorHeight(){this.appList&&(this.appList.nativeElement.style.height=`calc(100% - ${this.appFilter.nativeElement.offsetHeight}px)`)}onResize(){this.calculatorHeight()}ngOnInit(){this.getAppointments(!0),this._backShareService.current.subscribe(m=>{m||(this.viewUserId=void 0),setTimeout(()=>{this.calculatorHeight()})}),this._dataShareService.currentMessage.subscribe(m=>{const M=null==m?void 0:m.notificationType;if(!M)return;const q=m.message;M<gn.NewAppointment||M>gn.CancelAppointment||((this.status===qt.UpComing||this.status===qt.Cancelled&&M===gn.CancelAppointment)&&(this.getAppointments(!0),this._notificationService.success(q)),this._dataShareService.changeMessage(null))}),this._videoService.getPendingCallAppointment().subscribe(m=>{if(m){const M=this._dialog.open(li,{panelClass:"custom-dialog",width:"500px",data:m});M.disableClose=!0,M.componentInstance.onRejoinSubmit.subscribe(()=>{this._stateService.videoCallPublisherAudioIsOn.next(!0),this._stateService.videoCallPublisherVideoIsOn.next(!0),this._router.navigate(["video-chat"],{queryParams:{roomName:m.roomName,appointmentId:m.appointmentId,patientId:m.patientId}})}),M.componentInstance.onEndSubmit.subscribe(()=>{this._opentokService.endVisit({appointmentId:m.appointmentId,patientId:m.patientId,subjective:"",objective:"",assessment:"",plan:""}).then(()=>{this.getAppointments(!0),this._opentokService.getOpenTokSession(m.roomName).subscribe(Ie=>{const qe=OT.initSession(Ie.apiKey,Ie.sessionId);qe.connect(this._opentokService.token,Xt=>{Xt?console.log(`session.connect : ${Xt});\n                    }`):qe.signal({type:"end",data:""},rn=>{rn?console.log("ERROR sending signal:",rn.name,rn.message):qe.disconnect()})})},Ie=>{console.error(Ie)})})})}})}onViewProfile(m){this.viewUserId=m}onStatusChange(m){this.status=m,this.getAppointments(!0)}onDateRangeChange(m){this.start=m.start,this.end=m.end,this.getAppointments(!0)}getAppointments(m){this.isProcessing=!0,m&&(this.appointments=[]);let M="UpComing"!==this.status;const q={fromDate:(0,n.p6)(this.start,"yyyy-MM-dd","en-US"),toDate:(0,n.p6)(this.end,"yyyy-MM-dd","en-US"),skip:m?0:this.appointments.length,take:this.take,appointmentStatus:this.status,patientName:this.filterAppointment,orderDesc:M};this._videoService.getAppointments(q).subscribe(Ie=>{this.hasMore=Ie.hasMore,this.appointments=this.appointments.concat(Ie.items),this.isProcessing=!1,this.hasData=this.appointments.length>0})}onScroll(){this.hasMore&&!this.isProcessing&&this.getAppointments(!1)}onCancelAppointment(m){this._videoService.cancelAppointment(m).subscribe(()=>{this.getAppointments(!0)})}filterAppt(m){this.filterAppointment=m,this.getAppointments(!0)}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Br),e.Y36(v.Y),e.Y36(ei._),e.Y36(vi.g),e.Y36(ai),e.Y36(Nn.uw),e.Y36(b.b),e.Y36(i.F0))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-appointment"]],viewQuery:function(m,M){if(1&m&&(e.Gf(br,5),e.Gf(Ut,5),e.Gf(fr,5)),2&m){let q;e.iGM(q=e.CRH())&&(M.appointmentPage=q.first),e.iGM(q=e.CRH())&&(M.appList=q.first),e.iGM(q=e.CRH())&&(M.appFilter=q.first)}},hostBindings:function(m,M){1&m&&e.NdJ("resize",function(Ie){return M.onResize(Ie)},!1,e.Jf7)},decls:2,vars:2,consts:[["class","appointment-page h-100 mt-0 d-flex flex-column",4,"ngIf"],["class","h-100 d-flex",4,"ngIf"],[1,"appointment-page","h-100","mt-0","d-flex","flex-column"],["appointmentPage",""],[1,"appointment-filter"],["appFilter",""],[3,"range","statusSelected","rangeDateChange","statusChange","filterAppt"],[1,"appointment-content","pb-3","flex-grow-1"],["appList",""],[1,"h-100","d-flex",3,"appointments","status","hasData","isProcessing","viewProfile","scroll","cancelAppointment"],[1,"h-100","d-flex"],[1,"flex-grow-1","d-flex","w-100",3,"userId"]],template:function(m,M){1&m&&(e.YNc(0,xi,8,6,"div",0),e.YNc(1,ci,2,1,"div",1)),2&m&&(e.Q6J("ngIf",!M.viewUserId),e.xp6(1),e.Q6J("ngIf",M.viewUserId))},dependencies:[Xr,He,Bt,n.O5],styles:[".appointment-page[_ngcontent-%COMP%]{margin:0 15px}"]}),j})();const $n=["publisherDiv"],Pr=function(j){return{publishing:j}};let Kr=(()=>{class j{constructor(m){this._opentokService=m,this.audioIsOn=!1,this.videoIsOn=!1,this.audioIsOnMuted=new e.vpe,this.checkAudioMuted=!1,this.publishing=!1}ngAfterViewInit(){this.publisher=Qn.initPublisher(this.publisherDiv.nativeElement,{insertMode:"append",publishAudio:this.audioIsOn,publishVideo:this.videoIsOn}),this.session&&(this.sessionConnected&&this.publish(),this.session.on("sessionConnected",()=>{this.sessionConnected=!0,this.publish()}),this.session.on("sessionDisconnected",()=>{this.sessionConnected=!1}))}ngAfterViewChecked(){}publish(){this.session.publish(this.publisher,m=>{m?console.log("Video publisher : "+m):this.publishing=!0})}setAudio(m){this.publisher.publishAudio(m),this.audioIsOn=m}setVideo(m){this.publisher.publishVideo(m),this.videoIsOn=m}destroy(){var m;null===(m=this.publisher.session)||void 0===m||m.unpublish(this.publisher)}joinCallAgain(){this.session.publish(this.publisher)}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(ai))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-publisher"]],viewQuery:function(m,M){if(1&m&&e.Gf($n,5),2&m){let q;e.iGM(q=e.CRH())&&(M.publisherDiv=q.first)}},inputs:{session:"session"},outputs:{audioIsOnMuted:"audioIsOnMuted"},decls:2,vars:3,consts:[["id","publisherDivContainer",1,"publisher",3,"ngClass"],["publisherDiv",""]],template:function(m,M){1&m&&e._UZ(0,"div",0,1),2&m&&e.Q6J("ngClass",e.VKq(1,Pr,M.publishing))},dependencies:[n.mk,k.oO],styles:[".publisher[_ngcontent-%COMP%]{height:15%;width:15%;bottom:1px;z-index:1}"]}),j})();const ii=["subscriberDiv"];let Et=(()=>{class j{constructor(){this.audioIsOnMuted=new e.vpe}ngAfterViewInit(){this.subscriber=this.session.subscribe(this.stream,this.subscriberDiv.nativeElement,{width:"100%",height:"100px"},m=>{this.onHandleError(m)})}onHandleError(m){if(m)console.log(m.message);else{this.subscriberDiv.nativeElement.parentElement.style.width="100%",this.subscriberDiv.nativeElement.parentElement.style.height="100%";const M=document.getElementById("subscriberDivContainer");if(M){const q=M.getElementsByTagName("video")[0];q&&(q.onvolumechange=Ie=>{this.audioIsOnMuted.emit(Ie.target.muted)})}}}setAudio(m){this.subscriber.subscribeToAudio(m)}}return j.\u0275fac=function(m){return new(m||j)},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-subscriber"]],viewQuery:function(m,M){if(1&m&&e.Gf(ii,5),2&m){let q;e.iGM(q=e.CRH())&&(M.subscriberDiv=q.first)}},inputs:{session:"session",stream:"stream"},outputs:{audioIsOnMuted:"audioIsOnMuted"},decls:2,vars:0,consts:[["id","subscriberDivContainer",1,"subscriber"],["subscriberDiv",""]],template:function(m,M){1&m&&e._UZ(0,"div",0,1)},styles:[".subscriber[_ngcontent-%COMP%]{height:100%!important;width:100%!important;left:0;z-index:0}"]}),j})();function fo(j,U){if(1&j&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&j){const m=U.$implicit;e.xp6(1),e.hij(" ",m," ")}}function Go(j,U){if(1&j&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,fo,2,1,"div",8),e.qZA()()),2&j){const m=U.$implicit;e.xp6(2),e.hij(" ",m.question," "),e.xp6(2),e.Q6J("ngForOf",m.answers)}}let Ii=(()=>{class j{constructor(m){this._videoService=m,this.questionAnswers=[]}ngOnChanges(m){m.appointmentId&&this.appointmentId&&this.binQuestionairesInfo()}binQuestionairesInfo(){!this.appointmentId||this._videoService.getAppointmentQuestionaire(this.appointmentId).subscribe(m=>{this.questionAnswers=m},m=>{console.error(m)})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Br))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-video-questions-info"]],inputs:{appointmentId:"appointmentId"},features:[e.TTD],decls:7,vars:1,consts:[[1,"video-questions"],[1,"icon"],["width","30","src","assets/images/icons/ic-questionnaire.png"],[1,"questions"],["class","detail",4,"ngFor","ngForOf"],[1,"detail"],[1,"title"],[1,"answers"],["class","answer",4,"ngFor","ngForOf"],[1,"answer"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"span"),e._uU(4,"Questionaire"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,Go,5,2,"div",4),e.qZA()()),2&m&&(e.xp6(6),e.Q6J("ngForOf",M.questionAnswers))},dependencies:[n.sg],styles:[".video-questions[_ngcontent-%COMP%]{font-size:14px}.video-questions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1fb5eb}.video-questions[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{width:100%;margin:15px 0}.video-questions[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:10px;border-top-left-radius:15px;border-top-right-radius:15px;margin-bottom:3px;background:#F2F2F2;font-weight:700}.video-questions[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .answers[_ngcontent-%COMP%]{padding:10px;border-bottom-left-radius:15px;border-bottom-right-radius:15px;margin-bottom:5px;background:#F2F2F2}"]}),j})();const _n=["chatHistory"],Pi=["txtMessage"];let Wr=(()=>{class j{constructor(m,M){this._opentokService=m,this._authService=M,this.message=""}ngOnInit(){this.doctorInfor=this._authService.getUser()}ngOnChanges(m){m.session&&this.session&&this.initChatHistory(),m.scrollToBottom&&m.scrollToBottom.currentValue&&setTimeout(()=>this.chatHistory.nativeElement.scrollTop=this.chatHistory.nativeElement.scrollHeight)}initChatHistory(){this._opentokService.getChatHistory(this.session.sessionId).then(m=>{m&&m.forEach(M=>{this.addMessageToChatHistory(M)}),setTimeout(()=>this.chatHistory.nativeElement.scrollTop=this.chatHistory.nativeElement.scrollHeight,500)}),this.session.on("signal:chat",m=>{var M;const q=document.createElement("div"),Ie=m.from.connectionId===(null===(M=this.session.connection)||void 0===M?void 0:M.connectionId),qe=(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}).toLowerCase();q.innerHTML=Ie?`<div class="d-flex justify-content-end"><div class="local"><pre class="text">${m.data}</pre><div class="time">${qe}</div></div></div>`:`<div class="d-flex justify-content-start"><div class="remote"><pre class="text">${m.data}</pre><div class="time">${qe}</div></div></div>`,this.chatHistory.nativeElement.appendChild(q.firstChild),this.chatHistory.nativeElement.scrollTop=this.chatHistory.nativeElement.scrollHeight})}addMessageToChatHistory(m){const M=document.createElement("div"),q=m.userName.toLowerCase()===this.doctorInfor.id.toString(),Ie=new Date(m.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}).toLowerCase();M.innerHTML=q?`<div class="d-flex justify-content-end"><div class="local"><pre class="text">${m.chatMessage}</pre><div class="time">${Ie}</div></div></div>`:`<div class="d-flex justify-content-start"><div class="remote"><pre class="text">${m.chatMessage}</pre><div class="time">${Ie}</div></div></div>`,this.chatHistory.nativeElement.appendChild(M.firstChild)}send(m){if(null==m||m.preventDefault(),this.message&&""!=this.message.trim()){const M=this.message;this.message="",this.session.signal({type:"chat",data:M},q=>{if(q)console.log("ERROR sending signal:",q.name,q.message);else{const Ie={sessionId:this.session.sessionId,chatMessage:M,userName:this.doctorInfor.id.toString()};this._opentokService.sendChatHistory(Ie)}}),this.txtMessage.nativeElement.focus()}}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(ai),e.Y36(p.e))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-video-conversation"]],viewQuery:function(m,M){if(1&m&&(e.Gf(_n,5),e.Gf(Pi,7)),2&m){let q;e.iGM(q=e.CRH())&&(M.chatHistory=q.first),e.iGM(q=e.CRH())&&(M.txtMessage=q.first)}},inputs:{session:"session",scrollToBottom:"scrollToBottom"},features:[e.TTD],decls:8,vars:3,consts:[[1,"video-conversations","h-100","w-100"],[1,"d-flex","flex-column","scroll-y","w-100"],["chatHistory",""],[1,"d-flex","py-1","border","px-3","end"],["chatAction",""],["type","text","autosize","","rows","2","placeholder","Type a message...","id","message","name","message",1,"chat-text-message","flex-fill","border-0",3,"ngModel","ngModelChange","keydown.enter"],["txtMessage",""],[1,"border-0","btn-send-chat",3,"click"]],template:function(m,M){if(1&m&&(e.TgZ(0,"div",0),e._UZ(1,"div",1,2),e.TgZ(3,"div",3,4)(5,"textarea",5,6),e.NdJ("ngModelChange",function(Ie){return M.message=Ie})("keydown.enter",function(Ie){return M.send(Ie)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return M.send()}),e.qZA()()()),2&m){const q=e.MAs(4);e.xp6(1),e.Udp("height","calc(100% - "+q.offsetHeight+"px)"),e.xp6(4),e.Q6J("ngModel",M.message)}},dependencies:[C.Fj,C.JJ,C.On,In.Rk]}),j})();function pn(j,U){if(1&j&&(e.TgZ(0,"form",1)(1,"div",2,3)(3,"div",4)(4,"span"),e._uU(5,"Subjective"),e.qZA(),e._UZ(6,"textarea",5),e.qZA(),e.TgZ(7,"div",6)(8,"span"),e._uU(9,"Objective"),e.qZA(),e._UZ(10,"textarea",7),e.qZA(),e.TgZ(11,"div",6)(12,"span"),e._uU(13,"Assessment"),e.qZA(),e._UZ(14,"textarea",8),e.qZA(),e.TgZ(15,"div",6)(16,"span"),e._uU(17,"Plan"),e.qZA(),e._UZ(18,"textarea",9),e.qZA()()()),2&j){const m=e.oxw();e.Q6J("formGroup",m.soapForm)}}let wo=(()=>{class j{constructor(m){this.dataShareService=m,this.soapDataChange=new e.vpe,this.soapForm=new C.cw({subjective:new C.NI,objective:new C.NI,assessment:new C.NI,plan:new C.NI});const M=this.dataShareService.getSoapData();M&&this.soapForm.setValue(M),this.soapForm.valueChanges.subscribe(()=>{this.soapDataChange.emit(this.soapForm.value)})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(ei._))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-video-soap"]],outputs:{soapDataChange:"soapDataChange"},decls:1,vars:1,consts:[["class","video-soap",3,"formGroup",4,"ngIf"],[1,"video-soap",3,"formGroup"],["id","soapNoteContainer",1,"h-100","w-100","d-flex","flex-column","softnote","softnote-height"],["container",""],[1,"flex-fill","d-flex","flex-column"],["rows","3","cols","50","formControlName","subjective",1,"h-100","border"],[1,"flex-fill","d-flex","flex-column","mt-3"],["rows","3","cols","50","formControlName","objective",1,"h-100","border"],["rows","3","cols","50","formControlName","assessment",1,"h-100","border"],["rows","3","cols","50","formControlName","plan",1,"h-100","border"]],template:function(m,M){1&m&&e.YNc(0,pn,19,1,"form",0),2&m&&e.Q6J("ngIf",M.soapForm)},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,n.O5]}),j})();const vo=["waitingScreen"],ui=["videoContainer"],Yn=["videoToolbar"],hi=["videoSubscriber"],Ci=["videoPublisher"],_i=["chatContainer"],ro=["soapNoteContainer"],qi=["icon"],yo=["container"];function Ui(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"app-subscriber",69,70),e.NdJ("audioIsOnMuted",function(q){e.CHM(m);const Ie=e.oxw(3);return e.KtG(Ie.subscriberAudioIsMuted(q))}),e.qZA()}if(2&j){const m=U.$implicit,M=e.oxw(3);e.Q6J("stream",m)("session",M.session)}}function Yi(j,U){1&j&&(e.O4$(),e._UZ(0,"line",71))}function Ro(j,U){1&j&&(e.O4$(),e._UZ(0,"line",72))}function io(j,U){1&j&&(e.O4$(),e._UZ(0,"circle",73))}function Xi(j,U){1&j&&(e.O4$(),e._UZ(0,"path",74))}function Hi(j,U){1&j&&(e.O4$(),e._UZ(0,"circle",75))}function oo(j,U){1&j&&(e.O4$(),e._UZ(0,"path",76))}function eo(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",30,31)(2,"div",32)(3,"div",33,34)(5,"h5",35),e._uU(6),e.qZA()(),e.YNc(7,Ui,2,2,"app-subscriber",36),e.TgZ(8,"app-publisher",37,38),e.NdJ("audioIsOnMuted",function(q){e.CHM(m);const Ie=e.oxw(2);return e.KtG(Ie.publisherAudioIsMuted(q))}),e.qZA()(),e.TgZ(10,"div",39,40)(12,"div",41)(13,"ul",42)(14,"li",43)(15,"span"),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",44)(18,"button",45),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.toggleAudio())}),e.O4$(),e.TgZ(19,"svg",46),e._UZ(20,"path",47)(21,"path",48),e.YNc(22,Yi,1,0,"line",49),e.qZA()(),e.kcU(),e.TgZ(23,"button",50),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.toggleVideo())}),e.O4$(),e.TgZ(24,"svg",25),e._UZ(25,"path",26)(26,"path",27),e.YNc(27,Ro,1,0,"line",28),e.qZA()(),e.kcU(),e.TgZ(28,"button",51),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.dropCall())}),e.O4$(),e.TgZ(29,"svg",52),e.YNc(30,io,1,0,"circle",53),e.YNc(31,Xi,1,0,"path",54),e.YNc(32,Hi,1,0,"circle",55),e.YNc(33,oo,1,0,"path",56),e.qZA()(),e.kcU(),e.TgZ(34,"button",57),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.openFullscreen())}),e.O4$(),e.TgZ(35,"svg",58)(36,"g",59),e._UZ(37,"path",60)(38,"path",61)(39,"path",62)(40,"path",63)(41,"path",64)(42,"path",65)(43,"path",66)(44,"path",67),e.qZA()()(),e.kcU(),e.TgZ(45,"button",68),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.switchBetweenVideoAndChat())}),e.TgZ(46,"mat-icon"),e._uU(47,"chat_bubble_outline"),e.qZA()()()()()}if(2&j){const m=e.oxw(2);e.ekj("d-none",m.showChat)("d-md-flex",m.showChat),e.xp6(6),e.Oqu(m.waitingMessage),e.xp6(1),e.Q6J("ngForOf",m.streams),e.xp6(1),e.Q6J("session",m.session),e.xp6(8),e.Oqu(m.counter),e.xp6(6),e.Q6J("ngIf",!m.audioIsOn),e.xp6(5),e.Q6J("ngIf",!m.videoIsOn),e.xp6(3),e.Q6J("ngIf",m.isInCall),e.xp6(1),e.Q6J("ngIf",m.isInCall),e.xp6(1),e.Q6J("ngIf",!m.isInCall),e.xp6(1),e.Q6J("ngIf",!m.isInCall)}}function ni(j,U){1&j&&(e.TgZ(0,"button"),e.O4$(),e.TgZ(1,"svg",77),e._UZ(2,"path",78),e.qZA()())}function Ce(j,U){1&j&&(e.TgZ(0,"button"),e.O4$(),e.TgZ(1,"svg",79),e._UZ(2,"path",80),e.qZA()())}function be(j,U){1&j&&(e.TgZ(0,"button"),e.O4$(),e.TgZ(1,"svg",79),e._UZ(2,"path",81),e.qZA()())}function xe(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(m);const q=e.oxw(2);return e.KtG(q.gotoPatientProfile())}),e.O4$(),e.TgZ(1,"svg",79),e._UZ(2,"path",83),e.qZA()()}}function Fe(j,U){1&j&&(e.O4$(),e._UZ(0,"line",72))}function _e(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"div",2),e.NdJ("beforeunload",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.handleBeforeWindowUnload(q))},!1,e.Jf7),e.TgZ(1,"div",3),e.YNc(2,eo,48,14,"div",4),e.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9),e._uU(8,"Prescription"),e.qZA(),e.TgZ(9,"div",10),e._uU(10," Don't forget to add prescriptions to the patient "),e.qZA()(),e.TgZ(11,"div",11)(12,"button",12),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.addPrescription())}),e._uU(13,"Add prescription"),e.qZA()()(),e.TgZ(14,"div",13),e._UZ(15,"img",14),e.qZA()(),e.TgZ(16,"div",15)(17,"mat-tab-group",16)(18,"mat-tab"),e.YNc(19,ni,3,0,"ng-template",17),e.TgZ(20,"div",18),e._UZ(21,"app-video-conversation",19),e.qZA()(),e.TgZ(22,"mat-tab"),e.YNc(23,Ce,3,0,"ng-template",17),e.TgZ(24,"div",20),e._UZ(25,"app-video-questions-info",21),e.qZA()(),e.TgZ(26,"mat-tab"),e.YNc(27,be,3,0,"ng-template",17),e.TgZ(28,"div",20)(29,"app-video-soap",22),e.NdJ("soapDataChange",function(q){e.CHM(m);const Ie=e.oxw();return e.KtG(Ie.onSoapDataChange(q))}),e.qZA()()(),e.TgZ(30,"mat-tab"),e.YNc(31,xe,3,0,"ng-template",17),e.qZA()()(),e.TgZ(32,"div",23)(33,"button",24),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.isPendingCall?null:q.switchBetweenVideoAndChat())}),e.O4$(),e.TgZ(34,"svg",25),e._UZ(35,"path",26)(36,"path",27),e.YNc(37,Fe,1,0,"line",28),e.qZA()(),e.kcU(),e.TgZ(38,"button",29),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.endVisit())}),e._uU(39,"End Visit"),e.qZA()()()()()}if(2&j){const m=e.oxw();e.xp6(2),e.Q6J("ngIf",m.session),e.xp6(1),e.Q6J("ngClass",m.showChat?"d-flex":"d-none"),e.xp6(14),e.Q6J("selectedIndex",0),e.xp6(4),e.Q6J("scrollToBottom",m.showChat)("session",m.session),e.xp6(4),e.Q6J("appointmentId",m.appointmentId),e.xp6(12),e.Q6J("ngIf",!m.videoIsOn&&m.isPendingCall)}}function ot(j,U){if(1&j&&(e.TgZ(0,"div",84),e._UZ(1,"app-patient-info",85),e.qZA()),2&j){const m=e.oxw();e.xp6(1),e.Q6J("userId",m.patientId)}}let It=(()=>{class j{constructor(m,M,q,Ie,qe,Xt,rn,Ln,Or,Vn,mn,ir,Nr,oi){this.ref=m,this.elementRef=M,this._opentokService=q,this._route=Ie,this._router=qe,this._document=Xt,this._dialog=rn,this._doctorService=Ln,this._stateService=Or,this._videoService=Vn,this._authService=mn,this._backShareService=ir,this._utilService=Nr,this._dataShareService=oi,this.title="Doctor Platform - Video Chat",this.streams=[],this.message="",this.waitingMessage="Waiting for patient ...",this.connected=!1,this._self=this,this.audioIsOn=!1,this.videoIsOn=!1,this.isInCall=!0,this.isFullScreenMode=!1,this.showPatientProfile=!1,this.subscriptions=[],this.checkVideoRender=!1,this.checkSubscriberRender=!1,this.showChat=!1,this._stateService.showPatientInfoInHeader.next(!0),this.changeDetectorRef=m;const to=this._utilService.getUrlParams().subscribe(Vr=>{var no,po,Do,ji;this.roomName=null===(no=null==Vr?void 0:Vr.find(Ki=>"roomname"===Ki.key))||void 0===no?void 0:no.value,this.appointmentId=null===(po=null==Vr?void 0:Vr.find(Ki=>"appointmentid"===Ki.key))||void 0===po?void 0:po.value,this.patientId=null===(Do=null==Vr?void 0:Vr.find(Ki=>"patientid"===Ki.key))||void 0===Do?void 0:Do.value,this.isPendingCall=null===(ji=null==Vr?void 0:Vr.find(Ki=>"pendingcall"===Ki.key))||void 0===ji?void 0:ji.value});this.subscriptions.push(to),this.getPatientInfo()}ngAfterViewInit(){this.startTimer();const m=this._videoService.getAppointment(this.appointmentId).subscribe(M=>{if(M){const q=((j,U)=>(j.setTime(j.getTime()+6e4*U),j))(new Date,15),Ie=new Date(M.time);M.status===qt.DroppedCall&&Ie<q&&M.appointmentCallId>0&&M.doctorJoinedAt&&(this.isPendingCall=!0)}});this.subscriptions.push(m)}ngAfterViewChecked(){!this.checkVideoRender&&this.publisher&&(this.audioIsOn=this._stateService.videoCallPublisherAudioIsOn.value,this.publisher.setAudio(this.audioIsOn),this.videoIsOn=this._stateService.videoCallPublisherVideoIsOn.value,this.publisher.setVideo(this.videoIsOn),this.checkVideoRender=!0),!this.checkSubscriberRender&&this.subscriber&&(this.subscriber.setAudio(this._stateService.videoCallSubscriberAudioIsOn.value),this.checkSubscriberRender=!0),this.isPendingCall&&this.videoToolbar&&(this.showChat=!0)}ngOnInit(){this._stateService.isVideoCallScreen.next(!0),this.componentHasInit=!0,this.doctorInfor=this._authService.getUser();const m=this._stateService.showPatientProfileInVideoCallScreen.subscribe(M=>{this.showPatientProfile=M,M||this.initSession()});this.subscriptions.push(m)}ngOnDestroy(){this.componentHasInit&&(this._stateService.isVideoCallScreen.next(!1),this._stateService.patientInfo.next(null),this._stateService.showPatientInfoInHeader.next(!1),this._stateService.headerInWhite.next(!1),this.isEndedVisit||(this.publisher&&(this.publisher.setVideo(!1),this.publisher.setAudio(!1),this.publisher.destroy()),this.session&&this.session.disconnect(),this.streams.length>0&&(this.stream=this.streams[0],this.streams=[])),this.subscriptions.forEach(m=>{m.unsubscribe()}))}initSession(){this._opentokService.getOpenTokSession(this.roomName).subscribe(m=>{this.session=Qn.initSession(m.apiKey,m.sessionId),this.connect(m.token),this.connected=!0,this.publisher&&(this.audioIsOn=this._stateService.videoCallPublisherAudioIsOn.value,this.publisher.setAudio(this.audioIsOn),this.videoIsOn=this._stateService.videoCallPublisherVideoIsOn.value,this.publisher.setVideo(this.videoIsOn)),this.session.on("streamCreated",M=>{this.streams.length<1&&this.streams.push(M.stream),this.changeDetectorRef.detectChanges()}),this.session.on("streamDestroyed",M=>{const q=this.streams.indexOf(M.stream);q>-1&&(this.streams.splice(q,1),this.changeDetectorRef.detectChanges()),this.waitingMessage="The video portion of this visit has ended. Please complete your notes and end the visit."})},m=>{console.log("Unable to connect. Make sure you have updated the config.ts file with your OpenTok details."),console.log(m)})}connect(m){return new Promise((M,q)=>{this.session.connect(m,Ie=>{Ie?q(Ie):M(this.session)})})}disConnect(){this.session.disconnect()}startTimer(){let m=0,M="00",q=0,Ie="00";this.timer=setInterval(()=>{m+=1,60==m&&(q+=1,m=0),M=m>=10?m.toString():`0${m}`,Ie=q>=10?q.toString():`0${q}`,this.counter=`${Ie}:${M}`},1e3)}stopTimer(){clearInterval(this.timer),this.timer=null,this.counter="00:00"}toggleAudio(){const m=this.publisher.audioIsOn;this.publisher.setAudio(!m),this.audioIsOn=this.publisher.audioIsOn,this._stateService.videoCallPublisherAudioIsOn.next(!m)}toggleVideo(){const m=this.publisher.videoIsOn;this.publisher.setVideo(!m),this.videoIsOn=this.publisher.videoIsOn,this._stateService.videoCallPublisherVideoIsOn.next(!m)}dropCall(){this.isInCall?(this.publisher&&(this.publisher.setVideo(!1),this.publisher.setAudio(!1),this.publisher.destroy()),this.streams.length>0&&(this.stream=this.streams[0],this.streams=[]),this.waitingMessage="The video portion of this visit has ended. Please complete your notes and end the visit.",this.stopTimer(),this.videoToolbar.nativeElement.classList.add("d-none"),this.showChat=!0,this.isPendingCall=!0,this.session.signal({type:"drop",data:""},m=>{m?console.log("ERROR sending signal:",m.name,m.message):this.session.disconnect()})):(this.publisher.ngAfterViewInit(),this.streams.push(this.stream),this.waitingMessage="Waiting for patient ...",this.startTimer()),this.isInCall=!this.isInCall}endVisit(){this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"NO",btnOkText:"YES",content:"Don't forgot to add SOAP Note before leaving. Do you want to end this call visit?",headerText:"End Visit"}}).componentInstance.onDialogSubmit.subscribe(()=>{var q,Ie,qe,Xt;this.isEndedVisit=!0,this.session.signal({type:"end",data:""},Ln=>{Ln?console.log("ERROR sending signal:",Ln.name,Ln.message):(this.publisher&&this.publisher.destroy(),this.session&&this.session.disconnect(),this.streams.length>0&&(this.stream=this.streams[0],this.streams=[]))});const rn={appointmentId:this.appointmentId,patientId:this.patientId,subjective:null===(q=this.soapData)||void 0===q?void 0:q.subjective,objective:null===(Ie=this.soapData)||void 0===Ie?void 0:Ie.objective,assessment:null===(qe=this.soapData)||void 0===qe?void 0:qe.assessment,plan:null===(Xt=this.soapData)||void 0===Xt?void 0:Xt.plan};this._opentokService.endVisit(rn).then(()=>{this._router.navigate(["appointment"])})}),this._dataShareService.updateSoapData(0)}onSoapDataChange(m){this.soapData=m,this._dataShareService.updateSoapData(m)}openFullscreen(){this._document.documentElement.requestFullscreen?this._document.documentElement.requestFullscreen():this._document.documentElement.mozRequestFullScreen?this._document.documentElement.mozRequestFullScreen():this._document.documentElement.webkitRequestFullscreen?this._document.documentElement.webkitRequestFullscreen():this._document.documentElement.msRequestFullscreen&&this._document.documentElement.msRequestFullscreen()}closeFullscreen(){this._document.documentElement.exitFullscreen?this._document.exitFullscreen():this._document.mozCancelFullScreen?this._document.mozCancelFullScreen():this._document.webkitExitFullscreen?this._document.webkitExitFullscreen():this._document.msExitFullscreen&&this._document.msExitFullscreen()}fullScreenChange(m){this.isFullScreenMode?(this.videoToolbar.nativeElement.classList.remove("d-none"),this.videoContainer.nativeElement.style.top="",this.videoContainer.nativeElement.style.left="",this.videoContainer.nativeElement.style.position="",this.videoContainer.nativeElement.style.width="",this.videoContainer.nativeElement.style.height="",this.videoContainer.nativeElement.style.zIndex="auto",this._document.getElementById("videoPublisher").style.marginBottom="",this._document.getElementById("videoPublisher").style.marginLeft=""):(this.videoToolbar.nativeElement.classList.add("d-none"),this.videoContainer.nativeElement.style.top="0px",this.videoContainer.nativeElement.style.left="0px",this.videoContainer.nativeElement.style.position="absolute",this.videoContainer.nativeElement.style.width="100%",this.videoContainer.nativeElement.style.height="100%",this.videoContainer.nativeElement.style.zIndex="9999",this._document.getElementById("videoPublisher").style.marginBottom="75px",this._document.getElementById("videoPublisher").style.marginLeft="35px"),this.isFullScreenMode=!this.isFullScreenMode}getPatientInfo(){return(0,ti.mG)(this,void 0,void 0,function*(){this._doctorService.getPatientInfo(this.patientId).subscribe(m=>{this.patientInfo=m,this._stateService.patientInfo.next(m),this._stateService.headerInWhite.next(!0)})})}handleBeforeWindowUnload(m){m.preventDefault(),m.returnValue=!1}gotoPatientProfile(){this.publisher&&(this.publisher.setAudio(!1),this.publisher.setVideo(!1),this.publisher.destroy()),this.session&&this.session.disconnect(),this.streams.length>0&&(this.stream=this.streams[0],this.streams=[]),this._backShareService.change(!0),this._stateService.headerInWhite.next(!1),this._stateService.showPatientProfileInVideoCallScreen.next(!0),this._stateService.showPatientInfoInHeader.next(!1)}subscriberAudioIsMuted(m){this._stateService.videoCallSubscriberAudioIsOn.next(!m)}publisherAudioIsMuted(m){this._stateService.videoCallPublisherVideoIsOn.next(!m),this.audioIsOn=!m}addPrescription(){if(this.doctorInfor.eazyScriptId)if(this.patientInfo.eazyscriptId){const M=this._doctorService.getEazyscriptAuthToken().subscribe(q=>{const Ie={eazyscriptPatientId:this.patientInfo.eazyscriptId,doctorAuthToken:q};q.isVerifiedIDMe?this.showNewPrescription(Ie):this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"Continue",content:"Current prescriber account does not verify ID.Me. Please click \u201cContinue\u201d to complete your ID.Me verification before you are able to prescribe.",headerText:"ID.Me verification"}}).componentInstance.onDialogSubmit.subscribe(()=>{this.showNewPrescription(Ie)})});this.subscriptions.push(M)}else this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"This patient doesn't have an Eazyscript account.",headerText:"Add prescription"}});else this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"Current presciber doesn't have an Eazyscript account.",headerText:"Eazyscript account"}})}switchBetweenVideoAndChat(){this.showChat=!this.showChat}showNewPrescription(m){this._dialog.open(zo,{height:"80%",width:"70%",maxWidth:"70vw",maxHeight:"80vh",data:m})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(ai),e.Y36(i.gz),e.Y36(i.F0),e.Y36(n.K0),e.Y36(Nn.uw),e.Y36(Lr.Q),e.Y36(b.b),e.Y36(Br),e.Y36(p.e),e.Y36(v.Y),e.Y36(c.f),e.Y36(ei._))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-video-chat"]],viewQuery:function(m,M){if(1&m&&(e.Gf(vo,5),e.Gf(ui,5),e.Gf(Yn,5),e.Gf(hi,5),e.Gf(Ci,5),e.Gf(_i,7),e.Gf(ro,7),e.Gf(Kr,5),e.Gf(Et,5),e.Gf(qi,5),e.Gf(yo,5)),2&m){let q;e.iGM(q=e.CRH())&&(M.waitingScreen=q.first),e.iGM(q=e.CRH())&&(M.videoContainer=q.first),e.iGM(q=e.CRH())&&(M.videoToolbar=q.first),e.iGM(q=e.CRH())&&(M.videoSubscriber=q.first),e.iGM(q=e.CRH())&&(M.videoPublisher=q.first),e.iGM(q=e.CRH())&&(M.chatContainer=q.first),e.iGM(q=e.CRH())&&(M.soapNoteContainer=q.first),e.iGM(q=e.CRH())&&(M.publisher=q.first),e.iGM(q=e.CRH())&&(M.subscriber=q.first),e.iGM(q=e.CRH())&&(M.icons=q),e.iGM(q=e.CRH())&&(M.containers=q)}},hostBindings:function(m,M){1&m&&e.NdJ("fullscreenchange",function(Ie){return M.fullScreenChange(Ie)},!1,e.evT)("webkitfullscreenchange",function(Ie){return M.fullScreenChange(Ie)},!1,e.evT)("mozfullscreenchange",function(Ie){return M.fullScreenChange(Ie)},!1,e.evT)("MSFullscreenChange",function(Ie){return M.fullScreenChange(Ie)},!1,e.evT)("beforeunload",function(Ie){return M.handleBeforeWindowUnload(Ie)},!1,e.Jf7)},decls:2,vars:2,consts:[["class","container-fluid video-page h-100 d-flex",3,"beforeunload",4,"ngIf"],["class","h-100 d-flex",4,"ngIf"],[1,"container-fluid","video-page","h-100","d-flex",3,"beforeunload"],[1,"row","h-100-auto","flex-grow-1","w-100"],["class","col-md-6 h-100 col-lg-8 col-12 d-flex flex-column justify-content-end p-0",3,"d-none","d-md-flex",4,"ngIf"],[1,"col-md-6","col-lg-4","col-12","d-md-flex","flex-column","chat-box","h-100",3,"ngClass"],[1,"w-100","h-140px","position-relative"],[1,"bottom-0","top-0","end-0","start-0","prescription","w-100","d-flex","flex-column","position-absolute"],[1,"flex-fill","p-3","position-absolute","top-0","end-0","start-0"],[1,"align-self-start","fw-bold"],[1,"align-self-start"],[1,"flex-fill","p-3","d-flex","position-absolute","bottom-0","end-0","start-0","justify-content-end",2,"z-index","999"],[1,"align-self-end",3,"click"],[1,"w-100","h-100","prescription-bg","position-absolute"],["src","assets/images/health-prescription.png"],[1,"items"],[1,"h-100",3,"selectedIndex"],["mat-tab-label",""],[1,"bg-item","h-100","d-flex","height-bottom"],[1,"h-100","flex-grow-1","w-100",3,"scrollToBottom","session"],[1,"bg-item","height-bottom"],[3,"appointmentId"],[3,"soapDataChange"],[1,"block-end-visit","p-2","p-sm-0","p-md-2","d-flex","justify-content-between","justify-content-md-end","flex-grow-0"],["aria-label","Example icon button with a delete icon",1,"my-md-3","my-sm-2","my-0","end-0","d-flex","align-items-center","border-0","mx-3","d-md-none","message-btn","btn-zoom",3,"click"],["id","Group_1299","data-name","Group 1299","xmlns","http://www.w3.org/2000/svg","width","45","height","45","viewBox","0 0 87.898 87.899"],["id","Path_685","data-name","Path 685","d","M101.673,43.2H82.492a8.745,8.745,0,0,1-8.712-8.712V24.092a8.745,8.745,0,0,1,8.712-8.712h19.181a8.745,8.745,0,0,1,8.712,8.712V34.483A8.707,8.707,0,0,1,101.673,43.2Z","transform","translate(-52.509 14.662)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875"],["id","Path_686","data-name","Path 686","d","M92.53,23.291l8.731-7.071V39.738L92.53,33.683Z","transform","translate(-34.634 15.463)","fill","none","stroke","#252036","stroke-linejoin","round","stroke-miterlimit","10","stroke-width","1.875"],["id","Line_281","data-name","Line 281","x1","49.653","y2","49.653","transform","translate(19.123 19.123)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875",4,"ngIf"],[1,"btn-end-visit","my-xl-3","my-sm-2","my-1",3,"click"],[1,"col-md-6","h-100","col-lg-8","col-12","d-flex","flex-column","justify-content-end","p-0"],["videoContainer",""],["id","divVideo",1,"w-100","video-call","position-relative","d-flex","flex-column","justify-content-end","flex-grow-1"],[1,"w-100","h-100","bg-dark","d-flex","align-items-center","justify-content-center","position-absolute"],["waitingScreen",""],[1,"text-white"],[3,"stream","session","audioIsOnMuted",4,"ngFor","ngForOf"],["id","videoPublisher",1,"position-absolute",3,"session","audioIsOnMuted"],["videoPublisher",""],[1,"d-flex","position-relative","justify-content-center","video-control","flex-row","bg-white"],["videoToolbar",""],[1,"d-flex","h-100","position-absolute","align-items-center","time"],[1,"ps-0"],[1,"d-flex","align-items-center","justify-content-end"],[1,"flex-fill","d-flex","align-items-center","justify-content-center","justify-content-lg-center","justify-content-md-end"],[1,"p-0","btn-call-icon","btn-audio","border-0","mx-2","mx-sm-3",3,"click"],["id","mic_icon_2_","xmlns","http://www.w3.org/2000/svg","width","45","height","45","viewBox","0 0 87.899 87.899"],["id","Path_683","data-name","Path 683","d","M46.77,24.52A16.968,16.968,0,0,1,30.734,35.966,17.731,17.731,0,0,1,14.15,24.52M30.46,44.209V36.2m-7.481,9.356H37.687","transform","translate(13.489 23.375)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875"],["id","Path_684","data-name","Path 684","d","M38.719,19.939v10.9a10.9,10.9,0,0,1-21.8,0v-10.9a10.9,10.9,0,1,1,21.8,0Z","transform","translate(16.13 8.618)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875"],["id","Line_284","data-name","Line 284","x1","49.653","y2","49.653","transform","translate(19.123 16.461)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875",4,"ngIf"],[1,"p-0","btn-call-icon","btn-video","border-0","mx-2","mx-sm-3",3,"click"],[1,"p-0","btn-call-icon","btn-call","border-0","mx-2","mx-sm-3",3,"click"],["id","phone_icon_1_","xmlns","http://www.w3.org/2000/svg","width","45","height","45","viewBox","0 0 87.899 87.899"],["id","Ellipse_261","data-name","Ellipse 261","cx","43.949","cy","43.949","r","43.949","fill","#e3394c",4,"ngIf"],["id","Path_682","data-name","Path 682","d","M224.563,16.03c-15.177,0-27.463,6.368-27.463,14.2v4.239a2.3,2.3,0,0,0,2.4,2.422l9.259-1a2.933,2.933,0,0,0,2.461-3.028v-3.3a2.367,2.367,0,0,1,1.641-2.344,37.562,37.562,0,0,1,23.44,0,2.408,2.408,0,0,1,1.641,2.344v3.3A2.95,2.95,0,0,0,240.4,35.9l9.259,1a2.289,2.289,0,0,0,2.4-2.422V30.23C252.027,22.4,239.741,16.03,224.563,16.03Z","transform","translate(-180.614 15.281)","fill","none","stroke","#fff","stroke-miterlimit","10","stroke-width","1.5",4,"ngIf"],["id","Ellipse_261","data-name","Ellipse 261","cx","43.949","cy","43.949","r","43.949","fill","#86d75e",4,"ngIf"],["id","Path_682","data-name","Path 682","d","M224.563,16.03c-15.177,0-27.463,6.368-27.463,14.2v4.239a2.3,2.3,0,0,0,2.4,2.422l9.259-1a2.933,2.933,0,0,0,2.461-3.028v-3.3a2.367,2.367,0,0,1,1.641-2.344,37.562,37.562,0,0,1,23.44,0,2.408,2.408,0,0,1,1.641,2.344v3.3A2.95,2.95,0,0,0,240.4,35.9l9.259,1a2.289,2.289,0,0,0,2.4-2.422V30.23C252.027,22.4,239.741,16.03,224.563,16.03Z","transform","translate(183.059 223.267) rotate(-135)","fill","#fff","stroke","#fff","stroke-miterlimit","10","stroke-width","1.5",4,"ngIf"],[1,"p-0","btn-call-icon","btn-zoom","border-0","mx-2","mx-sm-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 42.659 42.659"],["id","Group_3958","data-name","Group 3958","transform","translate(-918.671 -1335.493)","opacity","0.8"],["id","Path_28418","data-name","Path 28418","d","M10.5,10.5l15,15","transform","translate(934.5 1351.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28419","data-name","Path 28419","d","M25.5,10.5v15h-15","transform","translate(934.5 1351.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28420","data-name","Path 28420","d","M25.5,10.5l-15,15","transform","translate(909.5 1351.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28421","data-name","Path 28421","d","M25.5,25.5h-15v-15","transform","translate(909.5 1351.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28422","data-name","Path 28422","d","M25.5,25.5l-15-15","transform","translate(909.5 1326.822)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28423","data-name","Path 28423","d","M10.5,25.5v-15h15","transform","translate(909.5 1326.822)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28424","data-name","Path 28424","d","M10.5,25.5l15-15","transform","translate(934.5 1326.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["id","Path_28425","data-name","Path 28425","d","M10.5,10.5h15v15","transform","translate(934.5 1326.322)","fill","none","stroke","#252036","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.88"],["aria-label","Example icon button with a delete icon",1,"position-absolute","end-0","d-flex","align-items-center","border-0","mx-1","mx-sm-3","d-md-none","message-btn","btn-zoom",3,"click"],[3,"stream","session","audioIsOnMuted"],["videoSubscriber",""],["id","Line_284","data-name","Line 284","x1","49.653","y2","49.653","transform","translate(19.123 16.461)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875"],["id","Line_281","data-name","Line 281","x1","49.653","y2","49.653","transform","translate(19.123 19.123)","fill","none","stroke","#252036","stroke-miterlimit","10","stroke-width","1.875"],["id","Ellipse_261","data-name","Ellipse 261","cx","43.949","cy","43.949","r","43.949","fill","#e3394c"],["id","Path_682","data-name","Path 682","d","M224.563,16.03c-15.177,0-27.463,6.368-27.463,14.2v4.239a2.3,2.3,0,0,0,2.4,2.422l9.259-1a2.933,2.933,0,0,0,2.461-3.028v-3.3a2.367,2.367,0,0,1,1.641-2.344,37.562,37.562,0,0,1,23.44,0,2.408,2.408,0,0,1,1.641,2.344v3.3A2.95,2.95,0,0,0,240.4,35.9l9.259,1a2.289,2.289,0,0,0,2.4-2.422V30.23C252.027,22.4,239.741,16.03,224.563,16.03Z","transform","translate(-180.614 15.281)","fill","none","stroke","#fff","stroke-miterlimit","10","stroke-width","1.5"],["id","Ellipse_261","data-name","Ellipse 261","cx","43.949","cy","43.949","r","43.949","fill","#86d75e"],["id","Path_682","data-name","Path 682","d","M224.563,16.03c-15.177,0-27.463,6.368-27.463,14.2v4.239a2.3,2.3,0,0,0,2.4,2.422l9.259-1a2.933,2.933,0,0,0,2.461-3.028v-3.3a2.367,2.367,0,0,1,1.641-2.344,37.562,37.562,0,0,1,23.44,0,2.408,2.408,0,0,1,1.641,2.344v3.3A2.95,2.95,0,0,0,240.4,35.9l9.259,1a2.289,2.289,0,0,0,2.4-2.422V30.23C252.027,22.4,239.741,16.03,224.563,16.03Z","transform","translate(183.059 223.267) rotate(-135)","fill","#fff","stroke","#fff","stroke-miterlimit","10","stroke-width","1.5"],["xmlns","http://www.w3.org/2000/svg","width","16.78","height","18","viewBox","0 0 22.78 24"],["id","ic_chat_bubble_outline_24px","d","M22.5,2H4.278A2.348,2.348,0,0,0,2,4.4V26l4.556-4.8H22.5a2.348,2.348,0,0,0,2.278-2.4V4.4A2.348,2.348,0,0,0,22.5,2Zm0,16.8H6.556L4.278,21.2V4.4H22.5Z","transform","translate(-2 -2)","fill","#333"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24"],["id","ic_filter_24px","d","M17.32,11.135,14.32,15l-2.138-2.575-3,3.851h12ZM3.182,5.364H1V22.818A2.188,2.188,0,0,0,3.182,25H20.636V22.818H3.182ZM22.818,1H7.545A2.188,2.188,0,0,0,5.364,3.182V18.455a2.188,2.188,0,0,0,2.182,2.182H22.818A2.188,2.188,0,0,0,25,18.455V3.182A2.188,2.188,0,0,0,22.818,1Zm0,17.455H7.545V3.182H22.818Z","transform","translate(-1 -1)","fill","#333"],["id","ic_insert_invitation_24px","d","M21.667,14.2H15v6h6.667ZM20.333,1V3.4H9.667V1H7V3.4H5.667A2.531,2.531,0,0,0,3.013,5.8L3,22.6A2.543,2.543,0,0,0,5.667,25H24.333A2.551,2.551,0,0,0,27,22.6V5.8a2.551,2.551,0,0,0-2.667-2.4H23V1Zm4,21.6H5.667V9.4H24.333Z","transform","translate(-3 -1)","fill","#333"],[3,"click"],["id","ic_info_outline_24px","d","M12.8,20h2.4V12.8H12.8ZM14,2A12,12,0,1,0,26,14,12,12,0,0,0,14,2Zm0,21.6A9.6,9.6,0,1,1,23.6,14,9.613,9.613,0,0,1,14,23.6ZM12.8,10.4h2.4V8H12.8Z","transform","translate(-2 -2)","fill","#333"],[1,"h-100","d-flex"],[1,"flex-grow-1","d-flex","w-100",3,"userId"]],template:function(m,M){1&m&&(e.YNc(0,_e,40,7,"div",0),e.YNc(1,ot,2,1,"div",1)),2&m&&(e.Q6J("ngIf",!M.showPatientProfile),e.xp6(1),e.Q6J("ngIf",M.showPatientProfile))},dependencies:[Et,Kr,Bt,Ii,Wr,wo,n.mk,n.sg,n.O5,k.oO,ns.Hw,it.SP,it.uD,it.uX],styles:['@charset "UTF-8";.h-140px{flex:0 1 140px}@media (max-width: 575.98px){.h-140px{flex:0 1 120px}}.h-cal-140px{height:calc(100% - 140px)}.h-120px{height:120px}.h-cal-120px{height:calc(100% - 120px)}.h-70px{height:70px}.h-86px{height:86px}.h-105px{height:105px}.w-35{width:35%}.prescription{background-image:linear-gradient(to right,rgb(82,189,243),rgb(18,74,217));border-radius:10px;color:#fff}.prescription button{border:none;background-color:transparent;color:#fff}.prescription button:after{content:">";margin-left:5px}.prescription-bg img{width:120px;margin-top:10px;margin-left:10px}.local{text-align:right;background-color:#f0ecff;padding:15px;border-radius:20px 20px 0;max-width:70%;margin-top:10px;margin-bottom:10px}.local .text{font-size:14px;font-family:Google Sans,sans-serif;margin-bottom:0!important;white-space:pre-wrap;text-align:left;word-break:break-all}.local .time{font-size:12px;color:gray;margin-top:4px}.remote{text-align:left;align-self:flex-start;padding:15px;border-radius:20px 20px 20px 0;border:solid 1px #dee2e6;max-width:70%;margin-left:0;margin-top:10px;margin-bottom:10px}.remote .text{font-size:14px;font-family:Google Sans,sans-serif;margin-bottom:0!important;white-space:pre-wrap;text-align:left;word-break:break-all}.remote .time{font-size:12px;color:gray;margin-top:4px}.scroll-y,.softnote{overflow-y:auto}.softnote span{color:#1fb5eb;margin-bottom:5px}.softnote textarea{border-radius:10px}.h-0{height:0px!important}.btn-send-chat{background:url(ic-button-send.0dd44f4a99462d5d.png);background-repeat:no-repeat;background-size:30px;width:42px;margin-left:2px;background-position-y:51%;background-position-x:11px}.btn-end-visit{background-color:#e3394c;color:#fff;width:130px;border:0px transparent;border-radius:10px}.btn-audio,.btn-video,.btn-call{background-color:transparent;background-repeat:no-repeat;background-size:45px;width:50px;height:50px}.btn-zoom{background-color:transparent;background-repeat:no-repeat;background-size:36px;width:45px;height:47px;margin-top:2px}@media (max-width: 575.98px){.btn-call-icon{width:30px;height:30px}.btn-call-icon.btn-zoom{width:22px;height:22px}.btn-call-icon svg{height:inherit;width:inherit}}.time ul{list-style:none!important;margin:0}.time ul li{font-size:12px!important}.time ul li span{margin-left:8px}.time ul li:before{content:"\\2022"!important;color:#539061!important;font-weight:700!important;display:inline-block!important;font-size:30px!important;width:12px!important;margin-left:35px!important}@media (max-width: 575.98px){.time ul li:before{margin-left:15px!important}}.icon-button{width:90px;border:none;border-radius:30px;background-color:transparent}.icon-button svg path{fill:#333}.icon-button:hover{width:90px;border:none;border-radius:30px;background-color:#23233c}.icon-button:hover svg path{fill:#fff}.bg-gray{background-color:#f7f7f7}.chat-text-message{height:50px!important;max-height:90px!important;overflow-y:hidden!important;min-height:40px!important;padding:15px 0;resize:none}.video-page{background:white}.video-page .hidden{display:none}.video-page .message-btn{z-index:1030}.video-page .items{flex:1;width:100%;overflow:auto}.video-page .items mat-tab-group .mat-tab-header{margin:20px 0;border-bottom:0!important}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label{border:0!important;min-width:40px!important;padding:0!important;width:25%;margin:0 10px}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label .mat-tab-label-content{width:100%}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label .mat-tab-label-content button{width:100%;border:none;border-radius:30px;background-color:transparent}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label.mat-tab-label-active{opacity:1!important;background:transparent}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label.mat-tab-label-active .mat-tab-label-content button{padding:10px 15px;background-color:#23233c;border:none;opacity:1}.video-page .items mat-tab-group .mat-tab-header .mat-tab-label.mat-tab-label-active .mat-tab-label-content button svg path{fill:#fff}.video-page .items mat-tab-group .mat-tab-header button.mat-ripple{display:none!important}.video-page .items mat-tab-group .mat-tab-header .mat-ripple-element{display:none!important}.video-page .items mat-tab-group .mat-ink-bar{display:none!important}.video-page .items mat-tab-group .mat-tab-body-wrapper{position:relative;flex:1;height:calc(100% - 48px);display:flex}.video-page .items mat-tab-group .mat-tab-body-wrapper .mat-tab-body{height:100%;flex:1}.video-page .items mat-tab-group .mat-tab-body-wrapper .end{position:absolute;width:100%;bottom:0}.video-page .block-end-visit{flex:0 1 85px}@media (max-width: 767.98px){.video-page .block-end-visit{flex:0 1 65px}}.video-call{flex:1}.video-control{flex:0 1 85px}.video-control .time{left:0}@media (max-width: 991.98px){.video-control{flex:0 1 80px}}@media (max-width: 575.98px){.video-control{flex:0 1 60px}}\n'],encapsulation:2}),j})();var dt=t(978),tn=t(4943),mt=t(7217),Gt=t(6185);function hn(j,U){if(1&j&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"date"),e.ALo(6,"date"),e.qZA()()),2&j){const m=U.$implicit,M=e.oxw();e.Udp("background-color",M.getBackgroundColor(m)),e.xp6(2),e.Oqu(m.appointmentData.text),e.xp6(2),e.AsE("",e.xi3(5,5,m.appointmentData.startDate,"hh:mm a")," - ",e.xi3(6,8,m.appointmentData.endDate,"hh:mm a")," ")}}const Pt=function(){return["day","week","month"]};let Ee=(()=>{class j{constructor(m,M){this._authService=m,this._notificationService=M,this.currentDate=new Date,this.colors=["#76c68b","#6bbedc","#f08d3a","#a682c7","#53b894","#E289DE","#E6DE73"];const q=Zi.N.apiUrl+"/scheduler";this.appointmentsData=(0,dt.createStore)(this.getConfig({key:"id",loadUrl:q,updateUrl:q,insertUrl:q,deleteUrl:q}))}getConfig(m){const M=Intl.DateTimeFormat().resolvedOptions().timeZone,q=this._authService.getToken();return m.onBeforeSend=(Ie,qe)=>{var Xt;"update"===Ie?this.updateRequest=qe.data:"insert"===Ie&&(qe.data.exceptScheduleId=null===(Xt=this.updateRequest)||void 0===Xt?void 0:Xt.key),qe.headers={"x-time-zone":`${M}`,Authorization:`Bearer ${q}`}},m.onAjaxError=Ie=>{null!=Ie&&Ie.error&&this._notificationService.error(Ie.error)},m.onInserted=()=>{this.updateRequest=null},m}getBackgroundColor(m){const q=new Date(m.targetedAppointmentData.startDate).getDay();return this.colors[q%this.colors.length]}onAppointmentFormOpening(m){this.updateRequest=null}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(p.e),e.Y36(vi.g))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-scheduler"]],decls:9,vars:9,consts:[[1,"scheduler-page","d-flex","flex-column"],[1,"h4"],["heightTitle",""],[1,"scheduler-content","flex-grow-1"],["currentView","week","appointmentTemplate","appointmentTemplate",3,"dataSource","views","currentDate","onAppointmentFormOpening"],[3,"allowResizing","allowDragging"],[3,"background-color",4,"dxTemplate","dxTemplateOf"],["mode","virtual"]],template:function(m,M){if(1&m&&(e.TgZ(0,"div",0)(1,"h4",1,2),e._uU(3,"Scheduler"),e.qZA(),e.TgZ(4,"div",3)(5,"dx-scheduler",4),e.NdJ("onAppointmentFormOpening",function(Ie){return M.onAppointmentFormOpening(Ie)}),e._UZ(6,"dxo-editing",5),e.YNc(7,hn,7,11,"div",6),e._UZ(8,"dxo-scrolling",7),e.qZA()()()),2&m){const q=e.MAs(2);e.xp6(4),e.Udp("height","calc(100% - "+(q.offsetHeight+8)+"px)"),e.xp6(1),e.Q6J("dataSource",M.appointmentsData)("views",e.DdM(8,Pt))("currentDate",M.currentDate),e.xp6(1),e.Q6J("allowResizing",!1)("allowDragging",!1),e.xp6(1),e.Q6J("dxTemplateOf","appointmentTemplate")}},dependencies:[tn.Uo8,tn.PXJ,mt.p6,Gt.n,n.uU],styles:[".scheduler-page[_ngcontent-%COMP%]{margin:0 15px;height:100%}.scheduler-page[_ngcontent-%COMP%]   dx-scheduler[_ngcontent-%COMP%]{height:100%;padding-bottom:15px}"]}),j})();class ze{isErrorState(U,m){return!!(U&&U.invalid&&m&&m.submitted&&(U.dirty||U.touched))}}var Ze=t(1280);const Lt=["editForm"];function Dt(j,U){1&j&&(e.TgZ(0,"span",14),e._uU(1,"These fields are required and cannot be empty."),e.qZA())}let Qt=(()=>{class j{constructor(m,M,q,Ie){this.dialogRef=m,this.data=M,this._notificationService=q,this._doctorService=Ie,this.onDialogSubmit=new e.vpe,this.isHasError=!1,this.showOldPassword=!1,this.showNewPassword=!1,this.matcher=new ze,this.passwordForm=new C.cw({oldPassword:new C.NI("",[C.kI.required]),newPassword:new C.NI("",[C.kI.required])})}ngOnInit(){}onSubmit(){this.hasFormInvalid(),this.isHasError||this._doctorService.changePassword({oldPassword:this.f.oldPassword.value,newPassword:this.f.newPassword.value}).subscribe(M=>{this.dialogRef.close(),this.editForm.resetForm(),this._notificationService.success("Password successfully changed!")},M=>{let{message:q}=M;this.dialogRef.close(),this._notificationService.error(q)})}toggleOldPasswordVisibility(){this.showOldPassword=!this.showOldPassword}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}get f(){return this.passwordForm.controls}hasFormInvalid(){this.isHasError=this.passwordForm.invalid}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Nn.so),e.Y36(Nn.WI),e.Y36(vi.g),e.Y36(Ze.O))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-change-password-dialog"]],viewQuery:function(m,M){if(1&m&&e.Gf(Lt,5),2&m){let q;e.iGM(q=e.CRH())&&(M.editForm=q.first)}},decls:28,vars:13,consts:[[1,"change-password","text-center","popup"],["mat-dialog-title",""],["class","error-show",4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["editForm","ngForm"],[1,"form-group","my-3","row"],[1,"col-3","m-auto"],["appearance","outline",1,"custom-input","col-9"],["matInput","","formControlName","oldPassword",3,"type","errorStateMatcher"],["input",""],["matSuffix","",1,"c-light-gray",3,"click"],["matInput","","formControlName","newPassword",1,"round-coner",3,"type","errorStateMatcher"],["type","button","mat-stroked-button","",1,"btn","btn-cancle",3,"mat-dialog-close"],["type","submit","mat-stroked-button","",1,"btn","btn-blue",3,"click"],[1,"error-show"]],template:function(m,M){if(1&m){const q=e.EpF();e.TgZ(0,"mat-dialog-content",0)(1,"h4",1),e._uU(2,"CHANGE PASSWORD"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,Dt,2,0,"span",2),e.TgZ(5,"form",3,4),e.NdJ("ngSubmit",function(){return M.onSubmit()}),e.TgZ(7,"div",5)(8,"label",6),e._uU(9,"Old Password"),e.qZA(),e.TgZ(10,"mat-form-field",7),e._UZ(11,"input",8,9),e.TgZ(13,"mat-icon",10),e.NdJ("click",function(){return M.toggleOldPasswordVisibility()}),e._uU(14),e.qZA()()(),e.TgZ(15,"div",5)(16,"label",6),e._uU(17,"New Password"),e.qZA(),e.TgZ(18,"mat-form-field",7),e._UZ(19,"input",11,9),e.TgZ(21,"mat-icon",10),e.NdJ("click",function(){return M.toggleNewPasswordVisibility()}),e._uU(22),e.qZA()()()(),e.TgZ(23,"div")(24,"button",12),e._uU(25,"Cancel"),e.qZA(),e.TgZ(26,"button",13),e.NdJ("click",function(qe){e.CHM(q);const Xt=e.MAs(6);return e.KtG(Xt.onSubmit(qe))}),e._uU(27,"Save"),e.qZA()()()}2&m&&(e.xp6(4),e.Q6J("ngIf",M.isHasError),e.xp6(1),e.Q6J("formGroup",M.passwordForm),e.xp6(6),e.ekj("error-border",M.isHasError&&M.f.oldPassword.invalid),e.Q6J("type",M.showOldPassword?"text":"password")("errorStateMatcher",M.matcher),e.xp6(3),e.hij(" ",M.showOldPassword?"visibility":"visibility_off"," "),e.xp6(5),e.ekj("error-border",M.isHasError&&M.f.newPassword.invalid),e.Q6J("type",M.showNewPassword?"text":"password")("errorStateMatcher",M.matcher),e.xp6(3),e.hij(" ",M.showNewPassword?"visibility":"visibility_off"," "),e.xp6(2),e.Q6J("mat-dialog-close",!1))},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,n.O5,L.lW,Nn.ZT,Nn.uh,Nn.xY,D.KE,D.R9,ns.Hw,W.Nt],styles:[".popup[_ngcontent-%COMP%]   .m-right[_ngcontent-%COMP%]{margin-right:10px}.popup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:left}.popup[_ngcontent-%COMP%]   .error-show[_ngcontent-%COMP%]{width:38%;margin:-1% 0}"]}),j})();let Hr=(()=>{class j{constructor(m){this._apiService=m}getGoogleAddress(m){return this._apiService.get("/googlemaps/api/place/autocomplete/json"+m)}getAddressDetail(m){return this._apiService.get("/googlemaps/api/place/details/json"+m)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(a.s))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),ur=(()=>{class j{constructor(m){this.googleApiService=m}getGoogleAddress(m){return this.googleApiService.getGoogleAddress(m)}getAddressDetail(m){return this.googleApiService.getAddressDetail(m)}}return j.\u0275fac=function(m){return new(m||j)(e.LFG(Hr))},j.\u0275prov=e.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var ri=t(1079);const sr=["editForm"];function di(j,U){if(1&j&&e._UZ(0,"img",56),2&j){const m=e.oxw();e.s9C("src",m.profileForm.value.avatar,e.LSH)}}function pr(j,U){1&j&&e._UZ(0,"img",57)}function ar(j,U){if(1&j&&e._UZ(0,"img",58),2&j){const m=e.oxw();e.Q6J("src",m.newAvatar,e.LSH)}}function Ai(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.startEditMode())}),e._uU(1,"Edit"),e.qZA()}}function gr(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(m);const q=e.oxw();return e.KtG(q.cancleEditMode())}),e._uU(1,"Cancel"),e.qZA()}}function Sr(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(q){e.CHM(m),e.oxw();const Ie=e.MAs(36);return e.KtG(Ie.onSubmit(q))}),e._uU(1,"Save"),e.qZA()}}function ho(j,U){1&j&&(e.TgZ(0,"span",61),e._uU(1,"These fields are required and cannot be empty."),e.qZA())}function Qr(j,U){1&j&&(e.TgZ(0,"span",61),e._uU(1,"Please make sure you\u2019ve entered a full 10 digit NPI number."),e.qZA())}function qn(j,U){1&j&&(e.TgZ(0,"span",61),e._uU(1,"Please make sure you\u2019ve entered a full 10 digit phone number."),e.qZA())}function Un(j,U){1&j&&(e.TgZ(0,"span",61),e._uU(1,"Please make sure you\u2019ve entered a full 10 digit fax number."),e.qZA())}function Dr(j,U){if(1&j&&(e.TgZ(0,"mat-option",62),e._uU(1),e.qZA()),2&j){const m=U.$implicit;e.Q6J("value",m.value),e.xp6(1),e.Oqu(m.text)}}function Mi(j,U){if(1&j){const m=e.EpF();e.TgZ(0,"mat-option",63),e.NdJ("click",function(){const Ie=e.CHM(m).$implicit,qe=e.oxw();return e.KtG(qe.getAddressDetail(Ie.place_id))}),e._uU(1),e.qZA()}if(2&j){const m=U.$implicit;e.Q6J("value",m.description),e.xp6(1),e.hij(" ",m.description," ")}}let wr=(()=>{class j{constructor(m,M,q){this._doctorService=m,this._googleService=M,this._dialog=q,this.updateProfile=new e.vpe,this.uploadAvatar=new e.vpe,this.matcher=new ze,this.editMode=!1,this.isHasInvalid=!1,this.isHasError=!1,this.fieldError="",this.addressDetail={address:"",city:"",state:"",zipCode:""},this.today=new Date,this.profileForm=new C.cw({email:new C.NI("",C.kI.compose([C.kI.required,C.kI.pattern(/^[\w]{1,}[\w.+-]{0,}@[\w-]{1,}([.][a-zA-Z]{2,}|[.][\w-]{2,}[.][a-zA-Z]{2,})$/),C.kI.email])),firstName:new C.NI({value:"",disabled:!0},[C.kI.required]),lastName:new C.NI({value:"",disabled:!0},[C.kI.required]),specialty:new C.NI({value:"",disabled:!0},[C.kI.required]),address:new C.NI({value:"",disabled:!0},[C.kI.required]),city:new C.NI({value:"",disabled:!0},[C.kI.required]),state:new C.NI({value:"",disabled:!0},[C.kI.required]),zipCode:new C.NI({value:"",disabled:!0},[C.kI.required]),phone:new C.NI({value:"",disabled:!0},[C.kI.required,C.kI.maxLength(10),C.kI.pattern("^[0-9]{10}$")]),birthday:new C.NI({value:"",disabled:!0},[C.kI.required]),gender:new C.NI({value:"",disabled:!0},[C.kI.required]),clinicName:new C.NI({value:"",disabled:!0},[C.kI.required]),npi:new C.NI({value:"",disabled:!0},[C.kI.required,C.kI.maxLength(10),C.kI.pattern("^[0-9]{10}$")]),dea:new C.NI({value:"",disabled:!0},[]),fax:new C.NI({value:"",disabled:!0},[C.kI.required,C.kI.maxLength(10),C.kI.pattern("^[0-9]{10}$")]),avatar:new C.NI("",[])})}ngOnInit(){this.getSpecialties()}loadProfile(){this._doctorService.getDoctorProfile().subscribe(m=>{var M,q;this.specialty=null===(M=this.specialties.find(Ie=>Ie.value===Number(m.specialty)))||void 0===M?void 0:M.text,this.profileForm.setValue({email:m.email||"",firstName:m.firstName||"",lastName:m.lastName||"",birthday:m.birthday?new Date(m.birthday):null,gender:(null===(q=m.gender)||void 0===q?void 0:q.toString())||"",specialty:Number(m.specialty)||"",address:m.address||"",city:m.city||"",state:m.state||"",zipCode:m.zipCode||"",phone:m.phone||"",avatar:m.avatarUrl||"",clinicName:m.clinicName||"",npi:m.npi||"",dea:m.dea||"",fax:m.fax||""})})}getSpecialties(){this._doctorService.getSpecialties().subscribe(m=>{this.specialties=m,this.loadProfile()})}startEditMode(){this.editMode=!0,this.profileForm.enable()}cancleEditMode(){this.editMode=!1,this.isHasInvalid=!1,this.newAvatar="",this.profileForm.disable(),this.loadProfile()}onSubmit(){var m;if(this.hasFormInvalid(),!this.isHasInvalid&&!this.isHasError){const M=Object.assign({},this.profileForm.value);this.profileForm.value.specialty=this.profileForm.value.specialty.toString(),this.specialty=null===(m=this.specialties.find(q=>q.value===Number(this.profileForm.value.specialty)))||void 0===m?void 0:m.text,this.profileForm.value.birthday=Zt(this.profileForm.value.birthday,"YYYY/MM/DD").add(12,"hours"),this.updateProfile.emit({profile:this.profileForm.value,specialty:this.specialty}),this.editMode=!1,this.editForm.resetForm(),this.profileForm.setValue(M),this.profileForm.disable()}}changePassword(){this._dialog.open(Qt,{panelClass:"custom-dialog",width:"600px",data:""})}onFileChanged(m){if(m){var M=new FileReader;this.newAvatar=m.target.files,M.readAsDataURL(m.target.files[0]),M.onload=q=>{this.newAvatar=M.result},this.selectedFile=m.target.files[0],this.uploadAvatar.emit(this.selectedFile)}}getGoogleAddress(m){this._googleService.getGoogleAddress(`?input=${m}`).subscribe(q=>{this.autocompleteAddress=q.predictions},q=>{console.log("Error: ",q)})}getAddressDetail(m){this._googleService.getAddressDetail(`?place_id=${m}`).subscribe(q=>{var Ie,qe,Xt,rn,Ln,Or;const Vn=null===(Ie=q.result)||void 0===Ie?void 0:Ie.address_components,mn=(null===(qe=Vn.find(Nr=>Nr.types.includes("street_number")))||void 0===qe?void 0:qe.long_name)||"",ir=(null===(Xt=Vn.find(Nr=>Nr.types.includes("route")))||void 0===Xt?void 0:Xt.long_name)||"";this.addressDetail={address:`${mn} ${ir}`.trim(),city:null===(rn=Vn.find(Nr=>Nr.types.includes("locality")))||void 0===rn?void 0:rn.long_name,state:null===(Ln=Vn.find(Nr=>Nr.types.includes("administrative_area_level_1")))||void 0===Ln?void 0:Ln.short_name,zipCode:null===(Or=Vn.find(Nr=>Nr.types.includes("postal_code")))||void 0===Or?void 0:Or.long_name}},q=>{console.log("Error: ",q)})}get f(){return this.profileForm.controls}hasFormInvalid(){var m,M,q,Ie,qe;(null===(m=this.f.phone.errors)||void 0===m?void 0:m.pattern)||(null===(M=this.f.fax.errors)||void 0===M?void 0:M.pattern)||(null===(q=this.f.npi.errors)||void 0===q?void 0:q.pattern)?(this.isHasError=!0,this.isHasInvalid=!1,this.fieldError=null!==(Ie=this.f.phone.errors)&&void 0!==Ie&&Ie.pattern?"phone":null!==(qe=this.f.fax.errors)&&void 0!==qe&&qe.pattern?"fax":"npi"):(this.isHasInvalid=this.profileForm.invalid,this.isHasError=!1)}isTyping(){this.isHasError=!1}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(Ze.O),e.Y36(ur),e.Y36(Nn.uw))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-doctor-profile"]],viewQuery:function(m,M){if(1&m&&e.Gf(sr,5),2&m){let q;e.iGM(q=e.CRH())&&(M.editForm=q.first)}},inputs:{newAvatar:"newAvatar"},outputs:{updateProfile:"updateProfile",uploadAvatar:"uploadAvatar"},decls:134,vars:88,consts:[[1,"account-details","container-fluid","mx-3","mb-3","pt-4","overflow-auto"],[1,"account-details__top","d-flex","flex-column"],[1,"justify-content-center","justify-content-sm-between","flex-column","flex-sm-row","row"],[1,"account-details__top-info","d-flex","flex-column","flex-sm-row","col-lg-8","col-12","col-sm-7","col-md-8"],[1,"avatar","col-lg-3","col-sm-4","col-12"],[1,"d-flex","d-sm-block","justify-content-center","avatar-block","position-relative"],["class","avatar-hover","alt","Avatar",3,"src",4,"ngIf"],["src","assets/images/users/no-avatar.png","class","avatar-hover","alt","Avatar",4,"ngIf"],["src","assets/images/change-image.png","alt","Avatar",1,"avatar-edit",3,"click"],["alt","Avatar",3,"src",4,"ngIf"],["type","file","accept","image/png, image/jpg, image/jpeg, image/bmp, image/gif",2,"display","none",3,"change"],["fileInput",""],[1,"name","text-center","text-sm-start","col-lg-9","col-sm-8","ms-sm-3","ms-0","col-12"],[1,"account-details__top-button","col-lg-4","col-12","col-sm-5","col-md-4","my-sm-0","my-2"],["type","button","mat-stroked-button","","class","btn btn-blue",3,"click",4,"ngIf"],["type","button","mat-stroked-button","","class","btn btn-cancle",3,"click",4,"ngIf"],[1,"justify-content-start","row"],[1,"email","col-lg-6","col-sm-6","col-12"],[1,"col-3"],[1,"col-9",3,"value"],[1,"change-password","text-center","text-sm-start","col-lg-6","col-sm-6","col-12"],[1,"pointer",3,"click"],["class","error-show",4,"ngIf"],[1,"account-details__bottom","row"],["novalidate","",3,"formGroup","ngSubmit"],["editForm","ngForm"],[1,"account-details__bottom-group","row"],[1,"col-lg-6"],["appearance","outline",1,"custom-input","col-9"],["matInput","","formControlName","firstName",3,"readonly","errorStateMatcher"],["firstName","matInput"],["matInput","","formControlName","lastName",3,"readonly","errorStateMatcher"],["lastName","matInput"],["for","birthday",1,"col-3"],["matInput","","formControlName","birthday",3,"max","matDatepicker","readonly","disabled","click"],["matSuffix","",3,"for"],["picker",""],["formControlName","gender",3,"disabled"],["value","1"],["value","2"],["value","0"],["matInput","","formControlName","clinicName",3,"readonly","errorStateMatcher"],["formControlName","specialty",3,"disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","maxlength","10","matInput","","formControlName","phone","oninput","\n              javascript: if (Number(this.value.slice(-1)) !== 0 && !Number(this.value.slice(-1)))\n               this.value = this.value.slice(0, -1);",3,"readonly","errorStateMatcher","keyup"],["type","text","maxlength","10","matInput","","formControlName","fax","oninput","\n            javascript: if (Number(this.value.slice(-1)) !== 0 && !Number(this.value.slice(-1)))\n             this.value = this.value.slice(0, -1);",3,"readonly","errorStateMatcher","keyup"],["matInput","","formControlName","address",3,"ngModel","readonly","matAutocomplete","errorStateMatcher","ngModelChange","keyup"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["matInput","","formControlName","city",3,"ngModel","readonly","errorStateMatcher","ngModelChange"],["matInput","","formControlName","state",3,"ngModel","readonly","errorStateMatcher","ngModelChange"],["matInput","","formControlName","zipCode",3,"ngModel","readonly","errorStateMatcher","ngModelChange"],["type","text","maxlength","10","matInput","","formControlName","npi","oninput","\n            javascript: if (Number(this.value.slice(-1)) !== 0 && !Number(this.value.slice(-1)))\n             this.value = this.value.slice(0, -1);",3,"readonly","errorStateMatcher","keyup"],[1,"optional"],["matInput","","formControlName","dea",3,"readonly"],["alt","Avatar",1,"avatar-hover",3,"src"],["src","assets/images/users/no-avatar.png","alt","Avatar",1,"avatar-hover"],["alt","Avatar",3,"src"],["type","button","mat-stroked-button","",1,"btn","btn-blue",3,"click"],["type","button","mat-stroked-button","",1,"btn","btn-cancle",3,"click"],[1,"error-show"],[3,"value"],[3,"value","click"]],template:function(m,M){if(1&m){const q=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,di,1,1,"img",6),e.YNc(7,pr,1,0,"img",7),e.TgZ(8,"img",8),e.NdJ("click",function(){e.CHM(q);const qe=e.MAs(11);return e.KtG(qe.click())}),e.qZA(),e.YNc(9,ar,1,1,"img",9),e.qZA(),e.TgZ(10,"input",10,11),e.NdJ("change",function(qe){return M.onFileChanged(qe)}),e.qZA()(),e.TgZ(12,"div",12)(13,"label"),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",13),e.YNc(18,Ai,2,0,"button",14),e.YNc(19,gr,2,0,"button",15),e.YNc(20,Sr,2,0,"button",14),e.qZA()(),e.TgZ(21,"div",16)(22,"div",17)(23,"label",18),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",19),e.qZA(),e.TgZ(26,"div",20)(27,"a",21),e.NdJ("click",function(){return M.changePassword()}),e._uU(28,"Change password"),e.qZA()()()(),e._UZ(29,"hr"),e.YNc(30,ho,2,0,"span",22),e.YNc(31,Qr,2,0,"span",22),e.YNc(32,qn,2,0,"span",22),e.YNc(33,Un,2,0,"span",22),e.TgZ(34,"div",23)(35,"form",24,25),e.NdJ("ngSubmit",function(){return M.onSubmit()}),e.TgZ(37,"div",26)(38,"div",27)(39,"label",18),e._uU(40,"First Name"),e.qZA(),e.TgZ(41,"mat-form-field",28),e._UZ(42,"input",29,30),e.qZA()(),e.TgZ(44,"div",27)(45,"label",18),e._uU(46,"Last Name"),e.qZA(),e.TgZ(47,"mat-form-field",28),e._UZ(48,"input",31,32),e.qZA()(),e.TgZ(50,"div",27)(51,"label",33),e._uU(52,"Birthday"),e.qZA(),e.TgZ(53,"mat-form-field",28)(54,"input",34),e.NdJ("click",function(){e.CHM(q);const qe=e.MAs(57);return e.KtG(qe.open())}),e.qZA(),e._UZ(55,"mat-datepicker-toggle",35)(56,"mat-datepicker",null,36),e.qZA()(),e.TgZ(58,"div",27)(59,"label",18),e._uU(60,"Gender"),e.qZA(),e.TgZ(61,"mat-form-field",28)(62,"mat-select",37)(63,"mat-option",38),e._uU(64,"Male"),e.qZA(),e.TgZ(65,"mat-option",39),e._uU(66,"Female"),e.qZA(),e.TgZ(67,"mat-option",40),e._uU(68,"Unknown"),e.qZA()()()()(),e._UZ(69,"hr"),e.TgZ(70,"div",26)(71,"div",27)(72,"label",18),e._uU(73,"Clinic Name"),e.qZA(),e.TgZ(74,"mat-form-field",28),e._UZ(75,"input",41),e.qZA()(),e.TgZ(76,"div",27)(77,"label",18),e._uU(78,"Speciality"),e.qZA(),e.TgZ(79,"mat-form-field",28)(80,"mat-select",42)(81,"mat-option",43),e._uU(82,"No data"),e.qZA(),e.YNc(83,Dr,2,2,"mat-option",44),e.qZA()()(),e.TgZ(84,"div",27)(85,"label",18),e._uU(86,"Phone"),e.qZA(),e.TgZ(87,"mat-form-field",28)(88,"input",45),e.NdJ("keyup",function(){return M.isTyping()}),e.qZA()()(),e.TgZ(89,"div",27)(90,"label",18),e._uU(91,"Fax"),e.qZA(),e.TgZ(92,"mat-form-field",28)(93,"input",46),e.NdJ("keyup",function(){return M.isTyping()}),e.qZA()()()(),e._UZ(94,"hr"),e.TgZ(95,"div",26)(96,"div",27)(97,"label",18),e._uU(98,"Address"),e.qZA(),e.TgZ(99,"mat-form-field",28)(100,"input",47),e.NdJ("ngModelChange",function(qe){return M.addressDetail.address=qe})("keyup",function(){return M.getGoogleAddress(M.f.address.value)}),e.qZA(),e.TgZ(101,"mat-autocomplete",null,48),e.YNc(103,Mi,2,2,"mat-option",49),e.qZA()()(),e.TgZ(104,"div",27)(105,"label",18),e._uU(106,"City"),e.qZA(),e.TgZ(107,"mat-form-field",28)(108,"input",50),e.NdJ("ngModelChange",function(qe){return M.addressDetail.city=qe}),e.qZA()()(),e.TgZ(109,"div",27)(110,"label",18),e._uU(111,"State"),e.qZA(),e.TgZ(112,"mat-form-field",28)(113,"input",51),e.NdJ("ngModelChange",function(qe){return M.addressDetail.state=qe}),e.qZA()()(),e.TgZ(114,"div",27)(115,"label",18),e._uU(116,"Zip"),e.qZA(),e.TgZ(117,"mat-form-field",28)(118,"input",52),e.NdJ("ngModelChange",function(qe){return M.addressDetail.zipCode=qe}),e.qZA()()()(),e._UZ(119,"hr"),e.TgZ(120,"div",26)(121,"div",27)(122,"label",18),e._uU(123,"NPI"),e.qZA(),e.TgZ(124,"mat-form-field",28)(125,"input",53),e.NdJ("keyup",function(){return M.isTyping()}),e.qZA()()(),e.TgZ(126,"div",27)(127,"label",18)(128,"p"),e._uU(129,"DEA"),e.qZA(),e.TgZ(130,"p",54),e._uU(131,"(Optional)"),e.qZA()(),e.TgZ(132,"mat-form-field",28),e._UZ(133,"input",55),e.qZA()()()()()()}if(2&m){const q=e.MAs(57),Ie=e.MAs(102);e.xp6(6),e.Q6J("ngIf",!M.newAvatar&&(null==M.profileForm.value?null:M.profileForm.value.avatar)),e.xp6(1),e.Q6J("ngIf",!(M.newAvatar||null!=M.profileForm.value&&M.profileForm.value.avatar)),e.xp6(2),e.Q6J("ngIf",M.newAvatar),e.xp6(5),e.AsE("",M.f.firstName.value," ",M.f.lastName.value,""),e.xp6(2),e.Oqu(M.specialty),e.xp6(2),e.Q6J("ngIf",!M.editMode),e.xp6(1),e.Q6J("ngIf",M.editMode),e.xp6(1),e.Q6J("ngIf",M.editMode),e.xp6(5),e.Q6J("value",M.profileForm.value.email),e.xp6(5),e.Q6J("ngIf",M.isHasInvalid),e.xp6(1),e.Q6J("ngIf",M.isHasError&&"npi"===M.fieldError),e.xp6(1),e.Q6J("ngIf",M.isHasError&&"phone"===M.fieldError),e.xp6(1),e.Q6J("ngIf",M.isHasError&&"fax"===M.fieldError),e.xp6(2),e.Q6J("formGroup",M.profileForm),e.xp6(7),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(6),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(6),e.ekj("disable-input",!M.editMode),e.Q6J("max",M.today)("matDatepicker",q)("readonly",!M.editMode)("disabled",!M.editMode),e.xp6(1),e.Q6J("for",q),e.xp6(7),e.ekj("disable-input",!M.editMode),e.Q6J("disabled",!M.editMode),e.xp6(13),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(5),e.ekj("disable-input",!M.editMode),e.Q6J("disabled",!M.editMode),e.xp6(3),e.Q6J("ngForOf",M.specialties),e.xp6(5),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(5),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(6),e.ekj("error-border",M.isHasInvalid&&M.f.address.invalid),e.xp6(1),e.ekj("disable-input",!M.editMode),e.Q6J("ngModel",M.addressDetail.address)("readonly",!M.editMode)("matAutocomplete",Ie)("errorStateMatcher",M.matcher),e.xp6(3),e.Q6J("ngForOf",M.autocompleteAddress),e.xp6(4),e.ekj("error-border",M.isHasInvalid&&M.f.city.invalid),e.xp6(1),e.ekj("disable-input",!M.editMode),e.Q6J("ngModel",M.addressDetail.city)("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(4),e.ekj("error-border",M.isHasInvalid&&M.f.state.invalid),e.xp6(1),e.ekj("disable-input",!M.editMode),e.Q6J("ngModel",M.addressDetail.state)("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(4),e.ekj("error-border",M.isHasInvalid&&M.f.zipCode.invalid),e.xp6(1),e.ekj("disable-input",!M.editMode),e.Q6J("ngModel",M.addressDetail.zipCode)("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(6),e.ekj("error-border",M.isHasInvalid&&M.f.npi.invalid),e.xp6(1),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)("errorStateMatcher",M.matcher),e.xp6(8),e.ekj("disable-input",!M.editMode),e.Q6J("readonly",!M.editMode)}},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.nD,C.sg,C.u,n.sg,n.O5,ri.XC,ri.ZL,Lo.ey,L.lW,ao.Mq,ao.hl,ao.nW,D.KE,D.R9,W.Nt,Ao.gD],styles:[".account-details[_ngcontent-%COMP%]{position:relative;font-weight:900;font-family:Google Sans!important;padding:0 7%;background:#ffffff}.account-details__top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:relative}.account-details__top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;aspect-ratio:1/1;border-radius:50%;object-fit:cover;object-position:center}@media (min-width: 576px){.account-details__top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.account-details__top[_ngcontent-%COMP%]   .avatar-edit[_ngcontent-%COMP%]{position:absolute;display:none}@media (min-width: 576px){.account-details__top[_ngcontent-%COMP%]   .avatar-edit[_ngcontent-%COMP%]{left:0;bottom:0;right:0}}.account-details__top[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]:hover   .avatar-edit[_ngcontent-%COMP%]{display:block}.account-details__top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:5% 0;font-size:30px;color:#0009;line-height:1em}@media (max-width: 767.98px){.account-details__top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin:2% 0}}.account-details__top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:25px;color:#0006}@media (max-width: 767.98px){.account-details__top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.account-details__top[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin-top:2%}.account-details__top[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1px}.account-details__top[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1.8%;border-radius:25px;border:1px solid rgba(0,0,0,.1);background-color:#0000001a;color:#00000061}.account-details__top[_ngcontent-%COMP%]   .change-password[_ngcontent-%COMP%]{margin-top:2%}.account-details__top[_ngcontent-%COMP%]   .change-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;text-align:center;display:inline-block;color:#47a7ee}.account-details__top-button[_ngcontent-%COMP%]{text-align:center}@media (min-width: 576px){.account-details__top-button[_ngcontent-%COMP%]{text-align:right}}.account-details__bottom[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:0}.account-details__bottom-group[_ngcontent-%COMP%]{margin:3% 0 1%}.account-details__bottom[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1px}.account-details__bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important}.account-details__bottom[_ngcontent-%COMP%]   .optional[_ngcontent-%COMP%]{position:absolute;font-style:italic}"]}),j})();const xr=[{path:"",redirectTo:"appointment",pathMatch:"full"},{path:"chat",component:Sn,canActivate:[s.a]},{path:"appointment",component:Ur,canActivate:[s.a]},{path:"video-chat",component:It,canActivate:[s.a]},{path:"scheduler",component:Ee,canActivate:[s.a]},{path:"settings",component:(()=>{class j{constructor(m,M,q,Ie,qe){this.stateService=m,this.authService=M,this.doctorService=q,this.dataShareService=Ie,this.notificationService=qe}ngOnInit(){this.stateService.headerInWhite.next(!1)}ngOnDestroy(){this.stateService.headerInWhite.next(!1)}updateProfile(m){this.doctorService.updateDoctorProfile(m.profile).subscribe(M=>{var q;this.authService.setUser(Object.assign(Object.assign({},m.profile),{specialty:m.specialty})),this.dataShareService.updateDoctorInfo(Object.assign(Object.assign({},m.profile),{specialty:m.specialty,avatarUrl:null===(q=m.profile)||void 0===q?void 0:q.avatar})),this.notificationService.success("Doctor details successfully updated!")},M=>{this.notificationService.error((null==M?void 0:M.message)||"Update Profile Failed")})}uploadAvatar(m){this.doctorService.changeAvatar(m).subscribe(M=>{this.dataShareService.updateDoctorInfo({avatarUrl:M.avatarUrl}),this.notificationService.success("Doctor avatar successfully updated")},M=>{this.notificationService.error((null==M?void 0:M.message)||"Change Avatar Failed"),this.newAvatar=""})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(b.b),e.Y36(p.e),e.Y36(Ze.O),e.Y36(ei._),e.Y36(vi.g))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-doctor-settings"]],viewQuery:function(m,M){if(1&m&&e.Gf(wr,5),2&m){let q;e.iGM(q=e.CRH())&&(M.doctorProfile=q.first)}},decls:6,vars:1,consts:[[1,"doctor-seting","row","h-100"],[1,"doctor-content","col-12","h-100","d-flex","flex-column"],[1,"h4","mx-3"],["heightTitle",""],[1,"d-flex","flex-grow-1","overflow-hidden",3,"newAvatar","updateProfile","uploadAvatar"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2,3),e._uU(4,"Account"),e.qZA(),e.TgZ(5,"app-doctor-profile",4),e.NdJ("updateProfile",function(Ie){return M.updateProfile(Ie)})("uploadAvatar",function(Ie){return M.uploadAvatar(Ie)}),e.qZA()()()),2&m&&(e.xp6(5),e.Q6J("newAvatar",M.newAvatar))},dependencies:[wr]}),j})(),canActivate:[s.a]},{path:"prescription-history",component:(()=>{class j{constructor(m,M,q,Ie){this.sanitizer=m,this._doctorService=M,this._dialog=q,this._authService=Ie,this.subscriptions=[],this.getEazyscriptAuthenData()}ngOnInit(){}ngOnDestroy(){this.subscriptions.forEach(m=>{m.unsubscribe()})}getEazyscriptAuthenData(){if(this._authService.getUser().eazyScriptId){let m=this._doctorService.getEazyscriptAuthToken().subscribe(M=>{var q;this.eazyscriptData={eazyscriptPatientId:null===(q=this.patientInfo)||void 0===q?void 0:q.eazyscriptId,doctorAuthToken:M};let Ie=this.eazyscriptData.doctorAuthToken.subDomain;this.url=`https://${Ie}.eazyscripts.com/Api/Public/V3/${Ie}/Browser/auto-login?ez_redirectUrl=/app/dashboard&ApplicationKey=${this.eazyscriptData.doctorAuthToken.applicationKey}&Token=${this.eazyscriptData.doctorAuthToken.token}&hideLeftMenu=false&hideTopMenu=false&menus=`,this.urlSafe=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)});this.subscriptions.push(m)}else this._dialog.open(bi,{panelClass:"custom-dialog",width:"400px",data:{btnCancelText:"Close",btnOkText:"",content:"Current presciber doesn't have an Eazyscript account.",headerText:"Eazyscript account"}})}}return j.\u0275fac=function(m){return new(m||j)(e.Y36(cs.H7),e.Y36(Lr.Q),e.Y36(Nn.uw),e.Y36(p.e))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-doctor-prescription-history"]],inputs:{patientInfo:"patientInfo"},decls:2,vars:1,consts:[[1,"w-100","h-100","position-relative","background"],["scrolling","auto",2,"width","100%","height","101%",3,"src"]],template:function(m,M){1&m&&(e.TgZ(0,"div",0),e._UZ(1,"iframe",1),e.qZA()),2&m&&(e.xp6(1),e.Q6J("src",M.urlSafe,e.uOi))},styles:[".background[_ngcontent-%COMP%]{background:url(eazyscript-bg.ba432c199026f64b.jpg);background-repeat:no-repeat;background-size:100%}"]}),j})(),canActivate:[s.a]}];let zn=(()=>{class j{}return j.\u0275fac=function(m){return new(m||j)},j.\u0275mod=e.oAB({type:j}),j.\u0275inj=e.cJS({imports:[i.Bz.forChild(xr),i.Bz]}),j})();var zi=t(7371);let Ji=(()=>{class j{}return j.\u0275fac=function(m){return new(m||j)},j.\u0275mod=e.oAB({type:j}),j.\u0275inj=e.cJS({imports:[o,r.m,zn,n.ez,zi.x,Gt.s]}),j})()},2382:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator3=__webpack_require__(7156).default,t;window,t=function(){return function(d){var E={};function t(n){if(E[n])return E[n].exports;var i=E[n]={i:n,l:!1,exports:{}};return d[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=d,t.c=E,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){if(1&i&&(n=t(n)),8&i||4&i&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(var e in n)t.d(r,e,function(o){return n[o]}.bind(null,e));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=329)}([function(d,E,t){(function(n){d.exports=function(){"use strict";function r(ft){return"function"==typeof ft}var o=Array.isArray?Array.isArray:function(ft){return"[object Array]"===Object.prototype.toString.call(ft)},s=0,a=void 0,c=void 0,u=function(ut,Vt){L[s]=ut,L[s+1]=Vt,2===(s+=2)&&(c?c(D):Z())};var p="undefined"!=typeof window?window:void 0,y=p||{},O=y.MutationObserver||y.WebKitMutationObserver,v="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),b="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function k(){var ft=setTimeout;return function(){return ft(D,1)}}var L=new Array(1e3);function D(){for(var ft=0;ft<s;ft+=2)(0,L[ft])(L[ft+1]),L[ft]=void 0,L[ft+1]=void 0;s=0}var Z=void 0;function oe(ft,ut){var Vt=this,nn=new this.constructor(he);void 0===nn[ne]&&$t(nn);var Rn=Vt._state;if(Rn){var Pn=arguments[Rn-1];u(function(){return at(Rn,nn,Pn,Vt._result)})}else Ye(Vt,nn,ft,ut);return nn}function Q(ft){if(ft&&"object"==typeof ft&&ft.constructor===this)return ft;var Vt=new this(he);return de(Vt,ft),Vt}Z=v?function T(){return function(){return n.nextTick(D)}}():O?function w(){var ft=0,ut=new O(D),Vt=document.createTextNode("");return ut.observe(Vt,{characterData:!0}),function(){Vt.data=ft=++ft%2}}():b?function N(){var ft=new MessageChannel;return ft.port1.onmessage=D,function(){return ft.port2.postMessage(0)}}():void 0===p?function W(){try{var ft=Function("return this")().require("vertx");return a=ft.runOnLoop||ft.runOnContext,function C(){return void 0!==a?function(){a(D)}:k()}()}catch(ut){return k()}}():k();var ne=Math.random().toString(36).substring(2);function he(){}var ae=void 0;function Ue(ft,ut,Vt){ut.constructor===ft.constructor&&Vt===oe&&ut.constructor.resolve===Q?function pe(ft,ut){1===ut._state?Ae(ft,ut._result):2===ut._state?Xe(ft,ut._result):Ye(ut,void 0,function(Vt){return de(ft,Vt)},function(Vt){return Xe(ft,Vt)})}(ft,ut):void 0===Vt?Ae(ft,ut):r(Vt)?function ce(ft,ut,Vt){u(function(nn){var Rn=!1,Pn=function ge(ft,ut,Vt,nn){try{ft.call(ut,Vt,nn)}catch(Rn){return Rn}}(Vt,ut,function(Jt){Rn||(Rn=!0,ut!==Jt?de(nn,Jt):Ae(nn,Jt))},function(Jt){Rn||(Rn=!0,Xe(nn,Jt))});!Rn&&Pn&&(Rn=!0,Xe(nn,Pn))},ft)}(ft,ut,Vt):Ae(ft,ut)}function de(ft,ut){if(ft===ut)Xe(ft,function me(){return new TypeError("You cannot resolve a promise with itself")}());else if(function i(ft){var ut=typeof ft;return null!==ft&&("object"===ut||"function"===ut)}(ut)){var Vt=void 0;try{Vt=ut.then}catch(nn){return void Xe(ft,nn)}Ue(ft,ut,Vt)}else Ae(ft,ut)}function ve(ft){ft._onerror&&ft._onerror(ft._result),We(ft)}function Ae(ft,ut){ft._state===ae&&(ft._result=ut,ft._state=1,0!==ft._subscribers.length&&u(We,ft))}function Xe(ft,ut){ft._state===ae&&(ft._state=2,ft._result=ut,u(ve,ft))}function Ye(ft,ut,Vt,nn){var Rn=ft._subscribers,Pn=Rn.length;ft._onerror=null,Rn[Pn]=ut,Rn[Pn+1]=Vt,Rn[Pn+2]=nn,0===Pn&&ft._state&&u(We,ft)}function We(ft){var ut=ft._subscribers,Vt=ft._state;if(0!==ut.length){for(var nn=void 0,Rn=void 0,Pn=ft._result,Jt=0;Jt<ut.length;Jt+=3)Rn=ut[Jt+Vt],(nn=ut[Jt])?at(Vt,nn,Rn,Pn):Rn(Pn);ft._subscribers.length=0}}function at(ft,ut,Vt,nn){var Rn=r(Vt),Pn=void 0,Jt=void 0,Mr=!0;if(Rn){try{Pn=Vt(nn)}catch(bn){Mr=!1,Jt=bn}if(ut===Pn)return void Xe(ut,function Oe(){return new TypeError("A promises callback cannot return that same promise.")}())}else Pn=nn;ut._state!==ae||(Rn&&Mr?de(ut,Pn):!1===Mr?Xe(ut,Jt):1===ft?Ae(ut,Pn):2===ft&&Xe(ut,Pn))}var ht=0;function $t(ft){ft[ne]=ht++,ft._state=void 0,ft._result=void 0,ft._subscribers=[]}var En=function(){function ft(ut,Vt){this._instanceConstructor=ut,this.promise=new ut(he),this.promise[ne]||$t(this.promise),o(Vt)?(this.length=Vt.length,this._remaining=Vt.length,this._result=new Array(this.length),0===this.length?Ae(this.promise,this._result):(this.length=this.length||0,this._enumerate(Vt),0===this._remaining&&Ae(this.promise,this._result))):Xe(this.promise,function un(){return new Error("Array Methods must be provided an Array")}())}return ft.prototype._enumerate=function(Vt){for(var nn=0;this._state===ae&&nn<Vt.length;nn++)this._eachEntry(Vt[nn],nn)},ft.prototype._eachEntry=function(Vt,nn){var Rn=this._instanceConstructor,Pn=Rn.resolve;if(Pn===Q){var Jt=void 0,Mr=void 0,bn=!1;try{Jt=Vt.then}catch(Ht){bn=!0,Mr=Ht}if(Jt===oe&&Vt._state!==ae)this._settledAt(Vt._state,nn,Vt._result);else if("function"!=typeof Jt)this._remaining--,this._result[nn]=Vt;else if(Rn===In){var Zn=new Rn(he);bn?Xe(Zn,Mr):Ue(Zn,Vt,Jt),this._willSettleAt(Zn,nn)}else this._willSettleAt(new Rn(function(Ht){return Ht(Vt)}),nn)}else this._willSettleAt(Pn(Vt),nn)},ft.prototype._settledAt=function(Vt,nn,Rn){var Pn=this.promise;Pn._state===ae&&(this._remaining--,2===Vt?Xe(Pn,Rn):this._result[nn]=Rn),0===this._remaining&&Ae(Pn,this._result)},ft.prototype._willSettleAt=function(Vt,nn){var Rn=this;Ye(Vt,void 0,function(Pn){return Rn._settledAt(1,nn,Pn)},function(Pn){return Rn._settledAt(2,nn,Pn)})},ft}();var In=function(){function ft(ut){this[ne]=function Wt(){return ht++}(),this._result=this._state=void 0,this._subscribers=[],he!==ut&&("function"!=typeof ut&&function lt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ft?function At(ft,ut){try{ut(function(nn){de(ft,nn)},function(nn){Xe(ft,nn)})}catch(Vt){Xe(ft,Vt)}}(this,ut):function wt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ft.prototype.catch=function(Vt){return this.then(null,Vt)},ft.prototype.finally=function(Vt){var Rn=this.constructor;return r(Vt)?this.then(function(Pn){return Rn.resolve(Vt()).then(function(){return Pn})},function(Pn){return Rn.resolve(Vt()).then(function(){throw Pn})}):this.then(Vt,Vt)},ft}();return In.prototype.then=oe,In.all=function nt(ft){return new En(this,ft).promise},In.race=function ct(ft){var ut=this;return o(ft)?new ut(function(Vt,nn){for(var Rn=ft.length,Pn=0;Pn<Rn;Pn++)ut.resolve(ft[Pn]).then(Vt,nn)}):new ut(function(Vt,nn){return nn(new TypeError("You must pass an array to race."))})},In.resolve=Q,In.reject=function De(ft){var Vt=new this(he);return Xe(Vt,ft),Vt},In._setScheduler=function l(ft){c=ft},In._setAsap=function h(ft){u=ft},In._asap=u,In.polyfill=function Gn(){var ft=void 0;if(void 0!==(void 0!==typeof window?window:global))ft=void 0!==typeof window?window:global;else if("undefined"!=typeof self)ft=self;else try{ft=Function("return this")()}catch(nn){throw new Error("polyfill failed because global object is unavailable in this environment")}var ut=ft.Promise;if(ut){var Vt=null;try{Vt=Object.prototype.toString.call(ut.resolve())}catch(nn){}if("[object Promise]"===Vt&&!ut.cast)return}ft.Promise=In},In.Promise=In,In}()}).call(this,t(43))},function(d,E){d.exports=function t(n){return n&&n.__esModule?n:{default:n}}},function(d,E,t){"use strict";const n=t(397),i=t(191),r=t(119),e=i(o=>{const s={};return Object.keys(r).forEach(c=>{const u=r[c].method,l=n(`OpenTok:${o}:${c.toLowerCase()}`);l.log=console[u].bind(console),s[c.toLowerCase()]=l}),s});e.setLogLevel=o=>{let s;try{s=(void 0!==typeof window?window:global).localStorage.debug}catch(u){s=""}const c=[...Object.keys(r).map(u=>`${o>=r[u].priority?"":"-"}(autogen)?OpenTok:*:${u.toLowerCase()}`),...(s||"").split(/[\s,]/).filter(u=>-1===u.indexOf("(autogen)?"))].filter(u=>u).join(",");n.enable(c)},d.exports=e},function(d,E,t){"use strict";const i=t(539).parse();d.exports=i},function(d,E,t){d.exports=t(531)},function(d,E,t){(function(n){function i(e,o,s,a,c,u,l){try{var h=e[u](l),p=h.value}catch(y){return void s(y)}h.done?o(p):n.resolve(p).then(a,c)}d.exports=function r(e){return function(){var o=this,s=arguments;return new n(function(a,c){var u=e.apply(o,s);function l(p){i(u,a,c,l,h,"next",p)}function h(p){i(u,a,c,l,h,"throw",p)}l(void 0)})}}}).call(this,t(0))},function(d,E,t){"use strict";d.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",GET_RTC_STATS_REPORT_NOT_SUPPORTED:"OT_GET_RTC_STATS_REPORT_NOT_SUPPORTED",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PEER_CONNECTION_NOT_CONNECTED:"OT_PEER_CONNECTION_NOT_CONNECTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",FAILED_SET_CONFIGURATION:"OT_FAILED_SET_CONFIGURATION",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",UNABLE_TO_SUBSCRIBE:"OT_UNABLE_TO_SUBSCRIBE",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE",SET_PROXY_URL_TIMING_ERROR:"OT_SET_PROXY_URL_TIMING_ERROR",PROXY_URL_ALREADY_SET_ERROR:"OT_PROXY_URL_ALREADY_SET_ERROR",SET_VIDEO_SOURCE_FAILURE:"OT_SET_VIDEO_SOURCE_FAILURE",INVALID_VIDEO_SOURCE:"OT_INVALID_VIDEO_SOURCE",REQUESTED_DEVICE_PERMISSION_DENIED:"OT_REQUESTED_DEVICE_PERMISSION_DENIED",INVALID_AUDIO_OUTPUT_SOURCE:"OT_INVALID_AUDIO_OUTPUT_SOURCE",INVALID_ENCRYPTION_SECRET:"OT_INVALID_ENCRYPTION_SECRET"}},function(d,E,t){"use strict";const n=t(31),i=t(17),r=t(2)("Events"),e=t(9),o=t(402);d.exports=function(a){const c=new n;return c.on("newListener",l=>{c.emit(`${l}:added`)}),c.on("removeListener",l=>{c.emit(`${l}:removed`)}),e(a,{on(l,h,p){return"string"==typeof l&&h?l.split(" ").forEach(y=>{c.on(y,o(h,p))}):Object.keys(l).forEach(y=>{c.on(y,o(l[y],h))}),this},off(l,h,p){return"string"==typeof l?this.off(l.split(" "),h,p):Array.isArray(l)?l.forEach(y=>{h&&i(h)?c.removeListener(y,o(h,p)):c.removeAllListeners(y)}):l?Object.keys(l).forEach(y=>{c.removeListener(y,o(l[y],h))}):c.removeAllListeners(),this},once(l,h,p){return"string"==typeof l&&h?l.split(" ").forEach(y=>{c.once(y,o(h,p))}):Object.keys(l).forEach(y=>{c.once(y,o(l[y],h))}),this},dispatchEvent(l){if(!l.type)throw new Error("dispatchEvent: Event has no type");return l.target||(l.target=this),this.trigger(l.type,l),this},trigger(l){try{for(var h=arguments.length,p=new Array(h>1?h-1:0),y=1;y<h;y++)p[y-1]=arguments[y];c.emit(l,...p)}catch(O){r.error("An error occurred in an event handler",O)}return this},emit(){return a.trigger(...arguments)},addEventListener:(l,h,p)=>(r.warn("The addEventListener() method is deprecated. Use on() or once() instead."),a.on(l,h,p)),removeEventListener:(l,h,p)=>(r.warn("The removeEventListener() method is deprecated. Use off() instead."),a.off(l,h,p)),listenerCount:l=>c.listenerCount(l)})}},function(d,E,t){"use strict";const n=t(245),i=t(249),r=t(7),e=t(2);n.logging=e("OT.$"),n.ElementCollection=t(246),n.env=t(3),n.ajax=t(244),n.statable=t(548),n.Analytics=t(26),n.Collection=t(248),n.domExtras=t(549),n.Error=t(250),i(n,"useLogHelpers",{value(o){const s=e("useLogHelpersDeprecatedMixin");return Object.keys(s).forEach(a=>{o[a]=s[a]}),o},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),n.defaults=t(140),i(n,"eventing",{value:r,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(n).forEach(o=>{const a=n[o]._attachToOTHelpers||{};Object.keys(a).forEach(c=>{Object.hasOwnProperty.call(n,c)&&!("util"===o&&"bind"===c)&&console.warn(`More than one module is trying to define ${c} on OTHelpers.`),n[c]=a[c]})}),d.exports=n},function(d,E,t){var n=t(84),i=t(41),r=t(192),e=t(25),o=t(69),s=t(30),c=Object.prototype.hasOwnProperty,u=r(function(l,h){if(o(h)||e(h))i(h,s(h),l);else for(var p in h)c.call(h,p)&&n(l,p,h[p])});d.exports=u},function(d,E,t){"use strict";d.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,PEER_CONNECTION_NOT_CONNECTED:1015,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,UNABLE_TO_FORCE_MUTE:1540,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,SET_PROXY_URL_TIMING_ERROR:2021,PROXY_URL_ALREADY_SET_ERROR:2022,GET_RTC_STATS_REPORT_NOT_SUPPORTED:2031,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(d,E){d.exports=function t(n){var i=typeof n;return null!=n&&("object"==i||"function"==i)}},function(d,E){d.exports=Array.isArray},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.Errors||t(6),e=i.OTErrorClass||t(22),o=Object.keys(r).map(s=>r[s]);return function(a,c,u){if(-1===o.indexOf(a))return new Error(`Attempt to use invalid error name (${a}). Original message: ${c.message}`);if(!(c instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(c))))return new Error(`Did not pass Error as second argument: ${c}`);const l=new e(void 0,c.message);if(l.name=a,!c.stack)try{throw c}catch(h){}return l.stack=c.stack,u&&(l.code=u),l}}},function(d,E,t){var n=t(174),i="object"==typeof self&&self&&self.Object===Object&&self,r=n||i||Function("return this")();d.exports=r},function(d,E){d.exports=function t(n,i,r){return i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,n}},function(d,E,t){var n=t(533),i=t(534),r=i;r.v1=n,r.v4=i,d.exports=r},function(d,E,t){var n=t(29),i=t(11);d.exports=function a(c){if(!i(c))return!1;var u=n(c);return"[object Function]"==u||"[object GeneratorFunction]"==u||"[object AsyncFunction]"==u||"[object Proxy]"==u}},function(d,E){d.exports=function t(n){return null!=n&&"object"==typeof n}},function(d,E){function t(){return d.exports=t=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},t.apply(this,arguments)}d.exports=t},function(d,E,t){"use strict";var n=t(208),i=Object.prototype.toString;function r(Z){return"[object Array]"===i.call(Z)}function e(Z){return void 0===Z}function h(Z){return null!==Z&&"object"==typeof Z}function p(Z){if("[object Object]"!==i.call(Z))return!1;var oe=Object.getPrototypeOf(Z);return null===oe||oe===Object.prototype}function b(Z){return"[object Function]"===i.call(Z)}function k(Z,oe){if(null!=Z)if("object"!=typeof Z&&(Z=[Z]),r(Z))for(var Q=0,ne=Z.length;Q<ne;Q++)oe.call(null,Z[Q],Q,Z);else for(var he in Z)Object.prototype.hasOwnProperty.call(Z,he)&&oe.call(null,Z[he],he,Z)}d.exports={isArray:r,isArrayBuffer:function s(Z){return"[object ArrayBuffer]"===i.call(Z)},isBuffer:function o(Z){return null!==Z&&!e(Z)&&null!==Z.constructor&&!e(Z.constructor)&&"function"==typeof Z.constructor.isBuffer&&Z.constructor.isBuffer(Z)},isFormData:function a(Z){return"undefined"!=typeof FormData&&Z instanceof FormData},isArrayBufferView:function c(Z){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(Z):Z&&Z.buffer&&Z.buffer instanceof ArrayBuffer},isString:function u(Z){return"string"==typeof Z},isNumber:function l(Z){return"number"==typeof Z},isObject:h,isPlainObject:p,isUndefined:e,isDate:function y(Z){return"[object Date]"===i.call(Z)},isFile:function O(Z){return"[object File]"===i.call(Z)},isBlob:function v(Z){return"[object Blob]"===i.call(Z)},isFunction:b,isStream:function T(Z){return h(Z)&&b(Z.pipe)},isURLSearchParams:function C(Z){return"undefined"!=typeof URLSearchParams&&Z instanceof URLSearchParams},isStandardBrowserEnv:function N(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:k,merge:function L(){var Z={};function oe(he,ae){Z[ae]=p(Z[ae])&&p(he)?L(Z[ae],he):p(he)?L({},he):r(he)?he.slice():he}for(var Q=0,ne=arguments.length;Q<ne;Q++)k(arguments[Q],oe);return Z},extend:function D(Z,oe,Q){return k(oe,function(he,ae){Z[ae]=Q&&"function"==typeof he?n(he,Q):he}),Z},trim:function w(Z){return Z.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function W(Z){return 65279===Z.charCodeAt(0)&&(Z=Z.slice(1)),Z}}},function(d,E,t){"use strict";const n=t(248),i={publishers:new n("guid"),subscribers:new n("widgetId"),sessions:new n};d.exports=i},function(d,E,t){"use strict";const n=t(2)("GlobalExceptionHandler"),i=t(7),r=t(27),e=t(547),o=t(23)(),s=function(c,u){Error.call(this),this.code=c,this.message=u};(s.prototype=Object.create(Error.prototype)).constructor=s,d.exports=s,i(s),s.getTitleByCode=function(a){return e[+a]},s.handleJsException=a=>{let c=a.error,u=a.errorMsg,l=a.code,h=a.target,p=a.analytics;if(!h)throw new Error("handleJsException requires target");const y=()=>void 0!==l?l:c&&c.code,O=()=>void 0!==u?u:c&&c.message,v=s.getTitleByCode(y());n.error(`OT.exception :: title: ${v} (${y()}) msg: ${O()}`);try{const b={partnerId:h.session?h.session.apiKey:h.apiKey,sessionId:h.session?h.session.sessionId:h.sessionId};p.logError(y(),"tb.exception",v,{details:O()},b);const T=new o.ExceptionEvent(r.EXCEPTION,O(),v,y(),h,h,c);if(c)T.stack=c.stack;else try{throw new Error}catch(C){T.stack=C.stack}s.dispatchEvent(T)}catch(b){n.error(`OT.exception :: Failed to dispatch exception - ${b.toString()}`)}}},function(d,E,t){"use strict";var n=t(1),i=n(t(46)),r=n(t(49));const e=t(126),o=t(27);d.exports=function(a){void 0===a&&(a={});const c=a.logging||t(2)("Events"),u={ExceptionEvent:function(b,T,C,w,N,k,L){return new e(b,!1,{error:L,message:T,title:C,code:w,component:N,target:k})},IssueReportedEvent:function(b,T){return new e(b,!1,{issueId:T})},EnvLoadedEvent:function(b){return new e(b,!1)}};let l=!1;u.ConnectionEvent=function(v){function b(T,C,w){return v.call(this,T,!1,{connection:C,reason:w})||this}return(0,r.default)(b,v),(0,i.default)(b,[{key:"connections",get:function(){return l||(c.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),l=!0),[this.connection]}}]),b}(e);let h=!1;u.StreamEvent=function(v){function b(T,C,w,N){return v.call(this,T,N,{stream:C,reason:w})||this}return(0,r.default)(b,v),(0,i.default)(b,[{key:"streams",get:function(){return h||(c.warn("OT.StreamEvent streams property is deprecated, use stream instead."),h=!0),[this.stream]}}]),b}(e);let p=!1,y=!1,O=!1;return u.SessionConnectEvent=function(v){function b(T){return v.call(this,T,!1)||this}return(0,r.default)(b,v),(0,i.default)(b,[{key:"connections",get:function(){return p||(c.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),p=!0),[]}},{key:"streams",get:function(){return y||(c.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),y=!0),[]}},{key:"archives",get:function(){return O||(c.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),O=!0),[]}}]),b}(e),u.SessionReconnectingEvent=function(){return new e(o.SESSION_RECONNECTING,!1)},u.SessionReconnectedEvent=function(){return new e(o.SESSION_RECONNECTED)},u.SessionDisconnectEvent=function(b,T,C){return new e(b,C,{reason:T})},u.StreamPropertyChangedEvent=function(b,T,C,w,N){return new e(b,!1,{stream:T,changedProperty:C,oldValue:w,newValue:N})},u.VideoDimensionsChangedEvent=function(b,T,C){return new e("videoDimensionsChanged",!1,{target:b,oldValue:T,newValue:C})},u.ArchiveEvent=function(b,T){return new e(b,!1,{id:T.id,name:T.name,status:T.status,archive:T})},u.ArchiveUpdatedEvent=function(b,T,C,w){return new e("updated",!1,{target:b,changedProperty:T,oldValue:C,newValue:w})},u.SignalEvent=function(b,T,C){return new e(b?`signal:${b}`:o.SIGNAL,!1,{data:T,from:C})},u.CaptionReceivedEvent=function(b,T){return new e("caption",!1,{caption:b,streamId:T})},u.StreamUpdatedEvent=function(b,T,C,w){return new e("updated",!1,{target:b,changedProperty:T,oldValue:C,newValue:w})},u.DestroyedEvent=function(b,T,C){return new e(b,!1,{target:T,reason:C})},u.ConnectionStateChangedEvent=function(b,T){return new e(b,!1,{target:T})},u.VideoEnabledChangedEvent=function(b,T){return new e(b,!1,{reason:T.reason})},u.VideoDisableWarningEvent=function(b){return new e(b,!1)},u.AudioLevelUpdatedEvent=function(b){return new e(o.AUDIO_LEVEL_UPDATED,!1,{audioLevel:b})},u.MediaStoppedEvent=function(b,T){return new e(o.MEDIA_STOPPED,!0,{target:b,track:T})},u.MuteForcedEvent=function(b){return new e(o.MUTE_FORCED,!1,b)},u.VideoElementCreatedEvent=function(b){return new e(o.VIDEO_ELEMENT_CREATED,!1,{element:b})},u}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5));d.exports=function(o){void 0===o&&(o={});const s=o.getNativeEnumerateDevices||t(287)(),a=o.getNativeMediaDevices||t(637)(),u=(o.currentAudioOutputDevice||t(105)).getCurrentAudioOutputDeviceId,l=o.env||t(3),h=o.global||(void 0!==typeof window?window:global),p={},y={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audiooutput:"audioOutput",audioInput:"audioInput",videoInput:"videoInput",audioOutput:"audioOutput"};return p.getNativeMediaDevices=()=>a(),p.hasEnumerateDevicesCapability=()=>"function"==typeof s(),p.hasDeviceChangeCapability=()=>{const v=a();return!(!v||!("ondevicechange"in v))},p.hasSetSinkIdCapability=()=>"setSinkId"in(null==h?void 0:h.HTMLMediaElement.prototype),p.hasAudioOutputApiSupport=()=>p.hasSetSinkIdCapability()&&p.hasDeviceChangeCapability(),p.hasEnumerateDevicesBug=()=>l.isSafari&&13.1===l.version,p.getMediaDevices=()=>p.hasEnumerateDevicesCapability()?s()().then(v=>v.map(b=>({deviceId:b.deviceId||b.id,label:b.label,kind:y[b.kind]}))):n.reject(new Error("This browser does not support enumerateDevices APIs")),p.getInputMediaDevices=()=>p.getMediaDevices().then(v=>v.filter(b=>/^(audio|video)Input$/.test(b.kind))),p.getAudioOutputMediaDevices=()=>p.getMediaDevices().then(v=>v.filter(b=>"audioOutput"===b.kind).map(b=>({deviceId:b.deviceId,label:b.label}))),p.shouldAskForDevices=()=>p.hasEnumerateDevicesCapability()?p.getInputMediaDevices().then(v=>{if(0===v.length)return{video:!0,audio:!0};const b=v.filter(C=>"audioInput"===C.kind),T=v.filter(C=>"videoInput"===C.kind);return p.hasEnumerateDevicesBug()&&0===T.length?{audio:!0,video:!0}:{video:T.length>0,audio:b.length>0,videoDevices:T,audioDevices:b}}).catch(()=>({video:!0,audio:!0})):n.resolve({video:!0,audio:!0}),p.getDefaultAudioOutputDeviceId=v=>Array.isArray(v)&&0!==v.length?(v.find(C=>"default"===C.deviceId)||v[0]).deviceId:"",p.hasDevice=(v,b)=>{let T=v;return Array.isArray(T)||(T=[]),T.some(C=>C.deviceId===b)},p.getActiveAudioOutputDevice=(0,e.default)(r.default.mark(function v(){var b,T,C;return r.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,N.next=3,p.getAudioOutputMediaDevices();case 3:b=N.sent,N.next=9;break;case 6:throw N.prev=6,N.t0=N.catch(0),N.t0;case 9:if(0!==b.length){N.next=11;break}return N.abrupt("return",{deviceId:null,label:null});case 11:return(T=b.find(k=>k.deviceId===u()))||(C=p.getDefaultAudioOutputDeviceId(b),T=b.find(k=>k.deviceId===C)),N.abrupt("return",T);case 14:case"end":return N.stop()}},v,null,[[0,6]])})),p}}).call(this,t(0))},function(d,E,t){var n=t(17),i=t(112);d.exports=function r(e){return null!=e&&i(e.length)&&!n(e)}},function(d,E,t){"use strict";var n=t(1),i=n(t(19)),r=n(t(4)),e=n(t(5)),o=n(t(46)),s=n(t(15));const a=t(241),c=t(535),u=t(141),l=t(35)(),h=t(550),p=t(7),y=t(552),O=t(555);let b=function(){function T(w){let N=void 0===w?{}:w,k=N.staticConfig,L=void 0===k?l.onlyLocal():k,D=N.sessionInfo,W=void 0===D?new u:D,Z=N.ajax,oe=N.queue,Q=N.getUserAgentClientHintData,ne=void 0===Q?O:Q,he=N.userAgentData,ae=void 0===he?"undefined"!=typeof navigator&&navigator.userAgentData:he;(0,s.default)(this,"getTurnServerName",ye=>{let Le,me;return ye&&"object"==typeof ye?((Array.isArray(ye)?ye:[ye]).forEach(ge=>{const ce=ge.urls||ge.url;(Array.isArray(ce)?ce:[ce]).forEach(Ue=>{const de=Ue.indexOf(":")+1,ve=Ue.lastIndexOf(":");Ue.includes("turns")?me=Ue.substring(de,ve):Le=Ue.substring(de,ve)})}),me||Le):Le}),this.ajax=Z,this.queue=oe,this.sessionInfo=W,this.getUserAgentClientHintData=ne,this.userAgentData=ae,this.staticConfig=L}var C=T.prototype;return C._getCachedUserAgentData=function(){var w=(0,e.default)(r.default.mark(function k(){return r.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(this.cachedUserAgentData){D.next=4;break}return D.next=3,this.getUserAgentClientHintData(this.userAgentData);case 3:this.cachedUserAgentData=D.sent;case 4:return D.abrupt("return",this.cachedUserAgentData);case 5:case"end":return D.stop()}},k,this)}));return function N(){return w.apply(this,arguments)}}(),C.commonQoSFields=function(){const N=this._analytics.proxyUrl,k=this.sessionInfo.messagingURL;return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:(void 0!==typeof window?window:global).location&&(void 0!==typeof window?window:global).location.href,logVersion:"2",apiServer:this.staticConfig.apiUrl,clientSystemTime:(new Date).getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,relayServer:this.getTurnServerName(this.sessionInfo.iceServers),p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:h(N,k),version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},C._getCommonDataFields=function(){var w=(0,e.default)(r.default.mark(function k(){var L,D;return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,a.getAsync();case 2:return L=Z.sent,Z.next=5,this._getCachedUserAgentData();case 5:return D=Z.sent,Z.abrupt("return",(0,i.default)({guid:L},this.commonQoSFields(),D));case 7:case"end":return Z.stop()}},k,this)}));return function N(){return w.apply(this,arguments)}}(),C.logError=function(N,k,L,D,W){void 0===W&&(W={}),this._getCommonDataFields().then(Z=>{const oe=[N,k,L,D,(0,i.default)({},Z,W)];T.emit("logError",...oe),this._analytics.logError(...oe)})},C.logEvent=function(N,k,L){void 0===N&&(N={}),this._getCommonDataFields().then(D=>{const W=(0,i.default)({},D,N);T.emit("logEvent",W),this._analytics.logEvent(W,!1,k,L)})},C.logQOS=function(N){void 0===N&&(N={}),this._getCommonDataFields().then(k=>{const L=(0,i.default)({duration:0},k,N);y(L),T.emit("logQOS",L),this._analytics.logQOS(L)})},(0,o.default)(T,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(N){this._staticConfig=N,this._analytics=new c({loggingUrl:this.staticConfig.loggingUrl,ajax:this.ajax,queue:this.queue})}}]),T}();p(b),d.exports=b},function(d,E,t){"use strict";d.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",MUTE_FORCED:"muteForced",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",SUBSCRIBER_CAPTION_RECEIVED:"captionReceived",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(d,E,t){"use strict";var n=!0,i=!0;function r(o,s,a){var c=o.match(s);return c&&c.length>=a&&parseInt(c[a],10)}d.exports={extractVersion:r,wrapPeerConnectionEvent:function e(o,s,a){if(o.RTCPeerConnection){var c=o.RTCPeerConnection.prototype,u=c.addEventListener;c.addEventListener=function(h,p){if(h!==s)return u.apply(this,arguments);var y=function(O){var v=a(O);v&&p(v)};return this._eventMap=this._eventMap||{},this._eventMap[p]=y,u.apply(this,[h,y])};var l=c.removeEventListener;c.removeEventListener=function(h,p){if(h!==s||!this._eventMap||!this._eventMap[p])return l.apply(this,arguments);var y=this._eventMap[p];return delete this._eventMap[p],l.apply(this,[h,y])},Object.defineProperty(c,"on"+s,{get:function(){return this["_on"+s]},set:function(h){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),h&&this.addEventListener(s,this["_on"+s]=h)},enumerable:!0,configurable:!0})}},disableLog:function(o){return"boolean"!=typeof o?new Error("Argument type: "+typeof o+". Please use a boolean."):(n=o,o?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(o){return"boolean"!=typeof o?new Error("Argument type: "+typeof o+". Please use a boolean."):(i=!o,"adapter.js deprecation warnings "+(o?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(o,s){!i||console.warn(o+" is deprecated, please use "+s+" instead.")},detectBrowser:function(o){var s=o&&o.navigator,a={browser:null,version:null};if(void 0===o||!o.navigator)return a.browser="Not a browser.",a;if(s.mozGetUserMedia)a.browser="firefox",a.version=r(s.userAgent,/Firefox\/(\d+)\./,1);else if(s.webkitGetUserMedia)a.browser="chrome",a.version=r(s.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(s.mediaDevices&&s.userAgent.match(/Edge\/(\d+).(\d+)$/))a.browser="edge",a.version=r(s.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!o.RTCPeerConnection||!s.userAgent.match(/AppleWebKit\/(\d+)\./))return a.browser="Not a supported browser.",a;a.browser="safari",a.version=r(s.userAgent,/AppleWebKit\/(\d+)\./,1)}return a}}},function(d,E,t){var n=t(40),i=t(358),r=t(359),s=n?n.toStringTag:void 0;d.exports=function a(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":s&&s in Object(c)?i(c):r(c)}},function(d,E,t){var n=t(178),i=t(114),r=t(25);d.exports=function e(o){return r(o)?n(o):i(o)}},function(d,E,t){"use strict";(function(n){var e,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(k,L,D){return Function.prototype.apply.call(k,L,D)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var s=Number.isNaN||function(k){return k!=k};function a(){a.init.call(this)}d.exports=a,d.exports.once=function w(N,k){return new n(function(L,D){function W(){void 0!==Z&&N.removeListener("error",Z),L([].slice.call(arguments))}var Z;"error"!==k&&(Z=function(Q){N.removeListener(k,W),D(Q)},N.once("error",Z)),N.once(k,W)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(N){if("function"!=typeof N)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function l(N){return void 0===N._maxListeners?a.defaultMaxListeners:N._maxListeners}function h(N,k,L,D){var W,Z,oe;if(u(L),void 0===(Z=N._events)?(Z=N._events=Object.create(null),N._eventsCount=0):(void 0!==Z.newListener&&(N.emit("newListener",k,L.listener?L.listener:L),Z=N._events),oe=Z[k]),void 0===oe)oe=Z[k]=L,++N._eventsCount;else if("function"==typeof oe?oe=Z[k]=D?[L,oe]:[oe,L]:D?oe.unshift(L):oe.push(L),(W=l(N))>0&&oe.length>W&&!oe.warned){oe.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+oe.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=N,Q.type=k,Q.count=oe.length,function o(N){console&&console.warn&&console.warn(N)}(Q)}return N}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(N,k,L){var D={fired:!1,wrapFn:void 0,target:N,type:k,listener:L},W=p.bind(D);return W.listener=L,D.wrapFn=W,W}function O(N,k,L){var D=N._events;if(void 0===D)return[];var W=D[k];return void 0===W?[]:"function"==typeof W?L?[W.listener||W]:[W]:L?function C(N){for(var k=new Array(N.length),L=0;L<k.length;++L)k[L]=N[L].listener||N[L];return k}(W):b(W,W.length)}function v(N){var k=this._events;if(void 0!==k){var L=k[N];if("function"==typeof L)return 1;if(void 0!==L)return L.length}return 0}function b(N,k){for(var L=new Array(k),D=0;D<k;++D)L[D]=N[D];return L}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(N){if("number"!=typeof N||N<0||s(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");c=N}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(k){if("number"!=typeof k||k<0||s(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(k){for(var L=[],D=1;D<arguments.length;D++)L.push(arguments[D]);var W="error"===k,Z=this._events;if(void 0!==Z)W=W&&void 0===Z.error;else if(!W)return!1;if(W){var oe;if(L.length>0&&(oe=L[0]),oe instanceof Error)throw oe;var Q=new Error("Unhandled error."+(oe?" ("+oe.message+")":""));throw Q.context=oe,Q}var ne=Z[k];if(void 0===ne)return!1;if("function"==typeof ne)r(ne,this,L);else{var he=ne.length,ae=b(ne,he);for(D=0;D<he;++D)r(ae[D],this,L)}return!0},a.prototype.on=a.prototype.addListener=function(k,L){return h(this,k,L,!1)},a.prototype.prependListener=function(k,L){return h(this,k,L,!0)},a.prototype.once=function(k,L){return u(L),this.on(k,y(this,k,L)),this},a.prototype.prependOnceListener=function(k,L){return u(L),this.prependListener(k,y(this,k,L)),this},a.prototype.off=a.prototype.removeListener=function(k,L){var D,W,Z,oe,Q;if(u(L),void 0===(W=this._events))return this;if(void 0===(D=W[k]))return this;if(D===L||D.listener===L)0==--this._eventsCount?this._events=Object.create(null):(delete W[k],W.removeListener&&this.emit("removeListener",k,D.listener||L));else if("function"!=typeof D){for(Z=-1,oe=D.length-1;oe>=0;oe--)if(D[oe]===L||D[oe].listener===L){Q=D[oe].listener,Z=oe;break}if(Z<0)return this;0===Z?D.shift():function T(N,k){for(;k+1<N.length;k++)N[k]=N[k+1];N.pop()}(D,Z),1===D.length&&(W[k]=D[0]),void 0!==W.removeListener&&this.emit("removeListener",k,Q||L)}return this},a.prototype.removeAllListeners=function(k){var L,D,W;if(void 0===(D=this._events))return this;if(void 0===D.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==D[k]&&(0==--this._eventsCount?this._events=Object.create(null):delete D[k]),this;if(0===arguments.length){var oe,Z=Object.keys(D);for(W=0;W<Z.length;++W)"removeListener"!==(oe=Z[W])&&this.removeAllListeners(oe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(L=D[k]))this.removeListener(k,L);else if(void 0!==L)for(W=L.length-1;W>=0;W--)this.removeListener(k,L[W]);return this},a.prototype.listeners=function(k){return O(this,k,!0)},a.prototype.rawListeners=function(k){return O(this,k,!1)},a.listenerCount=function(N,k){return"function"==typeof N.listenerCount?N.listenerCount(k):v.call(N,k)},a.prototype.listenerCount=v,a.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}}).call(this,t(0))},function(d,E,t){"use strict";var n=t(44);d.exports=function(i){if(!n(i))throw new TypeError("Cannot use null or undefined");return i}},function(d,E,t){"use strict";var n=t(57),i=t(199),r=t(125),e=t(200),o=t(201),s=d.exports=function(a,c){var u,l,h,p,y;return arguments.length<2||"string"!=typeof a?(p=c,c=a,a=null):p=arguments[2],n(a)?(u=o.call(a,"c"),l=o.call(a,"e"),h=o.call(a,"w")):(u=h=!0,l=!1),y={value:c,configurable:u,enumerable:l,writable:h},p?r(e(p),y):y};s.gs=function(a,c,u){var l,h,p,y;return"string"!=typeof a?(p=u,u=c,c=a,a=null):p=arguments[3],n(c)?i(c)?n(u)?i(u)||(p=u,u=void 0):u=void 0:(p=c,c=u=void 0):c=void 0,n(a)?(l=o.call(a,"c"),h=o.call(a,"e")):(l=!0,h=!1),y={get:c,set:u,configurable:l,enumerable:h},p?r(e(p),y):y}},function(d,E){d.exports=function t(n,i){for(var r=-1,e=null==n?0:n.length,o=Array(e);++r<e;)o[r]=i(n[r],r,n);return o}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(19)),e=i(t(46));const o=t(207),s=t(58),a=t(476),c=t(523),u=t(2)("StaticConfig"),h=t(138).prependProxyToUrlIfNeeded,p=s({version:"v2.23.7",buildHash:"5807f4903",minimumVersion:{firefox:52,chrome:49},debug:"false",websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com"}),y=a(["apiURL","assetURL","cdnURL","sessionInfoOverrides","loggingURL"]),O={apiUrl:"apiURL",loggingUrl:"loggingURL"},v=c(T=>O[T]);d.exports=function b(T){let w=(void 0===T?{}:T).axios,N=void 0===w?o:w;return function(){function L(D){Object.defineProperty(this,"config",{value:Object.freeze(s(D))})}return L.onlyLocal=function(){const W=s((void 0!==typeof window?window:global).OTProperties);return new L((0,r.default)({},p,y(W)))},L.get=function(W){let Z=W.partnerId,oe=W.token,Q=W.useIpWhitelistConfigUrl,ne=W.proxyUrl;return(()=>{const ae=this.onlyLocal();if(!ae.configUrl)return n.resolve({});if(!0===Q&&!ae.ipWhitelistConfigUrl)return n.resolve({});let ye=!0===Q?ae.ipWhitelistConfigUrl:ae.configUrl;return ye=h(ye,ne),N.get(`${ye}/project/${Z}/config.json`,{headers:{"X-TB-TOKEN-AUTH":oe}}).then(Le=>Le.data)})().catch(ae=>(u.error("could not reach live config service",ae),{})).then(ae=>{const ye=s((void 0!==typeof window?window:global).OTProperties);return new L((0,r.default)({},p,y(ye),v(ae)))})},(0,e.default)(L,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"apiEnabled",get:function(){return void 0===this.config.apiEnabled||this.config.apiEnabled}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return`js-${(this.version||"unknown").replace("v","")}`}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return"true"===this.config.debug||!0===this.config.debug}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||`${(void 0!==typeof window?window:global).location.protocol}//${(void 0!==typeof window?window:global).location.host}`}},{key:"assetUrl",get:function(){return this.config.assetURL||`${this.cdnUrl}/webrtc/${this.version}`}}]),L}()}}).call(this,t(0))},function(d,E,t){var n=t(502),i=t(508),r=t(89),e=t(12),o=t(513);d.exports=function s(a){return"function"==typeof a?a:null==a?r:"object"==typeof a?e(a)?i(a[0],a[1]):n(a):o(a)}},function(d,E,t){"use strict";const n=t(8);d.exports=function(r,e){let o;const s=e||{};r.setDisplayMode=function(a){const c=a||"auto";o!==c&&(n.removeClass(this.domElement,`OT_mode-${o}`),n.addClass(this.domElement,`OT_mode-${c}`),o=c)},r.getDisplayMode=function(){return o},r.showAfterLoading=function(){n.removeClass(this.domElement,"OT_hide-forced")},r.hideWhileLoading=function(){n.addClass(this.domElement,"OT_hide-forced")},r.destroy=function(){return s.onDestroy&&s.onDestroy(this.domElement),this.domElement&&n.removeElement(this.domElement),r},r.appendTo=function(a){return this.domElement=n.createElement(s.nodeName||"div",s.htmlAttributes,s.htmlContent),s.onCreate&&s.onCreate(this.domElement),r.setDisplayMode(s.mode),"auto"===s.mode&&(n.addClass(r.domElement,"OT_mode-on-hold"),setTimeout(()=>{n.removeClass(r.domElement,"OT_mode-on-hold")},2e3)),a.appendChild(this.domElement),r}}},function(d,E,t){var n=t(78);d.exports=function r(e){return n(e,4)}},function(d,E,t){var n=t(357),i=t(362);d.exports=function r(e,o){var s=i(e,o);return n(s)?s:void 0}},function(d,E,t){var n=t(14);d.exports=n.Symbol},function(d,E,t){var n=t(84),i=t(64);d.exports=function r(e,o,s,a){var c=!s;s||(s={});for(var u=-1,l=o.length;++u<l;){var h=o[u],p=a?a(s[h],e[h],h,s,e):void 0;void 0===p&&(p=e[h]),c?i(s,h,p):n(s,h,p)}return s}},function(d,E,t){var n=t(386),i=t(109),r=t(387),e=t(186),o=t(187),s=t(29),a=t(175),c="[object Map]",l="[object Promise]",h="[object Set]",p="[object WeakMap]",y="[object DataView]",O=a(n),v=a(i),b=a(r),T=a(e),C=a(o),w=s;(n&&w(new n(new ArrayBuffer(1)))!=y||i&&w(new i)!=c||r&&w(r.resolve())!=l||e&&w(new e)!=h||o&&w(new o)!=p)&&(w=function(N){var k=s(N),L="[object Object]"==k?N.constructor:void 0,D=L?a(L):"";if(D)switch(D){case O:return y;case v:return c;case b:return l;case T:return h;case C:return p}return k}),d.exports=w},function(d,E){var n,i,t=d.exports={};function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(v){if(n===setTimeout)return setTimeout(v,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(v,0);try{return n(v,0)}catch(b){try{return n.call(null,v,0)}catch(T){return n.call(this,v,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(v){n=r}try{i="function"==typeof clearTimeout?clearTimeout:e}catch(v){i=e}}();var u,a=[],c=!1,l=-1;function h(){!c||!u||(c=!1,u.length?a=u.concat(a):l=-1,a.length&&p())}function p(){if(!c){var v=o(h);c=!0;for(var b=a.length;b;){for(u=a,a=[];++l<b;)u&&u[l].run();l=-1,b=a.length}u=null,c=!1,function s(v){if(i===clearTimeout)return clearTimeout(v);if((i===e||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(v);try{i(v)}catch(b){try{return i.call(null,v)}catch(T){return i.call(this,v)}}}(v)}}function y(v,b){this.fun=v,this.array=b}function O(){}t.nextTick=function(v){var b=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)b[T-1]=arguments[T];a.push(new y(v,b)),1===a.length&&!c&&o(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=O,t.addListener=O,t.once=O,t.off=O,t.removeListener=O,t.removeAllListeners=O,t.emit=O,t.prependListener=O,t.prependOnceListener=O,t.listeners=function(v){return[]},t.binding=function(v){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(v){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(d,E,t){"use strict";var n=t(405)();d.exports=function(i){return i!==n&&null!==i}},function(d,E,t){"use strict";d.exports=t(419)()?t(92).Symbol:t(422)},function(d,E){function t(i,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}d.exports=function n(i,r,e){return r&&t(i.prototype,r),e&&t(i,e),i}},function(d,E,t){var n=t(71);d.exports=function r(e){if("string"==typeof e||n(e))return e;var o=e+"";return"0"==o&&1/e==-1/0?"-0":o}},function(d,E,t){var n=t(520),r=t(137)(function(e,o){return null==e?{}:n(e,o)});d.exports=r},function(d,E){d.exports=function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}},function(d,E,t){"use strict";const n=(void 0!==typeof window?window:global).performance||{};d.exports=function(){return n.now?n.timing.navigationStart+n.now():Date.now()}},function(d,E,t){var n=t(586);d.exports=function i(r){return n(2,r)}},function(d,E,t){"use strict";const n=t(51),i=t(35)();E.check=function(r){void 0===r&&(r={});const e=r.env||t(3),o=r.hasGetUserMediaCapability||t(594),s=r.hasPeerConnectionCapability||t(595),a=r.logging||t(2)("hasOpenTokSupport"),l=((r.staticConfig||i.onlyLocal()).minimumVersion||{})[e.name.toLowerCase()];return l&&l>e.version?(a.debug("Support for",e.name,"is disabled because we require",l,"but this is",e.version),!1):"Node"===e.name||o()&&s()},E.once=n(()=>E.check())},function(d,E,t){"use strict";function r(v,b){(null==b||b>v.length)&&(b=v.length);for(var T=0,C=new Array(b);T<b;T++)C[T]=v[T];return C}const e=t(9),o=t(62),s=t(273),a=t(127),c=t(274),u=t(2)("SDPHelpers"),p={getSections:v=>v.split(/\r\n|\r|\n/).reduce((b,T)=>{const C=T.match(/^m=(\w+) \d+/);return C&&(b.sections[b.section=C[1]]=[]),b.sections[b.section].push(T),b},{sections:{header:[]},section:"header"}).sections,getCodecsAndCodecMap(v,b){const T=p.getSections(v)[b];if(!T)throw new Error(`no mediaType ${b}`);return{codecs:T[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),codecMap:e(...T.filter(N=>N.match(/^a=rtpmap:\d+/)).map(N=>N.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)).map(N=>({[N[0]]:N[1]})))}},getCodecs(v,b){const T=p.getCodecsAndCodecMap(v,b);return T.codecs.map(C=>T.codecMap[C]||"Unknown codec")},mediaDirections:{INACTIVE:"inactive",RECVONLY:"recvonly"}};d.exports=p,p.getMLineIndex=function(b,T){const C=`m=${T}`;return s(b,w=>-1!==w.indexOf(C))},p.getMLine=function(b,T){const C=p.getMLineIndex(b,T);return C>-1?b[C]:void 0},p.hasMediaType=(v,b)=>{const T=new RegExp(`^m=${b}`),C=v.split("\r\n");return s(C,w=>T.test(w))>=0},p.hasMLinePayloadType=function(b,T,C){const w=p.getMLine(b,T);return p.getMLinePayloadTypes(w,T).indexOf(C)>-1},p.getMLinePayloadTypes=function(b,T){const C=new RegExp(`^m=${T} \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$`,"i"),w=b.match(C);return!w||w.length<2?[]:w[2].trim().split(" ")},p.splitSections=function(b){return b.split("\nm=").map((C,w)=>(w>0?"m="+C:C).trim()+"\r\n")},p.changeMediaDirection=function(b,T){const w=p.splitSections(b);let k=w.shift();return w.forEach(L=>{k+=L.includes("m=video")?(L=>{const W=new RegExp(T===p.mediaDirections.RECVONLY?"a=inactive":"a=recvonly","g");return L.replace(W,`a=${T}`)})(L):L}),k},p.removeTypesFromMLine=function(b,T){const C=/[0-9 ]*$/.exec(b)[0],w=C.split(" ").filter(N=>""!==N&&-1===T.indexOf(N));return b.replace(C,` ${w.join(" ")}`)},p.removeMediaEncoding=function(b,T,C){let w,N,k,L,D=b.split("\r\n");const W=p.getMLineIndex(D,T),Z=W>-1?D[W]:void 0,oe=[];if(-1===W||(w=p.getMLinePayloadTypes(Z,T),0===w.length))return D.join("\r\n");for(N=W;N<D.length;N++){const Q=new RegExp(C,"i");0===D[N].indexOf("a=rtpmap:")&&(L=D[N].split(" "),2===L.length&&Q.test(L[1])&&oe.push(L[0].substr(9)))}if(!oe.length)return D.join("\r\n");for(N=W;N<D.length;N++)if(0===D[N].indexOf("a=fmtp:"))for(L=D[N].split(" "),k=0;k<oe.length;k++)2===L.length&&L[1]===`apt=${oe[k]}`&&oe.push(L[0].substr(7));return D=D.filter(Q=>{for(let ne=0;ne<oe.length;ne++)if(0===Q.indexOf(`a=rtpmap:${oe[ne]} `)||0===Q.indexOf(`a=fmtp:${oe[ne]} `)||0===Q.indexOf(`a=rtcp-fb:${oe[ne]} `))return!1;return!0}),oe.length>0&&W>-1&&(D[W]=p.removeTypesFromMLine(Z,oe)),D.join("\r\n")},p.disableMediaType=function(b,T){const C=b.split("\r\n"),w=[];let N;C.forEach(D=>{let W=D;/^m=/.test(W)&&(N=void 0),N||(N=[],w.push(N)),N.push(W)});const k=new RegExp(`^m=${T} \\d+ ([^ ]+) [0-9 ]+$`),L=w.map(D=>{const W=D[0].match(k);return W?[`m=${T} 0 ${W[1]} 0`,"a=inactive",...D.filter(Z=>/^c=/.test(Z)||/^a=mid:/.test(Z)||""===Z)]:D});return[].concat(...L).join("\r\n")},p.removeVideoCodec=function(b,T){return p.removeMediaEncoding(b,"video",T)};const y=function(b,T){let C=T.filterByName("ssrc-group:FID");switch(C=0===C.length?[]:C[0].value.split(" "),C.length){case 0:case 1:var N=T.find(L=>0===L.name.indexOf("rtpmap:")&&L.value.indexOf("rtx/90000")>-1);if(!N)return!1;var k=N.name.split(":")[1];return k.indexOf("/")>-1&&(k=k.split("/")[0]),p.hasMLinePayloadType(b,"video",k);default:return u.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};p.getAttributesForMediaType=function(b,T){let C,w,N,k,L,D,W,Z,oe,Q;const ne=p.getMLineIndex(b,T),he=new RegExp(`m=(?!${T}).+ `,"i"),ae=new RegExp("a=ssrc:\\d+ .*","i"),ye=new RegExp("a=ssrc-group:(SIM|FID) (\\d+).*?","i"),Le=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),me=[];for(let Oe=ne+1;Oe<b.length;Oe++){if(he.test(b[Oe])){void 0!==C&&(w=Oe-1);break}L=b[Oe].match(ye),D=b[Oe].match(ae),void 0===C&&(L||D)&&(C=Oe,L&&(k=/^(FID|SIM)$/.test(L[1])?L[2]:L[1])),W=b[Oe].match(`a=ssrc:${k} msid:(.+)`),W&&(Z=W[1]);const ge=ae.test(b[Oe]),ce=ye.test(b[Oe]);void 0!==C&&(void 0!==w||ge||ce?Oe===b.length-1&&(w=Oe):w=Oe-1);const pe=b[Oe].match(/a=mid:(.+)/);pe&&(oe=pe[1],Q=Oe),N=Le.exec(b[Oe]),N&&3===N.length&&me.push({lineIndex:Oe,name:N[1],value:N[2]})}return me.ssrcStartIndex=C,me.ssrcEndIndex=w,me.msid=Z,me.mid=oe,me.midIndex=Q,me.isUsingRTX=y.bind(null,b,me),me.filterByName=function(ge){return this.filter(ce=>ce.name===ge)},me.getRtpNumber=Oe=>{const ge=new RegExp("rtpmap:(.+)");return o(me.map(ce=>{const pe=ce.name.match(ge);return pe&&ce.value.indexOf(Oe)>=0?pe[1]:null}),ce=>null!==ce)},me},p.modifyDtx=(v,b)=>{const T=v.split("\r\n");if(!p.getMLine(T,"audio"))return u.debug("No audio m-line, not enabling dtx."),v;const C=p.getAttributesForMediaType(T,"audio"),w=C.getRtpNumber("opus");if(!w)return u.debug("Could not find rtp number for opus, not enabling dtx."),v;const N=C.find(D=>D.name===`fmtp:${w}`);if(!N)return u.debug("Could not find a=fmtp line for opus, not enabling dtx."),v;let k=T[N.lineIndex];const L=/usedtx=\d+([\s;]*)/;return L.test(N.value)?k=k.replace(L,b?"usedtx=1$1":""):b&&(k+="; usedtx=1"),k=k.replace(/[;\s]*$/,""),T[N.lineIndex]=k,T.join("\r\n")};const O=(v,b,T)=>{const C=b.split("\r\n");if(!p.getMLine(C,"audio"))return u.debug("No audio m-line, not enabling stereo."),b;const w=p.getAttributesForMediaType(C,"audio"),N=w.getRtpNumber("opus");if(!N)return u.debug("Could not find rtp number for opus, not enabling stereo."),b;const k=w.find(W=>W.name===`fmtp:${N}`);if(!k)return u.debug("Could not find a=fmtp line for opus, not enabling stereo."),b;let D,L=C[k.lineIndex];switch(v){case"send":D=/sprop-stereo=\d+([\s;]*)/,D.test(k.value)?L=L.replace(D,T?"sprop-stereo=1$1":""):T&&(L+="; sprop-stereo=1");break;case"receive":D=/([^-])stereo=\d+([\s;]*)/,D.test(k.value)?L=L.replace(D,T?"$1stereo=1$2":"$1"):T&&(L+="; stereo=1");break;default:throw new Error(`Invalid type ${v} passed into enableStereo`)}return L=L.replace(/[;\s]*$/,""),C[k.lineIndex]=L,C.join("\r\n")};p.modifySendStereo=O.bind(null,"send"),p.modifyReceiveStereo=O.bind(null,"receive"),p.setAudioBitrate=(v,b)=>{const T=p.getAudioBitrate(v);if(void 0!==T)return u.debug(`Audio bitrate already set to ${T}, not setting audio bitrate`),v;const C=v.split("\r\n");if(!p.getMLine(C,"audio"))return u.debug("No audio m-line, not setting audio bitrate"),v;const w=p.getAttributesForMediaType(C,"audio"),N=w.getRtpNumber("opus");if(!N)return u.debug("Could not find rtp number for opus, not setting audio bitrate."),v;const k=w.find(D=>D.name===`fmtp:${N}`);if(!k)return u.debug("Could not find a=fmtp line for opus, not setting audio bitrate."),v;let L=C[k.lineIndex];return L+=`; maxaveragebitrate=${b}`,L=L.replace(/[;\s]*$/,""),C[k.lineIndex]=L,C.join("\r\n")},p.removeVideoOrientation=v=>{let b=v.split("\r\n");return b=b.filter(T=>!T.includes("urn:3gpp:video-orientation")),b.join("\r\n")},p.hasSendStereo=v=>/[\s;]sprop-stereo=1/.test(v),p.hasSendDtx=v=>/[\s;]usedtx=1/.test(v),p.getAudioBitrate=v=>{const b=v.match(/[\s;]maxaveragebitrate=(\d+)/);if(b)return Number(b[1])},p.MAX_SSRCS=10,p.getSSRCGroupType=v=>["SIM","FID"].find(T=>v.filterByName(`ssrc-group:${T}`)[0]),p.getSSRCGroup=v=>{const b=p.getSSRCGroupType(v);return v.filterByName(`ssrc-group:${b}`)[0]},p.getSSRCGroupSSRCs=v=>{const b=p.getSSRCGroup(v);return b?b.value.split(" ").slice(0,p.MAX_SSRCS):[]},p.getAllowedSSRCs=(v,b)=>{const T=b.slice();return v.filterByName("ssrc-group:FID").forEach(C=>{const w=C.value.split(" ");a(T,w).length&&Array.prototype.push.apply(T,w)}),c(T)},p.filterExcessSSRCs=v=>{const b=v.split("\r\n"),T=p.getAttributesForMediaType(b,"video"),C=p.getSSRCGroupType(T),w=T.ssrcStartIndex;if(void 0===w)return v;let N;const k=D=>{let W=null;return D.match(/^a=ssrc:(\d+)/)&&(W=RegExp.$1),W};if(C){const D=p.getSSRCGroupSSRCs(T),W=[`a=ssrc-group:${C}`,...D].join(" ");b[T.find(oe=>oe.name.startsWith("ssrc-group:")).lineIndex]=W,N=p.getAllowedSSRCs(T,D)}else N=[],T.ssrcStartIndex&&N.push(k(b[T.ssrcStartIndex]));return b.filter((D,W)=>{if(W<w||W>T.ssrcEndIndex)return!0;if(W===w){if(!C){const oe=k(D);return oe?N.includes(oe):!/^a=ssrc:(\d+)/.test(D)}return!0}const Z=k(D);if(Z)return N.includes(Z);if(D.match(/^a=ssrc-group:FID (\d+)/)){const oe=RegExp.$1;return N.includes(oe)}return!D.match(/^a=ssrc-group:SIM /)}).join("\r\n")},p.enableSimulcast=function(b,T){let C,w;const N=b.split("\r\n");if(!p.getMLine(N,"video"))return u.debug("No video m-line, not enabling simulcast."),b;const k=p.getAttributesForMediaType(N,"video");if(k.filterByName("ssrc-group:SIM").length>0)return u.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),p.filterExcessSSRCs(b);if(!k.msid)return u.debug("No local stream attached, not enabling simulcast."),b;const L=k.isUsingRTX(),D=[],W=[];for(w=0;w<T;++w)D.push(1e4+w),L&&W.push(2e4+w);if(C=[`a=ssrc-group:SIM ${D.join(" ")}`],L)for(w=0;w<T;++w)C.push(`a=ssrc-group:FID ${D[w]} ${W[w]}`);for(w=0;w<T;++w)C.push(`a=ssrc:${D[w]} cname:localCname`,`a=ssrc:${D[w]} msid:${k.msid}`);if(L)for(w=0;w<T;++w)C.push(`a=ssrc:${W[w]} cname:localCname`,`a=ssrc:${W[w]} msid:${k.msid}`);return C.unshift(k.ssrcStartIndex,k.ssrcEndIndex-k.ssrcStartIndex+1),N.splice(...C),N.join("\r\n")},p.reprioritizeVideoCodec=function(b,T,C){const w=b.split("\r\n"),N=p.getMLineIndex(w,"video");if(-1===N)return b;const k=p.getMLinePayloadTypes(w[N],"video"),L=new RegExp(`^a=rtpmap:(\\d+).* ${T}`,"i"),D=w.map(Q=>Q.match(L)).filter(Q=>null!==Q);if(0===D.length)return b;const W=D.map(Q=>Q[1]);let Z=k.filter(Q=>-1===W.indexOf(Q));"top"===C?Z.unshift(...W):"bottom"===C?Z.push(...W):(u.error(`Unexpected location param: ${C}; not changing ${T} priority`),Z=k);const oe=w[N].replace(k.join(" "),Z.join(" "));return w[N]=oe,w.join("\r\n")},p.getSetupRole=v=>{for(var T,b=function n(v,b){var T;if("undefined"==typeof Symbol||null==v[Symbol.iterator]){if(Array.isArray(v)||(T=function i(v,b){if(v){if("string"==typeof v)return r(v,b);var T=Object.prototype.toString.call(v).slice(8,-1);if("Object"===T&&v.constructor&&(T=v.constructor.name),"Map"===T||"Set"===T)return Array.from(v);if("Arguments"===T||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return r(v,b)}}(v))||b&&v&&"number"==typeof v.length){T&&(v=T);var C=0;return function(){return C>=v.length?{done:!0}:{done:!1,value:v[C++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(T=v[Symbol.iterator]()).next.bind(T)}(v.split(/\r\n|\r|\n/));!(T=b()).done;){const w=T.value.match(/^a=setup:(\w+)/);if(w)return w[1]}return""},p.setSetupRole=(v,b)=>v.split(/\r\n|\r|\n/).map(T=>T.match(/^a=setup:(\w+)/)?`a=setup:${b}`:T).join("\r\n")},function(d,E){d.exports=function t(n,i){return n===i||n!=n&&i!=i}},function(d,E,t){var n=t(178),i=t(381),r=t(25);d.exports=function e(o){return r(o)?n(o,!0):i(o)}},function(d,E){d.exports=function t(n,i){var r=-1,e=n.length;for(i||(i=Array(e));++r<e;)i[r]=n[r];return i}},function(d,E,t){"use strict";d.exports=function(i){return null!=i}},function(d,E,t){var n=t(78);d.exports=function e(o){return n(o,5)}},function(d,E,t){var n=t(99);d.exports=function i(r,e,o){var s=null==r?void 0:n(r,e);return void 0===s?o:s}},function(d,E,t){var n=t(12),i=t(136),r=t(236),e=t(61);d.exports=function o(s,a){return n(s)?s:i(s,a)?[s]:r(e(s))}},function(d,E,t){var n=t(510);d.exports=function i(r){return null==r?"":n(r)}},function(d,E,t){var r=t(609)(t(273));d.exports=r},function(d,E,t){"use strict";d.exports=function(i){const r=[];return{on(e,o){for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];if(r.push({eventName:e,handler:o,args:a}),i.on)i.on(e,o);else{if(!i.addEventListener)throw new Error("Object does not support events",i);i.addEventListener(e,o,...a)}},off(e,o){if(i.off)i.off(e,o);else{if(!i.removeEventListener)throw new Error("Object does not support events",i);for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];i.removeEventListener(e,o,...a)}},once(e,o){for(var s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];r.push({eventName:e,handler:o,args:a}),i.once(e,o)},removeAll(){r.forEach(e=>{this.off(e.eventName,e.handler,...e.args)}),r.splice(0,r.length)}}}},function(d,E,t){var n=t(176);d.exports=function i(r,e,o){"__proto__"==e&&n?n(r,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[e]=o}},function(d,E,t){var n=t(376),i=t(18),r=Object.prototype,e=r.hasOwnProperty,o=r.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(a){return i(a)&&e.call(a,"callee")&&!o.call(a,"callee")};d.exports=s},function(d,E,t){(function(n){var i=t(14),r=t(377),e=E&&!E.nodeType&&E,o=e&&"object"==typeof n&&n&&!n.nodeType&&n,a=o&&o.exports===e?i.Buffer:void 0;n.exports=(a?a.isBuffer:void 0)||r}).call(this,t(85)(d))},function(d,E){var n=/^(?:0|[1-9]\d*)$/;d.exports=function i(r,e){var o=typeof r;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&n.test(r))&&r>-1&&r%1==0&&r<e}},function(d,E){d.exports=function t(n){return function(i){return n(i)}}},function(d,E){var t=Object.prototype;d.exports=function n(i){var r=i&&i.constructor;return i===("function"==typeof r&&r.prototype||t)}},function(d,E,t){"use strict";d.exports=function(n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}},function(d,E,t){var n=t(29),i=t(18);d.exports=function e(o){return"symbol"==typeof o||i(o)&&"[object Symbol]"==n(o)}},function(d,E,t){"use strict";if("Node"===t(8).env.name)d.exports={value:""};else{var i,r;const e=null==(i=Array.prototype.slice.call(document.getElementsByTagName("script")))||null==(r=i.pop())?void 0:r.getAttribute("src"),o=e&&e.match(/[?&]apikey=([^&]+)/i)||[];d.exports={value:o[1]||""}}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5));const o=t(153),s=t(50),a=t(9),c=t(58),u=t(127),l=t(272),h=t(16),p=t(7),y=t(250),O=t(154),v=t(53),b=t(74),T=t(612);d.exports=function(w){void 0===w&&(w={});const N=w.hasValidPeerConnection||t(613),k=w.applySdpTransform||t(155),L=w.createPeerConnection||t(614),D=w.env||t(3),W=w.sdpTransformDefaults||t(616),Z=w.getStatsAdapter||t(275),oe=w.getRtcStatsReportAdapter||t(278),Q=w.getSynchronizationSources||t(620),ne=w.IceCandidateProcessor||t(621),he=w.logging||t(2),ae=w.offerProcessor||t(623),ye=w.PeerConnectionChannels||t(625),Le=w.subscribeProcessor||t(627),me=w.changeMediaDirection||t(628),Oe=me.changeMediaDirectionToInactive,ge=me.changeMediaDirectionToRecvOnly,ce=w.Qos||t(279).default,pe=w.global||(void 0!==typeof window?window:global),Ue=w.debounce||t(632),de=w.needsToSwapH264Profiles||t(634).once,Ae=w.NativeRTCIceCandidate||pe.RTCIceCandidate,Xe=w.NativeRTCSessionDescription||pe.RTCSessionDescription,Ye=w.Errors||t(6),We=w.OTErrorClass||t(22),at=w.ExceptionCodes||t(10),At=w.hasPictureInPictureBug||t(635),$t=()=>{};return function(En){void 0===En&&(En={});let nt=!1;const De=En.iceConfig,lt=void 0===De?{servers:[]}:De,wt=En.isPublisher,In=En.offerOverrides,Gn=En.answerOverrides,ft=En.p2p,ut=En.codecFlags,Vt=En.sourceStreamId,nn=En.keyStore,Rn=En.sFrameClientStore,Pn=En.isE2ee;let Gr,Mr=En.logAnalyticsEvent,bn=void 0===Mr?$t:Mr,Zn=En.sendMessage,Ht=En.remoteConnectionId,rr=!1,Ti=!1,bo=!1;const pi=de();let qr,Di,Ir,uo=0,gi=!1;const go=O();function $i(Yt,en){nt||["candidate","offer","answer","pranswer"].indexOf(Yt)>-1&&(nt=-1!==("candidate"===Yt?en.candidate:en.sdp).indexOf("typ relay")),Zn(Yt,en)}const Zo=s();bn("createPeerConnection","Attempt");const On={};On.id=h();const Lr=he(`PeerConnection:${On.id}`);Lr.debug("construct",{id:On.id,options:En});const Yr=W,So=Yt=>"relay"===lt.transportPolicy&&null!=Yt&&-1===Yt.candidate.indexOf("typ relay"),mi=l(En,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage"]);let Zt,yr,Cr,ki,Ko,Gi=[];const zr=(()=>{let Yt=mi.overrideSimulcastEnabled||!1;return{get:()=>Yt,set(en){const Sn=Boolean(en)&&mi.capableSimulcastStreams>1;Sn!==Yt&&void 0===mi.overrideSimulcastEnabled&&(Yt=Sn,On.generateOffer())}}})(),Hn=(()=>{let Yt=!1;return{get:()=>Yt,set(en){const Sn=Boolean(en);Sn!==Yt&&(Yt=Sn,Yt&&!On.iceConnectionStateIsConnected()?On.generateOffer():Lr.debug("iceRestart is going to wait until we disconnect and then restart ice"))}}})(),so={clean(){delete this.promise,delete this.resolve,delete this.reject}};so.promise=new n((Yt,en)=>{so.resolve=Yt,so.reject=en});let Nt=new ne,Po="new";Object.defineProperty(On,"signalingState",{get:()=>Zt.signalingState,set:Yt=>(Zt.signalingState=Yt,Yt)}),p(On),On.addOptions=Yt=>{Zn=Yt.sendMessage,Ht=Yt.remoteConnectionId,bn=Yt.logAnalyticsEvent},On.startEncryption=function(){var Yt=(0,e.default)(r.default.mark(function en(Sn){var Kn;return r.default.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(Pn){Tr.next=2;break}return Tr.abrupt("return");case 2:return Ir=T(Sn),Tr.next=5,Rn.createSender(Ir);case 5:return Di=Tr.sent,Tr.next=8,nn.get();case 8:return Kn=Tr.sent,Tr.next=11,Di.setSenderEncryptionKey(Kn);case 11:nn.on("keyChanged",$r=>{Di.setSenderEncryptionKey($r)}),Zt.getTransceivers().forEach($r=>Di.encrypt($r.mid,$r.sender));case 13:case"end":return Tr.stop()}},en)}));return function(en){return Yt.apply(this,arguments)}}(),On.once("iceConnected",(0,e.default)(r.default.mark(function Yt(){var Sn;return r.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:Sn={pcc:parseInt(s()-Zo,10),hasRelayCandidates:nt,proxyInfo:""},Zt&&Zt.proxyInfo&&(Sn.proxyInfo=Zt.proxyInfo),bn("createPeerConnection","Success",Sn);case 4:case"end":return vn.stop()}},Yt)}))),so.resolve();const Fo=function(){var Yt=(0,e.default)(r.default.mark(function en(){var Sn;return r.default.wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return vn.next=2,nn.get();case 2:if(Sn=vn.sent,Ir=T(Ht),qr=Rn.getReceiver(Ir),qr){vn.next=14;break}return vn.next=8,Rn.createReceiver(Ir);case 8:qr=vn.sent,qr.addReceiver(Ir),qr.setReceiverEncryptionKey(Ir,Sn),nn.on("keyChanged",Tr=>{qr.setReceiverEncryptionKey(Ir,Tr)}),qr.addEventListener("decryptFailed",()=>{On.trigger("decryptFailed")}),qr.addEventListener("decryptionRestored",()=>{On.trigger("decryptRestored")});case 14:case"end":return vn.stop()}},en)}));return function(){return Yt.apply(this,arguments)}}(),lo=Yt=>{if(Lr.debug("internalCreatePeerConnection: called"),Zt)return Lr.debug("internalCreatePeerConnection: resolving synchronously"),void Yt.call(null,null,Zt);if(Gi.push(Yt),!(Gi.length>1)){if(Lr.debug(`Creating peer connection config "${JSON.stringify(mi)}".`),0===lt.servers.length&&(Lr.error("No ice servers present"),bn("Error","noIceServers")),"relay"===lt.transportPolicy){const en=Sn=>Sn&&0===Sn.indexOf("turn");lt.servers=lt.servers.map(Sn=>{const Kn=c(Sn);return Array.isArray(Kn.urls)||(Kn.urls=[Kn.urls]),Kn.urls=Kn.urls.filter(en),0===Kn.urls.length?void 0:Kn}).filter(Sn=>void 0!==Sn)}mi.iceTransportPolicy=lt.transportPolicy,mi.iceServers=lt.servers,Pn&&(mi.forceEncodedVideoInsertableStreams=!0,mi.forceEncodedAudioInsertableStreams=!0,mi.encodedInsertableStreams=!0),N(pe.RTCPeerConnection).then(en=>{if(!en)throw Lr.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return L({window:pe,config:mi})}).then(function(){var en=(0,e.default)(r.default.mark(function Sn(Kn){return r.default.wrap(function(Tr){for(;;)switch(Tr.prev=Tr.next){case 0:if(wt||!Pn){Tr.next=3;break}return Tr.next=3,Fo();case 3:dr(null,Kn);case 4:case"end":return Tr.stop()}},Sn)}));return function(Sn){return en.apply(this,arguments)}}(),en=>dr(en))}},dr=(Yt,en)=>{if(Yt)return fi({reason:`Failed to create PeerConnection, exception: ${Yt}`,prefix:"NewPeerConnection"}),void(Gi=[]);Lr.debug("OT attachEventsToPeerConnection"),Zt=en,Nt&&Nt.setPeerConnection(en),yr=new ye(Zt),mi.channels&&yr.addMany(mi.channels);const Sn=(un=>{let En=un.sendMessage,nt=un.logging;const ct={};return De=>{De.candidate?(ct[De.candidate.sdpMid]=De.candidate.sdpMLineIndex,En("candidate",{candidate:De.candidate.candidate,sdpMid:De.candidate.sdpMid||"",sdpMLineIndex:De.candidate.sdpMLineIndex||0})):nt.debug("IceCandidateForwarder: No more ICE candidates.")}})({sendMessage:$i,logging:Lr}),Kn=Ot=>{so.resolve(),So(Ot.candidate)?Lr.debug("Ignore candidate",Ot.candidate.candidate):Sn(Ot)},vn=function(){var Ot=(0,e.default)(r.default.mark(function Rt(jt){return r.default.wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:Mo(jt),!wt&&qr&&qr.decrypt(jt.transceiver.mid,jt.receiver);case 2:case"end":return gn.stop()}},Rt)}));return function(jt){return Ot.apply(this,arguments)}}();let Tr=Zt.iceConnectionState;const $r=Ot=>{Zt?(Lr.debug("iceconnectionstatechange",Zt.iceConnectionState),"connected"===Zt.iceConnectionState?("disconnected"===Tr&&On.clearFailedTimeout(),On.emit("iceConnected"),Hn.set(!1)):"completed"===Zt.iceConnectionState&&D.isLegacyEdge&&setTimeout(()=>No.startCollecting(Zt),1e3)):Lr.debug("iceconnectionstatechange on peerConnection that no longer exists",On);const Rt=Ot.target.iceConnectionState;On.trigger("iceConnectionStateChange",Rt),bn("attachEventsToPeerConnection","iceconnectionstatechange",Rt),"disconnected"===Rt&&(Hn.get()?(Lr.debug("Restarting ice!"),On.generateOffer()):b()||(Ko=setTimeout(()=>{const jt="failed";bn("attachEventsToPeerConnection","iceconnectionstatechange",jt),Tr=jt,On.trigger("iceConnectionStateChange",jt)},1e4))),"disconnected"!==Tr&&"failed"===Rt&&fi({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}),Tr=Rt},pt=()=>{bn("peerConnection:negotiationNeeded","Event"),wt&&On.generateOffer()};Zt.addEventListener("track",vn),Zt.addEventListener("icecandidate",Kn),Zt.addEventListener("signalingstatechange",Ei),Zt.addEventListener("negotiationneeded",pt),Zt.addEventListener("iceconnectionstatechange",$r),go.add(()=>{!Zt||(Zt.removeEventListener("track",vn),Zt.removeEventListener("icecandidate",Kn),Zt.removeEventListener("signalingstatechange",Ei),Zt.removeEventListener("negotiationneeded",pt),Zt.removeEventListener("iceconnectionstatechange",$r))}),Uo(null)},Uo=()=>{for(;Gi.length;)Gi.shift().call(null)},Wi=()=>{Nt&&(Nt.destroy(),Nt=null),Gi=[],No.stopCollecting(),go.releaseAll(),so.clean(),null!==Zt&&(Zt.destroy&&Zt.destroy(),Zt=null,On.trigger("close")),On.off()},Ei=Yt=>{const en=Yt.target.signalingState;On.emit("signalingStateChange",en),"stable"===en&&On.emit("signalingStateStable"),en&&en!==Po&&"closed"===(Po=en,Lr.debug(`stateChange: ${Po}`),Po)&&Wi()},xo=()=>{let Yt;if(Zt.getRemoteStreams)Yt=Zt.getRemoteStreams();else{if(!Zt.remoteStreams)throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");Yt=Zt.remoteStreams}return Array.prototype.slice.call(Yt)},Mo=Yt=>{var en;const Sn=Yt.track,Kn=Yt.transceiver,vn=Yt.stream||(null==(en=Yt.streams)?void 0:en[0]);bn("createPeerConnection","TrackAdded"),On.trigger("trackAdded",{stream:vn,track:Sn,transceiver:Kn})},Vo=(Yt,en,Sn)=>{bo=!1,fi({reason:`PeerConnection.offerProcessor ${Yt}: ${en}`,prefix:Sn})},es=Yt=>{if(bo)return void(Gr=Yt);bo=!0,bn("peerConnection:processOffer","Event");const en=new Xe({type:"offer",sdp:Yt.content.sdp}),Sn=vn=>{bo=!1,Nt&&Nt.process(),$i("answer",vn),D.isLegacyEdge||No.startCollecting(Zt,wt),Gr&&(es(Gr),Gr=null)},Kn=vn=>On.trigger("remoteVideoSupported",vn);lo(()=>{ae(Zt,pe.RTCPeerConnection,pe.RTCSessionDescription,Xe,Yr,en,ut,ft,Sn,Vo,Kn,pi,Vt)})};On.generateOffer=Ue(()=>{rr?Ti=!0:(()=>{var Yt,en;if("closed"===(null==(Yt=Zt)||null==(en=Yt.signalingState)?void 0:en.toLowerCase()))return;rr=!0,bn("peerConnection:processSubscribe","Event"),Lr.debug("processSubscribe: Sending offer to subscriber.");let Sn=zr.get()?mi.capableSimulcastStreams:1;"P2P"===Vt&&!ft&&(Sn=1),lo(()=>{Le({peerConnection:Zt,NativeRTCSessionDescription:Xe,sdpTransforms:Yr,numSimulcastStreams:Sn,removeVideoOrientation:At(),offerOverrides:In,offerConstraints:{iceRestart:Hn.get()},replaceBaselineProfile:pi}).then(vn=>{Lr.debug("processSubscribe: got offer, waiting for _readyToSendOffer"),Cr=vn,so.promise.then(()=>{Lr.debug("processSubscribe: sending offer"),$i("offer",Cr)})},vn=>{fi({reason:`subscribeProcessor ${vn.message}: ${vn.reason}`,prefix:vn.prefix})}),Hn.set(!1)})})()},100);const fi=Yt=>{let en=Yt.reason,Sn=Yt.prefix;Lr.error(en,"in state",Zt?{connectionState:Zt.connectionState,iceConnectionState:Zt.iceConnectionState,iceGatheringState:Zt.iceGatheringState,signalingState:Zt.signalingState}:"(none)"),On.trigger("error",{reason:en,prefix:Sn})};function Oi(Yt){this.track=Yt}On.addTrack=(Yt,en)=>{const Sn=new n((Kn,vn)=>{lo(Tr=>{if(Tr)return vn(Tr);Kn()})}).then(()=>{if(Zt.addTrack)return Zt.addTrack(Yt,en);const Kn=Zt.getLocalStreams()[0];if(void 0===Kn)throw new Error("PeerConnection has no existing streams, cannot addTrack");Kn.addTrack(Yt),On.generateOffer()}).then(()=>new n(Kn=>{On.once("signalingStateStable",()=>{Kn()})}));return o(Sn,15e3,"Renegotiation timed out")},On.setIceConfig=Yt=>{try{D.isFirefox&&(Yt.certificates=Zt.getConfiguration().certificates),Zt.setConfiguration(Yt)}catch(en){throw new y(`A peer connection failed to set configuration with ${en.message}`,Ye.FAILED_SET_CONFIGURATION)}return Hn.set(!0),On.generateOffer(),Zt},On.removeTrack=Yt=>{const en=n.resolve().then(()=>Yt instanceof Oi?(Zt.getLocalStreams()[0].removeTrack(Yt.track),void On.generateOffer()):Zt.removeTrack(Yt)).then(()=>new n(Sn=>{On.once("signalingStateStable",()=>{Sn()})}));return o(en,15e3,"Renegotiation timed out")},On.addLocalStream=Yt=>new n((en,Sn)=>{lo(Kn=>{if(Kn)Sn(Kn);else{try{Yt.getTracks&&Yt.getTracks().forEach(vn=>Zt.addTrack(vn,Yt))}catch(vn){return void Sn(vn)}en()}})}),On.getLocalStreams=()=>Zt.getLocalStreams(),On.getSenders=()=>Zt.getSenders?Zt.getSenders():Zt.getLocalStreams()[0].getTracks().map(Yt=>new Oi(Yt)),On.disconnect=()=>{var Yt;Nt&&(Nt.destroy(),Nt=null),(null==(Yt=Zt)?void 0:Yt.signalingState)&&"closed"!==Zt.signalingState.toLowerCase()&&(Zt.close(),Di=null,Ir=null,setTimeout(Wi))},On.iceRestart=()=>Hn.set(!0),On.clearFailedTimeout=()=>clearTimeout(Ko),On.changeMediaDirectionToRecvOnly=()=>ge(Zt),On.changeMediaDirectionToInactive=()=>Oe(Zt),On.processMessage=(Yt,en)=>{switch(Lr.debug(`processMessage: Received ${Yt} from ${en.fromAddress}`,en),Lr.debug(en),Yt){case"generateoffer":en.content&&void 0!==en.content.simulcastEnabled&&zr.set(en.content.simulcastEnabled),On.generateOffer(),Kn();break;case"offer":es(en),Kn();break;case"answer":case"pranswer":(Yt=>{bn("peerConnection:processAnswer","Event");const en=Sn=>{fi({reason:`Error while setting RemoteDescription ${Sn}`,prefix:"SetRemoteDescription"})};Yt.content.sdp?(ki=new Xe({type:"answer",sdp:k(Yr,"remote","answer",a({replaceBaselineProfile:pi},Gn),Yt.content.sdp).local}),Zt.setRemoteDescription(ki).then(()=>{Lr.debug("processAnswer: setRemoteDescription Success"),Nt&&Nt.process()}).catch(en),rr=!1,Ti&&(Ti=!1,On.generateOffer()),D.isLegacyEdge||No.startCollecting(Zt,wt)):en("Weird answer message, no SDP.")})(en);break;case"candidate":var Sn=new Ae(en.content);if(So(Sn))return Lr.debug("Ignore candidate",Sn.candidate),On;Nt&&Nt.addIceCandidate(Sn).catch(vn=>{Lr.warn(`Error while adding ICE candidate: ${JSON.stringify(Sn)}: ${vn.toString()}`)});break;default:Lr.debug(`processMessage: Received an unexpected message of type ${Yt} from ${en.fromAddress}: ${JSON.stringify(en)}`)}function Kn(){uo+=1,No.handleOfferMessageReceived(),uo>1&&(bn("Renegotiation","Attempt"),gi=!0)}return On},On.stopTransceivers=Yt=>{Zt.getTransceivers().forEach(en=>{Yt.includes(en.mid)&&en.stop()})},On.remoteStreams=()=>Zt?xo():[],On.remoteTracks=()=>Zt?Zt.getReceivers?Array.prototype.slice.apply(Zt.getReceivers()).map(Yt=>Yt.track):Array.prototype.concat.apply([],xo().map(Yt=>Yt.getTracks())):[],On.remoteDescription=()=>Zt.remoteDescription,On.getStats=Yt=>{if(Zt)Z(Zt,Yt);else{const en=at.PEER_CONNECTION_NOT_CONNECTED;Yt(new y(We.getTitleByCode(en),Ye.PEER_CONNECTION_NOT_CONNECTED,{code:en}))}},On.getRtcStatsReport=Yt=>{if(Zt)oe(Zt,Yt);else{const en=at.PEER_CONNECTION_NOT_CONNECTED;Yt(new y(We.getTitleByCode(en),Ye.PEER_CONNECTION_NOT_CONNECTED,{code:en}))}},On.getSynchronizationSources=Yt=>{if(!wt){if(!Zt){const en=at.PEER_CONNECTION_NOT_CONNECTED;return void Yt(new y(We.getTitleByCode(en),Ye.PEER_CONNECTION_NOT_CONNECTED,{code:en}))}Q(Zt,Yt)}};const Qo=function Yt(en,Sn,Kn,vn){let Tr;const $r=yr.get(Sn,Kn);if(!$r){if(en>0)return void setTimeout(Yt.bind(null,en-1,Sn,Kn,vn),200);Tr=new y(`A channel with that label and options could not be found. Label:${Sn}. Options: ${JSON.stringify(Kn)}`)}vn(Tr,$r)};On.getDataChannel=(Yt,en,Sn)=>{Zt?Qo(100,Yt,en,Sn):Sn(new y("Cannot create a DataChannel before there is a connection."))},On.getSourceStreamId=()=>Vt,On.iceConnectionStateIsConnected=()=>Zt&&["connected","completed"].indexOf(Zt.iceConnectionState)>-1,On.findAndReplaceTrack=(Yt,en)=>n.resolve().then(()=>{const Sn=Zt.getSenders().filter(Kn=>Kn.track===Yt)[0];if(!Sn)return n.resolve();if("function"!=typeof Sn.replaceTrack)throw new Error("Sender does not support replaceTrack");return Sn.replaceTrack(en)}),On.hasRelayCandidates=()=>nt,On.getNegotiatedCodecs=()=>{if(!Zt.localDescription||!Zt.remoteDescription)return null;const Yt=en=>u(v.getCodecs(Zt.localDescription.sdp,en),v.getCodecs(Zt.remoteDescription.sdp,en));return{audio:Yt("audio"),video:Yt("video")}},On.on("signalingStateStable",()=>{gi&&(gi=!1,bn("Renegotiation","Success",On.getNegotiatedCodecs()))}),On.on("error",Yt=>{gi&&-1!==["CreateOffer","SetRemoteDescription"].indexOf(Yt.prefix)&&(gi=!1,bn("Renegotiation","Failure"))}),On.on("close",()=>{gi&&(gi=!1,bn("Renegotiation","Cancel"))});const No=new ce;return No.on("stats",Yt=>{Yt.dataChannels=yr.sampleQos(),On.trigger("qos",{parsedStats:Yt,simulcastEnabled:zr.get()})}),On}}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(3);d.exports=()=>!((n.isChrome||n.isElectron)&&n.version>=90||n.isOpera&&n.version>=76)&&(n.isChrome&&n.version>71||n.isChromiumEdge&&n.version<90||n.isOpera&&n.version>58)},function(d,E,t){"use strict";d.exports=function n(i,r,e){void 0===e&&(e=1/0);let o=null,s=!1,a=1;const c=1e3/r,u=()=>{!s||a>e||(a+=1,i(),o=setTimeout(u,c))};this.start=()=>{s||(s=!0,setTimeout(u,c))},this.stop=()=>{(void 0!==typeof window?window:global).clearTimeout(o),s=!1}}},function(d,E,t){"use strict";const n=t(48),i=t(654),r=t(11),e=t(157),o={};function s(p){return Number(p.framerateMean||p.googFrameRateSent||p.googFrameRateReceived||p.googFrameRateInput||p.googFrameRateOutput||0)}function a(p){return Number(p.framesEncoded||p.framesDecoded)}function c(p,y){if(s(p))return s(p);if(!a(p))return;let O=0;const v=o[p.id]?o[p.id].frames:0,b=o[p.id]?o[p.id].timestamp:y;return O=e({currentStatFrames:a(p),currentTimestamp:p.timestamp,prevStatFrames:v,prevTimestamp:b}),o[p.id]={frames:a(p),timestamp:p.timestamp},O}function u(p,y){if(!y)return{};const O=y.filter(v=>v.id===p.mediaTrackId);return O.length?O[0]:{}}function l(p,y){return"packetsLost"in y?p+y.packetsLost:p}const h={isVideoStat(p,y){const O=u(p,y);return"video"===p.kind&&["outbound-rtp","inbound-rtp"].includes(p.type)||"video"===p.mediaType||"googFrameWidthReceived"in p||"googFrameWidthInput"in p||"inbound-rtp"===p.type&&-1!==p.id.indexOf("Video")||"inboundrtp"===p.type&&0!==O.frameWidth},isAudioStat(p,y){const O=u(p,y);return"audio"===p.kind&&["outbound-rtp","inbound-rtp"].includes(p.type)||"audio"===p.mediaType||"audioInputLevel"in p||"audioOutputLevel"in p||"inbound-rtp"===p.type&&-1!==p.id.indexOf("Audio")||"inboundrtp"===p.type&&0===O.frameWidth},isInboundStat:p=>"bytesReceived"in p||"packetsReceived"in p,isOutboundStat:p=>"bytesSent"in p||"packetsSent"in p,isVideoTrackStat:p=>"track"===p.type&&(p.frameHeight>0||p.frameWidth>0||p.framesCorrupted>0||p.framesDecoded>0||p.framesPerSecond>0||p.framesSent>0||p.framesReceived>0),isVideoRemoteInboundRtpStat:p=>"remote-inbound-rtp"===p.type&&"video"===p.kind,isAudioRemoteInboundRtpStat:p=>"remote-inbound-rtp"===p.type&&"audio"===p.kind,isVideoInboundRtpStat:p=>"inbound-rtp"===p.type&&"video"===p.kind,parseStatCategory(p){const y={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in p&&(y.packetsReceived=parseInt(p.packetsReceived,10)),"packetsLost"in p&&(y.packetsLost=parseInt(p.packetsLost,10)),"bytesReceived"in p&&(y.bytesReceived=parseInt(p.bytesReceived,10)),this.isVideoStat(p)&&("framerateMean"in p?y.frameRate=Number(p.framerateMean):"googFrameRateOutput"in p?y.frameRate=Number(p.googFrameRateOutput):"googFrameRateInput"in p&&(y.frameRate=Number(p.googFrameRateInput))),y},getVideoPacketsLost(p){return p.filter(y=>this.isVideoRemoteInboundRtpStat(y,p)).reduce(l,0)},getAudioPacketsLost(p){return p.filter(y=>this.isAudioRemoteInboundRtpStat(y,p)).reduce(l,0)},normalizeTimestamp:(p,y)=>(void 0===y&&(y=Date.now()),r(p)&&"getTime"in p?p.getTime():Math.abs(p/(1e3*y)-1)<.05?p/1e3:p),normalizeStats(p,y,O){void 0===y&&(y=!0);const v=p.filter(Z=>h.isVideoStat(Z,p)).filter(Z=>h.isInboundStat(Z)===y),b=p.filter(Z=>this.isAudioStat(Z,p)).filter(Z=>this.isInboundStat(Z)===y)[0],T=v[0];if(!b&&!T)throw new Error("could not find stats for either audio or video");const C=h.normalizeTimestamp(T?T.timestamp:b.timestamp),w={timestamp:C};T&&!y&&void 0===T.packetsLost&&(T.packetsLost=this.getVideoPacketsLost(p)),b&&!y&&void 0===b.packetsLost&&(b.packetsLost=this.getAudioPacketsLost(p));const N=["packetsSent","packetsLost","bytesSent"],D=y?Z=>n(Z,["packetsReceived","packetsLost","bytesReceived"]):Z=>n(Z,N);if(v&&v.length>0){const Z=(Z=>{const Q=N.concat(["framerateMean","googFrameRateSent","googFrameRateReceived","googFrameRateInput","googFrameRateOutput","framesEncoded","framesDecoded"]),ne={timestamp:C,id:T.id};return Q.forEach(he=>{ne[he]=Z.map(ae=>Number(ae[he]||0)).reduce((ae,ye)=>ae+ye,0)}),ne})(v);w.video=Object.assign({frameRate:c(Z,O)},i(D(Z),Number))}return b&&(w.audio=i(D(b),Number)),w}};d.exports=h},function(d,E,t){"use strict";E.__esModule=!0,E.codes=E.messages=void 0,E.messages={1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."},E.codes={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null}},function(d,E,t){var n=t(79),i=t(111),r=t(84),e=t(177),o=t(380),s=t(180),a=t(56),c=t(383),u=t(385),l=t(183),h=t(185),p=t(42),y=t(388),O=t(389),v=t(190),b=t(12),T=t(66),C=t(393),w=t(11),N=t(395),k=t(30),L=t(55),oe="[object Arguments]",ye="[object Function]",ge="[object Object]",nt={};nt[oe]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object DataView]"]=nt["[object Boolean]"]=nt["[object Date]"]=nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Map]"]=nt["[object Number]"]=nt[ge]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object Symbol]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Error]"]=nt[ye]=nt["[object WeakMap]"]=!1,d.exports=function ct(De,lt,wt,In,Gn,ft){var ut,Vt=1&lt,nn=2&lt,Rn=4&lt;if(wt&&(ut=Gn?wt(De,In,Gn,ft):wt(De)),void 0!==ut)return ut;if(!w(De))return De;var Pn=b(De);if(Pn){if(ut=y(De),!Vt)return a(De,ut)}else{var Jt=p(De),Mr=Jt==ye||"[object GeneratorFunction]"==Jt;if(T(De))return s(De,Vt);if(Jt==ge||Jt==oe||Mr&&!Gn){if(ut=nn||Mr?{}:v(De),!Vt)return nn?u(De,o(ut,De)):c(De,e(ut,De))}else{if(!nt[Jt])return Gn?De:{};ut=O(De,Jt,Vt)}}ft||(ft=new n);var bn=ft.get(De);if(bn)return bn;ft.set(De,ut),N(De)?De.forEach(function(rr){ut.add(ct(rr,lt,wt,rr,De,ft))}):C(De)&&De.forEach(function(rr,Ti){ut.set(Ti,ct(rr,lt,wt,Ti,De,ft))});var Ht=Pn?void 0:(Rn?nn?h:l:nn?L:k)(De);return i(Ht||De,function(rr,Ti){Ht&&(rr=De[Ti=rr]),r(ut,Ti,ct(rr,lt,wt,Ti,De,ft))}),ut}},function(d,E,t){var n=t(80),i=t(352),r=t(353),e=t(354),o=t(355),s=t(356);function a(c){var u=this.__data__=new n(c);this.size=u.size}a.prototype.clear=i,a.prototype.delete=r,a.prototype.get=e,a.prototype.has=o,a.prototype.set=s,d.exports=a},function(d,E,t){var n=t(347),i=t(348),r=t(349),e=t(350),o=t(351);function s(a){var c=-1,u=null==a?0:a.length;for(this.clear();++c<u;){var l=a[c];this.set(l[0],l[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=r,s.prototype.has=e,s.prototype.set=o,d.exports=s},function(d,E,t){var n=t(54);d.exports=function i(r,e){for(var o=r.length;o--;)if(n(r[o][0],e))return o;return-1}},function(d,E,t){var i=t(39)(Object,"create");d.exports=i},function(d,E,t){var n=t(371);d.exports=function i(r,e){var o=r.__data__;return n(e)?o["string"==typeof e?"string":"hash"]:o.map}},function(d,E,t){var n=t(64),i=t(54),e=Object.prototype.hasOwnProperty;d.exports=function o(s,a,c){var u=s[a];(!e.call(s,a)||!i(u,c)||void 0===c&&!(a in s))&&n(s,a,c)}},function(d,E){d.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(d,E,t){var n=t(378),i=t(68),r=t(113),e=r&&r.isTypedArray,o=e?i(e):n;d.exports=o},function(d,E,t){var n=t(11),i=Object.create,r=function(){function e(){}return function(o){if(!n(o))return{};if(i)return i(o);e.prototype=o;var s=new e;return e.prototype=void 0,s}}();d.exports=r},function(d,E,t){var n=t(89),i=t(193),r=t(121);d.exports=function e(o,s){return r(i(o,s,n),o+"")}},function(d,E){d.exports=function t(n){return n}},function(d,E,t){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());d.exports=function(r){return n.call(r)===i}},function(d,E,t){"use strict";var n=Object.prototype.toString,i=n.call("");d.exports=function(r){return"string"==typeof r||r&&"object"==typeof r&&(r instanceof String||n.call(r)===i)||!1}},function(d,E,t){"use strict";d.exports=t(420)()?globalThis:t(421)},function(d,E,t){var n=t(110),i=t(453),r=t(454);function e(o){var s=-1,a=null==o?0:o.length;for(this.__data__=new n;++s<a;)this.add(o[s])}e.prototype.add=e.prototype.push=i,e.prototype.has=r,d.exports=e},function(d,E,t){var n=t(455);d.exports=function i(r,e){return!(null==r||!r.length)&&n(r,e,0)>-1}},function(d,E){d.exports=function t(n,i){return n.has(i)}},function(d,E,t){var n=t(87),i=t(11);d.exports=function r(e){return function(){var o=arguments;switch(o.length){case 0:return new e;case 1:return new e(o[0]);case 2:return new e(o[0],o[1]);case 3:return new e(o[0],o[1],o[2]);case 4:return new e(o[0],o[1],o[2],o[3]);case 5:return new e(o[0],o[1],o[2],o[3],o[4]);case 6:return new e(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new e(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var s=n(e.prototype),a=e.apply(s,o);return i(a)?a:s}}},function(d,E,t){var n=t(495);d.exports=function i(r){var e=n(r),o=e%1;return e==e?o?e-o:e:0}},function(d,E){d.exports=function t(n){var i=-1,r=Array(n.size);return n.forEach(function(e){r[++i]=e}),r}},function(d,E,t){var n=t(60),i=t(47);d.exports=function r(e,o){for(var s=0,a=(o=n(o,e)).length;null!=e&&s<a;)e=e[i(o[s++])];return s&&s==a?e:void 0}},function(d,E,t){var n=t(239),i=t(30);d.exports=function r(e,o){return e&&n(e,o,i)}},function(d,E,t){"use strict";E.adaptIceServers=function(i){return i.map(r=>({url:r.url,urls:r.urls||[r.url],username:r.username,credential:r.credential}))},E.parseIceServers=function(i){let r;try{r=JSON.parse(i.data).content.iceServers}catch(e){return[]}return E.adaptIceServers(r)}},function(d,E,t){"use strict";const n=t(3);d.exports=()=>"Chrome"===n.name&&n.version>=58||-1!==["Firefox","Edge","Safari","Opera"].indexOf(n.name)},function(d,E,t){"use strict";d.exports=function(i){let r=null,e=!1;const o=()=>{!e||(i(),r=window.requestAnimationFrame(o))};this.start=()=>{e||(e=!0,window.requestAnimationFrame(o))},this.stop=()=>{window.cancelAnimationFrame(r),e=!1}}},function(d,E,t){"use strict";const n=t(9);d.exports=(r,e)=>{const o={};Object.keys(e).forEach(s=>{o[s]=((r,e,o)=>e&&!o?()=>e.call(r):e&&o?s=>(void 0!==s&&o.call(r,s),e.call(r)):s=>{void 0!==s&&o.call(r,s)})(r,e[s].get,e[s].set)}),n(r,o)}},function(d,E,t){"use strict";let n="";d.exports={getCurrentAudioOutputDeviceId:()=>n,setCurrentAudioOutputDeviceId:e=>{n=e}}},function(d,E,t){"use strict";(function(n){d.exports=function(r){return new n(e=>setTimeout(e,r))}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(294);d.exports=function i(r){let o=(void 0===r?{}:r).NativeVideoElementWrapper;const a=void 0===o?n():o;return function u(l){let h=void 0===l?{}:l,p=h.fallbackText;return new a({fallbackText:void 0===p?"Sorry, Web RTC is not available in your browser":p,fitMode:h.fitMode,muted:h.muted,defaultAudioVolume:50,_inject:h._inject,widgetType:h.widgetType})}}},function(d,E){d.exports=function t(n){if(n&&n.__esModule)return n;var i={};if(null!=n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var e=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(n,r):{};e.get||e.set?Object.defineProperty(i,r,e):i[r]=n[r]}return i.default=n,i}},function(d,E,t){var r=t(39)(t(14),"Map");d.exports=r},function(d,E,t){var n=t(363),i=t(370),r=t(372),e=t(373),o=t(374);function s(a){var c=-1,u=null==a?0:a.length;for(this.clear();++c<u;){var l=a[c];this.set(l[0],l[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=r,s.prototype.has=e,s.prototype.set=o,d.exports=s},function(d,E){d.exports=function t(n,i){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==i(n[r],r,n););return n}},function(d,E){d.exports=function n(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}},function(d,E,t){(function(n){var i=t(174),r=E&&!E.nodeType&&E,e=r&&"object"==typeof n&&n&&!n.nodeType&&n,s=e&&e.exports===r&&i.process,a=function(){try{return e&&e.require&&e.require("util").types||s&&s.binding&&s.binding("util")}catch(u){}}();n.exports=a}).call(this,t(85)(d))},function(d,E,t){var n=t(69),i=t(379),e=Object.prototype.hasOwnProperty;d.exports=function o(s){if(!n(s))return i(s);var a=[];for(var c in Object(s))e.call(s,c)&&"constructor"!=c&&a.push(c);return a}},function(d,E,t){var n=t(384),i=t(181),e=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;d.exports=o?function(a){return null==a?[]:(a=Object(a),n(o(a),function(c){return e.call(a,c)}))}:i},function(d,E){d.exports=function t(n,i){for(var r=-1,e=i.length,o=n.length;++r<e;)n[o+r]=i[r];return n}},function(d,E,t){var i=t(179)(Object.getPrototypeOf,Object);d.exports=i},function(d,E,t){var n=t(188);d.exports=function i(r){var e=new r.constructor(r.byteLength);return new n(e).set(new n(r)),e}},function(d,E,t){"use strict";d.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(d,E){d.exports=function t(n,i,r){switch(r.length){case 0:return n.call(i);case 1:return n.call(i,r[0]);case 2:return n.call(i,r[0],r[1]);case 3:return n.call(i,r[0],r[1],r[2])}return n.apply(i,r)}},function(d,E,t){var n=t(400),r=t(194)(n);d.exports=r},function(d,E,t){var n=t(54),i=t(25),r=t(67),e=t(11);d.exports=function o(s,a,c){if(!e(c))return!1;var u=typeof a;return!!("number"==u?i(c)&&r(a,c.length):"string"==u&&a in c)&&n(c[a],s)}},function(d,E,t){"use strict";d.exports=t(196)()?Object.setPrototypeOf:t(197)},function(d,E,t){"use strict";var n=t(57),i={object:!0,function:!0,undefined:!0};d.exports=function(r){return!!n(r)&&hasOwnProperty.call(i,typeof r)}},function(d,E,t){"use strict";d.exports=t(411)()?Object.assign:t(412)},function(d,E,t){"use strict";const n=t(2)("Event"),i=t(9),r=t(127);d.exports=function(){function e(s,a,c){void 0===a&&(a=!0),void 0===c&&(c={}),this.type=s,this.cancelable=a,this._defaultPrevented=!1;const u=r(Object.keys(this),Object.keys(c));if(u.length>0)throw new Error(`Cannot used reserved property names: ${u.join(",")}`);i(this,c)}var o=e.prototype;return o.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:n.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},o.isDefaultPrevented=function(){return this._defaultPrevented},e}()},function(d,E,t){var n=t(34),i=t(452),r=t(88),e=t(458),o=r(function(s){var a=n(s,e);return a.length&&a[0]===s[0]?i(a):[]});d.exports=o},function(d,E){d.exports=function t(n,i,r){for(var e=-1,o=null==n?0:n.length;++e<o;)if(r(i,n[e]))return!0;return!1}},function(d,E,t){var n=t(25),i=t(18);d.exports=function r(e){return i(e)&&n(e)}},function(d,E){d.exports={}},function(d,E,t){var n=t(217),i=t(481),r=t(482),e=t(219),o=t(493),s=t(223),a=t(494),c=t(226),u=t(227),l=t(97),C=Math.max;d.exports=function w(N,k,L,D,W,Z,oe,Q){var ne=2&k;if(!ne&&"function"!=typeof N)throw new TypeError("Expected a function");var he=D?D.length:0;if(he||(k&=-97,D=W=void 0),oe=void 0===oe?oe:C(l(oe),0),Q=void 0===Q?Q:l(Q),he-=W?W.length:0,64&k){var ae=D,ye=W;D=W=void 0}var Le=ne?void 0:s(N),me=[N,k,L,D,W,ae,ye,Z,oe,Q];if(Le&&a(me,Le),N=me[0],k=me[1],L=me[2],D=me[3],W=me[4],!(Q=me[9]=void 0===me[9]?ne?0:N.length:C(me[9]-he,0))&&24&k&&(k&=-25),k&&1!=k)Oe=8==k||16==k?r(N,k,Q):32!=k&&33!=k||W.length?e.apply(void 0,me):o(N,k,L,D);else var Oe=i(N,k,L);return u((Le?n:c)(Oe,me),N,k)}},function(d,E,t){var n=t(87),i=t(133);function e(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(e.prototype=n(i.prototype)).constructor=e,d.exports=e},function(d,E){d.exports=function t(){}},function(d,E){var t="__lodash_placeholder__";d.exports=function n(i,r){for(var e=-1,o=i.length,s=0,a=[];++e<o;){var c=i[e];(c===r||c===t)&&(i[e]=t,a[s++]=e)}return a}},function(d,E,t){var n=t(29),i=t(117),r=t(18),a=Function.prototype.toString,c=Object.prototype.hasOwnProperty,u=a.call(Object);d.exports=function l(h){if(!r(h)||"[object Object]"!=n(h))return!1;var p=i(h);if(null===p)return!0;var y=c.call(p,"constructor")&&p.constructor;return"function"==typeof y&&y instanceof y&&a.call(y)==u}},function(d,E,t){var n=t(12),i=t(71),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e=/^\w*$/;d.exports=function o(s,a){if(n(s))return!1;var c=typeof s;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=s&&!i(s))||e.test(s)||!r.test(s)||null!=a&&s in Object(a)}},function(d,E,t){var n=t(517),i=t(193),r=t(121);d.exports=function e(o){return r(i(o,void 0,n),o+"")}},function(d,E,t){"use strict";const n=t(240),i=e=>e.replace(/\/$/,"");d.exports={prependProxyToUrlIfNeeded:(e,o)=>{if(!o)return e;const s=n.parse(o),a=n.parse(e);if(!s.protocol||!a.protocol)return e;const c=s.protocol.match(/^https/),l=(a.protocol.match(/^ws/i)?"ws":"http")+(c?"s":"");return`${i(`${l}://${s.host}${s.pathname}`)}/${i(`${a.host}${a.pathname}${a.search||""}`)}`}}},function(d,E,t){"use strict";const n=t(21),i=t(13),r=t(6),e=t(10),o=t(22);let s;const a={SET_PROXY_URL_TIMING_ERROR:"The proxyUrl was set after a session or publisher was created.",PROXY_URL_ALREADY_SET_ERROR:"The proxyUrl has already been set. Setting it again will not have any effect."};d.exports={errorMessages:a,setProxyUrl:c=>{const u=t(26),l=t(72),h=new u,p=n.sessions.length()>0,y=n.publishers.length()>0;let O;if(p){const b=n.sessions.find(T=>"connected"===T.currentState);O=b?b.sessionId:n.sessions.find().sessionId}else O="";const v={sessionId:O,apiKey:l.value};if(y||p){const b=i()(r.SET_PROXY_URL_TIMING_ERROR,new Error(a.SET_PROXY_URL_TIMING_ERROR),e.SET_PROXY_URL_TIMING_ERROR);o.handleJsException({error:b,target:v,analytics:h})}else if(s){const b=i()(r.PROXY_URL_ALREADY_SET_ERROR,new Error(a.PROXY_URL_ALREADY_SET_ERROR),e.PROXY_URL_ALREADY_SET_ERROR);o.handleJsException({error:b,target:v,analytics:h})}else s=c},getProxyUrl:()=>s,clearProxyUrl:()=>{s=null}}},function(d,E,t){var n=t(88),i=t(54),r=t(122),e=t(55),o=Object.prototype,s=o.hasOwnProperty,a=n(function(c,u){c=Object(c);var l=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&r(u[0],u[1],p)&&(h=1);++l<h;)for(var y=u[l],O=e(y),v=-1,b=O.length;++v<b;){var T=O[v],C=c[T];(void 0===C||i(C,o[T])&&!s.call(c,T))&&(c[T]=y[T])}return c});d.exports=a},function(d,E,t){"use strict";var i=t(1)(t(46));const r=t(59),e=t(58);d.exports=function(){function s(a){void 0===a&&(a={}),Object.defineProperty(this,"_rawSessionInfo",{value:e(a)})}return(0,i.default)(s,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return r(this._rawSessionInfo,"properties.simulcast")}},{key:"e2ee",get:function(){return r(this._rawSessionInfo,"properties.e2ee",!1)}},{key:"reconnection",get:function(){return r(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return r(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return"enabled"===r(this._rawSessionInfo,"properties.p2p.preference.value")}},{key:"hybridSession",get:function(){return r(this._rawSessionInfo,"properties.hybridSession",!1)}},{key:"isAdaptiveEnabled",get:function(){return"adaptive"===r(this._rawSessionInfo,"properties.p2p.preference.value")}},{key:"priorityVideoCodec",get:function(){return r(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return r(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return r(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return r(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){const c=r(this._rawSessionInfo,"properties.clientCandidates");return"relayed"===c?"relay":c}}]),s}()},function(module,exports,__nested_webpack_require_461577__){"use strict";const extendES5Native=__nested_webpack_require_461577__(559),webrtcAdapter=__nested_webpack_require_461577__(560),logging=__nested_webpack_require_461577__(2)("createWindowMock"),env=__nested_webpack_require_461577__(3),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=(d,E)=>{if("function"!=typeof E)return logging.warn("Non-function passed into bindWithStaticProperties()"),E;const t=E.bind(d);return Object.keys(E).forEach(n=>{t[n]=E[n]}),t},extendParentClass=ParentClass=>{try{const ChildClass=eval('\n      "use strict"; // Chrome<49 requires strict mode\n\n      const getOwnProperties = (target) => {\n        const properties = {};\n        Object.getOwnPropertyNames(target).forEach((key) => {\n          properties[key] = Object.getOwnPropertyDescriptor(target, key);\n        });\n        return properties;\n      };\n\n      class ChildClass extends ParentClass {\n        constructor(...args) {\n          super(...args);\n          try {\n            this.__proto__ = ChildClass.prototype;\n          } catch (e) {}\n        }\n      };\n\n      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));\n      Object.keys(ParentClass)\n        .forEach((staticKey) => {\n          ChildClass[staticKey] = ParentClass[staticKey];\n        });\n\n      ChildClass; // Ensure the final statement is returned in FF\n    ');if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(d){}return null},canUseES6Class=d=>{const t=extendParentClass(d.RTCPeerConnection||d.webkitRTCPeerConnection||d.mozRTCPeerConnection);if(t)try{t.prototype.foo="bar";const n=new t({iceServers:[]}),i="bar"===n.foo;try{n.close()}catch(r){}return i}catch(n){}return!1},extendClass=(d,E,t)=>{if("function"!=typeof d)return logging.warn("Non-function passed into extendClass()"),d;let n=t&&extendParentClass(d);return n||(n=extendES5Native(d)),n},getCopyProperties=d=>(E,t,n)=>{n.forEach(i=>{let r=i.key,e=i.type,o=t[r];if(void 0!==o){switch(e){case"function":o=bindWithStaticProperties(t,o);break;case"class":o=extendClass(o,r,d);break;case"string":case"object":break;default:throw new Error(`Invalid type of window key: ${e}`)}E[r]=o}})},cloneWindow=d=>{const E={},t=getCopyProperties(canUseES6Class(d));return t(E,d,windowKeys),void 0!==d.navigator&&(E.navigator={},t(E.navigator,d.navigator,navigatorKeys),void 0!==d.navigator.mediaDevices&&(E.navigator.mediaDevices={},t(E.navigator.mediaDevices,d.navigator.mediaDevices,mediaDevicesKeys))),E};module.exports=function d(E){if(void 0!==E.adapter||env.isLegacyEdge)return E;const t=cloneWindow(E);return webrtcAdapter({window:t}),t}},function(d,E,t){"use strict";d.exports=function(){let i=null;this.transform=r=>{i=null===i||r>=i?r:.3*r+.7*i;const e=Math.log(i)/Math.LN10/1.5+1;return Math.min(Math.max(e,0),1)}}},function(d,E,t){"use strict";const n=t(7),i=e=>Object.keys(e).map(o=>e[o]),r=t(9);d.exports=function(o){const s={},a=(c,u)=>{r(u,{parent:this}),u.appendTo(o.parent),s[c]=u,this[c]=u};!o.parent||(n(this),this.destroy=()=>{this.off(),this.hideWhileLoading(),i(s).forEach(c=>c.destroy())},this.showAfterLoading=()=>{i(s).forEach(c=>c.showAfterLoading())},this.hideWhileLoading=()=>{i(s).forEach(c=>c.hideWhileLoading())},this.set=(c,u)=>("string"==typeof c&&u?a(c,u):Object.keys(c).forEach(l=>{a(l,c[l])}),this))}},function(d,E,t){"use strict";var i=t(1)(t(15));d.exports=function(){function e(s){(0,i.default)(this,"_analyser",null),(0,i.default)(this,"_timeDomainData",null),(0,i.default)(this,"_sourceNode",null),this._audioContext=s}var o=e.prototype;return o._initAudioAnalyser=function(a){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(a),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},o.webRTCStream=function(a){this._sourceNode&&this._sourceNode.disconnect(this._analyser),"suspended"===this._audioContext.state&&this._audioContext.resume(),this._initAudioAnalyser(a)},o.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},o.sample=function(a){if("function"==typeof a)throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);let c=0;for(let u=this._timeDomainData.length-1;u>=0;u-=1)c=Math.max(c,Math.abs(this._timeDomainData[u]-128));return c/128}return null},e}()},function(d,E,t){"use strict";const n=t(571),i=t(27),r=t(7),e=t(23)();d.exports=new function o(){const s=this;function a(){return n.isDomLoaded()&&!n.isDomUnloaded()}function l(){s.dispatchEvent(new e.EnvLoadedEvent(i.ENV_UNLOADED))}r(s),n.whenLoaded.then(function u(){n.whenUnloaded.then(l),function c(){a()&&s.dispatchEvent(new e.EnvLoadedEvent(i.ENV_LOADED))}()}),this.onLoad=function(h,p){a()?h.call(p):s.on(i.ENV_LOADED,h,p)},this.onUnload=function(h,p){this.isUnloaded()?h.call(p):s.on(i.ENV_UNLOADED,h,p)},this.isUnloaded=function(){return n.isDomUnloaded()}}},function(d,E,t){"use strict";var n=t(576);function i(Q,ne){if(Q===ne)return 0;for(var he=Q.length,ae=ne.length,ye=0,Le=Math.min(he,ae);ye<Le;++ye)if(Q[ye]!==ne[ye]){he=Q[ye],ae=ne[ye];break}return he<ae?-1:ae<he?1:0}function r(Q){return(void 0!==typeof window?window:global).Buffer&&"function"==typeof(void 0!==typeof window?window:global).Buffer.isBuffer?(void 0!==typeof window?window:global).Buffer.isBuffer(Q):!(null==Q||!Q._isBuffer)}var e=t(577),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a="foo"===function(){}.name;function c(Q){return Object.prototype.toString.call(Q)}function u(Q){return!r(Q)&&"function"==typeof(void 0!==typeof window?window:global).ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(Q):!!Q&&!!(Q instanceof DataView||Q.buffer&&Q.buffer instanceof ArrayBuffer))}var l=d.exports=T,h=/\s*function\s+([^\(\s]*)\s*/;function p(Q){if(e.isFunction(Q)){if(a)return Q.name;var he=Q.toString().match(h);return he&&he[1]}}function y(Q,ne){return"string"==typeof Q?Q.length<ne?Q:Q.slice(0,ne):Q}function O(Q){if(a||!e.isFunction(Q))return e.inspect(Q);var ne=p(Q);return"[Function"+(ne?": "+ne:"")+"]"}function b(Q,ne,he,ae,ye){throw new l.AssertionError({message:he,actual:Q,expected:ne,operator:ae,stackStartFunction:ye})}function T(Q,ne){Q||b(Q,!0,ne,"==",l.ok)}function C(Q,ne,he,ae){if(Q===ne)return!0;if(r(Q)&&r(ne))return 0===i(Q,ne);if(e.isDate(Q)&&e.isDate(ne))return Q.getTime()===ne.getTime();if(e.isRegExp(Q)&&e.isRegExp(ne))return Q.source===ne.source&&Q.global===ne.global&&Q.multiline===ne.multiline&&Q.lastIndex===ne.lastIndex&&Q.ignoreCase===ne.ignoreCase;if(!(null!==Q&&"object"==typeof Q||null!==ne&&"object"==typeof ne))return he?Q===ne:Q==ne;if(u(Q)&&u(ne)&&c(Q)===c(ne)&&!(Q instanceof Float32Array||Q instanceof Float64Array))return 0===i(new Uint8Array(Q.buffer),new Uint8Array(ne.buffer));if(r(Q)!==r(ne))return!1;var ye=(ae=ae||{actual:[],expected:[]}).actual.indexOf(Q);return-1!==ye&&ye===ae.expected.indexOf(ne)||(ae.actual.push(Q),ae.expected.push(ne),function N(Q,ne,he,ae){if(null==Q||null==ne)return!1;if(e.isPrimitive(Q)||e.isPrimitive(ne))return Q===ne;if(he&&Object.getPrototypeOf(Q)!==Object.getPrototypeOf(ne))return!1;var ye=w(Q),Le=w(ne);if(ye&&!Le||!ye&&Le)return!1;if(ye)return C(Q=s.call(Q),ne=s.call(ne),he);var ge,ce,me=oe(Q),Oe=oe(ne);if(me.length!==Oe.length)return!1;for(me.sort(),Oe.sort(),ce=me.length-1;ce>=0;ce--)if(me[ce]!==Oe[ce])return!1;for(ce=me.length-1;ce>=0;ce--)if(!C(Q[ge=me[ce]],ne[ge],he,ae))return!1;return!0}(Q,ne,he,ae))}function w(Q){return"[object Arguments]"==Object.prototype.toString.call(Q)}function L(Q,ne){if(!Q||!ne)return!1;if("[object RegExp]"==Object.prototype.toString.call(ne))return ne.test(Q);try{if(Q instanceof ne)return!0}catch(he){}return!Error.isPrototypeOf(ne)&&!0===ne.call({},Q)}function W(Q,ne,he,ae){var ye;if("function"!=typeof ne)throw new TypeError('"block" argument must be a function');"string"==typeof he&&(ae=he,he=null),ye=function D(Q){var ne;try{Q()}catch(he){ne=he}return ne}(ne),ae=(he&&he.name?" ("+he.name+").":".")+(ae?" "+ae:"."),Q&&!ye&&b(ye,he,"Missing expected exception"+ae);var Le="string"==typeof ae,Oe=!Q&&ye&&!he;if((!Q&&e.isError(ye)&&Le&&L(ye,he)||Oe)&&b(ye,he,"Got unwanted exception"+ae),Q&&ye&&he&&!L(ye,he)||!Q&&ye)throw ye}l.AssertionError=function(ne){this.name="AssertionError",this.actual=ne.actual,this.expected=ne.expected,this.operator=ne.operator,ne.message?(this.message=ne.message,this.generatedMessage=!1):(this.message=function v(Q){return y(O(Q.actual),128)+" "+Q.operator+" "+y(O(Q.expected),128)}(this),this.generatedMessage=!0);var he=ne.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,he);else{var ae=new Error;if(ae.stack){var ye=ae.stack,Le=p(he),me=ye.indexOf("\n"+Le);if(me>=0){var Oe=ye.indexOf("\n",me+1);ye=ye.substring(Oe+1)}this.stack=ye}}},e.inherits(l.AssertionError,Error),l.fail=b,l.ok=T,l.equal=function(ne,he,ae){ne!=he&&b(ne,he,ae,"==",l.equal)},l.notEqual=function(ne,he,ae){ne==he&&b(ne,he,ae,"!=",l.notEqual)},l.deepEqual=function(ne,he,ae){C(ne,he,!1)||b(ne,he,ae,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(ne,he,ae){C(ne,he,!0)||b(ne,he,ae,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(ne,he,ae){C(ne,he,!1)&&b(ne,he,ae,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function k(Q,ne,he){C(Q,ne,!0)&&b(Q,ne,he,"notDeepStrictEqual",k)},l.strictEqual=function(ne,he,ae){ne!==he&&b(ne,he,ae,"===",l.strictEqual)},l.notStrictEqual=function(ne,he,ae){ne===he&&b(ne,he,ae,"!==",l.notStrictEqual)},l.throws=function(Q,ne,he){W(!0,Q,ne,he)},l.doesNotThrow=function(Q,ne,he){W(!1,Q,ne,he)},l.ifError=function(Q){if(Q)throw Q},l.strict=n(function Z(Q,ne){Q||b(Q,!0,ne,"==",Z)},l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var oe=Object.keys||function(Q){var ne=[];for(var he in Q)o.call(Q,he)&&ne.push(he);return ne}},function(d,E,t){"use strict";const n=t(584),i=t(265),r=t(3);d.exports=e=>r.isElectron?"screen"===e||i(e):n.indexOf(e)>-1},function(d,E,t){"use strict";const n=t(268),i=t(7),r=t(2)("StreamChannel"),e=t(150)();d.exports=function(s){this.id=s.id,this.type=s.type,this.active=n(s.active),this.orientation=s.orientation||e.ROTATED_NORMAL,s.frameRate&&(this.frameRate=parseFloat(s.frameRate)),s.preferredFrameRate&&(this.preferredFrameRate=parseFloat(s.preferredFrameRate)),s.preferredWidth&&(this.preferredWidth=parseInt(s.preferredWidth,10)),s.preferredHeight&&(this.preferredHeight=parseInt(s.preferredHeight,10)),this.width=parseInt(s.width,10),this.height=parseInt(s.height,10),this.source=s.source||"camera",this.fitMode=s.fitMode||"cover",i(this),this.update=function(a){const c={},u={};for(const l in a){if(!a.hasOwnProperty(l))continue;const h=this[l];switch(l){case"active":this.active=n(a[l]);break;case"disableWarning":this.disableWarning=n(a[l]);break;case"frameRate":this.frameRate=parseFloat(a[l],10);break;case"width":case"height":this[l]=parseInt(a[l],10),c[l]=this[l],u[l]=h;break;case"orientation":this[l]=a[l],c[l]=this[l],u[l]=h;break;case"fitMode":case"source":this[l]=a[l];break;default:return r.warn(`Tried to update unknown key ${l} on ${this.type} channel ${this.id}`),!1}this.trigger("update",this,l,h,this[l])}return Object.keys(c).length&&this.trigger("update",this,"videoDimensions",u,c),!0}}},function(d,E,t){"use strict";d.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(d,E,t){"use strict";const n=t(592),i=t(2)("StylableComponent"),r=t(593),e=t(269);d.exports=function(s,a,c,u){if(!s.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");u=u||function(){};let l=!1;!1===c&&(a={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},l=!0,u({showControls:!1}));const p=new r(a,function(O,v,b){b?s.trigger("styleValueChanged",O,v,b):s.trigger("styleValueChanged",O,v)});s.getStyle=function(y){return p.get(y)},s.setStyle=function(y,O,v){if(l)return i.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;let b;return"string"!=typeof y?b=y:(b={},b[y]=O),b.backgroundImageURI&&(b.backgroundImageURI=n(b.backgroundImageURI)),p.setAll(b,v),u(e(b)),this}}},function(d,E,t){"use strict";const n=t(51),i=t(35)(),r=t(26),e=t(72),o=t(146),s=t(52).once,a=t(596),c=t(8),u=t(2)("systemRequirements"),l=t(597),h=t(598),p=i.onlyLocal(),y=new r,O=n(()=>{y.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:e.value,payload:{userAgent:c.env.userAgent}})}),v=n(()=>{t(599)()});let b=!1;d.exports={check(){u.debug("OT.checkSystemRequirements()");const T=Number(a&&s());return v(),T||O(),T},upgrade(T){let C=void 0===T?{}:T,w=C.isSupportedButOld,N=void 0===w?c.env.name.toLowerCase()in p.minimumVersion:w,k=C.userAgent,L=void 0===k?navigator.userAgent:k;o.onLoad(()=>{if(b)return;const D=new h(l);let W;b=!0,D.on("close",()=>{b=!1}),D.open(),W=L.match(/(iPad|iPhone|iPod|android|webOS)/i)?(N?"supported-":"")+"mobile-browser":(N?"upgrade":"normal")+"-install",D.el(`#section-${W}`).style.display="block"})}}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(49)),e=i(t(600));const o=t(604);let s=function(a){function c(u){var l;return(l=a.call(this,u)||this).name="TimeoutError",l}return(0,r.default)(c,a),c}((0,e.default)(Error));d.exports=(a,c,u)=>new n((l,h)=>{if("number"!=typeof c||c<0)throw new TypeError("Expected `ms` to be a positive number");const p=setTimeout(()=>{if("function"==typeof u){try{l(u())}catch(v){h(v)}return}const O=u instanceof Error?u:new s("string"==typeof u?u:`Promise timed out after ${c} milliseconds`);"function"==typeof a.cancel&&a.cancel(),h(O)},c);o(a.then(l,h),()=>{clearTimeout(p)})}),d.exports.TimeoutError=s}).call(this,t(0))},function(d,E,t){"use strict";d.exports=function n(){const i=[];return{add(r){i.push(r)},remove(r){const e=i.indexOf(r);e>=0&&i.splice(e,1)},releaseAll(){const r=[];for(;i.length>0;){const o=i.pop();try{o()}catch(s){r.push(s)}}const e=r.length;if(e>0)throw new Error(`Failed to complete ${e} cleanup job${1===e?"":"s"}: ${r.map(o=>`<${o}>`).join(", ")}`)}}}},function(d,E,t){"use strict";const n=t(2)("applySdpTransform");d.exports=(i,r,e,o,s)=>{const a=i[r][e],c=`${r} ${e}`,l=`sdpTransforms (${"local offer"===c||"remote answer"===c?"publisher":"subscriber"}): ${r} ${e}`;n.debug(`${l}: ${"local"===r?"created":"received"}:\n${s}`);const p=a(o,s);return n.debug(p.local===s?`${l}: not modified`:`${l}: modified to:\n${p.local}`),p}},function(d,E){d.exports=function t(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}},function(d,E,t){"use strict";d.exports=function(r){if(void 0===r&&(r={}),!r)return 0;const o=r.currentStatFrames,s=void 0===o?0:o,a=r.prevStatFrames,c=void 0===a?0:a,u=r.currentTimestamp,l=void 0===u?0:u,h=r.prevTimestamp,p=void 0===h?0:h;return s>=c&&l>p?Math.round((s-c)/((l-p)/1e3)*100)/100:0}},function(d,E,t){"use strict";let n;d.exports=function(r){void 0===r&&(r={});const e=r.AudioContext||(void 0!==typeof window?window:global).AudioContext||(void 0!==typeof window?window:global).webkitAudioContext;return function(){if(n=n||e&&new e,null==n)throw new Error("AudioContext could not be created, hardware limit reached.");return n}}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(59)),e="function"==typeof(0,i.default)(void 0!==typeof window?window:global,"navigator.getDisplayMedia",(0,i.default)(void 0!==typeof window?window:global,"navigator.mediaDevices.getDisplayMedia"));E.default=e},function(d,E,t){"use strict";const n=t(38);d.exports=function(){return function(e,o,s){const a=o.slice(),c=n(s);return function(h){let p=e,y=null;function O(b,T){h({message:b,newState:T,currentState:p,previousState:y})}this.current=p,this.set=function(b){!function v(b){return function(p){return-1!==a.indexOf(p)}(b)?!!function(p,y){return c[p]&&-1!==c[p].indexOf(y)}(p,b)||(O(`'${p}' cannot transition to '${b}'`,b),!1):(O(`'${b}' is not a valid state`,b),!1)}(b)||(y=p,this.current=b,p=b)}}}}},function(d,E,t){"use strict";(function(n){const i=t(62);d.exports=function(e){void 0===e&&(e={});const o=e.chromeExtensionHelper||t(281)(),s=e.electronExtensionHelper||t(640)(),a=e.Errors||t(6),c=e.firefoxExtensionHelper||t(642),u=e.getDisplayMediaExtensionHelper||t(288),l=e.otError||t(13)(),h=e.OTHelpers||t(8),p={extensionByKind:{},extensionClasses:{},registerExtensionHelper:(v,b)=>{p.extensionClasses[v]=b,b.autoRegisters&&b.isSupportedInThisBrowser&&p.registerExtension(v)},registerExtension:function(v){if(null==p.extensionClasses[v])throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var b=arguments.length,T=new Array(b>1?b-1:0),C=1;C<b;C++)T[C-1]=arguments[C];const w=p.extensionClasses[v].register(...T);p.extensionByKind[v]=w}},y=()=>{const v=i(Object.keys(p.extensionClasses).sort(b=>"electron"===b?-1:1),b=>p.extensionClasses[b].isSupportedInThisBrowser);return void 0===v?{}:{name:v,proto:p.extensionClasses[v],instance:p.extensionByKind[v]}};p.pickHelper=()=>y(),p.checkCapability=v=>{const b={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},T=y();if(void 0!==T.name)return b.supported=!0,b.extensionRequired=T.proto.extensionRequired?T.name:void 0,b.supportedSources={screen:T.proto.sources.screen,application:T.proto.sources.application,window:T.proto.sources.window,browser:T.proto.sources.browser},T.instance?(b.extensionRegistered=!!b.extensionRequired||void 0,void T.instance.isInstalled(C=>{b.extensionInstalled=b.extensionRequired||"Firefox"===h.env.name?C:void 0,v(b)})):(b.extensionRegistered=!1,b.extensionRequired&&(b.extensionInstalled=!1),void setTimeout(v.bind(null,b)));setTimeout(v.bind(null,b))},p.registerExtensionHelper("electron",s),p.registerExtensionHelper("getDisplayMedia",u),p.registerExtensionHelper("chrome",o),p.registerExtensionHelper("firefox",c);const O=()=>{};return p.getConstraints=v=>{const b=v.onAccessDialogOpened,T=void 0===b?O:b,C=v.onAccessDialogClosed,w=void 0===C?O:C,N=v.videoSource,k=v.constraints;return new n((L,D)=>{p.checkCapability(W=>{if(W.supported)if(!1===W.extensionRegistered)D(l(a.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(W.extensionRequired&&!1===W.extensionInstalled)D(l(a.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{const Z=p.pickHelper();Z.proto.getConstraintsShowsPermissionUI&&T(),Z.instance.getConstraints(N,k,(oe,Q)=>{Z.proto.getConstraintsShowsPermissionUI&&w(),oe?D(oe):L(Q)})}else{let Z="Screen Sharing is not supported in this browser";h.env.isElectron?Z="Set the webPreferences.contextIsolation option of the Electron BrowserWindow to false or use a preload script to access the desktop capturer. For more information, see https://tokbox.com/developer/guides/screen-sharing/js/.":"Chrome"===h.env.name&&h.env.version>73&&"https:"!==(void 0!==typeof window?window:global).location.protocol&&(Z="https:// is required for screen sharing"),D(l(a.SCREEN_SHARING_NOT_SUPPORTED,new Error(Z)))}})})},p}}).call(this,t(0))},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.Errors||t(6),e=i.ExceptionCodes||t(10),o=i.otError||t(13)(),s={ICEWorkflow:r.ICE_WORKFLOW_FAILED,NewPeerConnection:r.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:r.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:{404:r.STREAM_NOT_FOUND,[e.STREAM_LIMIT_EXCEEDED]:r.STREAM_LIMIT_EXCEEDED}};return function(c,u,l,h,p){const y=`${(l?`${l}: `:"")+p} PeerConnection with connection ${h} failed: ${u}`,O=s[l]||{},v="string"==typeof O?O:O[c],b="Publisher"===p?e.UNABLE_TO_PUBLISH:e.UNABLE_TO_SUBSCRIBE;if(!v){const C=new Error(y);return C.code=b,C}const T="ICEWorkflow"===l?"Publisher"===p?e.PUBLISHER_ICE_WORKFLOW_FAILED:e.SUBSCRIBER_ICE_WORKFLOW_FAILED:v===r.STREAM_LIMIT_EXCEEDED?e.STREAM_LIMIT_EXCEEDED:b;return o(v,new Error(y),T)}}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.OTHelpers||t(8),o=(i.global||(void 0!==typeof window?window:global)).RTCPeerConnection;return function(a,c){"Firefox"===r.env.name&&o&&o.generateCertificate?o.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch(u=>{c(u)}).then(u=>{a.certificates=[u],c(void 0,a)}):setTimeout(()=>{c(void 0,a)})}}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5)),e=n(t(46)),o=n(t(15));const s=t(7),a=t(659),c=t(2)("WidgetView"),u=t(8),l=t(3),h=t(165),p=h.default,y=h.CancellationError,O=t(166),v=t(661),b=t(662),T=t(663),C=t(664),w=t(665),N=t(63),k=t(107);k(),d.exports=function D(W){let Z=void 0===W?{}:W,oe=Z.logging,Q=void 0===oe?c:oe,ne=Z.OTHelpers,he=void 0===ne?u:ne,ae=Z.waitForVideoToBePlaying,ye=void 0===ae?b:ae,Le=Z.VideoElementFacade,me=void 0===Le?k():Le,Oe=Z.env,ge=void 0===Oe?l:Oe;const ce=a({window:void 0!==typeof window?window:global}),pe=de=>{if(de.isCanceled())throw Q.debug("bindVideo bailing due to cancellation"),new y("CANCEL")};return function(){function de(Ae,Xe){let Ye=void 0===Xe?{}:Xe,We=Ye.insertDefaultUI,at=void 0===We||We,At=Ye.width,ht=void 0===At?264:At,Wt=Ye.height,$t=void 0===Wt?198:Wt,un=Ye.fitMode,En=void 0===un?"cover":un,nt=Ye.mirror,ct=void 0!==nt&&nt,De=Ye.insertMode,lt=Ye.classNames,wt=Ye.style,In=Ye.widgetType;(0,o.default)(this,"_videoElementFacade",void 0),(0,o.default)(this,"_container",void 0),(0,o.default)(this,"_posterContainer",document.createElement("div")),(0,o.default)(this,"_widgetContainer",document.createElement("div")),(0,o.default)(this,"_loading",!0),(0,o.default)(this,"_audioOnly",!1),(0,o.default)(this,"_showPoster",void 0),(0,o.default)(this,"_poster",void 0),(0,o.default)(this,"_cancelBind",void 0),(0,o.default)(this,"MAX_VIDEO_LOADED",5e3),s(this),!1===/^(contain|cover)$/.test(En)&&Q.warn(`Invalid fit value "${En}" passed. Only "contain" and "cover" can be used.`),this._widgetType=In,this._fitMode=En,this._insertDefaultUI=at;const Gn=N(this._widgetContainer);if(Gn.on("click",this.userGesture.bind(this)),Gn.on("touchstart",this.userGesture.bind(this),!!ce&&{passive:!0}),this.once("destroy",()=>Gn.removeAll()),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",this._widgetContainer.style.height="100%",!1!==at){this._container=C(Ae,De),ge.isSafari&&ge.isiOS&&ge.iOSVersion&&ge.iOSVersion<11.2&&this._container.classList.add("OT_ForceContain"),this._container.style.width=w(ht),this._container.style.height=w($t),this._container.style.overflow="hidden",T(this._container),ct&&he.addClass(this._container,"OT_mirrored"),lt&&lt.trim().split(/\s+/).forEach(Pn=>this._container.classList.add(Pn)),this._container.classList.add("OT_loading"),this._container.classList.add(`OT_fit-mode-${En}`),this._container.appendChild(this._widgetContainer);const nn=he(this._container).observeSize(()=>T(this._container))[0],Rn=he.observeNodeOrChildNodeRemoval(this._container,Pn=>{this._videoElementFacade&&Pn.some(Mr=>Mr===this._widgetContainer||Mr===this._videoElementFacade.domElement())&&this.destroyVideo()});this.once("destroy",()=>{Q.debug("disconnecting observers"),nn.disconnect(),Rn.disconnect()})}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);const ft=document.createElement("div");ft.classList.add("OT_video-loading");const ut=document.createElement("div");ut.classList.add("OT_video-loading-spinner"),ft.appendChild(ut),this._widgetContainer.appendChild(ft),wt&&wt.backgroundImageURI&&this.setBackgroundImageURI(wt.backgroundImageURI)}var ve=de.prototype;return ve.addError=function(Xe,Ye,We){this._container&&(this._container.innerHTML=`<p>${Xe}${Ye?` <span class="ot-help-message">${Ye}</span>`:""}</p>`,he.addClass(this._container,We||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},ve.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(he.removeElement(this._container),this._container=null)},ve.setBackgroundImageURI=function(Xe){he.css(this._posterContainer,"backgroundImage",`url(${Xe})`),he.css(this._posterContainer,"backgroundSize","contain"),he.css(this._posterContainer,"opacity","1.0")},ve.isAudioBlocked=function(){return Boolean(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},ve.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},ve.userGesture=function(){this.isAudioBlocked()&&O().then(()=>Q.debug("Successfully unblocked audio"),Xe=>Q.error("Error retrying audio on user interaction:",Xe))},ve.setAudioBlockedUi=function(Xe){!this._container||(Xe?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},ve.rebindSrcObject=function(){this._videoElementFacade&&this._videoElementFacade._rebindSrcObject()},ve.pauseAndPlayVideoElement=function(){this._videoElementFacade&&this._videoElementFacade._pauseAndPlay()},ve._createBufferVideoElement=function(){var Ae=(0,r.default)(i.default.mark(function Ye(We,at){var At,Wt;return i.default.wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return void 0===at&&(at={}),At=at.createElement?at:document,(Wt=At.createElement("video")).srcObject=We,un.prev=5,Wt.play(),un.next=9,ye(Wt,this.MAX_VIDEO_LOADED);case 9:return un.abrupt("return",un.sent?Wt:null);case 13:return un.prev=13,un.t0=un.catch(5),un.abrupt("return",null);case 16:case"end":return un.stop()}},Ye,this,[[5,13]])}));return function Xe(Ye,We){return Ae.apply(this,arguments)}}(),ve._emitAMREvent=function(Xe,Ye,We){this.emit("amrLogEvent",Xe,Ye,We)},ve._createVideoElementFacade=function(Xe){let Ye=Xe._inject,We=Xe.audioVolume,at=Xe.fallbackText,At=Xe.muted;this._videoElementFacade=new me({defaultAudioVolume:parseFloat(We),fallbackText:at,fitMode:this._fitMode,_inject:Ye,muted:At,widgetType:this._widgetType});const ht=N(this._videoElementFacade);if(this._videoFacadeEvents=ht,ht.on("error",()=>{this.trigger("error")}),ht.on("videoDimensionsChanged",(Wt,$t)=>{this.trigger("videoDimensionsChanged",Wt,$t)}),ht.on("mediaStopped",Wt=>{this.trigger("mediaStopped",Wt)}),ht.on("audioBlocked",()=>this.trigger("audioBlocked")),ht.on("audioUnblocked",()=>this.trigger("audioUnblocked")),this._videoElementFacade.audioChannelType("telephony"),Q.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer),void 0!==We)try{this._videoElementFacade.setAudioVolume(We)}catch(Wt){Q.warn(`bindVideo ${Wt}`)}},ve._bindToStream=function(){var Ae=(0,r.default)(i.default.mark(function Ye(We,at){return i.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.prev=0,ht.next=3,this._videoElementFacade.bindToStream(We);case 3:ht.next=14;break;case 5:if(ht.prev=5,ht.t0=ht.catch(0),!at.isCanceled()){ht.next=12;break}throw Q.debug("Refusing to destroyVideo as bindVideo was cancelled"),new y("CANCEL");case 12:throw this.destroyVideo(),ht.t0;case 14:case"end":return ht.stop()}},Ye,this,[[0,5]])}));return function Xe(Ye,We){return Ae.apply(this,arguments)}}(),ve._getNewBindCancellation=function(){this._cancelBind&&(Q.debug("Cancelling last bindVideo request"),this._cancelBind.cancel());const Xe=new p;return this._cancelBind=Xe,this.once("destroy",()=>Xe.cancel()),Xe},ve._triggerVideoElementCreated=function(){const Xe=Ye=>{this.trigger("videoElementCreated",Ye),this._insertDefaultUI&&he.addClass(Ye,"OT_video-element")};this._videoElementFacade.domElement()?Xe(this._videoElementFacade.domElement()):this._videoFacadeEvents.on("videoElementCreated",Ye=>{Xe(Ye)})},ve._waitForVideoResolution=function(){var Ae=(0,r.default)(i.default.mark(function Ye(We){return i.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(this.audioOnly()&&"subscriber"===this._widgetType||!(We.getVideoTracks().length>0)){ht.next=6;break}return Q.debug("Waiting for correct resolution"),ht.next=5,v(this._videoElementFacade,5e3);case 5:Q.debug(`Resolution: ${this._videoElementFacade.videoWidth()}x${this._videoElementFacade.videoHeight()}`);case 6:case"end":return ht.stop()}},Ye,this)}));return function Xe(Ye){return Ae.apply(this,arguments)}}(),ve.bindVideo=function(){var Ae=(0,r.default)(i.default.mark(function Ye(We,at,At){var ht,Wt,$t,un,En,nt,ct,De;return i.default.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(ht=at.audioVolume,Wt=at.muted,$t=at.fallbackText,un=at._inject,void 0===At&&(At=!1),Q.debug("bindVideo ",{webRTCStream:We}),En=!!this._videoElementFacade,ct=this._getNewBindCancellation(),En){wt.next=9;break}this._createVideoElementFacade({_inject:un,audioVolume:ht,fallbackText:$t,muted:Wt}),wt.next=22;break;case 9:if(!(We instanceof MediaStream)){wt.next=22;break}return this._emitAMREvent("AMRLoadVideoBuffer","Attempt"),wt.next=13,this._createBufferVideoElement(We);case 13:if(nt=wt.sent){wt.next=20;break}if(this._emitAMREvent("AMRLoadVideoBuffer","Failure"),!At){wt.next=18;break}throw new Error("bufferFailed: videoBuffer failed to load or timeout");case 18:wt.next=21;break;case 20:this._emitAMREvent("AMRLoadVideoBuffer","Success");case 21:this._videoFacadeEvents.on("amrLogEvent",(In,Gn,ft)=>{this._emitAMREvent(In,Gn,ft)});case 22:return wt.next=24,this._bindToStream(We,ct);case 24:return En||this._triggerVideoElementCreated(),pe(ct),De=ye(this._videoElementFacade,5e3),wt.next=29,this._waitForVideoResolution(We);case 29:return Q.debug("Waiting for video to be playing"),wt.next=32,De;case 32:Q.debug("Video is playing"),pe(ct),nt&&(nt.remove&&nt.remove(),nt=null);case 35:case"end":return wt.stop()}},Ye,this)}));return function Xe(Ye,We,at){return Ae.apply(this,arguments)}}(),ve.bindAudioTrackOnly=function(){this._videoElementFacade&&this._videoElementFacade.bindAudioTrackOnly()},ve.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},ve.video=function(){return this._videoElementFacade},ve.showPoster=function(Xe){return void 0===Xe?!he.isDisplayNone(this._posterContainer):(this._showPoster=Xe,he[Xe?"show":"hide"](this._posterContainer),this.showPoster())},ve.poster=function(Xe){return void 0===Xe?he.css(this._posterContainer,"backgroundImage"):(this._poster=Xe,he.css(this._posterContainer,"backgroundImage",`url(${Xe})`),this.poster())},ve.loading=function(Xe){return void 0===Xe?this._loading:(this._loading=Boolean(Xe),this._container&&this._container.classList[Xe?"add":"remove"]("OT_loading"),this.loading())},ve.audioOnly=function(Xe){return void 0===Xe?this._audioOnly:(this._audioOnly=Xe,this._container&&this._container.classList[Xe?"add":"remove"]("OT_audio-only"),this.audioOnly())},ve.domId=function(){return this._container&&this._container.getAttribute("id")},ve.setSinkId=function(Xe){if(this._videoElementFacade)return this._videoElementFacade.setSinkId(Xe)},(0,e.default)(de,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),de}()}},function(d,E,t){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.CancellationError=E.default=void 0;var i=o(t(660)),e=o(t(301));function o(s){return s&&s.__esModule?s:{default:s}}E.default=i.default,E.CancellationError=e.default},function(d,E,t){"use strict";(function(n){const i=t(21);d.exports=()=>n.all(i.subscribers.where().map(r=>{if(r.isAudioBlocked())return r._.unblockAudio()}))}).call(this,t(0))},function(d,E,t){"use strict";d.exports=n=>"P2P"===n?"RELAYED":"ROUTED"},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5)),o=i(t(19));const s=t(59),a=t(147),c=t(9),u=t(58),l=t(62),h=t(276),p=t(48),y=t(51),O=t(679),v=t(16),b=t(259),T=t(195),C=t(165),w=C.CancellationError,N=C.default,k=t(3),L=t(689),D=t(310),W=t(76),Z=t(27),oe=t(7),Q=t(106),ne=t(126),he=t(26),ae=t(75),ye=t(154),Le=t(690),me=t(164)(),Oe=t(691),ge=t(692),ce=t(166),Ue=t(24)().getInputMediaDevices,de=t(693),ve=t(270),Ae=t(309),Xe=t(694),Ye=t(695),We=t(291),at=We.setVideoContentHint,At=We.getVideoContentHint,ht=t(167);d.exports=function(nt){void 0===nt&&(nt={});let De=(0,o.default)({},nt);["processPubOptions"].forEach(So=>{a(De[So],`${So} dependency must be injected into Publisher`)});const lt=De.AnalyticsHelper||he,wt=De.calculateCapableSimulcastStreams||t(252),In=De.createChromeMixin||t(282)(),Gn=De.deviceHelpers||t(24)(),ft=De.EnvironmentLoader||t(146),ut=De.Errors||t(6),Vt=De.Events||t(23)(),nn=De.ExceptionCodes||t(10),Rn=De.interpretPeerConnectionError||t(162)(),Pn=De.IntervalRunner||ae,Jt=De.logging||t(2)("Publisher"),Mr=De.Microphone||t(292)(),bn=De.otError||t(13)(),Zn=De.OTErrorClass||t(22),Ht=De.OTHelpers||t(8),rr=De.parseIceServers||t(101).parseIceServers,Ti=De.PUBLISH_MAX_DELAY||t(267),bo=De.PublisherPeerConnection||t(296)(),Gr=De.PublishingState||t(300)(),pi=De.StreamChannel||t(149),uo=De.systemRequirements||t(152),gi=De.VideoOrientation||t(150)(),qr=De.WidgetView||me,Di=De.global||(void 0!==typeof window?window:global),Ir=De.createSendMethod||t(307),go=De.setEncodersActiveState||L,$i=De.MediaProcessor||t(696),Zo=t(701),On=De.shouldLogMediaProcessorEvents||t(702),Lr=De.processPubOptions;return function(mi){var Zt=this;void 0===mi&&(mi={});let yr=oe({});const Cr=new T,ki=Ce=>Cr.get(Ce);oe(this);const Gi=ye();let Hn,so,Nt,zr=new lt;uo.check()||uo.upgrade();const Po={};let Fo,lo,dr,Uo,Wi,Ei,Ri,xo,Mo,Vo,Io,ts,$o,fi,Oi,es=!1;const Qo={},No={};let Yt,Sn,Kn;const vn=()=>this.session||Kn||{isConnected:()=>!1},Tr=[],$r=new $i;function pt(){return{connectionId:vn().isConnected()?vn().connection.connectionId:null,streamId:so,widgetType:"Publisher"}}this.once("publishComplete",Ce=>{var be;Ce||(es=!0,Io=null!=(be=this.session)&&be.sessionInfo.p2pEnabled?"P2P":"MANTIS")}),this.on("sourceStreamIdChanged",Ce=>{Io=Ce}),this.on("audioAcquisitionProblem",Ce=>{kt("publisher:audioAcquisitionProblem","Event",{didPublishComplete:es,method:Ce.method})});const Ot=Ce=>{const be=Object.keys(ut).map(_e=>ut[_e]),xe=bn(be.indexOf(Ce.name)>-1?Ce.name:ut.MEDIA_ERR_ABORTED,Ce,nn.UNABLE_TO_PUBLISH);Jt.error(`onStreamAvailableError ${xe.name}: ${xe.message}`),dr.set("Failed"),Hn&&(Hn.destroy(),Hn=null);const Fe={failureReason:"GetUserMedia",failureCode:nn.UNABLE_TO_PUBLISH,failureMessage:`OT.Publisher failed to access camera/mic: ${xe.message}`};Fi("Failure",{},Fe),Zn.handleJsException({error:xe,errorMsg:Fe.failureReason,code:Fe.failureCode,target:this,analytics:zr}),this.trigger("publishComplete",xe)},Rt=Ce=>{const be=u(Ce);be.code=nn.UNABLE_TO_PUBLISH,Jt.error(`OT.Publisher.onScreenSharingError ${be.message}`),dr.set("Failed"),be.message=`Screensharing: ${be.message}`,this.trigger("publishComplete",be),Fi("Failure",{},{failureReason:"ScreenSharing",failureMessage:be.message}),Hn&&(Hn.destroy(),Hn=null)},jt=Ce=>{const be=u(Ce);let xe;try{xe=window.self!==window.top}catch(Fe){}"https:"!==(void 0!==typeof window?window:global).location.protocol&&(Qn?be.message+=" Note: https:// is required for screen sharing.":ve()&&"localhost"!==Ht.env.hostName&&(be.message+=` Note: ${Ht.env.name} requires HTTPS for camera and microphone access.`)),xe&&!Qn&&(be.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),Jt.error(be.message),dr.set("Failed"),be.message=`OT.Publisher Access Denied: Permission Denied: ${be.message}`,be.code=nn.UNABLE_TO_PUBLISH,Hn&&(Hn.destroy(),Hn=null),Fi("Cancel",{reason:"AccessDenied"}),this.trigger("publishComplete",be),this.dispatchEvent(new ne(Z.ACCESS_DENIED))},qt=Ce=>{throw Ce.name===ut.USER_MEDIA_ACCESS_DENIED||Ce.name===ut.NOT_SUPPORTED&&Ce.originalMessage.match(/Only secure origins/)?jt(Ce):Lr.isScreenSharing?Rt(Ce):Ot(Ce),Ce},gn=()=>{kt("accessDialog","Opened"),this.dispatchEvent(new ne(Z.ACCESS_DIALOG_OPENED,!0))},Nn=()=>{kt("accessDialog","Closed"),this.dispatchEvent(new ne(Z.ACCESS_DIALOG_CLOSED,!1))},li=v(),mr={};let yi=!1,Br={},ei=!1,vi=Lr(mi,"OT.Publisher",()=>dr&&dr.isDestroyed());vi.on({accessDialogOpened:gn,accessDialogClosed:Nn});const Qn=vi.isScreenSharing,Zi=vi.isCustomAudioTrack,ai=vi.isCustomVideoTrack,Qi=vi.shouldAllowAudio,Mn=vi.properties,Lo=vi.getUserMedia;function ao(Ce){Ce.forEach(be=>be())}Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});const Yo=(Ce,be,xe)=>Ce.addEventListener?(Ce.addEventListener(be,xe),()=>Ce.removeEventListener(be,xe)):()=>{};(function(){const be=[];yr.on("streamDestroy",()=>ao(be)),yr.on("streamChange",()=>{ao(be);const xe=Nt.getAudioTracks().map(Fe=>Yo(Fe,"ended",()=>{ei=!0,this.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})}));be.splice(0,be.length,...xe)})}).call(this),function(){const be=[];yr.on("streamDestroy",()=>ao(be)),yr.on("streamChange",()=>{ao(be),Ao()||Nt.getTracks().forEach(xe=>{xe.addEventListener&&(be.push(Yo(xe,"mute",()=>{le()})),be.push(Yo(xe,"unmute",()=>{le()})))})})}();const Ao=()=>{if(Qn)return!0;const be=["text","detail"].includes(Mn.videoContentHint);return ai&&be},kt=mi.logAnalyticsEvent||((Ce,be,xe,Fe,_e)=>{let ot=c({action:Ce,variation:be,payload:xe},pt(),Fe);"Failure"===be&&(ot=c(Br,ot)),Br=p(ot,"sessionId","connectionId","partnerId"),zr.logEvent(ot,_e)}),Jr=()=>{if(!On(this.session))return void $r.disableLogging();const be=this.session.apiKey,xe=this.session._.getProxyUrl();$r.enableLogging(be,xe)},Fi=function(be,xe,Fe){void 0===xe&&(xe={}),void 0===Fe&&(Fe={}),"Non-fatal"!==Fe.failureReason&&("Attempt"===be&&(Wi=(new Date).getTime(),Sn&&(Sn.stop(),Jt.error("_connectivityAttemptPinger should have been cleaned up")),Sn=new Pn(()=>{kt("Publish","Attempting",xe,(0,o.default)({},pt(),Fe))},.2,6)),"Failure"===be||"Success"===be||"Cancel"===be?(Sn?(Sn.stop(),Sn=void 0):Jt.warn(`Received connectivity event: "${be}" without "Attempt"`),kt("Publish",be,(0,o.default)({videoInputDevices:Ri,audioInputDevices:Ei,videoInputDeviceCount:Ri?Ri.length:void 0,audioInputDeviceCount:Ei?Ei.length:void 0,selectedVideoInputDeviceId:xo,selectedAudioInputDeviceId:Mo},xe),(0,o.default)({attemptDuration:(new Date).getTime()-Wi},Fe))):kt("Publish",be,xe,Fe))},co=(Ce,be)=>{kt("ICERestart",Ce,be)},rs=(Ce,be,xe)=>{"Attempt"===be?(Qo[Ce]=(new Date).getTime(),kt(Ce,be,xe)):("Failure"===be||"Success"===be)&&kt(Ce,be,xe,{attemptDuration:(new Date).getTime()-Qo[Ce]})},Xr=function(be,xe){void 0===xe&&(xe={}),rs("RoutedToRelayedTransition",be,xe)},Co=function(be,xe){void 0===xe&&(xe={}),rs("RelayedToRoutedTransition",be,xe)},Bo=y(()=>{kt("GetStats","Called")}),bi=y(()=>{kt("GetRtcStatsReport","Called")}),qo=Ce=>{let be=Ce.parsedStats,xe=Ce.simulcastEnabled,Fe=Ce.remoteConnectionId,ot=Ce.sourceStreamId;const It={peerId:Ce.peerId,widgetType:"Publisher",connectionId:this.session&&this.session.isConnected()?this.session.connection.connectionId:null,streamId:so,width:Hn.width,height:Hn.height,audioTrack:Nt&&Nt.getAudioTracks().length>0,hasAudio:J(),publishAudio:Mn.publishAudio,videoTrack:Nt&&Nt.getVideoTracks().length>0,hasVideo:ue(),publishVideo:Mn.publishVideo,audioSource:Zi?"Custom":void 0,duration:Fo?Math.round(((new Date).getTime()-Fo.getTime())/1e3):0,remoteConnectionId:Fe,scalableVideo:xe,sourceStreamId:ht(ot)};let dt=(Qn&&ai?"Screen":Qn&&mi.videoSource)||ai&&"Custom"||Mn.constraints.video&&"Camera"||null;h(dt)&&(dt=O(dt)),It.videoSource=dt;const tn={videoWidth:this.videoWidth(),videoHeight:this.videoHeight()},mt=c({},It,be,tn);zr.logQOS(mt),this.trigger("qos",mt)},jo=()=>{let Ce,be;const xe=Hn&&Hn.video();return Mn.videoDimensions?(Ce=Math.min(Mn.videoDimensions.width,xe&&xe.videoWidth()||640),be=Math.min(Mn.videoDimensions.height,xe&&xe.videoHeight()||480)):(Ce=xe&&xe.videoWidth()||640,be=xe&&xe.videoHeight()||480),{width:Ce,height:be}},ns=()=>{dr.isDestroyed()?Hn&&Hn.destroyVideo():(Jt.debug("OT.Publisher.onLoaded; resolution:",`${this.videoWidth()}x${this.videoHeight()}`),dr.set("MediaBound"),ce().catch(Jt.error),Hn.loading(!!this.session&&!this.stream),yi=!0)},zo=Ce=>{const be=bn(ut.CONNECT_FAILED,Ce,nn.P2P_CONNECTION_FAILED);be.message=`OT.Publisher PeerConnection Error: ${be.message}`,Fi("Failure",{},{failureReason:"PeerConnectionError",failureCode:be.code,failureMessage:be.message}),dr.set("Failed"),this.trigger("publishComplete",be),Zn.handleJsException({error:be,target:this,analytics:zr})},Jo=()=>{Nt&&(yr.emit("streamDestroy"),Di.MediaStreamTrack&&Di.MediaStreamTrack.prototype.stop?Nt.getTracks().forEach(Ce=>Ce.stop()):Nt.stop())},_o=()=>{const Ce=k.isiOS&&k.iOSVersion>=15&&k.iOSVersion<15.2,be=Nt.getVideoTracks()[0];Ce&&be&&document.addEventListener("visibilitychange",()=>{!document.hidden&&Hn&&Hn.rebindSrcObject()})},Er=()=>{const Ce=k.isiOS&&k.iOSVersion>=13.3,be=Nt.getAudioTracks()[0];Ce&&be&&(be.onmute=()=>yo(be),be.onunmute=()=>Ui(be))},Wn=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe;return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(xe={muted:!0},Hn){_e.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return _e.abrupt("return",Hn.bindVideo(Nt,xe));case 4:case"end":return _e.stop()}},be)}));return function(){return Ce.apply(this,arguments)}}(),ss=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(Jt.debug("OT.Publisher.onStreamAvailable"),dr.set("BindingMedia"),void 0!==Mn.videoContentHint&&at(xe,Mn.videoContentHint),Jo(),Nt=xe,!Mn.videoFilter){ot.next=14;break}return ot.prev=6,ot.next=9,Zt.applyVideoFilter(Mn.videoFilter);case 9:ot.next=14;break;case 11:ot.prev=11,ot.t0=ot.catch(6),Jt.error(`Error applying video filter: ${ot.t0}`);case 14:yr.emit("streamChange"),Er(),_o(),xo=(Fe=(It,dt)=>{let tn;return It.forEach(mt=>{if(mt.deviceId)tn=mt.deviceId.toString();else if(mt.label&&dt){const Gt=l(dt,hn=>hn.label===mt.label);Gt&&(tn=Gt.deviceId)}}),tn})(Nt.getVideoTracks(),Ri),Mo=Fe(Nt.getAudioTracks(),Ei),lo=new Mr(Nt,!Mn.publishAudio),Et(),Pr(),Zt.accessAllowed=!0,Zt.dispatchEvent(new ne(Z.ACCESS_ALLOWED,!1));case 25:case"end":return ot.stop()}},be,null,[[6,11]])}));return function(xe){return Ce.apply(this,arguments)}}(),us=Ce=>{let be,xe;Jt.error("OT.Publisher.onPublishingTimeout"),ei?(be=ut.CHROME_MICROPHONE_ACQUISITION_ERROR,xe="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(be=ut.TIMEOUT,xe="Could not publish in a reasonable amount of time");const Fe={failureReason:"ICEWorkflow",failureCode:nn.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};Fi("Failure",{},Fe),Zn.handleJsException({errorMsg:Fe.failureReason,code:Fe.failureCode,target:this,analytics:zr}),Ce.isConnected()&&this.streamId&&Ce._.streamDestroy(this.streamId),this.disconnect(),this.session=null,dr.isDestroyed()||dr.set("MediaBound"),this.trigger("publishComplete",bn(be,new Error(xe),nn.UNABLE_TO_PUBLISH))},as=Ce=>{const be=bn(ut.MEDIA_ERR_DECODE,Ce,nn.UNABLE_TO_PUBLISH);be.message=`OT.Publisher while playing stream: ${be.message}`,Jt.error("OT.Publisher.onVideoError:",be),kt("stream",null,{reason:be.message});const xe=dr.isAttemptingToPublish();dr.set("Failed"),xe?this.trigger("publishComplete",be):this.trigger("error",be.message),Zn.handleJsException({error:be,target:this,analytics:zr})};this._setWebRTCStream=Ce=>{Nt=Ce},this._setCurrentVideoFilter=Ce=>{Pi=Ce},this._getCurrentVideoFilter=()=>Pi,this._getMediaProcessor=()=>$r,this._removePeerConnection=Ce=>{if(!Ce)return;const be=ki(Ce);delete mr[be.peerConnectionId],Ce.destroy()},this._removeSubscriber=Ce=>{this.session.sessionInfo.isAdaptiveEnabled&&"P2P"===Io&&this._.startRelayedToRoutedTransition(),Fn(Ce).then(xe=>{xe.forEach(Fe=>this._removePeerConnection(Fe))})};const To=Ce=>{const be=ki(Ce),xe=be.remoteSubscriberId,Fe=be.peerConnectionId;Jt.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),kt("disconnect","PeerConnection",{subscriberConnection:Fe}),this._removeSubscriber(xe)},ke=function(){var Ce=(0,e.default)(r.default.mark(function be(xe,Fe){var _e,ot,It,dt,tn,Gt,hn,Pt,Ee;return r.default.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(_e=Fe.reason,It=Zt.session&&Zt.session.sessionInfo,!("ICEWorkflow"===(ot=Fe.prefix)&&It&&It.reconnection&&yi)){Ze.next=5;break}return Jt.debug("Ignoring peer connection failure due to possibility of reconnection."),Ze.abrupt("return");case 5:return dt=ki(xe)||{},Gt=dt.peerConnectionId,hn=Rn(void 0,_e,ot,void 0===(tn=dt.remoteConnectionId)?"(not found)":tn,"Publisher"),Pt={hasRelayCandidates:xe&&xe.hasRelayCandidates()},Ee={failureReason:ot||"PeerConnectionError",failureCode:hn.code,failureMessage:hn.message},dr.isPublishing()?Ee.reason="Non-fatal":Zt.trigger("publishComplete",hn),Fi("Failure",Pt,Ee),Zn.handleJsException({errorMsg:`OT.Publisher PeerConnection Error: ${_e}`,code:hn.code,target:Zt,analytics:zr}),Ze.next=14,mr[Gt];case 14:Ze.sent.destroy(),delete mr[Gt];case 17:case"end":return Ze.stop()}},be)}));return function(xe,Fe){return Ce.apply(this,arguments)}}(),_=Ce=>this.session.sessionInfo.isAdaptiveEnabled&&"P2P"===Ce.getSourceStreamId(),it=function(){var Ce=(0,e.default)(r.default.mark(function be(xe,Fe){var _e,ot,It,dt,tn;return r.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(_e=Zt.session.sessionInfo.isAdaptiveEnabled,ot=Fe.getSourceStreamId(),No[ot]=xe,"disconnected"===xe&&setTimeout(()=>{const Ee=Zt.session._.isSocketReconnecting,ze=Zt.session._.getSocket().is("connected")&&!Ee();if("disconnected"===No[ot]&&ze){const Ze=ki(Fe);co("Attempt",{remoteConnectionId:Ze.remoteConnectionId}),Fe.iceRestart()}},2e3),"connected"!==xe){Pt.next=14;break}if(clearTimeout(Yt),!_e){Pt.next=14;break}return Pt.next=9,Eo();case 9:return It=Pt.sent.iceConnectionStateIsConnected(),Pt.next=12,mo();case 12:dt=Pt.sent.iceConnectionStateIsConnected(),It&&dt&&br();case 14:if("failed"!==xe){Pt.next=21;break}if(tn=Zt.session._.isSocketReconnecting,Zt.session._.getSocket().is("connected")&&!tn()){Pt.next=20;break}return Pt.abrupt("return");case 20:_e&&ot===Io&&"P2P"===ot?Zt._.startRelayedToRoutedTransition():Yt=setTimeout(()=>{Zt.session._.streamDestroy(Zt.streamId,ot)},5e3);case 21:case"end":return Pt.stop()}},be)}));return function(xe,Fe){return Ce.apply(this,arguments)}}(),on=Ce=>{Ce.setP2PMaxBitrate(),Ce.startEncryption(this.session.connection.id),_(Ce)&&Xr("Success")},xn=Ce=>{let be=Ce.peerConnectionId,xe=Ce.send,Fe=Ce.log,_e=Ce.logQoS,ot=Ce.sourceStreamId;if(yn(be))return n.reject(new Error("PeerConnection already exists"));const It=wt({isChromiumEdge:Ht.env.isChromiumEdge,browserName:Ht.env.name,isScreenSharing:Qn,isCustomVideoTrack:ai,sessionInfo:this.session.sessionInfo,constraints:Mn.constraints,videoDimensions:jo(),capableSimulcastScreenshare:Mn.capableSimulcastScreenshare});return mr[be]=n.all([this.session._.getIceConfig(),this.session._.getVideoCodecsCompatible(Nt)]).then(dt=>{let tn=dt[0],Gt=Nt;if(!dt[1]){Gt=Nt.clone();const Ee=Gt.getVideoTracks()[0];Ee&&(Ee.stop(),Gt.removeTrack(Ee))}const hn=new bo({iceConfig:tn,sendMessage:(Pt,Ee)=>{"offer"===Pt&&this.trigger("connected"),xe(Pt,Ee)},webRTCStream:Gt,channels:Mn.channels,capableSimulcastStreams:It,overrideSimulcastEnabled:mi._enableSimulcast,logAnalyticsEvent:Fe,offerOverrides:{enableDtx:Mn.enableDtx,enableStereo:Mn.enableStereo,audioBitrate:Mn.audioBitrate,priorityVideoCodec:Mn._priorityVideoCodec||this.session.sessionInfo.priorityVideoCodec,codecFlags:Mn._codecFlags||this.session._.getCodecFlags()},answerOverrides:this.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:Mn.audioBitrate},sourceStreamId:ot,isP2pEnabled:this.session.sessionInfo.p2pEnabled,sessionId:this.session.id,keyStore:this.session.keyStore,sFrameClientStore:this.session.sFrameClientStore,isE2ee:this.session._.isE2ee()});return hn.on({disconnected:()=>To(hn),error:Pt=>ke(hn,{reason:Pt.reason,prefix:Pt.prefix}),qos:_e,iceRestartSuccess:()=>(Ce=>{const be=ki(Ce);co("Success",{remoteConnectionId:be.remoteConnectionId})})(hn),iceRestartFailure:()=>(Ce=>{const be=ki(Ce);co("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:be.remoteConnectionId})})(hn),iceConnectionStateChange:Pt=>it(Pt,hn),audioAcquisitionProblem:()=>{ei=!0,this.trigger("audioAcquisitionProblem",{method:"getStats"})}}),hn.once("connected",()=>on(hn)),new n((Pt,Ee)=>{const Ve=ze=>{Ee(ze)};hn.once("error",Ve),hn.init(Uo,ze=>{if(ze)return Ee(ze);hn.off("error",Ve),Pt(hn)})})}),yn(be)},tr=()=>n.all(Object.keys(mr).map(yn)),Fn=Ce=>tr().then(be=>be.filter(xe=>ki(xe).remoteSubscriberId===Ce)),yn=Ce=>mr[Ce],Si=Ce=>{const be=Object.keys(mr).find(xe=>xe.endsWith(`~${Ce}`));return mr[be]},Eo=()=>Si("MANTIS"),mo=()=>Si("P2P");let Bi=In(this,{name:Mn.name,publishAudio:Mn.publishAudio,publishVideo:Mn.publishVideo,audioSource:Mn.audioSource,showControls:Mn.showControls,shouldAllowAudio:Qi,logAnalyticsEvent:kt});const Xo=()=>{this.off("publishComplete",le),Bi&&Bi.reset(),Gi.releaseAll(),this.disconnect(),lo=null,Jo(),Nt=null,Hn&&(Hn.destroy(),Hn=null),this.session&&this._.unpublishFromSession(this.session,"reset"),$r.getVideoFilter()&&fo(),this.id=null,this.stream=null,yi=!1,this.session=null,dr.isDestroyed()||dr.set("NotPublishing")},ue=()=>{if(!Nt||0===Nt.getVideoTracks().length)return!1;const be=["text","detail"].includes(Mn.videoContentHint),Fe=Ht.env.isChromium&&(Qn||ai&&be);return Nt.getVideoTracks().reduce((_e,ot)=>_e&&(!ot.muted||!!Fe)&&ot.enabled&&"ended"!==ot.readyState,Mn.publishVideo)},J=()=>!(!Nt||0===Nt.getAudioTracks().length)&&Nt.getAudioTracks().length>0&&Nt.getAudioTracks().reduce((Ce,be)=>Ce&&!be.muted&&be.enabled&&"ended"!==be.readyState,Mn.publishAudio),le=Ce=>{Hn&&(Hn.audioOnly(!ue()),Hn.showPoster(!ue())),Bi&&Bi.setAudioOnly(!ue()&&J()),this.stream?(this.stream.setChannelActiveState("audio",J(),Ce),this.stream.setChannelActiveState("video",ue(),Ce)):(this.off("publishComplete",le),this.once("publishComplete",le))},we=(Ce,be)=>{let xe=!1;if("function"==typeof Ce?be=Ce:xe="rtcStatsReport"===Ce,xe?bi():Bo(),!xe||Ae)tr().then(Fe=>{if(0===Fe.length){const _e=nn.PEER_CONNECTION_NOT_CONNECTED;throw bn(ut.PEER_CONNECTION_NOT_CONNECTED,new Error(Zn.getTitleByCode(_e)),_e)}return Fe}).then(Fe=>this.session.sessionInfo.isAdaptiveEnabled?Fe.filter(ot=>ot.getSourceStreamId()===Io):Fe).then(Fe=>n.all(Fe.map(_e=>D(xe?_e.getRtcStatsReport.bind(_e):_e.getStats.bind(_e))().then(ot=>({pc:_e,stats:ot}))))).then(Fe=>{const _e=Fo?Fo.getTime():Date.now(),ot=Fe.map(It=>{let tn=It.stats;const mt=ki(It.pc),Gt=mt.remoteConnectionId,hn=mt.remoteSubscriberId;return c(Gt.match(/^symphony\./)?{}:{subscriberId:hn,connectionId:Gt},xe?{rtcStatsReport:tn}:{stats:W.normalizeStats(tn,!1,_e)})});be(null,ot)}).catch(be);else{const Fe=nn.GET_RTC_STATS_REPORT_NOT_SUPPORTED;be(bn(ut.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(Zn.getTitleByCode(Fe)),Fe))}},yt=(Ce,be)=>{this.session._.streamCreate(Mn.name||"",this.streamId,Mn.audioFallbackEnabled,Tr,Mn.minVideoBitrate,Ce,this.session._.isE2ee(),be)},Qe=Ce=>{Nt.getAudioTracks().forEach(function(){var be=(0,e.default)(r.default.mark(function xe(Fe){var _e;return r.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return(_e=Fe.clone()).enabled=!1,It.prev=2,It.next=5,Ce.findAndReplaceTrack(Fe,_e);case 5:It.next=10;break;case 7:return It.prev=7,It.t0=It.catch(2),It.abrupt("return");case 10:Po[Fe.id]=_e;case 11:case"end":return It.stop()}},xe,null,[[2,7]])}));return function(xe){return be.apply(this,arguments)}}())},Bt=Ce=>{Nt.getAudioTracks().forEach(function(){var be=(0,e.default)(r.default.mark(function xe(Fe){return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.prev=0,ot.next=3,Ce.findAndReplaceTrack(Po[Fe.id],Fe);case 3:ot.next=8;break;case 5:return ot.prev=5,ot.t0=ot.catch(0),ot.abrupt("return");case 8:delete Po[Fe.id];case 9:case"end":return ot.stop()}},xe,null,[[0,5]])}));return function(xe){return be.apply(this,arguments)}}())},br=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe;return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return $o=!1,_e.next=3,Eo();case 3:if(!(xe=_e.sent)){_e.next=17;break}return Zt.trigger("sourceStreamIdChanged","P2P"),_e.next=8,Q(5e3);case 8:if(!$o){_e.next=11;break}return Jt.debug("Cancelling stop sending RTP to MANTIS."),_e.abrupt("return");case 11:return Qe(xe),_e.next=14,xe.changeMediaDirectionToInactive();case 14:if(!(Ht.env.isFirefox&&Ht.env.version<96)){_e.next=17;break}return _e.next=17,fr();case 17:case"end":return _e.stop()}},be)}));return function(){return Ce.apply(this,arguments)}}(),Ut=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe;return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return $o=!0,_e.next=3,Eo();case 3:if(!(xe=_e.sent)){_e.next=10;break}return Bt(xe),_e.next=8,xe.changeMediaDirectionToRecvOnly();case 8:ts&&clearTimeout(ts),Zt.trigger("sourceStreamIdChanged","MANTIS");case 10:case"end":return _e.stop()}},be)}));return function(){return Ce.apply(this,arguments)}}(),fr=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe;return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,Eo();case 2:(xe=_e.sent)&&(ts=setTimeout((0,e.default)(r.default.mark(function ot(){return r.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if("P2P"!==Io){dt.next=9;break}return dt.next=3,xe.changeMediaDirectionToRecvOnly();case 3:return dt.next=5,Q(3e3);case 5:return dt.next=7,xe.changeMediaDirectionToInactive();case 7:return dt.next=9,fr();case 9:case"end":return dt.stop()}},ot)})),3e4));case 4:case"end":return _e.stop()}},be)}));return function(){return Ce.apply(this,arguments)}}();this.publish=Ce=>(Jt.debug("OT.Publisher: publish"),(dr.isAttemptingToPublish()||dr.isPublishing())&&Xo(),dr.set("GetUserMedia"),Mn.style&&this.setStyle(Mn.style,null,!0),Mn.classNames="OT_root OT_publisher",ft.onLoad(()=>{Jt.debug("OT.Publisher: publish: environment loaded"),Hn=new qr(Ce,(0,o.default)({},Mn,{widgetType:"publisher"})),Qi&&Oe({publisher:this,widgetView:Hn}),Hn.on("error",as),this.id=Hn.domId(),this.element=Hn.domElement,this.element&&Bi&&Bi.init(Hn),Hn.on("videoDimensionsChanged",(be,xe)=>{this.stream&&this.stream.setVideoDimensions(xe.width,xe.height),this.dispatchEvent(new Vt.VideoDimensionsChangedEvent(this,be,xe))}),Hn.on("mediaStopped",be=>{const xe=new Vt.MediaStoppedEvent(this,be);if(this.dispatchEvent(xe),!xe.isDefaultPrevented()){if(be){const Fe=String(be.kind).toLowerCase();return void("audio"===Fe?Pr():"video"===Fe?Et():Jt.warn(`Track with invalid kind has ended: ${be.kind}`))}this.session?this._.unpublishFromSession(this.session,"mediaStopped"):this.destroy("mediaStopped")}}),Hn.on("videoElementCreated",be=>{const xe=new Vt.VideoElementCreatedEvent(be);this.dispatchEvent(xe)}),Lo().catch(qt).then(function(){var be=(0,e.default)(r.default.mark(function xe(Fe){var _e;return r.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return Ei=vi.audioDevices,Ri=vi.videoDevices,(_e=!!Mn.videoFilter)&&(_n=Xe(Fe,Ri)),It.next=6,ss(Fe);case 6:return Mn.publishVideo||Zt._toggleVideo(Mn.publishVideo),!Qn&&!ai&&!_e&&(_n=Xe(Fe,Ri),Mn.publishVideo&&Ci(_n)),It.abrupt("return",Wn().catch(dt=>{if(!(dt instanceof w))throw dt}).then(()=>{ns(),dr.isDestroyed()||(Zt.trigger("initSuccess"),Zt.trigger("loaded",Zt))},dt=>{Jt.error(`OT.Publisher.publish failed to bind video: ${dt}`),zo(dt)}));case 9:case"end":return It.stop()}},xe)}));return function(xe){return be.apply(this,arguments)}}())}),this),this._setScalableValues=function(){var Ce=(0,e.default)(r.default.mark(function be(xe,Fe){var ot,It;return r.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.next=2,tr().then(mt=>mt[0].getSenders().filter(Gt=>"video"===Gt.track.kind));case 2:return(It=(ot=tn.sent[0]).getParameters()).encodings.forEach((mt,Gt)=>{mt[xe]=Fe[Gt]}),tn.next=8,ot.setParameters(It);case 8:case"end":return tn.stop()}},be)}));return function(be,xe){return Ce.apply(this,arguments)}}(),this._setScalableFramerates=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!(Fe=Ur(xe))||!xi(Fe)){ot.next=4;break}return ot.next=4,Zt._setScalableValues("maxFramerate",Fe);case 4:case"end":return ot.stop()}},be)}));return function(be){return Ce.apply(this,arguments)}}(),this._setScalableVideoLayers=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!(Fe=Ur(xe))||!ci(Fe)){ot.next=4;break}return ot.next=4,Zt._setScalableValues("scaleResolutionDownBy",Fe);case 4:case"end":return ot.stop()}},be)}));return function(be){return Ce.apply(this,arguments)}}();const xi=Ce=>{let be=0;return Ce.every(xe=>!(15!==xe&&30!==xe||xe<be||(be=xe,0)))},ci=Ce=>{let be=17;return Ce.every(xe=>!(xe<1||xe>=be||(be=xe,0)))},Ur=Ce=>{let be;if("string"!=typeof Ce)return be;const xe=Ce.split(":");return 0===xe.length||xe.length>3||!xe.every(Fe=>!isNaN(Fe))||(be=xe.map(Fe=>parseInt(Fe,10)).reverse()),be},$n=Ce=>Nt&&Nt[`get${b(Ce)}Tracks`]().length>0&&Nt[`get${b(Ce)}Tracks`]().every(be=>"ended"!==be.readyState),Pr=Ce=>{const be=$n("audio")&&Mn.publishAudio;Bi&&Bi.setMuted(!be),lo&&lo.muted(!be),Oi&&Oi.originalTrack&&(Oi.originalTrack.enabled=be),le(Ce)};this.publishAudio=Ce=>{kt("publishAudio","Attempt",{publishAudio:Ce}),Mn.publishAudio=Ce;try{Pr(),kt("publishAudio","Success",{publishAudio:Ce})}catch(be){kt("publishAudio","Failure",{message:be.message})}return this},this.publishCaptions=Ce=>{this.stream.setChannelActiveState("data",Ce)};let Kr,ii=!1;const Et=()=>{const Ce=$n("video")&&Mn.publishVideo;if("Chrome"===k.name&&k.version>=69&&(0,e.default)(r.default.mark(function be(){var xe,Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return Kr&&Kr.cancel(),Kr=new N,xe=Kr,ot.next=5,tr();case 5:Fe=ot.sent,xe.isCanceled()||Fe.forEach(It=>{go(It,Ce)});case 7:case"end":return ot.stop()}},be)}))(),ai&&$r){const be=$r.getOriginalVideoTrack();be&&(be.enabled=Ce)}if(ai&&fi){const be=fi.originalTrack;be&&(be.enabled=Ce)}Nt&&Nt.getVideoTracks().forEach(be=>{be.enabled=Ce,be.isCreatedCanvas&&(be.enabled=!1)}),le()},fo=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe;return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return xe=$r.getOriginalVideoTrack(),_e.prev=1,_e.next=4,$r.destroy();case 4:_e.next=9;break;case 6:_e.prev=6,_e.t0=_e.catch(1),Jt.warn(`Error cleaning up mediaProcessor: ${_e.t0}`);case 9:xe.stop();case 10:case"end":return _e.stop()}},be,null,[[1,6]])}));return function(){return Ce.apply(this,arguments)}}(),Go=Ce=>!Pi&&!fi&&Ce===hi(),Ii=(Ce,be)=>!(!Pi&&!fi)||(Ce?_n!==be:void 0!==be);let _n,Pi;this._toggleVideo=ge(function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot,It,dt,tn,mt,Gt;return r.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(!(Qn||ai||ii)){Pt.next=2;break}return Pt.abrupt("return");case 2:return ot=void 0===(_e=Mn.videoDimensions)?jo():_e,Pt.next=5,_i();case 5:if(It=Pt.sent,dt=Yn()){Pt.next=9;break}throw bn(ut.NOT_SUPPORTED,new Error("Publisher._toggleVideo cannot toggleVideo when you have no video source."));case 9:if(tn=null==(Fe=It.find(Ee=>Ee.label===dt.label))?void 0:Fe.deviceId,Ii(xe,tn)){Pt.next=12;break}return Pt.abrupt("return");case 12:if("ended"!==dt.readyState){Pt.next=15;break}return ii=!0,Pt.abrupt("return");case 15:if(xe&&Ht.env.isAndroid&&Ht.env.isChrome&&dt&&dt.stop&&dt.stop(),xe){Pt.next=32;break}Pt.prev=17,mt=de(ot),Pt.next=24;break;case 21:return Pt.prev=21,Pt.t0=Pt.catch(17),Pt.abrupt("return");case 24:if(tn&&(_n=tn),Ci(mt.label),!(Gt=$r.getVideoFilter())){Pt.next=31;break}return Pi=Gt,Pt.next=31,fo();case 31:fi&&(fi.destroy(),fi.stopOriginalTrack());case 32:if(!_n||-1!==It.findIndex(Ee=>Ee.deviceId===_n)){Pt.next=34;break}throw bn(ut.NO_DEVICES_FOUND,new Error("Previous device no longer available - deviceId not found"));case 34:if(yr.emit("streamDestroy"),!xe){Pt.next=63;break}if(!Go(_n)){Pt.next=38;break}return Pt.abrupt("return");case 38:return Pt.prev=38,Pt.next=41,ui(_n);case 41:mt=Pt.sent,Pt.next=48;break;case 44:return Pt.prev=44,Pt.t1=Pt.catch(38),Jt.error(`Error getting new track for current device(${_n}): ${Pt.t1}`),Pt.abrupt("return");case 48:if(mt){Pt.next=51;break}return Jt.error("Failed to enable video. It was not possible to get a new track from the camera"),Pt.abrupt("return");case 51:if(!Pi){Pt.next=59;break}return Pt.next=54,$r.setVideoFilter(Pi);case 54:return Pt.next=56,$r.setMediaStream(Nt);case 56:return Pt.next=58,$r.setVideoTrack(mt);case 58:mt=Pt.sent;case 59:if(!fi){Pt.next=63;break}return Pt.next=62,fi.setTrack(mt);case 62:mt=Pt.sent;case 63:return Pt.prev=63,Pt.next=66,vo(dt,mt);case 66:Pt.next=71;break;case 68:throw Pt.prev=68,Pt.t2=Pt.catch(63),Pt.t2;case 71:case"end":return Pt.stop()}},be,null,[[17,21],[38,44],[63,68]])}));return function(be){return Ce.apply(this,arguments)}}()),this.publishVideo=Ce=>{kt("publishVideo","Attempt",{publishVideo:Ce}),Mn.publishVideo=Ce;try{this._toggleVideo(Mn.publishVideo),Et(),kt("publishVideo","Success",{publishVideo:Ce})}catch(be){kt("publishVideo","Failure",{message:be.message})}return this},this.setVideoContentHint=Ce=>at(Nt,Ce),this.getVideoContentHint=()=>At(Nt),this.destroy=function(Ce,be){return dr.isAttemptingToPublish()&&this.session&&Fi("Cancel",{reason:"destroy"}),dr.isDestroyed()||(dr.set("Destroyed"),Xo(),vi&&(vi.off(),vi=null),Bi&&(Bi.destroy(),Bi=null),yr&&(yr.off(),yr=null),!0!==be&&this.dispatchEvent(new Vt.DestroyedEvent(Z.PUBLISHER_DESTROYED,this,Ce)),this.off(),fi&&(fi.destroy(),fi.stopOriginalTrack()),Oi&&(Oi.destroy(),Oi.stopOriginalTrack())),this},this.disconnect=()=>{Object.keys(mr).forEach(Ce=>{const be=yn(Ce);delete mr[Ce],be.then(xe=>this._removePeerConnection(xe))}),Tr.length=0},this.processMessage=(Ce,be,xe)=>{const Fe=s(xe,"params.subscriber",be).replace(/^INVALID-STREAM$/,be),_e=s(xe,"content.peerId"),ot=s(xe,"content.sourceStreamId","MANTIS"),It=`${Fe}~${_e}~${ot}`;Jt.debug(`OT.Publisher.processMessage: Received ${Ce} from ${be} for ${It}`),Jt.debug(xe);const dt=yn(It),tn=()=>{const Gt=Ir({socket:this.session._.getSocket(),uri:xe.uri,content:{peerId:_e,sourceStreamId:ot}});xn({peerConnectionId:It,send:Gt,log:function(Ve,ze,Ze,Lt,Dt){void 0===Lt&&(Lt={});const Qt=(0,o.default)({peerId:_e,sourceStreamId:ht(ot)},Lt);return kt(Ve,ze,Ze,Qt,Dt)},logQoS:Ee=>{ot===Io&&qo((0,o.default)({},Ee,{peerId:_e,remoteConnectionId:be,sourceStreamId:ot}))},sourceStreamId:ot}).then(Ee=>(((Ce,be)=>{Cr.set(Ce,be)})(Ee,{remoteConnectionId:be,remoteSubscriberId:Fe,peerId:_e,sourceStreamId:ot,peerConnectionId:It}),Ee.processMessage(Ce,xe),null)).catch(Ee=>{Jt.error("OT.Publisher failed to create a peerConnection",Ee)})},mt=this.session.sessionInfo.isAdaptiveEnabled;if("unsubscribe"===Ce)this._removeSubscriber(Fe);else if(dt)dt.then(Gt=>Gt.processMessage(Ce,xe));else{if(mt&&mo())return;tn()}},this.getImgData=function(){if(!yi)return Jt.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;const Ce=Hn&&Hn.video();return Ce?Ce.imgData():null};const Wr=Ce=>{Jo(),Nt=Ce,yr.emit("streamChange"),lo=new Mr(Nt,!Mn.publishAudio)},pn=Ce=>{Ce.getSenders().forEach(be=>"audio"===be.track.kind&&Nt.getAudioTracks().length?be.replaceTrack(Nt.getAudioTracks()[0]):"video"===be.track.kind&&Nt.getVideoTracks().length?be.replaceTrack(Nt.getVideoTracks()[0]):void 0)},wo=function(be){return void 0===be&&(be=pn),tr().then(xe=>(xe.map(be),n.all([])))};{let Ce=0;const be=function(){var xe=(0,e.default)(r.default.mark(function Fe(){var ot,tn;return r.default.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(!Ht.env.isLegacyEdge&&Di.RTCRtpSender&&"function"==typeof Di.RTCRtpSender.prototype.replaceTrack){Gt.next=2;break}throw bn(ut.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),nn.UNABLE_TO_PUBLISH);case 2:if(!ai&&!Qn){Gt.next=4;break}throw bn(ut.NOT_SUPPORTED,new Error("Publisher#cycleVideo: The publisher is not using a camera video source"));case 4:if(Yn()){Gt.next=7;break}throw bn(ut.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 7:return Ce+=1,Gt.next=10,_i();case 10:if((ot=Gt.sent).filter(hn=>hn.deviceId!==_n).length>0){Gt.next=14;break}return Gt.abrupt("return",_n);case 14:for(;ot[Ce%ot.length].deviceId===_n;)Ce+=1;return yr.emit("streamDestroy"),tn=ot[Ce%ot.length].deviceId,Gt.next=20,ni(tn);case 20:return Gt.abrupt("return",_n);case 21:case"end":return Gt.stop()}},Fe)}));return function(){return xe.apply(this,arguments)}}();this.cycleVideo=ge((0,e.default)(r.default.mark(function xe(){var Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.prev=0,ot.next=3,be();case 3:Fe=ot.sent,ot.next=10;break;case 6:throw ot.prev=6,ot.t0=ot.catch(0),Jt.error(`Publisher#cycleVideo: could not cycle video: ${ot.t0}`),ot.t0;case 10:return ot.abrupt("return",{deviceId:Fe});case 11:case"end":return ot.stop()}},xe,null,[[0,6]])})))}const vo=function(){var Ce=(0,e.default)(r.default.mark(function be(xe,Fe){var _e,ot,It;return r.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.next=2,tr();case 2:return _e=tn.sent,tn.next=5,n.all(_e.map(function(){var mt=(0,e.default)(r.default.mark(function Gt(hn){return r.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,hn.findAndReplaceTrack(xe,Fe);case 2:hn.setP2PMaxBitrate();case 3:case"end":return Ee.stop()}},Gt)}));return function(Gt){return mt.apply(this,arguments)}}()));case 5:if(Nt.removeTrack(xe),Nt.addTrack(Fe),xe&&xe.stop){try{ot=Fe instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Fe).toString().includes("MediaStreamTrackGenerator")}catch(mt){ot=!1}ot||xe.stop()}("Firefox"===Ht.env.name||"Safari"===Ht.env.name)&&(Zt.videoElement().srcObject=null,Zt.videoElement().srcObject=Nt),(It=Hn&&Hn.video())&&It.refreshTracks(),yr.emit("streamChange"),Et();case 13:case"end":return tn.stop()}},be)}));return function(xe,Fe){return Ce.apply(this,arguments)}}(),ui=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot,dt,tn,mt,Gt;return r.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return _e=hi(),Ci(xe),(ot=u(mi)).audioSource=null,ot.videoSource=xe,vi=Lr(ot,"OT.Publisher.getTrackFromDeviceId",()=>dr&&dr.isDestroyed()),vi.on({accessDialogOpened:gn,accessDialogClosed:Nn}),dt=vi.getUserMedia,Pt.prev=8,Pt.next=11,dt();case 11:tn=Pt.sent,Pt.next=17;break;case 14:Pt.prev=14,Pt.t0=Pt.catch(8),Jt.error(Pt.t0);case 17:return mt=null==(Fe=tn)?void 0:Fe.getVideoTracks(),(Gt=mt[0])||Ci(_e),Pt.abrupt("return",Gt);case 20:case"end":return Pt.stop()}},be,null,[[8,14]])}));return function(xe){return Ce.apply(this,arguments)}}(),Yn=()=>Nt.getVideoTracks()[0],hi=()=>Vo,Ci=Ce=>{Vo=Ce},_i=function(){var Ce=(0,e.default)(r.default.mark(function be(){var xe,Fe;return r.default.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.next=2,Gn.shouldAskForDevices();case 2:if(Fe=(xe=ot.sent).videoDevices,xe.video&&Fe&&Fe.length){ot.next=6;break}throw bn(ut.NO_DEVICES_FOUND,new Error("No video devices available"),nn.UNABLE_TO_PUBLISH);case 6:return ot.abrupt("return",Fe);case 7:case"end":return ot.stop()}},be)}));return function(){return Ce.apply(this,arguments)}}(),ro=function(){var Ce=(0,e.default)(r.default.mark(function be(xe,Fe){var _e,ot,It;return r.default.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.next=2,tr();case 2:return _e=tn.sent,tn.next=5,n.all(_e.map(mt=>mt.findAndReplaceTrack(xe,Fe)));case 5:Fe&&Nt.addTrack(Fe),xe&&Nt.removeTrack(xe),(ot=Hn&&Hn.video())&&ot.refreshTracks(),Bi&&(Fe&&!xe&&Bi.addAudioTrack(),xe&&!Fe&&Bi.removeAudioTrack());try{It=Fe instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Fe).toString().includes("MediaStreamTrackGenerator")}catch(mt){It=!1}xe&&xe.stop&&!It&&xe.stop(),Fe&&(Pr(),lo=new Mr(Nt,!Mn.publishAudio)),yr.emit("streamChange"),le();case 15:case"end":return tn.stop()}},be)}));return function(xe,Fe){return Ce.apply(this,arguments)}}(),qi=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e;return r.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return Fe=xe.getSettings().deviceId,It.prev=1,It.next=4,Zt.setAudioSource(Fe);case 4:(_e=Nt.getAudioTracks()[0])&&(_e.onmute=()=>yo(_e),_e.onunmute=()=>Ui(_e)),It.next=11;break;case 8:It.prev=8,It.t0=It.catch(1),Jt.error(It.t0);case 11:case"end":return It.stop()}},be,null,[[1,8]])}));return function(xe){return Ce.apply(this,arguments)}}(),yo=Ce=>{let be=!1;Mn.publishVideo&&document.hidden&&(be=!0,this.publishVideo(!1));const xe=function(){var Fe=(0,e.default)(r.default.mark(function _e(){return r.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(document.hidden){It.next=5;break}return It.next=3,qi(Ce);case 3:be&&Zt.publishVideo(!0),document.removeEventListener("visibilitychange",xe);case 5:case"end":return It.stop()}},_e)}));return function(){return Fe.apply(this,arguments)}}();document.addEventListener("visibilitychange",xe)},Ui=Ce=>{J()&&(ue()?this.videoElement().pause():qi(Ce)),this.session.trigger("gsmCallEnded")},Yi=!(Ht.env.isLegacyEdge||!Di.RTCRtpSender||"function"!=typeof Di.RTCRtpSender.prototype.replaceTrack),io=()=>bn(ut.CANCEL,new Error("Operation did not succeed due to a new request."));let Xi;const oo=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot,It,dt,tn,mt,hn,Pt,Ee,Ve;return r.default.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Yi){Ze.next=2;break}throw bn(ut.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser."));case 2:if(Xi&&Xi.cancel(),Xi=new N,Fe=Xi,_e=Lt=>{if(Fe.isCanceled())throw Lt.getTracks(Dt=>Dt.stop()),io();return oo(Lt.getAudioTracks()[0])},ot=Zt.getAudioSource()){Ze.next=7;break}throw bn(ut.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 7:if(!(xe instanceof MediaStreamTrack)){Ze.next=26;break}if(!Fe.isCanceled()){Ze.next=10;break}throw io();case 10:if(!Oi){Ze.next=23;break}return Ze.prev=11,Ze.next=14,Oi.setTrack(xe);case 14:return It=Ze.sent,Ze.next=17,ro(ot,It);case 17:return Ze.abrupt("return",Ze.sent);case 20:Ze.prev=20,Ze.t0=Ze.catch(11),Jt.error(`Error setting track on audioMediaProcessorConnector: ${Ze.t0}`);case 23:return Ze.abrupt("return",ro(ot,xe));case 26:if("string"!=typeof xe){Ze.next=73;break}return(dt=u(mi)).audioSource=xe,dt.videoSource=null,vi=Lr(dt,"OT.Publisher.setAudioSource",()=>Fe.isCanceled()||dr&&dr.isDestroyed()),vi.on({accessDialogOpened:gn,accessDialogClosed:Nn}),tn=ot.label,mt=ot.getConstraints&&ot.getSettings().deviceId||void 0,ot&&ot.stop(),hn=vi.getUserMedia,Ze.prev=36,Ze.t1=_e,Ze.next=40,hn();case 40:return Ze.t2=Ze.sent,Ze.next=43,(0,Ze.t1)(Ze.t2);case 43:return Ze.abrupt("return",Ze.sent);case 46:if(Ze.prev=46,Ze.t3=Ze.catch(36),!Fe.isCanceled()){Ze.next=50;break}throw io();case 50:if((Pt=u(mi)).videoSource=null,Pt.audioSource=mt,Pt.audioSource||!tn){Ze.next=60;break}return Ze.next=56,Ue();case 56:if(Ee=Ze.sent.find(Lt=>Lt.label===tn),!Fe.isCanceled()){Ze.next=59;break}throw io();case 59:Ee&&(Pt.audioSource=Ee.deviceId);case 60:if(Pt.audioSource){Ze.next=63;break}throw Ze.t3.message+=" (could not determine previous audio device)",bn(ut.NOT_FOUND,Ze.t3);case 63:return vi=Lr(Pt,"OT.Publisher.setAudioSource",()=>Fe.isCanceled()||dr&&dr.isDestroyed()),Ze.next=66,vi.getUserMedia().catch(Lt=>{throw Lt.message+=" (could not obtain previous audio device)",Lt});case 66:return Ve=Ze.sent,Ze.next=69,_e(Ve);case 69:throw Ze.t3.message+=" (reverted to previous audio device)",Ze.t3;case 71:Ze.next=74;break;case 73:throw bn(ut.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 74:case"end":return Ze.stop()}},be,null,[[11,20],[36,46]])}));return function(xe){return Ce.apply(this,arguments)}}();this.setAudioSource=oo,this.getAudioSource=()=>Nt&&Nt.getAudioTracks().length>0?Nt.getAudioTracks()[0]:null;const eo=function(){var Ce=(0,e.default)(r.default.mark(function xe(Fe){var _e,ot,It;return r.default.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(_e=bn(ut.INVALID_VIDEO_SOURCE,new Error("Invalid video source. Video source must be a valid video input deviceId"),1041),ot=bn(ut.SET_VIDEO_SOURCE_FAILURE,new Error("You cannot reset the video source on a publisher that does not currently use a camera source."),1040),!Ht.env.isLegacyEdge&&Di.RTCRtpSender&&"function"==typeof Di.RTCRtpSender.prototype.replaceTrack){Gt.next=4;break}throw bn(ut.UNSUPPORTED_BROWSER,new Error("setVideoSource is not supported in your browser."),nn.UNABLE_TO_PUBLISH);case 4:if("string"==typeof Fe){Gt.next=6;break}throw _e;case 6:if(It=!Nt||0===Nt.getVideoTracks().length,!(ai||Qn||It)){Gt.next=9;break}throw ot;case 9:return Gt.next=11,Ue();case 11:if(Gt.sent.find(hn=>"videoInput"===hn.kind&&hn.deviceId===Fe)){Gt.next=15;break}throw _e;case 15:return Gt.next=17,ni(Fe);case 17:case"end":return Gt.stop()}},xe)}));return function be(xe){return Ce.apply(this,arguments)}}();this.setVideoSource=eo;const ni=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot;return r.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(Fe=_n,_n=xe,Mn.publishVideo){dt.next=4;break}return dt.abrupt("return");case 4:if(_e=Yn(),Mn.publishVideo&&Ht.env.isAndroid&&(Ht.env.isChrome||Ht.env.isFirefox)&&_e&&_e.stop&&_e.stop(),!Go(xe)){dt.next=8;break}return dt.abrupt("return");case 8:return dt.prev=8,dt.next=11,ui(xe);case 11:ot=dt.sent,dt.next=19;break;case 14:return dt.prev=14,dt.t0=dt.catch(8),_n=Fe,Jt.error(dt.t0),dt.abrupt("return");case 19:if(ot){dt.next=22;break}return Jt.warn("Unable to aquire video track. Moving to next device."),dt.abrupt("return");case 22:if(!Pi){dt.next=26;break}return dt.next=25,$r.setVideoTrack(ot);case 25:ot=dt.sent;case 26:if(!fi){dt.next=30;break}return dt.next=29,fi.setTrack(ot);case 29:ot=dt.sent;case 30:return dt.next=32,vo(_e,ot);case 32:Mn.publishVideo&&(ii=!1);case 33:case"end":return dt.stop()}},be,null,[[8,14]])}));return function(xe){return Ce.apply(this,arguments)}}();var Ce;this.getVideoSource=()=>{const Ce={},be=!Nt||0===Nt.getVideoTracks().length;return Ce.track=Nt&&Mn.publishVideo&&Nt.getVideoTracks()[0]||null,Ce.deviceId=Qn||ai||!_n?null:_n,Ce.type=ai?"custom":Qn?"screen":be?null:"camera",Ce},this._={setIceConfig:Ce=>(0,e.default)(r.default.mark(function be(){return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,tr();case 2:_e.sent.forEach(ot=>ot.setIceConfig(Ce));case 4:case"end":return _e.stop()}},be)}))(),publishToSession:(Ce,be)=>{be&&(zr=be),Kn=Ce,this.session=Ce;const xe=v();so=xe,this.streamId=xe,Fi("Attempt",{dataChannels:Mn.channels,properties:Le(Mn)});const Fe=new n((dt,tn)=>{yi?dt():(this.once("initSuccess",dt),this.once("destroyed",mt=>{let Gt=mt.reason,hn="";Gt&&(hn=` Reason: ${Gt}`),tn(new Error(`Publisher destroyed before it finished loading.${hn}`))}))});Jt.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");const _e=new n((dt,tn)=>{this.once("publishComplete",mt=>{mt?tn(mt):(this._setScalableFramerates(Mn.scalableFramerates),this._setScalableVideoLayers(Mn.scalableVideoLayers),this.stream&&(this.stream.setChannelActiveState("audio",J()),this.stream.setChannelActiveState("video",ue())),Jt.debug("publishToSession: got publishComplete"),dt())})}),ot=dt=>{const tn=Ye(dt);throw Fi("Failure",{},{failureReason:"Publish",failureCode:tn.code,failureMessage:tn.message}),dr.isAttemptingToPublish()&&this.trigger("publishComplete",tn),Zn.handleJsException({errorMsg:dt.message,code:tn.code,target:this,error:dt,analytics:zr}),tn};Jt.debug("publishToSession: waiting for loaded");const It=Fe.then(()=>Ce._.getVideoCodecsCompatible(Nt)).then(dt=>{if(Jt.debug("publishToSession: loaded"),!this.session)return;const tn=setTimeout(()=>{us(Ce)},Ti);this.once("publishComplete",()=>{clearTimeout(tn)}),dr.set("PublishingToSession");const mt=dt&&Hn&&Hn.video(),Gt=Nt.getVideoTracks().length>0;mt&&Gt&&null!==Mn.videoSource&&!1!==Mn.videoSource&&Tr.push(new pi({id:"video1",type:"video",active:Mn.publishVideo,orientation:gi.ROTATED_NORMAL,frameRate:Mn.frameRate,width:mt.videoWidth(),height:mt.videoHeight(),e2ee:Ce._.isE2ee(),source:Qn?"screen":ai?"custom":"camera",fitMode:Mn.fitMode}));const Pt=Nt.getAudioTracks().length>0,Ee=null!==Mn.audioSource&&!1!==Mn.audioSource;return Ee&&Pt&&Tr.push(new pi({id:"audio1",type:"audio",active:Mn.publishAudio})),Ee&&Pt&&Tr.push(new pi({id:"caption1",type:"data",active:Mn.publishCaptions})),this._.streamChannels=Tr,Jt.debug("publishToSession: creating rumor stream id"),new n((Ve,ze)=>{yt(null,(Ze,Lt,Dt)=>{Ze?ze(ot(Ze)):Ve({streamId:Lt,message:Dt})})})}).then(dt=>{if(void 0===dt)return;const tn=dt.streamId,mt=dt.message;if(Jt.debug("publishToSession: rumor stream id created:",tn,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),tn!==xe)throw new Error("streamId response does not match request");this.streamId=tn,Uo=rr(mt)}).catch(dt=>{throw this.trigger("publishComplete",dt),dt});return n.all([It,_e])},unpublishFromSession:(Ce,be)=>{if(!this.session||Ce.id!==this.session.id)return"unpublished"===be&&Jt.warn(`The publisher ${li} is trying to unpublish from a session ${Ce.id} it is not attached to (it is attached to ${this.session&&this.session.id||"no session"})`),this;if(Ce.isConnected()&&(this.stream||dr.isAttemptingToPublish())&&Ce._.streamDestroy(this.streamId),Gi.releaseAll(),this.disconnect(),dr.isAttemptingToPublish()){Fi("Cancel",{reason:"unpublish"});const Fe=new Error((()=>{switch(be){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return`The publisher was destroyed due to ${be}`}})());this.trigger("publishComplete",bn("mediaStopped"===be?ut.MEDIA_ENDED:ut.CANCEL,Fe))}return this.session=null,kt("unpublish","Success"),this._.streamDestroyed(be),this},unpublishStreamFromSession:(Ce,be,xe)=>so&&Ce.id===so?this._.unpublishFromSession(be,xe):(Jt.warn(`The publisher ${li} is trying to destroy a stream ${Ce.id} that is not attached to it (it has ${so||"no stream"} attached to it)`),this),streamDestroyed:Ce=>{["reset"].indexOf(Ce)<0&&(dr.isDestroyed()||dr.set("MediaBound"));const be=new Vt.StreamEvent("streamDestroyed",this.stream,Ce,!0);this.dispatchEvent(be),be.isDefaultPrevented()||this.destroy()},archivingStatus:Ce=>(Bi&&Bi.setArchivingStatus(Ce),Ce),webRtcStream:()=>Nt,switchTracks:()=>(0,e.default)(r.default.mark(function Ce(){var be;return r.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.prev=0,Fe.next=3,Lo().catch(qt);case 3:be=Fe.sent,Fe.next=10;break;case 6:throw Fe.prev=6,Fe.t0=Fe.catch(0),Jt.error(`OT.Publisher.switchTracks failed to getUserMedia: ${Fe.t0}`),Fe.t0;case 10:Wr(be),Fe.prev=11,Wn(),Fe.next=21;break;case 15:if(Fe.prev=15,Fe.t1=Fe.catch(11),!(Fe.t1 instanceof w)){Fe.next=19;break}return Fe.abrupt("return");case 19:throw Jt.error("Error while binding video",Fe.t1),Fe.t1;case 21:Fe.prev=21,wo(),Fe.next=29;break;case 25:throw Fe.prev=25,Fe.t2=Fe.catch(21),Jt.error("Error replacing tracks",Fe.t2),Fe.t2;case 29:case"end":return Fe.stop()}},Ce,null,[[0,6],[11,15],[21,25]])}))(),getDataChannel(Ce,be,xe){const Fe=yn(Object.keys(mr)[0]);Fe?Fe.then(_e=>{_e.getDataChannel(Ce,be,xe)}):xe(new Ht.Error("Cannot create a DataChannel before there is a subscriber."))},iceRestart(){tr().then(Ce=>{Ce.forEach(be=>{const xe=ki(be);co("Attempt",{remoteConnectionId:xe.remoteConnectionId}),Jt.debug("Publisher: ice restart attempt"),be.iceRestart()})})},getState:()=>dr,demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded:()=>(0,e.default)(r.default.mark(function Ce(){var be;return r.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,tr();case 2:if((be=Fe.sent).length){Fe.next=5;break}throw new Error("No established PeerConnections yet");case 5:return Fe.abrupt("return",be[0]._testOnlyGetFramesEncoded());case 6:case"end":return Fe.stop()}},Ce)}))(),onStreamAvailable:ss,startRoutedToRelayedTransition:()=>{Xr("Attempt");const Ce=xe=>{const Fe=Ye(xe);this.trigger("streamCreateForP2PComplete",Fe),Xr("Failure",{reason:Fe.message})};if(!this.session)return void Xr("Failure",{reason:"Not connected to the session."});const be=setTimeout(()=>{Xr("Failure",{reason:"Timeout"})},Ti);this.once("streamCreateForP2PComplete",()=>{clearTimeout(be)}),Jt.debug(`streamCreateWithSource: send a message to RUMOR for creating the stream with the sourceStreaId P2P and stream ${this.streamId}`),yt("P2P",xe=>{xe?Ce(xe):this.trigger("streamCreateForP2PComplete")})},startRelayedToRoutedTransition:(Ce=(0,e.default)(r.default.mark(function xe(){return r.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if("MANTIS"!==Io){_e.next=2;break}return _e.abrupt("return");case 2:if(Co("Attempt"),Zt.session){_e.next=6;break}return Co("Failure",{reason:"Not connected to the session."}),_e.abrupt("return");case 6:if(Zt.streamId){_e.next=9;break}return Co("Failure",{reason:"No streamId available"}),_e.abrupt("return");case 9:return Zt.session._.streamDestroy(Zt.streamId,"P2P"),_e.t0=Zt,_e.next=13,mo();case 13:return _e.t1=_e.sent,_e.t0._removePeerConnection.call(_e.t0,_e.t1),_e.next=17,Ut();case 17:Co("Success"),Zt.trigger("streamDestroyForP2PComplete");case 19:case"end":return _e.stop()}},xe)})),function be(){return Ce.apply(this,arguments)}),forceMuteAudio:function(){kt("publishAudio","Attempt",{publishAudio:!1}),Mn.publishAudio=!1;try{Pr("auto"),this.dispatchEvent(new Vt.MuteForcedEvent),kt("publishAudio","Success",{publishAudio:!1})}catch(Ce){kt("publishAudio","Failure",{message:Ce.message})}}.bind(this)},this.detectDevices=function(){Jt.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){Jt.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return Jt.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){Jt.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return Jt.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){Jt.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){Jt.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return li},this.videoElement=function(){const Ce=Hn&&Hn.video();return Ce?Ce.domElement():null},this.setStream=Ce=>{if("PublishingToSession"!==dr.current)throw new Error("assignStream called when publisher is not successfully publishing");Gi.releaseAll(),this.stream=Ce,this.stream.on("destroyed",this.disconnect,this),Gi.add(()=>{this.stream&&this.stream.off("destroyed",this.disconnect,this)}),dr.set("Publishing"),Hn.loading(!yi),Fo=new Date,this.dispatchEvent(new Vt.StreamEvent("streamCreated",Ce,null,!1)),Fi("Success"),this.trigger("publishComplete",null,this)},this.isWebRTC=!0,this.isLoading=function(){return Hn&&Hn.loading()},this.videoWidth=function(){const Ce=Hn&&Hn.video();return Ce?Ce.videoWidth():void 0},this.videoHeight=function(){const Ce=Hn&&Hn.video();return Ce?Ce.videoHeight():void 0},this.getStats=function(be){we((xe,Fe)=>{xe?be(xe):be(null,Fe)})},this.getRtcStatsReport=()=>new n((Ce,be)=>{(Ce=>{we("rtcStatsReport",Ce)})((xe,Fe)=>{xe?be(xe):Ce(Fe)})}),dr=new Gr(Ce=>{Jt.error("OT.Publisher State Change Failed: ",Ce.message),Jt.debug(Ce)}),this.accessAllowed=!1,this.applyVideoFilter=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var _e,ot,It,dt;return r.default.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(kt("applyVideoFilter","Attempt",{videoFilter:xe}),mt.prev=1,!fi){mt.next=4;break}throw bn(ut.NOT_SUPPORTED,new Error("Cannot apply video filter when videoMediaProcessorConnector is set."));case 4:if($i.isSupported()){mt.next=7;break}throw bn(ut.NOT_SUPPORTED,new Error("Browser does not support video filters (Insertable Streams and Worker APIs are required)"));case 7:if($r.isValidVideoFilter(xe)){mt.next=9;break}throw bn(ut.INVALID_PARAMETER,new Error("Video filter has invalid configuration"));case 9:if(Nt){mt.next=14;break}return kt("applyVideoFilter","Failure",{message:_e="Ignoring. No mediaStream"}),Jt.warn(_e),mt.abrupt("return");case 14:if(!Qn){mt.next=16;break}throw bn(ut.INVALID_PARAMETER,new Error("Video filters can not be applied to screen share"));case 16:if(!Zt.getVideoFilter()){mt.next=29;break}if(!$r.canUpdateVideoFilter(xe.type)){mt.next=27;break}return mt.prev=18,mt.next=21,$r.updateVideoFilter(xe);case 21:return mt.abrupt("return");case 24:mt.prev=24,mt.t0=mt.catch(18),Jt.warn(`Error updating video filter: ${mt.t0}`);case 27:return mt.next=29,Zt.clearVideoFilter();case 29:if(ot=Nt.getVideoTracks(),It=ot[0]){mt.next=35;break}return kt("applyVideoFilter","Failure",{message:_e="Ignoring. No video"}),Jt.warn(_e),mt.abrupt("return");case 35:return Jr(),mt.next=38,$r.setVideoFilter(xe);case 38:return mt.next=40,$r.setMediaStream(Nt);case 40:if(!(dt=mt.sent)){mt.next=44;break}return mt.next=44,vo(It,dt);case 44:mt.next=51;break;case 46:throw mt.prev=46,mt.t1=mt.catch(1),Jt.error(`Error applying video filter: ${mt.t1}`),kt("applyVideoFilter","Failure",{message:mt.t1.message}),mt.t1;case 51:Pi=xe,kt("applyVideoFilter","Success",{videoFilter:xe});case 53:case"end":return mt.stop()}},be,null,[[1,46],[18,24]])}));return function(be){return Ce.apply(this,arguments)}}(),this.getVideoFilter=()=>{kt("getVideoFilter","Attempt");const Ce=$r.getVideoFilter();return kt("getVideoFilter","Success"),Ce},this.setVideoMediaProcessorConnector=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot,It,dt;return r.default.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(kt("setVideoMediaProcessorConnector","Attempt",{message:xe?"setting the connector":"clearing the connector"}),!Zt.getVideoFilter()){Gt.next=4;break}throw kt("setVideoMediaProcessorConnector","Failure",{message:"Tried to set video MediaProcessorConnector when video filter applied."}),bn(ut.NOT_SUPPORTED,new Error("setVideoMediaProcessorConnector: Cannot use this method when videoFilter is set."));case 4:if(!fi){Gt.next=14;break}return Fe=Nt.getVideoTracks(),_e=Fe[0],Gt.next=8,ui(_n);case 8:return ot=Gt.sent,Gt.next=11,vo(_e,ot);case 11:fi.destroy(),fi.stopOriginalTrack(),fi=null;case 14:if(xe){Gt.next=17;break}return kt("setVideoMediaProcessorConnector","Success",{message:"clearing the connector"}),Gt.abrupt("return");case 17:if(Zo.isValidConnector(xe)){Gt.next=20;break}throw kt("setVideoMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),bn(ut.INVALID_PARAMETER,new Error("setVideoMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 20:if(fi=new Zo(xe),It=Nt.getVideoTracks(),dt=It[0]){Gt.next=28;break}return kt("setVideoMediaProcessorConnector","Failure",{message:"Connector not set as no video track is present."}),Jt.warn("setVideoMediaProcessorConnector: Connector not set as no video track is present."),fi=null,Gt.abrupt("return");case 28:return Gt.prev=28,Gt.next=31,fi.setTrack(dt);case 31:return _e=Gt.sent,Gt.next=34,vo(dt,_e);case 34:Gt.next=42;break;case 36:throw Gt.prev=36,Gt.t0=Gt.catch(28),fi=null,Jt.error(`setVideoMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${Gt.t0}`),kt("setVideoMediaProcessorConnector","Failure",{message:Gt.t0.message}),Gt.t0;case 42:kt("setVideoMediaProcessorConnector","Success");case 43:case"end":return Gt.stop()}},be,null,[[28,36]])}));return function(be){return Ce.apply(this,arguments)}}(),this.setAudioMediaProcessorConnector=function(){var Ce=(0,e.default)(r.default.mark(function be(xe){var Fe,_e,ot,It;return r.default.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(kt("setAudioMediaProcessorConnector","Attempt",{message:xe?"setting the connector":"clearing the connector"}),!Oi){mt.next=7;break}return Fe=Nt.getAudioTracks(),_e=Fe[0],mt.next=5,ro(_e,Oi.originalTrack);case 5:Oi.destroy(),Oi=null;case 7:if(xe){mt.next=10;break}return kt("setAudioMediaProcessorConnector","Success",{message:"clearing the connector"}),mt.abrupt("return");case 10:if(Zo.isValidConnector(xe)){mt.next=13;break}throw kt("setAudioMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),bn(ut.INVALID_PARAMETER,new Error("setAudioMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 13:if(ot=Nt.getAudioTracks(),It=ot[0]){mt.next=20;break}return kt("setAudioMediaProcessorConnector","Failure",{message:"Connector not set as no audio track is present."}),Jt.warn("setAudioMediaProcessorConnector: Connector not set as no audio track is present."),Oi=null,mt.abrupt("return");case 20:return Oi=new Zo(xe),mt.prev=21,mt.next=24,Oi.setTrack(It);case 24:return _e=mt.sent,mt.next=27,ro(Zt.getAudioSource(),_e);case 27:mt.next=35;break;case 29:throw mt.prev=29,mt.t0=mt.catch(21),Oi=null,Jt.error(`setAudioMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${mt.t0}`),kt("setAudioMediaProcessorConnector","Failure",{message:mt.t0.message}),mt.t0;case 35:kt("setAudioMediaProcessorConnector","Success");case 36:case"end":return mt.stop()}},be,null,[[21,29]])}));return function(be){return Ce.apply(this,arguments)}}(),this.clearVideoFilter=(0,e.default)(r.default.mark(function Ce(){var be,xe,Fe,_e,ot;return r.default.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(kt("clearVideoFilter","Attempt"),Zt.getVideoFilter()){dt.next=6;break}return kt("clearVideoFilter","Success",{message:be="Ignoring. No video filter applied"}),Jt.debug(be),dt.abrupt("return");case 6:if($i.isSupported()){dt.next=11;break}return kt("clearVideoFilter","Success",{message:be='Ignoring. "clearVideoFilter" not supported.'}),Jt.warn(be),dt.abrupt("return");case 11:if(Nt){dt.next=16;break}return kt("clearVideoFilter","Success",{message:be="Ignoring. No mediaStream"}),Jt.warn(be),dt.abrupt("return");case 16:if(!Pi){dt.next=43;break}return xe=Pi,Pi=null,Fe=Nt.getVideoTracks(),_e=Fe[0],dt.prev=20,dt.next=23,ui(_n);case 23:ot=dt.sent,dt.next=30;break;case 26:return dt.prev=26,dt.t0=dt.catch(20),Jt.error(dt.t0),dt.abrupt("return");case 30:if(ot){dt.next=33;break}return Jt.warn("Failed to clear filter because there is no video track."),dt.abrupt("return");case 33:return dt.prev=33,dt.next=36,vo(_e,ot);case 36:return dt.next=38,fo();case 38:dt.next=43;break;case 40:dt.prev=40,dt.t1=dt.catch(33),Pi=xe;case 43:case"end":return dt.stop()}},Ce,null,[[20,26],[33,40]])}))}}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(52).once;d.exports=function(r,e){void 0===e&&(e={});const o=e.hasE2eeCapability||t(170),s=e.hasOpenTokSupport||n;this.publish=-1!==r.indexOf("publish")?1:0,this.subscribe=-1!==r.indexOf("subscribe")?1:0,this.forceUnpublish=-1!==r.indexOf("forceunpublish")?1:0,this.forceDisconnect=-1!==r.indexOf("forcedisconnect")?1:0,this.forceMute=-1!==r.indexOf("forcemute")?1:0,this.supportsE2ee=o()?1:0,this.supportsWebRTC=s()?1:0,this.permittedTo=a=>Object.prototype.hasOwnProperty.call(this,a)&&1===this[a]}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.hasOpenTokSupport||t(52).once,e=i.env||t(3);return r()&&(i=>!i.isIos&&i.isChrome&&i.version>=99)(e)}},function(d,E,t){"use strict";const n=t(2)("Stream"),i=t(8),r=t(21),e=t(7),o=t(23)(),s=["name","archiving"];d.exports=function(c,u,l,h,p,y){const O=this;let v;this.id=c,this.streamId=c,this.name=u,this.creationTime=Number(l),this.connection=h,this.channel=y,this.publisher=r.publishers.find({streamId:this.id}),e(this);const b=function(D,W,Z,oe){let Q=W;switch(Q){case"active":Q="audio"===D.type?"hasAudio":"hasVideo",O[Q]=oe;break;case"disableWarning":if(Q="audio"===D.type?"audioDisableWarning":"videoDisableWarning",O[Q]=oe,!O["audio"===D.type?"hasAudio":"hasVideo"])return;break;case"fitMode":Q="defaultFitMode",O[Q]=oe;break;case"source":Q="audio"===D.type?"audioType":"videoType",O[Q]=oe;break;case"videoDimensions":O.videoDimensions=oe;break;case"orientation":case"width":case"height":return}"screen"===O.videoType&&"hasVideo"===Q&&!1===oe||O.dispatchEvent(new o.StreamUpdatedEvent(O,Q,Z,oe))},T=function(){return O.publisher?O.publisher:r.subscribers.find(D=>D.stream&&D.stream.id===O.id&&D.session.id===p.id)},C=function(){return!O.publisher};this.getChannelsOfType=function(D){return O.channel.filter(W=>W.type===D)},this.getChannel=function(D){for(let W=0;W<O.channel.length;++W)if(O.channel[W].id===D)return O.channel[W];return null};const w=this.getChannelsOfType("audio")[0],N=this.getChannelsOfType("video")[0];this.hasAudio=null!=w&&w.active,this.hasVideo=null!=N&&N.active,this.videoType=N&&N.source,this.defaultFitMode=N&&N.fitMode,this.videoDimensions={},N&&(this.videoDimensions.width=N.width,this.videoDimensions.height=N.height,this.videoDimensions.orientation=N.orientation,N.on("update",b),this.frameRate=N.frameRate),w&&w.on("update",b),this.setChannelActiveState=function(D,W,Z){const oe={active:W};Z&&(oe.activeReason=Z),k(D,oe)},this.setVideoDimensions=function(D,W){k("video",{width:D,height:W,orientation:0})},this.setRestrictFrameRate=function(D){k("video",{restrictFrameRate:D})},this.setPreferredResolution=function(D){if(!C())return void n.warn("setPreferredResolution has no affect when called by a publisher");if(p.sessionInfo.p2pEnabled)return void n.warn("Stream.setPreferredResolution will not work in a P2P Session");if(D&&void 0===D.width&&void 0===D.height)return;const W=O.getChannelsOfType("video")[0];if(W){if(D&&D.width){if(isNaN(parseInt(D.width,10)))throw new i.Error("stream preferred width must be an integer","Subscriber");W.preferredWidth=parseInt(D.width,10)}else W.preferredWidth=void 0;if(D&&D.height){if(isNaN(parseInt(D.height,10)))throw new i.Error("stream preferred height must be an integer","Subscriber");W.preferredHeight=parseInt(D.height,10)}else W.preferredHeight=void 0;p._.subscriberChannelUpdate(O,T(),W,{preferredWidth:W.preferredWidth||0,preferredHeight:W.preferredHeight||0})}},this.getPreferredResolution=function(){const D=O.getChannelsOfType("video")[0];if(D&&(D.preferredWidth||D.preferredHeight))return{width:D.preferredWidth,height:D.preferredHeight}},this.setPreferredFrameRate=function(D){if(!C())return void n.warn("setPreferredFrameRate has no affect when called by a publisher");if(p.sessionInfo.p2pEnabled)return void n.warn("Stream.setPreferredFrameRate will not work in a P2P Session");if(D&&isNaN(parseFloat(D)))throw new i.Error("stream preferred frameRate must be a number","Subscriber");const W=O.getChannelsOfType("video")[0];W&&(W.preferredFrameRate=D?parseFloat(D):null,p._.subscriberChannelUpdate(O,T(),W,{preferredFrameRate:W.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){const D=O.getChannelsOfType("video")[0];return D?D.preferredFrameRate:null};let k=function(D,W){let Z;if(O.publisher)Z=oe=>p._.streamChannelUpdate(O,oe,W);else{const oe=T();Z=Q=>p._.subscriberChannelUpdate(O,oe,Q,W)}O.getChannelsOfType(D).forEach(Z)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(D,W){void 0===D&&(D="clientDisconnected"),v=D,O.destroyed=!0,O.destroyedReason=v,!0!==W&&O.dispatchEvent(new o.DestroyedEvent("destroyed",O,v))},this._={},this._.updateProperty=function(D,W){if(-1===s.indexOf(D))return void n.warn(`Unknown stream property "${D}" was modified to "${W}".`);const Z=O[D],oe=W;switch(D){case"name":O[D]=oe;break;case"archiving":var Q=T();O.publisher&&Q&&Q._.archivingStatus(oe),O[D]=oe}const ne=new o.StreamUpdatedEvent(O,D,Z,oe);O.dispatchEvent(ne)},this._.update=function(D){for(const W in D)!D.hasOwnProperty(W)||O._.updateProperty(W,D[W])},this._.forceMute=function(D){D.hasOwnProperty("channels")&&D.channels.includes("audio")&&O.publisher&&O.publisher._.forceMuteAudio()},this._.updateChannel=function(D,W){const Z=O.getChannel(D);Z&&Z.update(W)}}},function(d,E,t){"use strict";E.__esModule=!0,E.STATUS=E.PONG=E.PING=E.DISCONNECT=E.CONNECT=E.MESSAGE=E.UNSUBSCRIBE=E.SUBSCRIBE=void 0,E.SUBSCRIBE=0,E.UNSUBSCRIBE=1,E.MESSAGE=2,E.CONNECT=3,E.DISCONNECT=4,E.PING=7,E.PONG=8,E.STATUS=9},function(d,E,t){"use strict";const n=t(9),i=t(169),r=t(7),e=t(23)(),o=t(735);function s(a,c,u,l,h){let p;this.id=a,this.connectionId=a,this.creationTime=c?Number(c):null,this.data=u,this.capabilities=o(l),this.permissions=new i(h),this.quality=null,r(this),this.destroy=(y,O)=>{p=y||"clientDisconnected",!0!==O&&this.dispatchEvent(new e.DestroyedEvent("destroyed",this,p))},this.destroyed=()=>void 0!==p,this.destroyedReason=()=>p}s.fromHash=a=>{let p=a.permissions;return new s(a.id,a.creationTime,a.data,n(a.capablities||{},{supportsWebRTC:!0}),p||[])},d.exports=s},function(d,E){var t="object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global).Object===Object&&(void 0!==typeof window?window:global);d.exports=t},function(d,E){var n=Function.prototype.toString;d.exports=function i(r){if(null!=r){try{return n.call(r)}catch(e){}try{return r+""}catch(e){}}return""}},function(d,E,t){var n=t(39),i=function(){try{var r=n(Object,"defineProperty");return r({},"",{}),r}catch(e){}}();d.exports=i},function(d,E,t){var n=t(41),i=t(30);d.exports=function r(e,o){return e&&n(o,i(o),e)}},function(d,E,t){var n=t(375),i=t(65),r=t(12),e=t(66),o=t(67),s=t(86),c=Object.prototype.hasOwnProperty;d.exports=function u(l,h){var p=r(l),y=!p&&i(l),O=!p&&!y&&e(l),v=!p&&!y&&!O&&s(l),b=p||y||O||v,T=b?n(l.length,String):[],C=T.length;for(var w in l)(h||c.call(l,w))&&(!b||!("length"==w||O&&("offset"==w||"parent"==w)||v&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||o(w,C)))&&T.push(w);return T}},function(d,E){d.exports=function t(n,i){return function(r){return n(i(r))}}},function(d,E,t){(function(n){var i=t(14),r=E&&!E.nodeType&&E,e=r&&"object"==typeof n&&n&&!n.nodeType&&n,s=e&&e.exports===r?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;n.exports=function c(u,l){if(l)return u.slice();var h=u.length,p=a?a(h):new u.constructor(h);return u.copy(p),p}}).call(this,t(85)(d))},function(d,E){d.exports=function t(){return[]}},function(d,E,t){var n=t(116),i=t(117),r=t(115),e=t(181);d.exports=Object.getOwnPropertySymbols?function(a){for(var c=[];a;)n(c,r(a)),a=i(a);return c}:e},function(d,E,t){var n=t(184),i=t(115),r=t(30);d.exports=function e(o){return n(o,r,i)}},function(d,E,t){var n=t(116),i=t(12);d.exports=function r(e,o,s){var a=o(e);return i(e)?a:n(a,s(e))}},function(d,E,t){var n=t(184),i=t(182),r=t(55);d.exports=function e(o){return n(o,r,i)}},function(d,E,t){var r=t(39)(t(14),"Set");d.exports=r},function(d,E,t){var r=t(39)(t(14),"WeakMap");d.exports=r},function(d,E,t){var n=t(14);d.exports=n.Uint8Array},function(d,E,t){var n=t(118);d.exports=function i(r,e){var o=e?n(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}},function(d,E,t){var n=t(87),i=t(117),r=t(69);d.exports=function e(o){return"function"!=typeof o.constructor||r(o)?{}:n(i(o))}},function(d,E,t){var n=t(110);function r(e,o){if("function"!=typeof e||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");var s=function(){var a=arguments,c=o?o.apply(this,a):a[0],u=s.cache;if(u.has(c))return u.get(c);var l=e.apply(this,a);return s.cache=u.set(c,l)||u,l};return s.cache=new(r.Cache||n),s}r.Cache=n,d.exports=r},function(d,E,t){var n=t(88),i=t(122);d.exports=function r(e){return n(function(o,s){var a=-1,c=s.length,u=c>1?s[c-1]:void 0,l=c>2?s[2]:void 0;for(u=e.length>3&&"function"==typeof u?(c--,u):void 0,l&&i(s[0],s[1],l)&&(u=c<3?void 0:u,c=1),o=Object(o);++a<c;){var h=s[a];h&&e(o,h,a,u)}return o})}},function(d,E,t){var n=t(120),i=Math.max;d.exports=function r(e,o,s){return o=i(void 0===o?e.length-1:o,0),function(){for(var a=arguments,c=-1,u=i(a.length-o,0),l=Array(u);++c<u;)l[c]=a[o+c];c=-1;for(var h=Array(o+1);++c<o;)h[c]=a[c];return h[o]=s(l),n(e,this,h)}}},function(d,E){var i=Date.now;d.exports=function r(e){var o=0,s=0;return function(){var a=i(),c=16-(a-s);if(s=a,c>0){if(++o>=800)return arguments[0]}else o=0;return e.apply(void 0,arguments)}}},function(d,E,t){"use strict";d.exports=t(403)()?WeakMap:t(404)},function(d,E,t){"use strict";var n=Object.create,i=Object.getPrototypeOf,r={};d.exports=function(){var e=Object.setPrototypeOf,o=arguments[0]||n;return"function"==typeof e&&i(e(o(null),r))===r}},function(d,E,t){"use strict";var s,a,c,u,n=t(198),i=t(32),r=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};s=function(a,c){if(i(a),null===c||n(c))return a;throw new TypeError("Prototype must be null or an object")},d.exports=(a=function(){var u,a=Object.create(null),c={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(u=l.set).call(a,c)}catch(h){}if(Object.getPrototypeOf(a)===c)return{set:u,level:2}}return a.__proto__=c,Object.getPrototypeOf(a)===c?{level:2}:((a={}).__proto__=c,Object.getPrototypeOf(a)===c&&{level:1})}(),a?(2===a.level?a.set?(u=a.set,c=function(l,h){return u.call(s(l,h),h),l}):c=function(l,h){return s(l,h).__proto__=h,l}:c=function l(h,p){var y;return s(h,p),(y=r.call(l.nullPolyfill,h))&&delete l.nullPolyfill.__proto__,null===p&&(p=l.nullPolyfill),h.__proto__=p,y&&e(l.nullPolyfill,"__proto__",o),h},Object.defineProperty(c,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null),t(406)},function(d,E,t){"use strict";var n=t(44),i={function:!0,object:!0};d.exports=function(r){return n(r)&&i[typeof r]||!1}},function(d,E,t){"use strict";var n=t(409),i=/^\s*class[\s{/}]/,r=Function.prototype.toString;d.exports=function(e){return!(!n(e)||i.test(r.call(e)))}},function(d,E,t){"use strict";var n=t(44),i=Array.prototype.forEach,r=Object.create,e=function(o,s){var a;for(a in o)s[a]=o[a]};d.exports=function(o){var s=r(null);return i.call(arguments,function(a){!n(a)||e(Object(a),s)}),s}},function(d,E,t){"use strict";d.exports=t(416)()?String.prototype.contains:t(417)},function(d,E,t){"use strict";var n=t(90),i=t(91),r=t(418),e=t(447),o=t(448),s=t(45).iterator;d.exports=function(a){return"function"==typeof o(a)[s]?a[s]():n(a)?new r(a):i(a)?new e(a):new r(a)}},function(d,E,t){"use strict";var n=t(423);d.exports=function(i){if(!n(i))throw new TypeError(i+" is not a symbol");return i}},function(d,E,t){"use strict";var l,n=t(427),i=t(125),r=t(70),e=t(32),o=t(33),s=t(428),a=t(45),c=Object.defineProperty,u=Object.defineProperties;d.exports=l=function(h,p){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");u(this,{__list__:o("w",e(h)),__context__:o("w",p),__nextIndex__:o("w",0)}),p&&(r(p.on),p.on("_add",this._onAdd),p.on("_delete",this._onDelete),p.on("_clear",this._onClear))},delete l.prototype.constructor,u(l.prototype,i({_next:o(function(){var h;if(this.__list__){if(this.__redo__&&void 0!==(h=this.__redo__.shift()))return h;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(h){return void 0===h?{done:!0,value:void 0}:{done:!1,value:this._resolve(h)}}),_resolve:o(function(h){return this.__list__[h]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},s({_onAdd:o(function(h){if(!(h>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void c(this,"__redo__",o("c",[h]));this.__redo__.forEach(function(p,y){p>=h&&(this.__redo__[y]=++p)},this),this.__redo__.push(h)}}),_onDelete:o(function(h){var p;h>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(p=this.__redo__.indexOf(h))&&this.__redo__.splice(p,1),this.__redo__.forEach(function(y,O){y>h&&(this.__redo__[O]=--y)},this)))}),_onClear:o(function(){this.__redo__&&n.call(this.__redo__),this.__nextIndex__=0})}))),c(l.prototype,a.iterator,o(function(){return this}))},function(d,E,t){"use strict";var n=t(57),i=t(124),r=t(430),e=t(431),o=function(s,a){return s.replace("%v",e(a))};d.exports=function(s,a,c){if(!i(c))throw new TypeError(o(a,s));if(!n(s)){if("default"in c)return c.default;if(c.isOptional)return null}var u=r(c.errorMessage);throw n(u)||(u=a),new TypeError(o(u,s))}},function(d,E){d.exports=function t(n,i,r,e){for(var o=n.length,s=r+(e?1:-1);e?s--:++s<o;)if(i(n[s],s,n))return s;return-1}},function(d,E,t){d.exports=t(459)},function(d,E,t){"use strict";d.exports=function(i,r){return function(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];return i.apply(r,o)}}},function(d,E,t){"use strict";var n=t(20);function i(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}d.exports=function(e,o,s){if(!o)return e;var a;if(s)a=s(o);else if(n.isURLSearchParams(o))a=o.toString();else{var c=[];n.forEach(o,function(h,p){null==h||(n.isArray(h)?p+="[]":h=[h],n.forEach(h,function(O){n.isDate(O)?O=O.toISOString():n.isObject(O)&&(O=JSON.stringify(O)),c.push(i(p)+"="+i(O))}))}),a=c.join("&")}if(a){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(d,E,t){"use strict";d.exports=function(i){return!(!i||!i.__CANCEL__)}},function(d,E,t){"use strict";(function(n){var i=t(20),r=t(464),e={"Content-Type":"application/x-www-form-urlencoded"};function o(c,u){!i.isUndefined(c)&&i.isUndefined(c["Content-Type"])&&(c["Content-Type"]=u)}var a={adapter:function s(){var c;return("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(c=t(212)),c}(),transformRequest:[function(u,l){return r(l,"Accept"),r(l,"Content-Type"),i.isFormData(u)||i.isArrayBuffer(u)||i.isBuffer(u)||i.isStream(u)||i.isFile(u)||i.isBlob(u)?u:i.isArrayBufferView(u)?u.buffer:i.isURLSearchParams(u)?(o(l,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):i.isObject(u)?(o(l,"application/json;charset=utf-8"),JSON.stringify(u)):u}],transformResponse:[function(u){if("string"==typeof u)try{u=JSON.parse(u)}catch(l){}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(u){a.headers[u]={}}),i.forEach(["post","put","patch"],function(u){a.headers[u]=i.merge(e)}),d.exports=a}).call(this,t(43))},function(d,E,t){"use strict";(function(n){var i=t(20),r=t(465),e=t(467),o=t(209),s=t(468),a=t(471),c=t(472),u=t(213);d.exports=function(h){return new n(function(y,O){var v=h.data,b=h.headers;i.isFormData(v)&&delete b["Content-Type"];var T=new XMLHttpRequest;if(h.auth){var C=h.auth.username||"",w=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";b.Authorization="Basic "+btoa(C+":"+w)}var N=s(h.baseURL,h.url);if(T.open(h.method.toUpperCase(),o(N,h.params,h.paramsSerializer),!0),T.timeout=h.timeout,T.onreadystatechange=function(){if(T&&4===T.readyState&&(0!==T.status||T.responseURL&&0===T.responseURL.indexOf("file:"))){var D="getAllResponseHeaders"in T?a(T.getAllResponseHeaders()):null;r(y,O,{data:h.responseType&&"text"!==h.responseType?T.response:T.responseText,status:T.status,statusText:T.statusText,headers:D,config:h,request:T}),T=null}},T.onabort=function(){!T||(O(u("Request aborted",h,"ECONNABORTED",T)),T=null)},T.onerror=function(){O(u("Network Error",h,null,T)),T=null},T.ontimeout=function(){var D="timeout of "+h.timeout+"ms exceeded";h.timeoutErrorMessage&&(D=h.timeoutErrorMessage),O(u(D,h,"ECONNABORTED",T)),T=null},i.isStandardBrowserEnv()){var k=(h.withCredentials||c(N))&&h.xsrfCookieName?e.read(h.xsrfCookieName):void 0;k&&(b[h.xsrfHeaderName]=k)}if("setRequestHeader"in T&&i.forEach(b,function(D,W){void 0===v&&"content-type"===W.toLowerCase()?delete b[W]:T.setRequestHeader(W,D)}),i.isUndefined(h.withCredentials)||(T.withCredentials=!!h.withCredentials),h.responseType)try{T.responseType=h.responseType}catch(L){if("json"!==h.responseType)throw L}"function"==typeof h.onDownloadProgress&&T.addEventListener("progress",h.onDownloadProgress),"function"==typeof h.onUploadProgress&&T.upload&&T.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(D){!T||(T.abort(),O(D),T=null)}),v||(v=null),T.send(v)})}}).call(this,t(0))},function(d,E,t){"use strict";var n=t(466);d.exports=function(r,e,o,s,a){var c=new Error(r);return n(c,e,o,s,a)}},function(d,E,t){"use strict";var n=t(20);d.exports=function(r,e){e=e||{};var o={},s=["url","method","data"],a=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function l(O,v){return n.isPlainObject(O)&&n.isPlainObject(v)?n.merge(O,v):n.isPlainObject(v)?n.merge({},v):n.isArray(v)?v.slice():v}function h(O){n.isUndefined(e[O])?n.isUndefined(r[O])||(o[O]=l(void 0,r[O])):o[O]=l(r[O],e[O])}n.forEach(s,function(v){n.isUndefined(e[v])||(o[v]=l(void 0,e[v]))}),n.forEach(a,h),n.forEach(c,function(v){n.isUndefined(e[v])?n.isUndefined(r[v])||(o[v]=l(void 0,r[v])):o[v]=l(void 0,e[v])}),n.forEach(u,function(v){v in e?o[v]=l(r[v],e[v]):v in r&&(o[v]=l(void 0,r[v]))});var p=s.concat(a).concat(c).concat(u),y=Object.keys(r).concat(Object.keys(e)).filter(function(v){return-1===p.indexOf(v)});return n.forEach(y,h),o}},function(d,E,t){"use strict";function n(i){this.message=i}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,d.exports=n},function(d,E,t){var n=t(477),i=t(479);d.exports=function r(e,o,s){return n(i,e,o,s)}},function(d,E,t){var n=t(89),i=t(218);d.exports=i?function(e,o){return i.set(e,o),e}:n},function(d,E,t){var n=t(187),i=n&&new n;d.exports=i},function(d,E,t){var n=t(220),i=t(221),r=t(483),e=t(96),o=t(222),s=t(228),a=t(492),c=t(134),u=t(14);d.exports=function b(T,C,w,N,k,L,D,W,Z,oe){var Q=128&C,ne=1&C,he=2&C,ae=24&C,ye=512&C,Le=he?void 0:e(T);return function me(){for(var Oe=arguments.length,ge=Array(Oe),ce=Oe;ce--;)ge[ce]=arguments[ce];if(ae)var pe=s(me),Ue=r(ge,pe);if(N&&(ge=n(ge,N,k,ae)),L&&(ge=i(ge,L,D,ae)),Oe-=Ue,ae&&Oe<oe){var de=c(ge,pe);return o(T,C,b,me.placeholder,w,ge,de,W,Z,oe-Oe)}var ve=ne?w:this,Ae=he?ve[T]:T;return Oe=ge.length,W?ge=a(ge,W):ye&&Oe>1&&ge.reverse(),Q&&Z<Oe&&(ge.length=Z),this&&this!==u&&this instanceof me&&(Ae=Le||e(Ae)),Ae.apply(ve,ge)}}},function(d,E){var t=Math.max;d.exports=function n(i,r,e,o){for(var s=-1,a=i.length,c=e.length,u=-1,l=r.length,h=t(a-c,0),p=Array(l+h),y=!o;++u<l;)p[u]=r[u];for(;++s<c;)(y||s<a)&&(p[e[s]]=i[s]);for(;h--;)p[u++]=i[s++];return p}},function(d,E){var t=Math.max;d.exports=function n(i,r,e,o){for(var s=-1,a=i.length,c=-1,u=e.length,l=-1,h=r.length,p=t(a-u,0),y=Array(p+h),O=!o;++s<p;)y[s]=i[s];for(var v=s;++l<h;)y[v+l]=r[l];for(;++c<u;)(O||s<a)&&(y[v+e[c]]=i[s++]);return y}},function(d,E,t){var n=t(484),i=t(226),r=t(227);d.exports=function l(h,p,y,O,v,b,T,C,w,N){var k=8&p;p|=k?32:64,4&(p&=~(k?64:32))||(p&=-4);var oe=[h,p,v,k?b:void 0,k?T:void 0,k?void 0:b,k?void 0:T,C,w,N],Q=y.apply(void 0,oe);return n(h)&&i(Q,oe),Q.placeholder=O,r(Q,h,p)}},function(d,E,t){var n=t(218),i=t(224);d.exports=n?function(e){return n.get(e)}:i},function(d,E){d.exports=function t(){}},function(d,E,t){var n=t(87),i=t(133);function r(e,o){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=void 0}(r.prototype=n(i.prototype)).constructor=r,d.exports=r},function(d,E,t){var n=t(217),r=t(194)(n);d.exports=r},function(d,E,t){var n=t(489),i=t(490),r=t(121),e=t(491);d.exports=function o(s,a,c){var u=a+"";return r(s,i(u,e(n(u),c)))}},function(d,E){d.exports=function t(n){return n.placeholder}},function(d,E,t){var n=t(496),i=t(11),r=t(71),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt;d.exports=function u(l){if("number"==typeof l)return l;if(r(l))return NaN;if(i(l)){var h="function"==typeof l.valueOf?l.valueOf():l;l=i(h)?h+"":h}if("string"!=typeof l)return 0===l?l:+l;l=n(l);var p=s.test(l);return p||a.test(l)?c(l.slice(2),p?2:8):o.test(l)?NaN:+l}},function(d,E,t){var n=t(504),i=t(18);d.exports=function r(e,o,s,a,c){return e===o||(null==e||null==o||!i(e)&&!i(o)?e!=e&&o!=o:n(e,o,s,a,r,c))}},function(d,E,t){var n=t(93),i=t(232),r=t(95);d.exports=function s(a,c,u,l,h,p){var y=1&u,O=a.length,v=c.length;if(O!=v&&!(y&&v>O))return!1;var b=p.get(a),T=p.get(c);if(b&&T)return b==c&&T==a;var C=-1,w=!0,N=2&u?new n:void 0;for(p.set(a,c),p.set(c,a);++C<O;){var k=a[C],L=c[C];if(l)var D=y?l(L,k,C,c,a,p):l(k,L,C,a,c,p);if(void 0!==D){if(D)continue;w=!1;break}if(N){if(!i(c,function(W,Z){if(!r(N,Z)&&(k===W||h(k,W,u,l,p)))return N.push(Z)})){w=!1;break}}else if(k!==L&&!h(k,L,u,l,p)){w=!1;break}}return p.delete(a),p.delete(c),w}},function(d,E){d.exports=function t(n,i){for(var r=-1,e=null==n?0:n.length;++r<e;)if(i(n[r],r,n))return!0;return!1}},function(d,E){d.exports=function t(n){var i=-1,r=Array(n.size);return n.forEach(function(e,o){r[++i]=[o,e]}),r}},function(d,E,t){var n=t(11);d.exports=function i(r){return r==r&&!n(r)}},function(d,E){d.exports=function t(n,i){return function(r){return null!=r&&r[n]===i&&(void 0!==i||n in Object(r))}}},function(d,E,t){var n=t(509),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,e=n(function(o){var s=[];return 46===o.charCodeAt(0)&&s.push(""),o.replace(i,function(a,c,u,l){s.push(u?l.replace(r,"$1"):c||a)}),s});d.exports=e},function(d,E,t){var n=t(511),i=t(512);d.exports=function r(e,o){return null!=e&&i(e,o,n)}},function(d,E,t){var n=t(116),i=t(518);d.exports=function r(e,o,s,a,c){var u=-1,l=e.length;for(s||(s=i),c||(c=[]);++u<l;){var h=e[u];o>0&&s(h)?o>1?r(h,o-1,s,a,c):n(c,h):a||(c[c.length]=h)}return c}},function(d,E,t){var i=t(525)();d.exports=i},function(d,E,t){"use strict";var n=t(526),i=t(527);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}E.parse=w,E.resolve=function k(D,W){return w(D,!1,!0).resolve(W)},E.resolveObject=function L(D,W){return D?w(D,!1,!0).resolveObject(W):W},E.format=function N(D){return i.isString(D)&&(D=w(D)),D instanceof r?D.format():r.prototype.format.call(D)},E.Url=r;var e=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),l=["%","/","?",";","#"].concat(u),h=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,O=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=t(528);function w(D,W,Z){if(D&&i.isObject(D)&&D instanceof r)return D;var oe=new r;return oe.parse(D,W,Z),oe}r.prototype.parse=function(D,W,Z){if(!i.isString(D))throw new TypeError("Parameter 'url' must be a string, not "+typeof D);var oe=D.indexOf("?"),Q=-1!==oe&&oe<D.indexOf("#")?"?":"#",ne=D.split(Q);ne[0]=ne[0].replace(/\\/g,"/");var ae=D=ne.join(Q);if(ae=ae.trim(),!Z&&1===D.split("#").length){var ye=s.exec(ae);if(ye)return this.path=ae,this.href=ae,this.pathname=ye[1],ye[2]?(this.search=ye[2],this.query=W?C.parse(this.search.substr(1)):this.search.substr(1)):W&&(this.search="",this.query={}),this}var Le=e.exec(ae);if(Le){var me=(Le=Le[0]).toLowerCase();this.protocol=me,ae=ae.substr(Le.length)}if(Z||Le||ae.match(/^\/\/[^@\/]+@[^@\/]+/)){var Oe="//"===ae.substr(0,2);Oe&&(!Le||!b[Le])&&(ae=ae.substr(2),this.slashes=!0)}if(!b[Le]&&(Oe||Le&&!T[Le])){for(var ge=-1,ce=0;ce<h.length;ce++)-1!==(pe=ae.indexOf(h[ce]))&&(-1===ge||pe<ge)&&(ge=pe);var Ue,de;for(-1!==(de=-1===ge?ae.lastIndexOf("@"):ae.lastIndexOf("@",ge))&&(Ue=ae.slice(0,de),ae=ae.slice(de+1),this.auth=decodeURIComponent(Ue)),ge=-1,ce=0;ce<l.length;ce++){var pe;-1!==(pe=ae.indexOf(l[ce]))&&(-1===ge||pe<ge)&&(ge=pe)}-1===ge&&(ge=ae.length),this.host=ae.slice(0,ge),ae=ae.slice(ge),this.parseHost(),this.hostname=this.hostname||"";var ve="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ve)for(var Ae=this.hostname.split(/\./),Xe=(ce=0,Ae.length);ce<Xe;ce++){var Ye=Ae[ce];if(Ye&&!Ye.match(y)){for(var We="",at=0,At=Ye.length;at<At;at++)Ye.charCodeAt(at)>127?We+="x":We+=Ye[at];if(!We.match(y)){var ht=Ae.slice(0,ce),Wt=Ae.slice(ce+1),$t=Ye.match(O);$t&&(ht.push($t[1]),Wt.unshift($t[2])),Wt.length&&(ae="/"+Wt.join(".")+ae),this.hostname=ht.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),ve||(this.hostname=n.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ve&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ae[0]&&(ae="/"+ae))}if(!v[me])for(ce=0,Xe=u.length;ce<Xe;ce++){var nt=u[ce];if(-1!==ae.indexOf(nt)){var ct=encodeURIComponent(nt);ct===nt&&(ct=escape(nt)),ae=ae.split(nt).join(ct)}}var De=ae.indexOf("#");-1!==De&&(this.hash=ae.substr(De),ae=ae.slice(0,De));var lt=ae.indexOf("?");return-1!==lt?(this.search=ae.substr(lt),this.query=ae.substr(lt+1),W&&(this.query=C.parse(this.query)),ae=ae.slice(0,lt)):W&&(this.search="",this.query={}),ae&&(this.pathname=ae),T[me]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},r.prototype.format=function(){var D=this.auth||"";D&&(D=(D=encodeURIComponent(D)).replace(/%3A/i,":"),D+="@");var W=this.protocol||"",Z=this.pathname||"",oe=this.hash||"",Q=!1,ne="";this.host?Q=D+this.host:this.hostname&&(Q=D+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(ne=C.stringify(this.query));var he=this.search||ne&&"?"+ne||"";return W&&":"!==W.substr(-1)&&(W+=":"),this.slashes||(!W||T[W])&&!1!==Q?(Q="//"+(Q||""),Z&&"/"!==Z.charAt(0)&&(Z="/"+Z)):Q||(Q=""),oe&&"#"!==oe.charAt(0)&&(oe="#"+oe),he&&"?"!==he.charAt(0)&&(he="?"+he),W+Q+(Z=Z.replace(/[?#]/g,function(ae){return encodeURIComponent(ae)}))+(he=he.replace("#","%23"))+oe},r.prototype.resolve=function(D){return this.resolveObject(w(D,!1,!0)).format()},r.prototype.resolveObject=function(D){if(i.isString(D)){var W=new r;W.parse(D,!1,!0),D=W}for(var Z=new r,oe=Object.keys(this),Q=0;Q<oe.length;Q++){var ne=oe[Q];Z[ne]=this[ne]}if(Z.hash=D.hash,""===D.href)return Z.href=Z.format(),Z;if(D.slashes&&!D.protocol){for(var he=Object.keys(D),ae=0;ae<he.length;ae++){var ye=he[ae];"protocol"!==ye&&(Z[ye]=D[ye])}return T[Z.protocol]&&Z.hostname&&!Z.pathname&&(Z.path=Z.pathname="/"),Z.href=Z.format(),Z}if(D.protocol&&D.protocol!==Z.protocol){if(!T[D.protocol]){for(var Le=Object.keys(D),me=0;me<Le.length;me++){var Oe=Le[me];Z[Oe]=D[Oe]}return Z.href=Z.format(),Z}if(Z.protocol=D.protocol,D.host||b[D.protocol])Z.pathname=D.pathname;else{for(var Xe=(D.pathname||"").split("/");Xe.length&&!(D.host=Xe.shift()););D.host||(D.host=""),D.hostname||(D.hostname=""),""!==Xe[0]&&Xe.unshift(""),Xe.length<2&&Xe.unshift(""),Z.pathname=Xe.join("/")}return Z.search=D.search,Z.query=D.query,Z.host=D.host||"",Z.auth=D.auth,Z.hostname=D.hostname||D.host,Z.port=D.port,(Z.pathname||Z.search)&&(Z.path=(Z.pathname||"")+(Z.search||"")),Z.slashes=Z.slashes||D.slashes,Z.href=Z.format(),Z}var pe=Z.pathname&&"/"===Z.pathname.charAt(0),Ue=D.host||D.pathname&&"/"===D.pathname.charAt(0),de=Ue||pe||Z.host&&D.pathname,ve=de,Ae=Z.pathname&&Z.pathname.split("/")||[],Ye=(Xe=D.pathname&&D.pathname.split("/")||[],Z.protocol&&!T[Z.protocol]);if(Ye&&(Z.hostname="",Z.port=null,Z.host&&(""===Ae[0]?Ae[0]=Z.host:Ae.unshift(Z.host)),Z.host="",D.protocol&&(D.hostname=null,D.port=null,D.host&&(""===Xe[0]?Xe[0]=D.host:Xe.unshift(D.host)),D.host=null),de=de&&(""===Xe[0]||""===Ae[0])),Ue)Z.host=D.host||""===D.host?D.host:Z.host,Z.hostname=D.hostname||""===D.hostname?D.hostname:Z.hostname,Z.search=D.search,Z.query=D.query,Ae=Xe;else if(Xe.length)Ae||(Ae=[]),Ae.pop(),Ae=Ae.concat(Xe),Z.search=D.search,Z.query=D.query;else if(!i.isNullOrUndefined(D.search))return Ye&&(Z.hostname=Z.host=Ae.shift(),(We=!!(Z.host&&Z.host.indexOf("@")>0)&&Z.host.split("@"))&&(Z.auth=We.shift(),Z.host=Z.hostname=We.shift())),Z.search=D.search,Z.query=D.query,(!i.isNull(Z.pathname)||!i.isNull(Z.search))&&(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.href=Z.format(),Z;if(!Ae.length)return Z.pathname=null,Z.path=Z.search?"/"+Z.search:null,Z.href=Z.format(),Z;for(var at=Ae.slice(-1)[0],At=(Z.host||D.host||Ae.length>1)&&("."===at||".."===at)||""===at,ht=0,Wt=Ae.length;Wt>=0;Wt--)"."===(at=Ae[Wt])?Ae.splice(Wt,1):".."===at?(Ae.splice(Wt,1),ht++):ht&&(Ae.splice(Wt,1),ht--);if(!de&&!ve)for(;ht--;ht)Ae.unshift("..");de&&""!==Ae[0]&&(!Ae[0]||"/"!==Ae[0].charAt(0))&&Ae.unshift(""),At&&"/"!==Ae.join("/").substr(-1)&&Ae.push("");var We,$t=""===Ae[0]||Ae[0]&&"/"===Ae[0].charAt(0);return Ye&&(Z.hostname=Z.host=$t?"":Ae.length?Ae.shift():"",(We=!!(Z.host&&Z.host.indexOf("@")>0)&&Z.host.split("@"))&&(Z.auth=We.shift(),Z.host=Z.hostname=We.shift())),(de=de||Z.host&&Ae.length)&&!$t&&Ae.unshift(""),Ae.length?Z.pathname=Ae.join("/"):(Z.pathname=null,Z.path=null),(!i.isNull(Z.pathname)||!i.isNull(Z.search))&&(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.auth=D.auth||Z.auth,Z.slashes=Z.slashes||D.slashes,Z.href=Z.format(),Z},r.prototype.parseHost=function(){var D=this.host,W=o.exec(D);W&&(":"!==(W=W[0])&&(this.port=W.substr(1)),D=D.substr(0,D.length-W.length)),D&&(this.hostname=D)}},function(d,E,t){"use strict";(function(n){const i=t(17),r=t(16),e=t(2)("guidStorage"),o={};let s,a;d.exports=o,o.override=l=>{if(!i((h=l).get)||!i(h.set))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");var h;s!==l&&(s=l,a&&s.set(a,h=>{h&&e.error(`Failed to send initial Guid value (${a}) to the newly assigned Guid Storage. The error was: ${h}`)}))},o.get=l=>{var h;h=(h,p)=>{h?l(h):(p?a||(a=p):(p=r(),s.set(p,y=>{y?l(y):a=p})),l(null,a))},a?h(null,a):s.get(h)},o.getAsync=()=>new n((l,h)=>{o.get((p,y)=>p?h(p):l(y))}),o.override({get(l){let h;try{h=(void 0!==typeof window?window:global).localStorage.getItem("opentok_client_id")}catch(p){h||(h=r())}l(null,h)},set(l,h){try{(void 0!==typeof window?window:global).localStorage.setItem("opentok_client_id",l)}catch(p){}h(null)}}),o.set=l=>{a=l}}).call(this,t(0))},function(d,E){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);d.exports=function(){return t(n),n}}else{var i=new Array(16);d.exports=function(){for(var o,e=0;e<16;e++)0==(3&e)&&(o=4294967296*Math.random()),i[e]=o>>>((3&e)<<3)&255;return i}}},function(d,E){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);d.exports=function i(r,e){var o=e||0;return[t[r[o++]],t[r[o++]],t[r[o++]],t[r[o++]],"-",t[r[o++]],t[r[o++]],"-",t[r[o++]],t[r[o++]],"-",t[r[o++]],t[r[o++]],"-",t[r[o++]],t[r[o++]],t[r[o++]],t[r[o++]],t[r[o++]],t[r[o++]]].join("")}},function(d,E,t){"use strict";const n=t(245),i=t(3),r=t(247),e=t(9),o={};d.exports=o,"Node"!==i.name&&(o.request=function(a,c,u){const l=new(void 0!==typeof window?window:global).XMLHttpRequest,h=c||{};if(h.method){c.overrideMimeType&&(l.overrideMimeType&&l.overrideMimeType(c.overrideMimeType),delete c.overrideMimeType),u&&(n(l).on("load",y=>{const O=y.target.status;O>=200&&(O<300||304===O)?u(null,y):u(y)}),n(l).on("error",u)),l.open(c.method,a,!0),h.headers||(h.headers={});for(const y in h.headers)!Object.prototype.hasOwnProperty.call(h.headers,y)||l.setRequestHeader(y,h.headers[y]);l.send(c.body&&function s(a){if("string"==typeof a)return a;const c=[];return Object.keys(a).forEach(u=>{c.push(`${encodeURIComponent(u)}=${encodeURIComponent(a[u])}`)}),c.join("&").replace(/\+/g,"%20")}(c.body))}else u(new Error("No HTTP method specified in options"))},o.get=function(a,c,u){const l=e(c||{},{method:"GET"});o.request(a,l,u)},o.post=function(a,c,u){const l=e(c||{},{method:"POST"});o.request(a,l,u)},o.getJSON=function(a,c,u){const h=e({Accept:"application/json"},(c=c||{}).headers||{});o.get(a,e(c||{},{headers:h}),function(y,O){if(y)u(y,O&&O.target&&O.target.responseText);else{let v;try{v=JSON.parse(O.target.responseText)}catch(b){return void u(b,O&&O.target&&O.target.responseText)}u(null,v,O)}})},r(o))},function(d,E,t){"use strict";const n=t(246);d.exports=function(i,r){return new n(i,r)}},function(d,E,t){"use strict";const n=t(17),i={attributes:t(537),css:t(538),classNames:t(543),observers:t(545)},r=/^#([\w-]*)$/,e=function(u){return Array.prototype.slice.call(u)},s=function(u,l){const h=function(u,l){let h;if(void 0===u)return[];if("string"==typeof u){h=[];const p=r.exec(u);if(l=l||document,p&&p[1]){const y=l.getElementById(p[1]);y&&h.push(y)}else h=l.querySelectorAll(u)}else u&&(u.nodeType||(void 0!==typeof window?window:global).XMLHttpRequest&&u instanceof(void 0!==typeof window?window:global).XMLHttpRequest||u===(void 0!==typeof window?window:global))?(h=[u],l=u):Array.isArray(u)?(h=u.slice(),l=null):h=e(h);return h}(u,l);this.context=l,this.toArray=function(){return h},this.length=h.length,this.first=h[0],this.last=h[h.length-1],this.get=function(p){return void 0===p?h:h[p]}};d.exports=s,(s._attachToOTHelpers={}).removeElement=function(c){return new s(c).remove()},s.prototype.getAsArray=function(){let c=this.get();return n(c.forEach)||(c=e(c)),c},s.prototype.some=function(c,u){return this.getAsArray().some(c,u)},s.prototype.forEach=function(c,u){return this.getAsArray().forEach(c,u),this},s.prototype.map=function(c,u){return new s(this.getAsArray().map(c,u),this.context)},s.prototype.filter=function(c,u){return new s(this.getAsArray().filter(c,u),this.context)},s.prototype.find=function(c){return new s(c,this.first)},s.prototype.on=function(c,u){return this.forEach(l=>{l.addEventListener(c,u,!1)})},s.prototype.off=function(c,u){return this.forEach(l=>{l.removeEventListener(c,u,!1)})},s.prototype.once=function(c,u){const l=function(){this.off(c,l),u(...arguments)}.bind(this);return this.on(c,l)},s.prototype.appendTo=function(c){if(!c)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(u=>{c.appendChild(u)})},s.prototype.append=function(){const c=this.first;return c?(Array.prototype.forEach.call(arguments,u=>{c.appendChild(u)}),this):this},s.prototype.prepend=function(){if(0===arguments.length)return this;const c=this.first;let u;return c?(u=Array.prototype.slice.call(arguments),c.firstElementChild||c.appendChild(u.shift()),u.forEach(l=>{c.insertBefore(l,c.firstElementChild)}),this):this},s.prototype.after=function(c){if(!c)throw new Error("after requires a DOMElement to insert after");return this.forEach(u=>{u.parentElement&&(c!==u.parentNode.lastChild?u.parentElement.insertBefore(u,c):u.parentElement.appendChild(u))})},s.prototype.before=function(c){if(!c)throw new Error("before requires a DOMElement to insert before");return this.forEach(u=>{u.parentElement&&u.parentElement.insertBefore(u,c)})},s.prototype.remove=function(){return this.forEach(c=>{c.parentNode&&c.parentNode.removeChild(c)})},s.prototype.empty=function(){return this.forEach(c=>{for(;c.firstChild;)c.removeChild(c.firstChild)})},s.prototype.isDisplayNone=function(){return this.some(c=>(0===c.offsetWidth||0===c.offsetHeight)&&"none"===new s(c).css("display")||!(!c.parentNode||!c.parentNode.style)&&new s(c.parentNode).isDisplayNone())};const a=function c(u){return 0!==u.offsetWidth&&0!==u.offsetHeight||"none"!==new s(u).css("display")?u.parentNode&&u.parentNode.style?c(u.parentNode):null:u};s._attachToOTHelpers.emptyElement=function(c){return new s(c).empty()},s._attachToOTHelpers._findElementWithDisplayNone=a,i.css(s,a),i.attributes(s),i.classNames(s),i.observers(s),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(c=>{s._attachToOTHelpers[c]=function(){const u=Array.prototype.slice.apply(arguments),l=u.shift(),h=new s(l);return s.prototype[c].apply(h,u)}})},function(d,E,t){"use strict";d.exports=function(n){const i={};Object.keys(n).forEach(r=>{i[r]=n[r]}),n._attachToOTHelpers=i}},function(d,E,t){"use strict";const n=t(17),i=t(7),r=t(2)("Collection");d.exports=function(o){let s=[],a={};const c=o||"id";i(this);const u=function(y,O){return n(y[O])?y[O]():y[O]},l=function(y){this.trigger("update",y),this.trigger(`update:${y.target.id}`,y)}.bind(this),h=function(y){this.remove(y.target,y.reason)}.bind(this);this.reset=function(){s.forEach(function(p){p.off("updated",l,this),p.off("destroyed",h,this)},this),s=[],a={}},this.destroy=function(p){s.forEach(y=>{y&&"function"==typeof y.destroy&&y.destroy(p,!0)}),this.reset(),this.off()},this.get=function(p){return p&&void 0!==a[p]?s[a[p]]:void 0},this.has=function(p){return p&&void 0!==a[p]},this.toString=function(){return s.toString()},this.where=function(p,y){return n(p)?s.filter(p,y):s.filter(O=>{for(const v in p)if(p.hasOwnProperty(v)&&u(O,v)!==p[v])return!1;return!0})},this.find=function(p,y){let O;O=n(p)?p:function(b){for(const T in p)if(p.hasOwnProperty(T)&&u(b,T)!==p[T])return!1;return!0},O=O.bind(y);for(let v=0;v<s.length;++v)if(!0===O(s[v]))return s[v];return null},this.forEach=function(p,y){return s.forEach(p,y),this},this.map=function(p){return s.map(p)},this.add=function(p){const y=u(p,c);return this.has(y)?(r.warn(`Model ${y} is already in the collection`,s),this):(a[y]=s.push(p)-1,p.on("updated",l,this),p.on("destroyed",h,this),this.trigger("add",p),this.trigger(`add:${y}`,p),this)},this.remove=function(p,y){const O=u(p,c);s.splice(a[O],1);for(let v=a[O];v<s.length;++v)a[u(s[v],c)]=v;return delete a[O],p.off("updated",l,this),p.off("destroyed",h,this),this.trigger("remove",p,y),this.trigger(`remove:${O}`,p,y),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(p){this.trigger("add",p),this.trigger(`add:${u(p,c)}`,p)},this)},this.length=function(){return s.length}}},function(d,E,t){"use strict";const n=t(2)("deprecation");d.exports=function(r,e,o){let s=void 0===o?{}:o,c=s.name,u=void 0===c?`${e}`:c,l=s.getWarning,h=void 0===l?"":l,p=s.setWarning,y=void 0===p?"":p,O=s.canSet,v=void 0!==O&&O,b=s.warnOnSet,C=s.value,w=!1,N=!(void 0!==b&&b);Object.defineProperty(r,e,{get:()=>(w||(w=!0,n.warn(`${u} is deprecated, and will be removed in the future. ${h}`.trim())),C),set(L){v&&(C=L),N||(N=!0,n.warn(v?`${u} is deprecated. ${y}`.trim():`${u} is deprecated, and will be removed in the future. ${y}`.trim()))}})}},function(d,E,t){"use strict";const n=t(3),i=t(11);let r;const e=["description","fileName","lineNumber","message","name","number","stack"],o=function(c,u,l){switch(arguments.length){case 1:i(c)&&(l=c,u=void 0,c=void 0);break;case 2:i(u)&&(l=u,u=void 0)}if(l instanceof Error)for(let h=0,p=e.length;h<p;++h)this[e[h]]=l[e[h]];else if(i(l))for(const h in l)l.hasOwnProperty(h)&&(this[h]=l[h]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){const h=r();!this.fileName&&h.fileName&&(this.fileName=h.fileName),!this.lineNumber&&h.lineNumber&&(this.lineNumber=h.lineNumber),!this.columnNumber&&h.columnNumber&&(this.columnNumber=h.columnNumber),!this.stack&&h.stack&&(this.stack=h.stack)}!this.message&&c&&(this.message=c),(!this.name||"Error"===this.name)&&u&&(this.name=u)};d.exports=o,(o.prototype=Object.create(Error.prototype)).valueOf=o.prototype.toString=function(){let a="";return this.fileName&&(a+=` ${this.fileName}`),this.lineNumber&&(a+=` ${this.lineNumber}`,this.columnNumber&&(a+=`:${this.columnNumber}`)),`<${this.name?`${this.name} `:""}${this.message}${a}>`};const s=function(c,u){return u.slice(2).map(l=>{const h={fileName:l.getFileName(),linenumber:l.getLineNumber(),columnNumber:l.getColumnNumber()};return l.getFunctionName()&&(h.functionName=l.getFunctionName()),l.getMethodName()&&(h.methodName=l.getMethodName()),l.getThis()&&(h.self=l.getThis()),h})};r=function(){const c={};let u,l,h;switch(n.name){case"Firefox":case"Safari":try{(void 0!==typeof window?window:global).call.js.is.explody()}catch(O){h=O}u=(h.stack||"").split("\n"),u.shift(),u.shift(),c.stack=u,l=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(u[0]),l&&(c.fileName=l[1],c.lineNumber=parseInt(l[2],10),l.length>3&&(c.columnNumber=parseInt(l[4],10)));break;case"Chrome":case"Node":case"Opera":var p=Error.prepareStackTrace;Error.prepareStackTrace=s,h=new Error,c.stack=h.stack,Error.prepareStackTrace=p;var y=c.stack[0];c.lineNumber=y.lineNumber,c.columnNumber=y.columnNumber,c.fileName=y.fileName,y.functionName&&(c.functionName=y.functionName),y.methodName&&(c.methodName=y.methodName),y.self&&(c.self=y.self);break;default:h=new Error,h.stack&&(c.stack=h.stack.split("\n"))}return h.message&&(c.message=h.message),c}},function(d,E,t){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(i){return i.trim().split("\n").map(function(r){return r.trim()})},n.splitSections=function(i){return i.split("\nm=").map(function(e,o){return(o>0?"m="+e:e).trim()+"\r\n"})},n.getDescription=function(i){var r=n.splitSections(i);return r&&r[0]},n.getMediaSections=function(i){var r=n.splitSections(i);return r.shift(),r},n.matchPrefix=function(i,r){return n.splitLines(i).filter(function(e){return 0===e.indexOf(r)})},n.parseCandidate=function(i){for(var r,e={foundation:(r=0===i.indexOf("a=candidate:")?i.substring(12).split(" "):i.substring(10).split(" "))[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":e.relatedAddress=r[o+1];break;case"rport":e.relatedPort=parseInt(r[o+1],10);break;case"tcptype":e.tcpType=r[o+1];break;case"ufrag":e.ufrag=r[o+1],e.usernameFragment=r[o+1];break;default:e[r[o]]=r[o+1]}return e},n.writeCandidate=function(i){var r=[];r.push(i.foundation),r.push(i.component),r.push(i.protocol.toUpperCase()),r.push(i.priority),r.push(i.address||i.ip),r.push(i.port);var e=i.type;return r.push("typ"),r.push(e),"host"!==e&&i.relatedAddress&&i.relatedPort&&(r.push("raddr"),r.push(i.relatedAddress),r.push("rport"),r.push(i.relatedPort)),i.tcpType&&"tcp"===i.protocol.toLowerCase()&&(r.push("tcptype"),r.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(r.push("ufrag"),r.push(i.usernameFragment||i.ufrag)),"candidate:"+r.join(" ")},n.parseIceOptions=function(i){return i.substr(14).split(" ")},n.parseRtpMap=function(i){var r=i.substr(9).split(" "),e={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),e.name=r[0],e.clockRate=parseInt(r[1],10),e.channels=3===r.length?parseInt(r[2],10):1,e.numChannels=e.channels,e},n.writeRtpMap=function(i){var r=i.payloadType;void 0!==i.preferredPayloadType&&(r=i.preferredPayloadType);var e=i.channels||i.numChannels||1;return"a=rtpmap:"+r+" "+i.name+"/"+i.clockRate+(1!==e?"/"+e:"")+"\r\n"},n.parseExtmap=function(i){var r=i.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},n.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&"sendrecv"!==i.direction?"/"+i.direction:"")+" "+i.uri+"\r\n"},n.parseFmtp=function(i){for(var e,r={},o=i.substr(i.indexOf(" ")+1).split(";"),s=0;s<o.length;s++)r[(e=o[s].trim().split("="))[0].trim()]=e[1];return r},n.writeFmtp=function(i){var r="",e=i.payloadType;if(void 0!==i.preferredPayloadType&&(e=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){var o=[];Object.keys(i.parameters).forEach(function(s){o.push(i.parameters[s]?s+"="+i.parameters[s]:s)}),r+="a=fmtp:"+e+" "+o.join(";")+"\r\n"}return r},n.parseRtcpFb=function(i){var r=i.substr(i.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},n.writeRtcpFb=function(i){var r="",e=i.payloadType;return void 0!==i.preferredPayloadType&&(e=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+e+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+"\r\n"}),r},n.parseSsrcMedia=function(i){var r=i.indexOf(" "),e={ssrc:parseInt(i.substr(7,r-7),10)},o=i.indexOf(":",r);return o>-1?(e.attribute=i.substr(r+1,o-r-1),e.value=i.substr(o+1)):e.attribute=i.substr(r+1),e},n.parseSsrcGroup=function(i){var r=i.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(e){return parseInt(e,10)})}},n.getMid=function(i){var r=n.matchPrefix(i,"a=mid:")[0];if(r)return r.substr(6)},n.parseFingerprint=function(i){var r=i.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},n.getDtlsParameters=function(i,r){return{role:"auto",fingerprints:n.matchPrefix(i+r,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(i,r){var e="a=setup:"+r+"\r\n";return i.fingerprints.forEach(function(o){e+="a=fingerprint:"+o.algorithm+" "+o.value+"\r\n"}),e},n.parseCryptoLine=function(i){var r=i.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},n.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+("object"==typeof i.keyParams?n.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(i){if(0!==i.indexOf("inline:"))return null;var r=i.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},n.getCryptoParameters=function(i,r){return n.matchPrefix(i+r,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(i,r){var e=n.matchPrefix(i+r,"a=ice-ufrag:")[0],o=n.matchPrefix(i+r,"a=ice-pwd:")[0];return e&&o?{usernameFragment:e.substr(12),password:o.substr(10)}:null},n.writeIceParameters=function(i){return"a=ice-ufrag:"+i.usernameFragment+"\r\na=ice-pwd:"+i.password+"\r\n"},n.parseRtpParameters=function(i){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=n.splitLines(i)[0].split(" "),s=3;s<o.length;s++){var a=o[s],c=n.matchPrefix(i,"a=rtpmap:"+a+" ")[0];if(c){var u=n.parseRtpMap(c),l=n.matchPrefix(i,"a=fmtp:"+a+" ");switch(u.parameters=l.length?n.parseFmtp(l[0]):{},u.rtcpFeedback=n.matchPrefix(i,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase())}}}return n.matchPrefix(i,"a=extmap:").forEach(function(h){r.headerExtensions.push(n.parseExtmap(h))}),r},n.writeRtpDescription=function(i,r){var e="";e+="m="+i+" ",e+=r.codecs.length>0?"9":"0",e+=" UDP/TLS/RTP/SAVPF ",e+=r.codecs.map(function(s){return void 0!==s.preferredPayloadType?s.preferredPayloadType:s.payloadType}).join(" ")+"\r\n",e+="c=IN IP4 0.0.0.0\r\n",e+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach(function(s){e+=n.writeRtpMap(s),e+=n.writeFmtp(s),e+=n.writeRtcpFb(s)});var o=0;return r.codecs.forEach(function(s){s.maxptime>o&&(o=s.maxptime)}),o>0&&(e+="a=maxptime:"+o+"\r\n"),e+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach(function(s){e+=n.writeExtmap(s)}),e},n.parseRtpEncodingParameters=function(i){var u,r=[],e=n.parseRtpParameters(i),o=-1!==e.fecMechanisms.indexOf("RED"),s=-1!==e.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(i,"a=ssrc:").map(function(p){return n.parseSsrcMedia(p)}).filter(function(p){return"cname"===p.attribute}),c=a.length>0&&a[0].ssrc,l=n.matchPrefix(i,"a=ssrc-group:FID").map(function(p){return p.substr(17).split(" ").map(function(O){return parseInt(O,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(u=l[0][1]),e.codecs.forEach(function(p){if("RTX"===p.name.toUpperCase()&&p.parameters.apt){var y={ssrc:c,codecPayloadType:parseInt(p.parameters.apt,10)};c&&u&&(y.rtx={ssrc:u}),r.push(y),o&&((y=JSON.parse(JSON.stringify(y))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(y))}}),0===r.length&&c&&r.push({ssrc:c});var h=n.matchPrefix(i,"b=");return h.length&&(h=0===h[0].indexOf("b=TIAS:")?parseInt(h[0].substr(7),10):0===h[0].indexOf("b=AS:")?1e3*parseInt(h[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(p){p.maxBitrate=h})),r},n.parseRtcpParameters=function(i){var r={},e=n.matchPrefix(i,"a=ssrc:").map(function(a){return n.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute})[0];e&&(r.cname=e.value,r.ssrc=e.ssrc);var o=n.matchPrefix(i,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=0===o.length;var s=n.matchPrefix(i,"a=rtcp-mux");return r.mux=s.length>0,r},n.parseMsid=function(i){var r,e=n.matchPrefix(i,"a=msid:");if(1===e.length)return{stream:(r=e[0].substr(7).split(" "))[0],track:r[1]};var o=n.matchPrefix(i,"a=ssrc:").map(function(s){return n.parseSsrcMedia(s)}).filter(function(s){return"msid"===s.attribute});return o.length>0?{stream:(r=o[0].value.split(" "))[0],track:r[1]}:void 0},n.parseSctpDescription=function(i){var o,r=n.parseMLine(i),e=n.matchPrefix(i,"a=max-message-size:");e.length>0&&(o=parseInt(e[0].substr(19),10)),isNaN(o)&&(o=65536);var s=n.matchPrefix(i,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};if(n.matchPrefix(i,"a=sctpmap:").length>0){var c=n.matchPrefix(i,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},n.writeSctpDescription=function(i,r){var e=[];return e="DTLS/SCTP"!==i.protocol?["m="+i.kind+" 9 "+i.protocol+" "+r.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+r.port+"\r\n"]:["m="+i.kind+" 9 "+i.protocol+" "+r.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+r.port+" "+r.protocol+" 65535\r\n"],void 0!==r.maxMessageSize&&e.push("a=max-message-size:"+r.maxMessageSize+"\r\n"),e.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(i,r,e){var s=void 0!==r?r:2;return"v=0\r\no="+(e||"thisisadapterortc")+" "+(i||n.generateSessionId())+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(i,r,e,o){var s=n.writeRtpDescription(i.kind,r);if(s+=n.writeIceParameters(i.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(i.dtlsTransport.getLocalParameters(),"offer"===e?"actpass":"active"),s+="a=mid:"+i.mid+"\r\n",s+=i.direction?"a="+i.direction+"\r\n":i.rtpSender&&i.rtpReceiver?"a=sendrecv\r\n":i.rtpSender?"a=sendonly\r\n":i.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",i.rtpSender){var a="msid:"+o.id+" "+i.rtpSender.track.id+"\r\n";s+="a="+a,s+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" "+a,i.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" "+a,s+="a=ssrc-group:FID "+i.sendEncodingParameters[0].ssrc+" "+i.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",i.rtpSender&&i.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s},n.getDirection=function(i,r){for(var e=n.splitLines(i),o=0;o<e.length;o++)switch(e[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return e[o].substr(2)}return r?n.getDirection(r):"sendrecv"},n.getKind=function(i){return n.splitLines(i)[0].split(" ")[0].substr(2)},n.isRejected=function(i){return"0"===i.split(" ",2)[1]},n.parseMLine=function(i){var e=n.splitLines(i)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},n.parseOLine=function(i){var e=n.matchPrefix(i,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},n.isValidSDP=function(i){if("string"!=typeof i||0===i.length)return!1;for(var r=n.splitLines(i),e=0;e<r.length;e++)if(r[e].length<2||"="!==r[e].charAt(1))return!1;return!0},d.exports=n},function(d,E,t){"use strict";d.exports=function(i){return-1===["Chrome","Safari","Edge","Opera"].indexOf(i.browserName)||"Edge"===i.browserName&&!i.isChromiumEdge||i.isScreenSharing&&!i.capableSimulcastScreenshare||i.sessionInfo.p2pEnabled||!i.constraints.video&&!i.isCustomVideoTrack?1:i.videoDimensions.width>640&&i.videoDimensions.height>480?3:2}},function(d,E,t){"use strict";var i=t(1)(t(15));const e=t(50);d.exports=function(){function o(a,c){var u;let h=(void 0===c?{}:c).requestAnimationFrame,p=void 0===h?(u=window).requestAnimationFrame.bind(u):h;(0,i.default)(this,"_lastCalled",e()),(0,i.default)(this,"_audioLevel",void 0),(0,i.default)(this,"_running",!1),this._requestAnimationFrame=p,this._getAudioLevel=a,this._startLoop()}var s=o.prototype;return s._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},s._loop=function(){this._getAudioLevel((c,u)=>{let l=null;if(!c){for(let h=0;h<u.length;h+=1){const p=u[h];let y=null;if(void 0!==p.audioOutputLevel){const O=parseFloat(p.audioOutputLevel)/32768;isNaN(O)||(y=O)}else void 0!==p.audioLevel&&(y=p.audioLevel);null!==y&&(null===l||y>l)&&(l=y)}this._audioLevel=l,this._running&&e()-this._lastCalled<1e4?this._requestAnimationFrame(this._loop.bind(this)):this._running=!1}})},s.destroy=function(){this._running=!1},s.sample=function(c){if("function"==typeof c)throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=e(),this._audioLevel},o}()},function(d,E,t){"use strict";const n=t(255),i=t(575),r=t(148);function e(c,u,l){return!(!c.publish&&u)&&("boolean"==typeof c.source?c.source:l?{mandatory:{sourceId:c.source}}:r(c.source)?{}:{deviceId:{exact:c.source}})}function o(c){let u=e(c.audio,c.enableRenegotiation,c.usingOptionalMandatoryStyle);if(!1===u)return!1;const l=c.usingOptionalMandatoryStyle,h=c.enableStereo,v=c.disableAudioProcessing,b=T=>{"object"==typeof u&&(l?(n(u,{optional:[]}),u.optional.push(T)):n(u,T))};return(h||v||!c.echoCancellation||!c.noiseSuppression||!c.autoGainControl)&&!0===u&&(u={}),h&&b({channelCount:2}),["echoCancellation","autoGainControl","noiseSuppression"].forEach(T=>{b({[T]:!v&&c[T]})}),u}function s(c){let u=e(c.video,c.enableRenegotiation,c.usingOptionalMandatoryStyle);if(!1===u)return!1;const l=c.videoDimensions,h=c.frameRate,p=c.maxResolution,y=c.facingMode,O=c.usingOptionalMandatoryStyle;if((l||h||p||y)&&!0===u&&(u={}),l){const v=l.width,b=l.height;O?(n(u,{optional:[]}),u.optional.push({minWidth:v},{maxWidth:v},{minHeight:b},{maxHeight:b})):n(u,{width:{ideal:v},height:{ideal:b}})}return h&&(O?(n(u,{optional:[]}),u.optional.push({minFrameRate:h},{maxFrameRate:h})):n(u,{frameRate:{ideal:h}})),p&&n(u,O?{mandatory:{maxWidth:p.width,maxHeight:p.height}}:{width:{max:p.width},height:{max:p.height}}),y&&(O?(n(u,{optional:[]}),u.optional.push({facingMode:y})):n(u,{facingMode:{ideal:y}})),u}d.exports=function(u){const l=i(u);return{constraints:(c=l,{audio:o(c),video:s(c)}),publishAudio:l.audio.publish,publishVideo:l.video.publish,frameRate:l.frameRate,videoDimensions:l.videoDimensions,audioDeviceId:"string"==typeof l.audio.source?l.audio.source:void 0,videoDeviceId:"string"==typeof l.video.source?l.video.source:void 0};var c}},function(d,E,t){var n=t(572),r=t(192)(function(e,o,s){n(e,o,s)});d.exports=r},function(d,E,t){var n=t(64),i=t(54);d.exports=function r(e,o,s){(void 0!==s&&!i(e[o],s)||void 0===s&&!(o in e))&&n(e,o,s)}},function(d,E){d.exports=function t(n,i){if(("constructor"!==i||"function"!=typeof n[i])&&"__proto__"!=i)return n[i]}},function(d,E,t){"use strict";const n=t(3),i=n.name,r=n.version;d.exports=n.isChromiumEdge||"Chrome"===i&&r>=72||"Firefox"===i&&r>=66||"Opera"===i&&r>=60||"Safari"===i},function(d,E,t){var n=t(61),i=t(260);d.exports=function r(e){return i(n(e).toLowerCase())}},function(d,E,t){var i=t(580)("toUpperCase");d.exports=i},function(d,E){d.exports=function t(n,i,r){var e=-1,o=n.length;i<0&&(i=-i>o?0:o+i),(r=r>o?o:r)<0&&(r+=o),o=i>r?0:r-i>>>0,i>>>=0;for(var s=Array(o);++e<o;)s[e]=n[e+i];return s}},function(d,E){var a=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");d.exports=function c(u){return a.test(u)}},function(d,E,t){var n=t(582),i=t(262),r=t(583);d.exports=function e(o){return i(o)?r(o):n(o)}},function(d,E,t){"use strict";const n=t(3);d.exports=Boolean(n.isChrome&&n.version>=74||n.isEdge&&n.version>=79)},function(d,E,t){"use strict";const n=t(3);d.exports=i=>!!n.isElectron&&i instanceof MediaStreamTrack&&"Screen"===i.label},function(d,E,t){var n=t(100),r=t(589)(n);d.exports=r},function(d,E,t){"use strict";d.exports=15e3},function(d,E,t){"use strict";d.exports=function(n,i){return void 0===i&&(i=!1),void 0===n?i:"true"===n||!0===n}},function(d,E,t){"use strict";const n=t(58);d.exports=function(r){const e=n(r);if(e.backgroundImageURI){const o=e.backgroundImageURI.split(":")[0];e.backgroundImageURI=-1!==["http","https","data"].indexOf(o)?o:"other"}return e}},function(d,E,t){"use strict";const n=t(3);d.exports=()=>!n.isNode&&!n.isElectron&&((n.isChrome||n.isOpera||n.isChromiumEdge)&&n.version>=74||n.isFirefox&&n.version>=68||n.isSafari&&n.version>=11)},function(d,E){function t(n,i){return d.exports=t=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},t(n,i)}d.exports=t},function(d,E,t){var n=t(34),i=t(78),r=t(605),e=t(60),o=t(41),s=t(608),a=t(137),c=t(185),p=a(function(y,O){var v={};if(null==y)return v;var b=!1;O=n(O,function(C){return C=e(C,y),b||(b=C.length>1),C}),o(y,c(y),v),b&&(v=i(v,7,s));for(var T=O.length;T--;)r(v,O[T]);return v});d.exports=p},function(d,E,t){var n=t(206),i=t(36),r=t(97),e=Math.max;d.exports=function o(s,a,c){var u=null==s?0:s.length;if(!u)return-1;var l=null==c?0:r(c);return l<0&&(l=e(u+l,0)),n(s,i(a,3),l)}},function(d,E,t){var n=t(610);d.exports=function i(r){return r&&r.length?n(r):[]}},function(d,E,t){"use strict";const n=t(617),i=t(278),r=t(102)();d.exports=(e,o)=>{i(e,(s,a)=>{let c=[];r?"function"==typeof a.values?c=n(a.values()):"function"!=typeof a.forEach?c=Object.keys(a).map(u=>a[u]):a.forEach(u=>{c.push(u)}):a.result().forEach(u=>{const l={};u.names().forEach(h=>{l[h]=u.stat(h)}),l.id=u.id,l.type=u.type,l.timestamp=u.timestamp,c.push(l)}),o(null,c)})}},function(d,E,t){var n=t(29),i=t(12),r=t(18);d.exports=function o(s){return"string"==typeof s||!i(s)&&r(s)&&"[object String]"==n(s)}},function(d,E,t){var n=t(619),i=t(30);d.exports=function r(e){return null==e?[]:n(e,i(e))}},function(d,E,t){"use strict";const n=t(102)(),i=(o,s)=>{o.getStats(null).then(a=>s(null,a)).catch(s)},r=(o,s)=>{o.getStats(a=>{s(null,a)},s)};d.exports=(o,s)=>{(n?i:r)(o,s)}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(156)),r=n(t(49)),e=n(t(15)),o=t(31),s=n(t(38)),a=n(t(629)),c=n(t(631)),u=n(t(50));const h=(0,n(t(2)).default)("QoS");let p=function(O){function v(){for(var T,C=arguments.length,w=new Array(C),N=0;N<C;N++)w[N]=arguments[N];return T=O.call(this,...w)||this,(0,e.default)((0,i.default)(T),"_peerConnection",void 0),(0,e.default)((0,i.default)(T),"_isPublisher",void 0),(0,e.default)((0,i.default)(T),"timeoutId",void 0),(0,e.default)((0,i.default)(T),"_creationTime",(0,u.default)()),(0,e.default)((0,i.default)(T),"offerMessagesReceived",0),(0,e.default)((0,i.default)(T),"prevStats",{timeStamp:(0,u.default)()}),(0,e.default)((0,i.default)(T),"changeCounters",{videoCodec:new c.default,audioCodec:new c.default}),T}(0,r.default)(v,O);var b=v.prototype;return b.startCollecting=function(C,w){if(!C||!C.getStats)return;this._isPublisher=w;const N=Boolean(this._peerConnection);if(this._peerConnection=C,N)return;const k=L=>{const D=(0,u.default)(),W={timeStamp:D,duration:Math.round((D-this._creationTime)/1e3),period:Math.round((D-this.prevStats.timeStamp)/1e3)};(0,a.default)(this._peerConnection,this.prevStats,W,this._isPublisher,(Z,oe)=>{Z?h.error("Failed to Parse QOS Stats:",Z):(this.handleParsedStats(oe),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>k(v.INTERVAL),L))})};this.timeoutId=setTimeout(()=>k(v.INTERVAL-v.INITIAL_INTERVAL),v.INITIAL_INTERVAL)},b.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},b.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},b.handleParsedStats=function(C){Object.keys(this.changeCounters).forEach(k=>{this.changeCounters[k].onValue(C[k]),C[`${k}ChangeCount`]=this.changeCounters[k].changeCount}),C.offerMessagesReceived=this.offerMessagesReceived;const w=(0,s.default)(C);["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach(k=>{w[k]=this.prevStats&&this.prevStats[k]?C[k]-this.prevStats[k]:C[k]}),this.prevStats&&this.prevStats.videoFramesReceived&&(w.videoFrameRateReceived=Math.round((C.videoFramesReceived-this.prevStats.videoFramesReceived)/C.period)),this.prevStats=C,delete w.framesDecoded,delete w.framesEncoded,this.emit("stats",w)},v}(o.EventEmitter);p.INITIAL_INTERVAL=1e3,p.INTERVAL=3e4,E.default=p},function(d,E,t){"use strict";d.exports=n=>{switch(n>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}},function(d,E,t){"use strict";const n=t(16),r=t(159).default,e=t(6),o=t(13);d.exports=function(a){let c=void 0===a?{}:a,u=c.haveGetDisplayMedia,l=void 0===u?r:u,h=c.global,p=void 0===h?void 0!==typeof window?window:global:h,y=c.Errors,O=void 0===y?e:y,v=c.otError,b=void 0===v?o():v;const T=!l&&!!p.navigator.webkitGetUserMedia&&!p.navigator.userAgent.match(/android/i)&&void 0!==p.chrome;return{isSupportedInThisBrowser:T,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register(C,w){return 2===w?this.registerVersion2(C):this.registerVersion1(C)},registerVersion1(C){if(!C)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");const w=T,N={};let k;const L=`com.tokbox.screenSharing.${C}`,D=function(ne,he){const ae={payload:he,from:"jsapi"};return ae[L]=ne,ae},W=function(ne,he){let ae;const ye=n();return N[ye]=function(){clearTimeout(ae),ae=null,ne(...arguments)},he&&(ae=setTimeout(()=>{delete N[ye],ne(b(O.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},he)),ye},Z=function(ne){if(!ne)throw new Error("isAvailable: callback is required.");if(w)if(void 0!==k)setTimeout(ne.bind(null,k));else{const he=W(ye=>{!0!==k&&(k="extensionLoaded"===ye),ne(k)},2e3),ae=D("isExtensionInstalled",{requestId:he});p.postMessage(ae,"*")}else setTimeout(ne.bind(null,!1))};return p.addEventListener("message",Q=>{if(Q.origin!==p.location.origin||null==Q.data||"object"!=typeof Q.data||"extension"!==Q.data.from)return;const ne=Q.data[L],he=Q.data.payload;if(he&&he.requestId){const ae=N[he.requestId];delete N[he.requestId],ae&&ae(ne,he)}"extensionLoaded"===ne&&(k=!0)}),{extensionAPIVersion:1,extensionID:C,isInstalled:Z,getConstraints:function(ne,he,ae){if(!ae)throw new Error("getSourceId: callback is required");Z(ye=>{if(!ye)return ae(b(O.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));const Le=W((me,Oe)=>{"object"==typeof me&&me.name&&me.stack?ae(me):"permissionDenied"===me?ae(b(O.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(he.video||(he.video={}),he.video.mandatory||(he.video.mandatory={}),he.video.mandatory.chromeMediaSource="desktop",he.video.mandatory.chromeMediaSourceId=Oe.sourceId,ae(void 0,he))});p.postMessage(D("getSourceId",{requestId:Le,source:ne}),"*")})}}},registerVersion2(C){const w=T&&void 0!==p.chrome.runtime,N=function(D){if(!D)throw new Error("isAvailable: callback is required.");w?p.chrome.runtime.sendMessage(C,{type:"isInstalled"},null,W=>{setTimeout(D.bind(null,!!W))}):setTimeout(D.bind(null,!1))};return{extensionAPIVersion:2,extensionID:C,isInstalled:N,getConstraints:function(D,W,Z){if(!Z)throw new Error("getSourceId: callback is required");N(oe=>{if(!oe)return Z(b(O.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));p.chrome.runtime.sendMessage(C,{type:"getSourceId",source:D},null,Q=>{"permissionDenied"===Q.error?Z(b(O.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):Q.error?Z(new Error(`UnexpectError: ${Q.error}`)):(W.video||(W.video={}),W.video.mandatory||(W.video.mandatory={}),W.video.mandatory.chromeMediaSource="desktop",W.video.mandatory.chromeMediaSourceId=Q.sourceId,Z(void 0,W))})})}}}}}},function(d,E,t){"use strict";(function(n){const i=t(154),r=t(103);d.exports=function(o){void 0===o&&(o={});const s=o.Archiving||t(636),a=o.AudioLevelMeter||t(283),c=o.AudioLevelTransformer||t(143),u=o.BackingBar||t(284),l=o.Chrome||t(144),h=o.MuteButton||t(285)(),p=o.NamePanel||t(286),y=o.StylableComponent||t(151),O=o.logging||t(2)("createChromeMixin");return function(b,T){let oe,Q,ne,C=void 0===T?{}:T,w=C.name,N=C.publishAudio,k=C.publishVideo,L=C.audioSource,D=C.showControls,W=C.shouldAllowAudio,Z=C.logAnalyticsEvent;const he={},ae=i(),ye=Oe=>{if(!1===Oe)return"off";const ge=b.getStyle("buttonDisplayMode");return!1===ge?"on":ge};let Le=new n((Oe,ge)=>{he.init=ce=>{b.getStyle("showArchiveStatus")||Z("showArchiveStatus","createChrome",{mode:"off"});const pe={backingBar:new u({nameMode:w?b.getStyle("nameDisplayMode"):"off",muteMode:ye(b.getStyle("buttonDisplayMode"))}),name:new p({name:w,mode:b.getStyle("nameDisplayMode")}),archive:new s({show:Boolean(b.getStyle("showArchiveStatus"))&&"off"!==b.getStyle("archiveStatusDisplayMode"),archiving:!1}),muteButton:new h({muted:!1===N,mode:ye.call(null,b.getStyle("buttonDisplayMode"))})};oe=new a({mode:b.getStyle("audioLevelDisplayMode")});const Ue=new c,de=new r(()=>{const ve=N?Ue.transform(b.loudness):0;oe.setValue(ve)});oe.watchVisibilityChanged(ve=>{ve?de.start():de.stop()}),oe.audioOnly(!k&&N),pe.audioLevel=oe,ce&&ce.domElement&&(ne=ce,Q=new l({parent:ne.domElement}).set(pe).on({muted:()=>b.publishAudio(!1),unmuted:()=>b.publishAudio(!0)}),(null===L||!1===L)&&he.removeAudioTrack(),Oe())},he.reset=()=>{ge(new Error("Chrome still being created")),Q&&(Q.destroy(),Q=null)},he.destroy=()=>{he.reset(),ae.releaseAll(),Le=null}});Le.catch(Oe=>{(!Oe||"Chrome still being created"!==Oe.message)&&O.error("createChromeMixin failed to setup UI",Oe)}),he.setAudioOnly=Oe=>{oe&&oe.audioOnly(Oe)},he.setArchivingStatus=Oe=>{Q&&Q.archive.setArchiving(Oe)},he.setMuted=Oe=>{Q&&Q.muteButton&&Q.muteButton.muted(Oe)},he.removeAudioTrack=()=>{Q&&Q.muteButton&&Q.muteButton.remove()},he.addAudioTrack=()=>{Q&&Q.muteButton&&Q.muteButton.add()},y(b,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:W?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},D,Oe=>{Z("SetStyle","Publisher",Oe,null,.1)});const me=(Oe,ge)=>{Le.then(()=>{switch(Oe){case"nameDisplayMode":Q.name.setDisplayMode(ge),Q.backingBar.setNameMode(ge);break;case"showArchiveStatus":Z("showArchiveStatus","styleChange",{mode:ge?"on":"off"}),Q.archive.setShowArchiveStatus(Boolean(ge));break;case"archiveStatusDisplayMode":Q.archive.setShowArchiveStatus("off"!==ge);break;case"buttonDisplayMode":Q.muteButton.setDisplayMode(ge),Q.backingBar.setMuteMode(ge);break;case"audioLevelDisplayMode":Q.audioLevel.setDisplayMode(ge);break;case"backgroundImageURI":ne.setBackgroundImageURI(ge)}})};return b.on("styleValueChanged",me),ae.add(()=>b.off("styleValueChanged",me)),he}}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){const i=t(104),r=t(37),e=t(8),o=t(31);d.exports=function(a){const c=this,u=new o;let l,h,p,y,O=!0,v=!1,b="auto";const T=a.maxValue||1,C=a.minValue||0;function L(){const W=(v&&"auto"===b||"on"===b)&&O;y!==W&&(y=W,u.emit("visibilityChanged",W))}i(c,{audioOnly:{get:()=>v,set(W){v=W,L()}}}),c.setValue=function(W){p=W,function k(){h.style.transform=`scale(${Math.sqrt((p-C)/(T-C))})`}()},c.watchVisibilityChanged=function(W){return u.on("visibilityChanged",W),n.resolve().then(()=>{W(y)}),function(){u.removeListener("visibilityChanged",W)}},r(this,{mode:a?a.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:function w(){h=e.createElement("div",{className:"OT_audio-level-meter__value"},""),l=e.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");const W=c.domElement;W.appendChild(l),W.appendChild(h),c.watchVisibilityChanged(Z=>{Z?e.removeClass(c.domElement,"OT_hide-forced"):e.addClass(c.domElement,"OT_hide-forced")})},onDestroy:function N(){u.removeAllListeners("visibilityChanged")}}),c.setDisplayMode=function(W){b=W,L()},c.getDisplayMode=function(){return b},c.showAfterLoading=function(){O=!0,L()},c.hideWhileLoading=function(){O=!1,L()},L()}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(37);d.exports=function(r){let e=r.nameMode,o=r.muteMode;function s(){return"on"===e||"on"===o?"on":"mini"===e||"mini"===o?"mini":"mini-auto"===e||"mini-auto"===o?"mini-auto":"auto"===e||"auto"===o?"auto":"off"}n(this,{mode:s(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(a){e=a,this.setDisplayMode(s())},this.setMuteMode=function(a){o=a,this.setDisplayMode(s())}}},function(d,E,t){"use strict";const n=t(8),i=t(37),r=t(104);d.exports=function(o){void 0===o&&(o={});const s=o.OTHelpers||n,a=o.Widget||i;return function(u){let l=u.muted||!1;const h=()=>{l?s.addClass(this.domElement,"OT_active"):s.removeClass(this.domElement,"OT_active ")},p=()=>(l=!l,h(),this.parent.trigger(l?"muted":"unmuted",this),!1);let b;r(this,{muted:{get:()=>l,set(T){l=T,h()}}}),a(this,{mode:u.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:l?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute",type:"button"},onCreate:T=>{s.on(T,"click",p)},onDestroy:T=>{s.off(T,"click",p)}}),this.remove=()=>{this.domElement&&this.domElement.parentNode&&(b=this.domElement.parentNode,this.domElement.parentNode.removeChild(this.domElement))},this.add=()=>{b&&this.domElement&&!this.domElement.parentNode&&b.appendChild(this.domElement)}}}},function(d,E,t){"use strict";const n=t(37),i=r=>{const e=document.createElement("div");return e.textContent=r,e.innerHTML};d.exports=function(e){let o=e.name;(!o||""===o.trim().length)&&(o=null,e.mode="off"),this.setName=function(s){o||this.setDisplayMode("auto"),o=i(s),this.domElement.innerHTML=o}.bind(this),o=i(o),n(this,{mode:e.mode,nodeName:"h1",htmlContent:o,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.global||(void 0!==typeof window?window:global);return function(){if(r.navigator.mediaDevices){const o=r.navigator.mediaDevices;return o.enumerateDevices&&o.enumerateDevices.bind(o)}}}},function(d,E,t){"use strict";const n=t(3),i=t(159).default;d.exports={isSupportedInThisBrowser:!n.isLegacyEdge&&!n.isElectron&&i&&!n.isAndroid,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:"Safari"!==n.name,browser:"Safari"!==n.name},register:()=>({isInstalled(e){e(void 0)},getConstraints(e,o,s){s(void 0,{video:o.video,audio:o.audio})}})}},function(d,E,t){"use strict";E.isMediaStreamTrack=i=>i&&"object"==typeof i&&"string"==typeof i.kind&&"function"==typeof i.stop&&"boolean"==typeof i.enabled},function(d,E,t){"use strict";t.r(E),function(n){var i=function(a,c,u,l){return new(u||(u=n))(function(h,p){function y(b){try{v(l.next(b))}catch(T){p(T)}}function O(b){try{v(l.throw(b))}catch(T){p(T)}}function v(b){b.done?h(b.value):new u(function(T){T(b.value)}).then(y,O)}v((l=l.apply(a,c||[])).next())})},r=function(a,c){var l,h,p,y,u={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return y={next:O(0),throw:O(1),return:O(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function O(b){return function(T){return function v(b){if(l)throw new TypeError("Generator is already executing.");for(;u;)try{if(l=1,h&&(p=h[2&b[0]?"return":b[0]?"throw":"next"])&&!(p=p.call(h,b[1])).done)return p;switch(h=0,p&&(b=[0,p.value]),b[0]){case 0:case 1:p=b;break;case 4:return u.label++,{value:b[1],done:!1};case 5:u.label++,h=b[1],b=[0];continue;case 7:b=u.ops.pop(),u.trys.pop();continue;default:if(!(p=(p=u.trys).length>0&&p[p.length-1])&&(6===b[0]||2===b[0])){u=0;continue}if(3===b[0]&&(!p||b[1]>p[0]&&b[1]<p[3])){u.label=b[1];break}if(6===b[0]&&u.label<p[1]){u.label=p[1],p=b;break}if(p&&u.label<p[2]){u.label=p[2],u.ops.push(b);break}p[2]&&u.ops.pop(),u.trys.pop();continue}b=c.call(a,u)}catch(T){b=[6,T],h=0}finally{l=p=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,T])}}};function e(){return"undefined"!=typeof window||void 0!==typeof window?window:global}var o="onFailure must return boolean, or delay in ms";E.default=function s(a,c,u){return void 0===u&&(u=10),function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return i(this,void 0,void 0,function(){var p,y,O;return r(this,function(v){switch(v.label){case 0:p=0,y=function(){var b,T,C;return r(this,function(w){switch(w.label){case 0:return w.trys.push([0,2,,6]),b={},[4,a.apply(void 0,l)];case 1:return[2,(b.value=w.sent(),b)];case 2:if(T=w.sent(),!1===(C=c(T,p))||null==C||p>=u)throw T;return"number"!=typeof C?[3,4]:[4,new n(function(N){return e().setTimeout(N,C)})];case 3:return w.sent(),[3,5];case 4:if(!0!==C)throw new Error(o);w.label=5;case 5:return[3,6];case 6:return[2]}})},v.label=1;case 1:return(p+=1)?[5,y()]:[3,3];case 2:return"object"==typeof(O=v.sent())?[2,O.value]:[3,1];case 3:return[2]}})})}}}.call(this,t(0))},function(d,E,t){"use strict";const n=t(2)("videoContentHint"),i=["","text","motion","detail"],r=a=>i.includes(a),e=a=>{var c;return null==a||null==(c=a.getVideoTracks())?void 0:c[0]};d.exports={isValidVideoContentHint:r,setVideoContentHint:(a,c)=>{if(!r(c))return void n.warn('Invalid content hint. Valid content hints are "text", "detail", "motion", or ""');const u=e(a);u?void 0!==u.contentHint?u.contentHint=c:n.warn("contentHint not supported by this browser"):n.warn("Tried to set contentHint but no video track is present")},getVideoContentHint:a=>{const c=e(a);return(null==c?void 0:c.contentHint)||""}}},function(d,E,t){"use strict";const n=t(104);d.exports=function(){return function(e,o){let s;n(this,{muted:{get:()=>s,set(a){if(s===a)return;s=a;const c=e.getAudioTracks();for(let u=0,l=c.length;u<l;++u)c[u].enabled=!s}}}),void 0!==o?this.muted(!0===o):e.getAudioTracks().length?this.muted(!e.getAudioTracks()[0].enabled):this.muted(!1)}}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.Errors||t(6),e=i.otError||t(13)(),o={};return(void 0!==typeof window?window:global).MediaError&&(o[(void 0!==typeof window?window:global).MediaError.MEDIA_ERR_ABORTED]={name:r.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},o[(void 0!==typeof window?window:global).MediaError.MEDIA_ERR_NETWORK]={name:r.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},o[(void 0!==typeof window?window:global).MediaError.MEDIA_ERR_DECODE]={name:r.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},o[(void 0!==typeof window?window:global).MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:r.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(a){const c=o[a.code];return c?e(c.name,new Error(`There was an unexpected problem with the Video Stream: ${c.message}`)):new Error("An unknown error occurred"+(a.message?`: ${a.message}`:"."))}}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(19)),e=i(t(4)),o=i(t(5)),s=i(t(15));const a=t(7),c=t(63),u=t(647),l=t(648),h=t(649),p=t(106),y=t(3),v=t(24)().hasAudioOutputApiSupport,b=t(295),C=t(105).getCurrentAudioOutputDeviceId;function w(L,D){const W=document.createElement("video");return l(W),W.autoplay=!0,W.playsinline=!0,W.innerHTML=L,W.setAttribute("autoplay",""),W.setAttribute("playsinline",""),!0===D&&(W.muted="true"),W}function N(){const L=w("");return L.setAttribute("style","display:none"),L}d.exports=function k(L){void 0===L&&(L={});const D=L.audioContext||t(158)(),W=L.canBeOrientatedMixin||t(650),Z=L.document||(void 0!==typeof window?window:global).document,oe=L.listenForTracksEnded||t(651)(),Q=L.logging||t(2),ne=L.OTHelpers||t(8),he=L.videoElementErrorMap||t(293)(),ae=L.WebaudioAudioLevelSampler||t(145),ye=L.global||(void 0!==typeof window?window:global);let Le=1;return function(){function Oe(ce,pe){var Ue=this;let de=ce._inject,ve=void 0===de?{}:de,Ae=ve.createVideoElement,Xe=void 0===Ae?w:Ae,Ye=ve.createAudioOnlyVideoElement,We=void 0===Ye?N:Ye,at=ce.muted,At=ce.fallbackText,ht=ce.widgetType;(0,s.default)(this,"_domElement",void 0),(0,s.default)(this,"_domAudioOnlyVideoElement",void 0),(0,s.default)(this,"_blockedVolume",void 0),(0,s.default)(this,"_mediaStoppedListener",void 0),(0,s.default)(this,"_audioLevelSampler",void 0),(0,s.default)(this,"_playInterrupts",0),(0,s.default)(this,"_isVideoLoadedMetaData",!1),(0,s.default)(this,"_audioOnlyVideoElementWatcher",void 0),(0,s.default)(this,"_blinkStartTime",null),this.logging=Q(`NativeVideoElementWrapper:${Le}`),Le+=1,a(this),this._defaultAudioVolume=pe,this._widgetType=ht,this._emitVideoPlayAttempt=()=>{this._blinkStartTime=(new Date).getTime(),this.trigger("amrLogEvent","AMRTransitionVideo","Attempt")},this._emitVideoPlaySuccess=()=>{const En=(new Date).getTime()-this._blinkStartTime;this.trigger("amrLogEvent","AMRTransitionVideo","Success",{attemptDuration:En}),this._blinkStartTime=null},this._emitVideoPlayFailure=()=>{this.trigger("amrLogEvent","AMRTransitionVideo","Failure")};let Wt=!1;this._domElement=Xe(At,at),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=c(this._domElement),this._domElementEvents.on("loadstart",()=>this._onDomElementLoadStart()),this._domElementEvents.on("timeupdate",function(){for(var En=arguments.length,nt=new Array(En),ct=0;ct<En;ct++)nt[ct]=arguments[ct];return Ue.trigger("timeupdate",...nt)}),this._domElementEvents.on("loadedmetadata",(0,o.default)(e.default.mark(function En(){var nt,ct,De,lt,wt=arguments;return e.default.wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:for(Ue._isVideoLoadedMetaData=!0,nt=wt.length,ct=new Array(nt),De=0;De<nt;De++)ct[De]=wt[De];if(Ue.trigger("loadedmetadata",...ct),!Ue._domAudioOnlyVideoElement){Gn.next=10;break}if(lt=Ue._domAudioOnlyVideoElement.srcObject,Ue._removeAudioOnlyVideoElement(),!lt){Gn.next=10;break}return Gn.next=9,b();case 9:Ue.play();case 10:case"end":return Gn.stop()}},En)}))),this._domElementEvents.on("error",En=>{this.trigger("error",he(En.target.error))},!1),this._domElementEvents.on("pause",()=>{Wt||(this.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),Wt=!0),this.play()}),this.on("destroyed",()=>{this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll()}),W(this,()=>this._domElement),y.isSafari&&"subscriber"===this._widgetType&&(this._domAudioOnlyVideoElement=We(),this._bindAudioOnlyVideoElementEvents())}var ge=Oe.prototype;return ge._onDomElementLoadStart=function(){var ce=(0,o.default)(e.default.mark(function Ue(){return e.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if("subscriber"!==this._widgetType||!v()){ve.next=3;break}return ve.next=3,this._setActiveAudioOutputDevice();case 3:case"end":return ve.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._setActiveAudioOutputDevice=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var de;return e.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(""!==(de=C())&&"default"!==de){Ae.next=3;break}return Ae.abrupt("return");case 3:return Ae.next=5,this.setSinkId(de);case 5:case"end":return Ae.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._rebindSrcObject=function(){this._domElement&&(this._domElement.srcObject=this._domElement.srcObject)},ge._pauseAndPlay=function(){this._domElement&&(this._domElement.pause(),this._domElement.play())},ge._startAudioOnlyVideoElementWatcher=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var ve;return e.default.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return ve=y.isiOS,this._audioOnlyVideoElementWatcher=setInterval(()=>{this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.paused&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject,ve&&this._domAudioOnlyVideoElement.play())},100),Xe.next=5,p(1e3);case 5:clearInterval(this._audioOnlyVideoElementWatcher),this._audioOnlyVideoElementWatcher=null;case 7:case"end":return Xe.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._removeAudioOnlyVideoElement=function(){var ce=(0,o.default)(e.default.mark(function Ue(){return e.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:this._domAudioOnlyVideoElement.srcObject=null,this._domAudioOnlyVideoElement.parentNode.removeChild(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._domAudioOnlyVideoElement=null;case 4:case"end":return ve.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge.bindAudioTrackOnly=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var de,ve,Ae,Xe,Ye,We,at;return e.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return de=this._stream.getVideoTracks(),ve=this._stream.getAudioTracks(),Xe=void 0===(Ae=de[0])?{}:Ae,We=void 0===(Ye=ve[0])?{}:Ye,ht.next=6,b();case 6:at=!Xe.enabled&&We.enabled,!this._isVideoLoadedMetaData&&at&&this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=new ye.MediaStream(ve),this._startAudioOnlyVideoElementWatcher());case 8:case"end":return ht.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._bindAudioOnlyVideoElementEvents=function(){var pe=this;this._domAudioOnlyVideoElementEvents=c(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents.on("pause",()=>this.play()),this._domAudioOnlyVideoElementEvents.on("timeupdate",function(){for(var Ue=arguments.length,de=new Array(Ue),ve=0;ve<Ue;ve++)de[ve]=arguments[ve];return pe.trigger("timeupdate",...de)}),this._domAudioOnlyVideoElementEvents.on("loadedmetadata",function(){for(var Ue=arguments.length,de=new Array(Ue),ve=0;ve<Ue;ve++)de[ve]=arguments[ve];return pe.trigger("loadedmetadata",...de)})},ge.whenTimeIncrements=function(pe,Ue){this.once("timeupdate",()=>{pe.call(Ue,this)})},ge.domElement=function(){return this._domElement},ge.videoWidth=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Height":"Width")]):0},ge.videoHeight=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Width":"Height")]):0},ge.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},ge.imgData=function(){const pe=ne.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});Z.body.appendChild(pe);let Ue=null;try{pe.getContext("2d").drawImage(this._domElement,0,0,pe.width,pe.height),Ue=pe.toDataURL("image/png")}catch(de){}return ne.removeElement(pe),null===Ue||"data:,"===Ue?(this.logging.warn("Cannot get image data yet"),null):Ue.replace("data:image/png;base64,","").trim()},ge.appendTo=function(pe){return pe.appendChild(this._domElement),this._domAudioOnlyVideoElement&&pe.appendChild(this._domAudioOnlyVideoElement),this},ge.isAudioBlocked=function(){return void 0!==this._blockedVolume},ge.unblockAudio=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var de;return e.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(this.isAudioBlocked()){Ae.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),Ae.abrupt("return");case 3:return de=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(de),Ae.prev=6,Ae.next=9,this.play();case 9:Ae.next=16;break;case 11:throw Ae.prev=11,Ae.t0=Ae.catch(6),this._blockedVolume=de,this._domElement.muted=!0,Ae.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return Ae.stop()}},Ue,this,[[6,11]])}));return function pe(){return ce.apply(this,arguments)}}(),ge.rebind=function(){var ce=(0,o.default)(e.default.mark(function Ue(){return e.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(this._domElement){ve.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioOnlyVideoElement()&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject);case 5:case"end":return ve.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),this._stream.getAudioTracks().length>0){try{this._audioContext=D()}catch(pe){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",pe)}this._audioContext&&(this._audioLevelSampler=new ae(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},ge._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},ge._toggleVideoTracks=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var de,Ae;return e.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(!((de=this._domElement.srcObject.getTracks().filter(We=>We.enabled)).length>1)){Ye.next=8;break}return(Ae=de.filter(We=>"video"===We.kind)).forEach(We=>{We.enabled=!1}),Ye.next=7,b();case 7:Ae.forEach(We=>{We.enabled=!0});case 8:case"end":return Ye.stop()}},Ue,this)}));return function pe(){return ce.apply(this,arguments)}}(),ge._hasAudioOnlyVideoElement=function(){return this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.srcObject},ge.play=function(){var ce=(0,o.default)(e.default.mark(function Ue(){var de,ve,Ae,Xe,Ye,We,at,At,ht;return e.default.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(de=this._playInterrupts,ve=this._hasAudioOnlyVideoElement()?this._domAudioOnlyVideoElement:this._domElement,!y.isSafari){nt.next=5;break}return nt.next=5,b();case 5:if(!y.isiOS||!y.isSafari){nt.next=15;break}if("publisher"!==this._widgetType){nt.next=14;break}if(Ae=y.iOSVersion>=14&&y.iOSVersion<=14.2,Xe=this._stream.getVideoTracks(),We=void 0===(Ye=Xe[0])?{}:Ye,at=this._stream.getAudioTracks(),ht=void 0===(At=at[0])?{}:At,!Ae||h(ve)||!We.enabled){nt.next=12;break}return nt.abrupt("return");case 12:if(!ht.muted){nt.next=14;break}return nt.abrupt("return");case 14:this._toggleVideoTracks();case 15:return nt.prev=15,this._emitVideoPlayAttempt(),nt.next=19,ve.play();case 19:return this._emitVideoPlaySuccess(),nt.abrupt("return");case 23:if(nt.prev=23,nt.t0=nt.catch(15),this._emitVideoPlayFailure(),"AbortError"===(nt.t0||{}).name&&this._playInterrupts++,!(this._playInterrupts>de)){nt.next=33;break}return nt.next=32,this.play();case 32:return nt.abrupt("return");case 33:throw nt.t0;case 34:case"end":return nt.stop()}},Ue,this,[[15,23]])}));return function pe(){return ce.apply(this,arguments)}}(),ge._bindToStream=function(pe){this._stream=pe,this._domElement.srcObject=pe,this._domAudioOnlyVideoElement&&this.bindAudioTrackOnly()},ge.bindToStream=function(){var ce=(0,o.default)(e.default.mark(function Ue(de){var Ae,Xe,Ye,ve=this;return e.default.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(this._domElement){at.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(de),(0,o.default)(e.default.mark(function At(){var ht;return e.default.wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return $t.prev=0,$t.next=3,ve.play();case 3:$t.next=26;break;case 5:if($t.prev=5,$t.t0=$t.catch(0),ht=!!de.getAudioTracks().length,!ve._hasAudioOnlyVideoElement()||"NotAllowedError"!==$t.t0.name){$t.next=15;break}return ve._domAudioOnlyVideoElement.muted=!0,$t.next=12,ve.play();case 12:ve._domAudioOnlyVideoElement.muted=!1,$t.next=26;break;case 15:if(!ht){$t.next=23;break}return ve._blockedVolume=ve.getAudioVolume(),ve._domElement.muted=!0,$t.next=20,ve.play();case 20:ve.trigger("audioBlocked"),$t.next=26;break;case 23:return ve._domElement.muted=!0,$t.next=26,ve.play();case 26:case"end":return $t.stop()}},At,null,[[0,5]])}))().catch(At=>{this.logging.debug(".play() failed: ",At)}),this.trigger("videoDimensionsChanged",(0,r.default)({},Ae={width:this._domElement.videoWidth,height:this._domElement.videoHeight}),(0,r.default)({},Ae)),this._domElementEvents.on("resize",()=>{const At=this._domElement,ht=At.videoWidth,Wt=At.videoHeight;(ht!==Ae.width||Wt!==Ae.height)&&(this.trigger("videoDimensionsChanged",(0,r.default)({},Ae),{width:ht,height:Wt}),Ae.width=ht,Ae.height=Wt)}),Xe=()=>{this._mediaStoppedListener.stop(),this._domElement&&(this._domElement.onended=null),this.trigger("mediaStopped")},Ye=At=>{this.trigger("mediaStopped",At)},this._domElement.onended=()=>Xe(),this._mediaStoppedListener=oe(de,Xe,Ye),this._createAudioLevelSampler(),at.abrupt("return",void 0);case 13:case"end":return at.stop()}},Ue,this)}));return function pe(Ue){return ce.apply(this,arguments)}}(),ge.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=null),this._removeAudioLevelSampler(),this},ge.setAudioVolume=function(pe){if(this.isAudioBlocked())return void(this._blockedVolume=pe);const Ue=parseFloat(pe)/100,de=[this.domElement()];this._domAudioOnlyVideoElement&&de.push(this._domAudioOnlyVideoElement),de.forEach(ve=>{ve&&(ve.volume=Ue,ve.muted=0===Ue)})},ge.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;const pe=this.domElement();return pe?pe.muted?0:100*pe.volume:this._defaultAudioVolume},ge.audioChannelType=function(pe){const Ue=this.domElement();return void 0!==pe&&(Ue.mozAudioChannelType=pe),"mozAudioChannelType"in this._domElement?Ue.mozAudioChannelType:"unknown"},ge.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},ge.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler()},ge.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._audioOnlyVideoElementWatcher&&clearInterval(this._audioOnlyVideoElementWatcher),this.unbindStream(),this._domElement&&(ne.removeElement(this._domElement),this._domElement=null),this._domAudioOnlyVideoElement&&(ne.removeElement(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElement=null),this.trigger("destroyed"),u("NativeVideoElementWrapper",this)},ge.setSinkId=function(pe){const de=[this._domElement,this._domAudioOnlyVideoElement].map(ve=>{if(ve)return ve.setSinkId(pe)});return n.all(de)},Oe}()}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){d.exports=()=>new n(i=>setTimeout(i))}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5));const o=t(9),s=t(48),a=t(62),c=t(7),u=t(297),l=t(298),h=t(653);d.exports=function(y){void 0===y&&(y={});const O=y.getStatsHelpers||t(76),v=y.OTHelpers||t(8),b=y.PeerConnection||t(73)(),T=y.setCertificates||t(163)(),C=y.watchAudioAcquisition||t(655);return function(N){var k=this;let pe,de,L=N.iceConfig,D=N.webRTCStream,W=N.channels,Z=N.sendMessage,oe=N.capableSimulcastStreams,Q=N.overrideSimulcastEnabled,ne=N.logAnalyticsEvent,he=N.offerOverrides,ae=N.answerOverrides,ye=N.sourceStreamId,Le=N.isP2pEnabled,me=N.sessionId,Oe=N.keyStore,ge=N.sFrameClientStore,ce=N.isE2ee,Ue=!1;const ve=function(){this.destroy(),Ue&&(Ue=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")},Ae=function(We){this.trigger("error",{reason:We.reason,prefix:We.prefix})},Xe=function(We){Ue&&pe.iceConnectionStateIsConnected()&&(Ue=!1,this.trigger("iceRestartSuccess")),"connected"===We&&("Chrome"===v.env.name&&(de&&de(),de=C(pe.getStats.bind(pe),()=>this.trigger("audioAcquisitionProblem"))),this.trigger("connected")),this.trigger("iceConnectionStateChange",We)};c(this),this.startEncryption=Ye=>{pe&&pe.startEncryption(Ye)},this.changeMediaDirectionToInactive=()=>{pe&&pe.changeMediaDirectionToInactive()},this.changeMediaDirectionToRecvOnly=()=>{pe&&pe.changeMediaDirectionToRecvOnly()},this.getDataChannel=function(Ye,We,at){pe.getDataChannel(Ye,We,at)},this.getSourceStreamId=()=>pe.getSourceStreamId(),this.destroy=function(){de&&(de(),de=null),pe&&(pe.disconnect(),pe=null),this.off()},this.processMessage=function(Ye,We){pe.processMessage(Ye,We)},this.addTrack=function(Ye,We,at){return pe.addTrack(Ye,We,at)},this.removeTrack=function(Ye){return pe.removeTrack(Ye)},this.getLocalStreams=function(){return pe.getLocalStreams()},this.init=function(Ye,We){u(ye)&&l(L);const at={iceConfig:L.needRumorIceServersFallback?o(L,{servers:[...Ye,...L.servers]}):L,channels:W,capableSimulcastStreams:oe,overrideSimulcastEnabled:Q};T(at,(At,ht)=>{if(At)return void We(At);const Wt=o({logAnalyticsEvent:ne,isPublisher:!0,offerOverrides:he,answerOverrides:ae,sourceStreamId:ye,p2p:Le,sessionId:me,keyStore:Oe,sFrameClientStore:ge,isE2ee:ce},ht);pe=new b(o({sendMessage:Z},Wt)),pe.on({close:ve,error:Ae,qos:$t=>this.trigger("qos",$t),iceConnectionStateChange:Xe},this),pe.addLocalStream(D).then(()=>{We(void 0)}).catch(We)})},this.setIceConfig=Ye=>{pe.setIceConfig(Ye)},this.getSenders=function(){return pe.getSenders()},this.iceRestart=function(){pe&&(Ue=!0,pe.iceRestart())},this.hasRelayCandidates=()=>pe.hasRelayCandidates(),this.iceConnectionStateIsConnected=function(){return pe.iceConnectionStateIsConnected()},this.findAndReplaceTrack=(Ye,We)=>pe.findAndReplaceTrack(Ye,We),this._testOnlyGetFramesEncoded=()=>new n((Ye,We)=>{pe.getStats((at,At)=>{if(at)return void We(at);const ht=a(At,Wt=>O.isVideoStat(Wt,At)&&O.isOutboundStat(Wt));ht?Ye(s(ht,["timestamp","framesEncoded"])):We(new Error("Could not find framesEncoded in getStats report"))})}),this.getStats=Ye=>pe.getStats(Ye),this.getRtcStatsReport=Ye=>pe.getRtcStatsReport(Ye),this.setP2PMaxBitrate=(0,e.default)(r.default.mark(function Ye(){var We,at,At,$t,un;return r.default.wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if("P2P"===k.getSourceStreamId()){nt.next=2;break}return nt.abrupt("return");case 2:if(at=k.getSenders().find(ct=>"video"===ct.track.kind)){nt.next=5;break}return nt.abrupt("return");case 5:return At=(null==at||null==(We=at.track)||null==We.getSettings?void 0:We.getSettings())||{},$t=h(At.width,At.height),(un=at.getParameters()).encodings.forEach(ct=>{ct.maxBitrate=$t}),nt.prev=9,nt.next=12,at.setParameters(un);case 12:nt.next=16;break;case 14:nt.prev=14,nt.t0=nt.catch(9);case 16:case"end":return nt.stop()}},Ye,null,[[9,14]])}))}}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(652);d.exports=i=>"P2P"===i&&n()},function(d,E,t){"use strict";d.exports=n=>{n.transportPolicy="relay",n.customServers=n.customServers||[]}},function(d,E,t){"use strict";const n=t(9),i=t(7),r=t(297),e=t(298);d.exports=function(s){void 0===s&&(s={});const a=s.OTHelpers||t(8),c=s.PeerConnection||t(73)(),u=s.SinglePeerConnection||t(656)(),l=s.setCertificates||t(163)(),h=s.Errors||t(6),p=s.ExceptionCodes||t(10),y=s.OTErrorClass||t(22),O=s.watchSubscriberAudio||t(657);return function(b){let T=b.clientCandidates,C=b.iceConfig,w=b.send,N=b.logAnalyticsEvent,k=b.p2p,L=b.codecFlags,D=b.sourceStreamId,W=b.remoteConnectionId,Z=b._singlePeerConnectionController,oe=b.keyStore,Q=b.sFrameClientStore,ne=b.isE2ee;const he=this;let ae,ye=!1,Le=!1,me=null;const Oe=!!Z;let ge=!1;const ce=[],pe=[],Ue=function(){this.destroy(),Le&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},de=De=>{this.trigger("remoteStreamRemoved",De,this)},We=De=>{const lt=De.stream;(De=>{const lt="video"===De.kind?ce:pe;lt.includes(De)||lt.push(De)})(De.track),(De=>{ge||(De.onremovetrack=lt=>{(De=>{const lt="video"===De.kind?ce:pe,wt=lt.indexOf(De);wt>-1&&lt.splice(wt,1)})(lt),Oe&&ae&&ae.removeTrack(lt),setTimeout(()=>{!ce.length&&!pe.length&&de(De)},100)},ge=!0)})(lt),this.trigger("remoteTrackAdded",De,this)},at=De=>{this.trigger("remoteVideoSupported",De)},At=()=>{this.trigger("decryptFailed")},ht=()=>{this.trigger("decryptRestored")},Wt=function(lt){this.trigger("error",null,lt.reason,this,lt.prefix)},$t=function(lt){Le&&("connected"===lt||"completed"===lt)&&(Le=!1,this.trigger("iceRestartSuccess")),"connected"===lt&&this.trigger("connected"),this.trigger("iceConnectionStateChange",lt)},un=function(lt){this.trigger("signalingStateChange",lt)},En=function(lt){this.trigger("signalingStateStable",lt)},nt=(De,lt)=>{("answer"===De||"pranswer"===De)&&this.trigger("connected"),w(De,lt)};i(this),this._hasAudioTracks=()=>pe.length>0,this._hasVideoTracks=()=>ce.length>0,this._getVideoTracks=()=>ce,this._getAudioTracks=()=>pe,this._getTracks=()=>[...pe,...ce],this.close=function(){ye||(ye=!0,ae&&(ae.disconnect(),ae=null),this.off())},this.destroy=function(){this.stopAudioStatsWatcher(),!ye&&this.close()},this.getDataChannel=function(De,lt,wt){ae.getDataChannel(De,lt,wt)},this.getSourceStreamId=()=>ae.getSourceStreamId(),this.processMessage=function(De,lt){ae.processMessage(De,lt)},this.remoteDescription=function(){return ae.remoteDescription()},this.getStats=function(De){if(ae)ae.getStats(De);else{const lt=p.PEER_CONNECTION_NOT_CONNECTED;De(new a.Error(y.getTitleByCode(lt),h.PEER_CONNECTION_NOT_CONNECTED,{code:lt}))}},this.getSynchronizationSources=function(De){if(ae)ae.getSynchronizationSources(De);else{const lt=p.PEER_CONNECTION_NOT_CONNECTED;De(new a.Error(y.getTitleByCode(lt),h.PEER_CONNECTION_NOT_CONNECTED,{code:lt}))}},this.getRtcStatsReport=function(De){if(ae)ae.getRtcStatsReport(De);else{const lt=p.PEER_CONNECTION_NOT_CONNECTED;De(new a.Error(y.getTitleByCode(lt),h.PEER_CONNECTION_NOT_CONNECTED,{code:lt}))}},this.setIceConfig=De=>{ae.setIceConfig(De)},this.startAudioStatsWatcher=function(De){me||(me=O(ae.getStats.bind(ae),lt=>{this.stopAudioStatsWatcher(),this.trigger("audioLevelStuckWarning",lt)},De))},this.stopAudioStatsWatcher=function(){me&&me.stop(),me=null};const ct=function(lt){return function(wt){const In="video"===lt?ce:pe;!ae||ae.remoteTracks().forEach(Gn=>{Gn.kind===lt&&Gn.enabled!==wt&&In.includes(Gn)&&(Gn.enabled=wt)})}};this.subscribeToAudio=ct("audio"),this.subscribeToVideo=ct("video"),this.hasRelayCandidates=function(){return ae.hasRelayCandidates()},this.iceRestart=function(){return Le=!0,ae.iceRestart()},this.iceConnectionStateIsConnected=function(){return ae.iceConnectionStateIsConnected()},this.init=function(De){r(D)&&e(C),l({iceConfig:C},(wt,In)=>{if(wt)return void De(wt);const Gn=n({logAnalyticsEvent:N,clientCandidates:T,codecFlags:L,sourceStreamId:D,keyStore:oe,sFrameClientStore:Q,isE2ee:ne},In),ft=n({sendMessage:nt,p2p:k},Gn,{remoteConnectionId:W});ae=Oe?new u(ft,Z):new c(ft),ae.on({iceConnected:()=>he.emit("iceConnected"),close:Ue,trackAdded:We,signalingStateChange:un,signalingStateStable:En,error:Wt,qos:ut=>this.trigger("qos",ut),iceConnectionStateChange:$t,remoteVideoSupported:at,decryptFailed:At,decryptRestored:ht},he),!Oe&&ae.remoteTracks().length>0?ae.remoteStreams().forEach(ut=>{ut.getTracks().forEach(Vt=>We({stream:ut,track:Vt}))}):De(void 0,he)})}}}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const a=(i.generateSimpleStateMachine||t(160)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return a.prototype.isDestroyed=function(){return"Destroyed"===this.current},a.prototype.isAttemptingToPublish=function(){return-1!==["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)},a.prototype.isPublishing=function(){return"Publishing"===this.current},a}},function(d,E,t){"use strict";function n(i){this.message=i||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}Object.defineProperty(E,"__esModule",{value:!0}),E.default=n,(n.prototype=Object.create(Error.prototype)).constructor=n},function(d,E,t){var n=t(0);Object.defineProperty(E,"__esModule",{value:!0}),E.default=function i(r,e){return n.resolve(r).then(o=>n.resolve(e()).then(()=>o),o=>n.resolve(e()).then(()=>n.reject(o)))}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(19)),e=i(t(4)),o=i(t(5));const s=t(140),a=t(255),c=t(9),u=t(277),l=t(59),h=t(51),y=t(165).CancellationError,O=t(16),v=t(31),b=t(50),T=t(268),C=t(27),w=t(7),N=t(666),k=t(103),L=t(63),D=t(667),W=t(6),Z=t(164)(),oe=t(668),Q=t(283),ne=t(143),he=t(284),ae=t(144),ye=t(3),Le=t(6),me=t(23)(),Oe=t(10),ge=t(76),ce=t(304),pe=t(305),Ue=t(669),de=t(162)(),ve=t(2)("Subscriber"),Ae=t(285)(),Xe=t(286),Ye=t(13)(),We=t(22),at=t(8),At=t(151),ht=t(142)(void 0!==typeof window?window:global),Wt=t(73)({global:ht}),$t=t(299)({PeerConnection:Wt}),un=t(306),En=t(672),nt=t(673),ct=t(674),De=t(675),lt=t(307),wt=t(101).parseIceServers,In=t(676),Gn=t(677),ft=t(678),ut=t(309),Vt=t(167),Rn=(bn,Zn)=>bn.connection.id===Zn.connection.id;d.exports=function(Zn){let Ht=void 0===Zn?{}:Zn,rr=Ht.AudioLevelMeter,Ti=void 0===rr?Q:rr,bo=Ht.AudioLevelTransformer,Gr=void 0===bo?ne:bo,pi=Ht.BackingBar,uo=void 0===pi?he:pi,gi=Ht.Chrome,qr=void 0===gi?ae:gi,Di=Ht.env,Ir=void 0===Di?ye:Di,go=Ht.Errors,$i=void 0===go?Le:go,Zo=Ht.Events,On=void 0===Zo?me:Zo,Lr=Ht.ExceptionCodes,Yr=void 0===Lr?Oe:Lr,So=Ht.audioLevelSampler,mi=void 0===So?Ue:So,Zt=Ht.getStatsHelpers,yr=void 0===Zt?ge:Zt,Cr=Ht.hasAudioOutputLevelStatCapability,Ko=Ht.hasRemoteStreamsWithWebAudio,Gi=void 0===Ko?pe:Ko,zr=Ht.interpretPeerConnectionError,Hn=void 0===zr?de:zr,so=Ht.logging,Nt=void 0===so?ve:so,Po=Ht.MuteButton,Fo=void 0===Po?Ae:Po,lo=Ht.NamePanel,dr=void 0===lo?Xe:lo,Uo=Ht.otError,Wi=void 0===Uo?Ye:Uo,Ei=Ht.OTErrorClass,Ri=void 0===Ei?We:Ei,xo=Ht.OTHelpers,Mo=void 0===xo?at:xo,Vo=Ht.StylableComponent,es=void 0===Vo?At:Vo,Io=Ht.SubscriberPeerConnection,ts=void 0===Io?$t:Io,$o=Ht.SubscribingState,fi=void 0===$o?un:$o,Oi=Ht.VideoDisabledIndicator,Qo=void 0===Oi?En:Oi,No=Ht.AudioBlockedIndicator,Yt=void 0===No?nt:No,en=Ht.VideoUnsupportedIndicator,Sn=void 0===en?ct:en,Kn=Ht.watchFrameRate,vn=void 0===Kn?De:Kn,Tr=Ht.createSendMethod,$r=void 0===Tr?lt:Tr,pt=Ht.parseIceServers,Ot=void 0===pt?wt:pt,Rt=Ht.document,jt=void 0===Rt?(void 0!==typeof window?window:global).document:Rt,qt=Ht.WidgetView,gn=void 0===qt?Z:qt;const mr=function yi(Br,ei,vi){var ti=this;if(void 0===ei&&(ei={}),void 0===vi&&(vi=()=>{}),void 0===ei.analytics)throw new Error("Subscriber requires an instance of analytics");const Qn=ei.analytics,Zi=O(),ai=yi.hasAudioOutputLevelStatCapability()||Gi(),Qi=this,Mn={},Lo={},ao={},Yo={},Ao={};let kt,Jr,Fi,co,rs,Xr,Co,Bo,bi,qo,jo,cs,ns,zo,Jo=!1,_o=Br||Zi,Er=ei.session,Wn=ei.stream;const us=ei._singlePeerConnectionController;let To,ke,_,He,yn,Pe=!1,it={},on=null,ln=!1,xn=!0,tr=[],Fn=s({},ei,{showControls:!0,testNetwork:!1,fitMode:Wn.defaultFitMode||"cover",insertDefaultUI:!0});const Si=Er.sessionInfo.isAdaptiveEnabled,Eo={P2P:C.SUBSCRIBER_DISCONNECTED,MANTIS:C.SUBSCRIBER_DISCONNECTED},mo="Chrome"===Ir.name&&Ir.version>=58||Ir.isChromiumEdge||Ir.isOpera,Bi=Er._.getSocket(),Xo=()=>u(Lo),ue=Ee=>Lo[Ee],J=()=>Lo[yn],le=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,Lo[ze];case 2:Dt.sent.close(),delete Lo[ze];case 5:case"end":return Dt.stop()}},Ve)}));return function(ze){return Ee.apply(this,arguments)}}(),we=Ee=>{delete ao[Ee]},Re=()=>{Xo().forEach(function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){return e.default.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,ze;case 2:Lt.sent.destroy();case 3:case"end":return Lt.stop()}},Ve)}));return function(Ve){return Ee.apply(this,arguments)}}()),Object.keys(Lo).forEach(Ee=>{delete Lo[Ee]})},rt=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){var Ze,Lt;return e.default.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(ze){Qt.next=2;break}return Qt.abrupt("return");case 2:return Ze={error:wo,audioVolume:ke},Lt=Si&&"P2P"===yn,Qt.prev=4,Qt.next=7,kt.bindVideo(ze,Ze,Lt);case 7:Qt.next=18;break;case 9:if(Qt.prev=9,Qt.t0=Qt.catch(4),!(Qt.t0 instanceof y||Xr.isDestroyed())){Qt.next=13;break}return Qt.abrupt("return");case 13:if(!Qt.t0.message.includes("bufferFailed")){Qt.next=16;break}return ti._.startRelayedToRoutedTransition(),Qt.abrupt("return");case 16:throw wo(Qt.t0),Qt.t0;case 18:case"end":return Qt.stop()}},Ve,null,[[4,9]])}));return function(ze){return Ee.apply(this,arguments)}}(),yt=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze,Ze){var Lt,Dt,Qt;return e.default.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(Lt=!1,"function"==typeof ze?Ze=ze:Lt="rtcStatsReport"===ze,Lt?be():Ce(),!Lt||ut){ur.next=7;break}return Dt=Yr.GET_RTC_STATS_REPORT_NOT_SUPPORTED,Ze(Wi(W.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(Ri.getTitleByCode(Dt)),Dt)),ur.abrupt("return");case 7:if(J()){ur.next=11;break}return Dt=Yr.PEER_CONNECTION_NOT_CONNECTED,Ze(Wi($i.PEER_CONNECTION_NOT_CONNECTED,new Error(Ri.getTitleByCode(Dt)),Dt)),ur.abrupt("return");case 11:return ur.next=13,J();case 13:Qt=ur.sent,(Lt?Qt.getRtcStatsReport:Qt.getStats)((ri,sr)=>{ri?(ri.code===Yr.PEER_CONNECTION_NOT_CONNECTED&&(ri=Wi($i.PEER_CONNECTION_NOT_CONNECTED,ri,Yr.PEER_CONNECTION_NOT_CONNECTED)),Ze(ri)):Ze(null,sr)});case 16:case"end":return ur.stop()}},Ve)}));return function(ze,Ze){return Ee.apply(this,arguments)}}(),br=Ee=>!(!bi||!To)&&("video"===Ee?bi.getVideoTracks().length>0&&To.getVideoTracks().length>0:bi.getAudioTracks().length>0&&To.getAudioTracks().length>0),Ut=(Ee,Ve,ze,Ze,Lt)=>{let Dt=c({action:Ee,variation:Ve,payload:ze,streamId:Wn?Wn.id:null,sessionId:Er?Er.sessionId:null,connectionId:Er&&Er.isConnected()?Er.connection.connectionId:null,partnerId:Er&&Er.sessionInfo?Er.sessionInfo.partnerId:null,subscriberId:Zi,widgetType:"Subscriber"},Ze);("Failure"===Ve||"iceconnectionstatechange"===Ve&&"closed"===ze)&&(Dt=c(Dt,it));const Qt=[Dt];Lt&&Qt.push(Lt),Qn.logEvent(...Qt)},fr=(Ee,Ve,ze)=>{"Attempt"===Ve?(Yo[Ee]=(new Date).getTime(),Ut(Ee,Ve,ze)):("Failure"===Ve||"Success"===Ve)&&Ut(Ee,Ve,ze,{attemptDuration:(new Date).getTime()-Yo[Ee]})},xi=function(Ve,ze){void 0===ze&&(ze={}),fr("RoutedToRelayedTransition",Ve,ze)},ci=function(Ve,ze){void 0===ze&&(ze={}),fr("RelayedToRoutedTransition",Ve,ze)},Ur=Gn({onInvalidTransition(Ee,Ve){const ze=`Invalid state transition: Event '${Ee}' not possible in state '${Ve}'`;Nt.error(ze),Ut("Subscriber:InvalidStateTransition","Event",{details:ze})}});{const Ee="Unable to subscribe to stream in a reasonable amount of time";In({connectivityState:Ur,onWarning(){Pr("Warning",{})},onTimeout:()=>{if(kt&&kt.addError(Ee),Xr.isAttemptingToSubscribe()){Xr.set("Failed"),this._disconnect({noStateTransition:!0});const Ve=Wi(W.TIMEOUT,new Error(Ee),Yr.UNABLE_TO_SUBSCRIBE);Ur.fail({options:{failureReason:"Subscribe",failureMessage:Ee,failureCode:Yr.UNABLE_TO_SUBSCRIBE},error:Ve})}},warningMs:15e3,timeoutMs:3e4})}if(Mn.promise=new n((Ee,Ve)=>{Mn.resolve=Ee,Mn.reject=Ve}),Fn.testNetwork&&Er.sessionInfo.p2pEnabled&&Nt.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=_o,this.widgetId=Zi,this.session=Er,this.stream=Fn.stream,Wn=Fn.stream,this.streamId=Wn.id,!Er)return Ri.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:Qn}),null;w(this),Qi.once("subscribeComplete",function(){try{vi(...arguments)}catch(Ee){Nt.error("Completion handler threw an exception",Ee)}}),Er.on("captionReceived",Ee=>{Ee.streamId===Qi.streamId&&(this.dispatchEvent(Ee),this.trigger(C.SUBSCRIBER_CAPTION_RECEIVED,Ee))}),Ur.observe({onEnterConnecting(){Pr("Attempt",null,{})},onEnterConnected(){Pr("Success",null,{})},onEnterDisconnected(Ee,Ve){let ze=void 0===Ve?{}:Ve,Ze=ze.options,Lt=void 0===Ze?{}:Ze,Dt=ze.payload,Qt=void 0===Dt?null:Dt;Pr((Ee=>{let Ve=Ee.transition,ze=Ee.from;return"fail"===Ve?"connected"===ze?"Disconnect":"Failure":"disconnect"===Ve&&"connected"===ze?"Disconnect":"Cancel"})(Ee),Qt,Lt)}}),Ur.observe({onEnterConnected:()=>{this.trigger("subscribeComplete",void 0,this)},onEnterDisconnected:function(Ve,ze){"connecting"===Ve.from&&ti.trigger("subscribeComplete",(void 0===ze?{}:ze).error||new Error("An unknown error occurred"),ti)}}),ft({connectivityState:Ur,logAttempt(){Ut("Subscribe","Attempting",null,{connectionId:Er&&Er.isConnected()?Er.connection.connectionId:null})}});const Pr=(Ee,Ve,ze)=>{"Attempt"===Ee&&(cs=(new Date).getTime()),Ut("Subscribe",Ee,Ve,"Failure"===Ee||"Success"===Ee||"Cancel"===Ee?(0,r.default)({},ze,{attemptDuration:(new Date).getTime()-cs}):ze)},Kr=(Ee,Ve)=>{Ut("ICERestart",Ee,Ve)},ii=Ee=>{var Ve,ze;let Ze=Ee.parsedStats,Lt=Ee.remoteConnectionId,Dt=Ee.peerId,Qt=Ee.sourceStreamId;const hr={widgetType:"Subscriber",width:kt.width,height:kt.height,audioTrack:br("audio"),hasAudio:Wn&&Wn.hasAudio,subscribeToAudio:zo,audioVolume:this.getAudioVolume(),videoTrack:br("video"),connectionId:Er?Er.connection.connectionId:null,hasVideo:Wn&&Wn.hasVideo,subscribeToVideo:Fn.subscribeToVideo,congestionLevel:on,streamId:Wn.id,subscriberId:Zi,duration:Math.round((b()-rs)/1e3),remoteConnectionId:Lt,peerId:Dt,sourceStreamId:Vt(Qt),preferredResolutionHeight:null==(Ve=Fn.preferredResolution)?void 0:Ve.height,preferredResolutionWidth:null==(ze=Fn.preferredResolution)?void 0:ze.width,preferredFrameRate:Fn.preferredFrameRate,audioFallback:!qo&&"auto"===jo},Hr=c(hr,Ze);Qn.logQOS(Hr),this.trigger("qos",(0,r.default)({},Qn.commonQoSFields(),Hr))},fo=()=>{Xr.isSubscribing()||!kt||!kt.video()||(Jo=!0,ln||(Ur.connect(),ln=!0),Nt.debug("OT.Subscriber.onLoaded"),Xr.set("Subscribing"),rs=b(),kt.loading(!1),Jr&&Jr.showAfterLoading(),Pe&&Wn.setRestrictFrameRate(!0),co&&co.audioOnly(kt.audioOnly()),this.setAudioVolume(ke),this.trigger("loaded",this))},Go=()=>Wn&&Wn.hasAudio&&zo&&this.getAudioVolume()>0&&!this.isAudioBlocked(),_n=Ee=>{let ze=!1;if(("audioLevelStuckAt0"!==Ee||!(!Go()||Wn&&Wn.hasVideo))&&(Ut("subscriber:onAudioWarning","Event",{reason:Ee}),kt)){if(kt.rebindSrcObject(),Ut("subscriber:rebindSrcObject","Called"),"audioLevelStuck"===Ee)return;ze=!0}Pi(ze)},Pi=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(void 0===ze&&(ze=!1),!mo){Dt.next=6;break}return Dt.next=4,J();case 4:Dt.sent.startAudioStatsWatcher(ze);case 6:case"end":return Dt.stop()}},Ve)}));return function(ze){return Ee.apply(this,arguments)}}(),pn=()=>{Nt.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),Ur.fail({options:{failureReason:"PeerConnectionError",failureCode:Yr.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:Wi($i.DISCONNECTED,new Error("ClientDisconnected"))}),this._disconnect({noStateTransition:!0}),(Xr.isAttemptingToSubscribe()||Xr.isSubscribing())&&Xr.set("Failed")},wo=Ee=>{const Ve=Wi($i.MEDIA_ERR_DECODE,Ee,Ee.code||Yr.P2P_CONNECTION_FAILED);Ve.message=`OT.Subscriber while playing stream: ${Ve.message}`,Nt.error("OT.Subscriber.onVideoError"),Ur.fail({options:{failureReason:"VideoElement",failureMessage:Ve.message,failureCode:Ve.code||Yr.P2P_CONNECTION_FAILED},error:Ve});const ze=Xr.isAttemptingToSubscribe();Xr.set("Failed"),ze||Qi.trigger("error",Ve.message),Ri.handleJsException({error:Ve,code:Yr.UNABLE_TO_SUBSCRIBE,target:Qi,analytics:Qn})},vo=Ee=>{const Ve=D(Ee);Ri.handleJsException({error:Ve,code:Ve.code,target:Qi,analytics:Qn}),this._disconnect({noStateTransition:!0});const ze={failureReason:"Subscribe",failureMessage:`OT.Subscriber PeerConnection Error: ${Ve.message}`,failureCode:Yr.P2P_CONNECTION_FAILED};eo(Ve.code,Ve.message),Ur.fail({options:ze,error:Wi(Ve.name,new Error(`Subscribe: Subscriber PeerConnection with connection (not found) failed: ${Ve.message}`),Ve.code)}),Ve.name===W.STREAM_NOT_FOUND&&this._destroy({reason:"streamNotFound",noStateTransition:!0})},ui=(Ee,Ve,ze,Ze)=>{if("SetRemoteDescription"===Ze&&!xn&&Ve.match(/Unsupported video without audio for fallback/)){let hr;return kt&&kt.addError("The stream is unable to be played.","Your browser does not support the video format."),hr="Safari"===Mo.env.name?new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):new Error("Video format not supported in this browser."),hr.code=Yr.UNSUPPORTED_VIDEO_CODEC,void wo(hr)}if("ICEWorkflow"===Ze&&Er.sessionInfo.reconnection&&Jo)return void Nt.debug("Ignoring peer connection failure due to possibility of reconnection.");let Lt;Lt="ICEWorkflow"===Ze?Yr.SUBSCRIBER_ICE_WORKFLOW_FAILED:Ee===Yr.STREAM_LIMIT_EXCEEDED?Ee:Yr.P2P_CONNECTION_FAILED;const Dt={failureReason:Ze||"PeerConnectionError",failureMessage:`OT.Subscriber PeerConnection Error: ${Ve}`,failureCode:Lt},Qt=Hn(Ee,Ve,Ze,"(not found)","Subscriber");if(Ur.fail({options:Dt,error:Qt}),Xr.isAttemptingToSubscribe()){const hr={hasRelayCandidates:ze&&ze.hasRelayCandidates()};Ut("createPeerConnection","Failure",hr,Dt),Xr.set("Failed")}else Xr.isSubscribing()&&(Xr.set("Failed"),this.trigger("error",Ve));this._disconnect({noStateTransition:!0}),404===Number(Ee)&&this._destroy({noStateTransition:!0}),Ri.handleJsException({error:Qt,errorMsg:`OT.Subscriber PeerConnection Error: ${Ve}`,code:Lt,target:this,analytics:Qn}),eo(Ee)},Yn=Ee=>{const Ve=Ee._hasVideoTracks(),ze=Ee._hasAudioTracks();return!(Wn&&Wn.hasVideo&&!Ve||Wn&&Wn.hasAudio&&!ze)},hi=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze,Ze){return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.prev=0,Dt.next=3,N(()=>Yn(Ze));case 3:Dt.next=12;break;case 5:if(Dt.prev=5,Dt.t0=Dt.catch(0),"TIMEOUT"!==Dt.t0.message){Dt.next=11;break}Nt.error("The expected tracks never arrived"),Dt.next=12;break;case 11:throw Dt.t0;case 12:return Dt.next=14,Ci(ze.stream,Ze);case 14:case"end":return Dt.stop()}},Ve,null,[[0,5]])}));return function(ze,Ze){return Ee.apply(this,arguments)}}(),Ci=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze,Ze){var Lt,Dt,hr,Hr,ur,ri,sr;return e.default.wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return To=ze,Lt=1===Object.keys(ao).length,Dt=null==Ze?void 0:Ze.getSourceStreamId(),hr=Er.sessionInfo,bi=ze,Dt&&(ao[Dt]=ze),Nt.debug("OT.Subscriber.onRemoteStreamAdded with sourceStreamId",Dt),Xr.set("BindingRemoteStream"),ti.subscribeToAudio(zo),jo="loading",ti.subscribeToVideo(Fn.subscribeToVideo,"loading"),!hr.p2pEnabled&&"P2P"!==Dt&&(ti.setPreferredResolution(Fn.preferredResolution),ti.setPreferredFrameRate(Fn.preferredFrameRate)),Ze&&Ze._getVideoTracks().forEach(ar=>{ar.enabled=!(void 0!==typeof window?window:global).webkitMediaStream&&Wn.hasVideo&&Fn.subscribeToVideo}),pr.next=16,rt(To);case 16:if(Pi(),!Xr.isDestroyed()){pr.next=19;break}throw new Error("Subscriber destroyed");case 19:return Ze&&(void 0!==typeof window?window:global).webkitMediaStream&&Ze._getVideoTracks().forEach(ar=>{ar.enabled=Wn.hasVideo&&Fn.subscribeToVideo}),(Hr=kt&&kt.video())&&Hr.orientation({width:Wn.videoDimensions.width,height:Wn.videoDimensions.height,videoOrientation:Wn.videoDimensions.orientation}),(ur=Jr&&Jr.videoUnsupportedIndicator)&&ur.setVideoUnsupported(!xn),ri=new n((ar,Ai)=>{const gr=kt&&kt.video();gr&&gr.domElement()?ar():(kt.once("videoElementCreated",ar),Qi.once("destroyed",Ai))}),pr.next=27,ri;case 27:return pr.next=29,Mn.promise;case 29:Lt?Xr.set("Subscribing"):fo(),Co&&"webRTCStream"in Co&&Ze._hasAudioTracks()&&Co.webRTCStream(ze),((sr=Mo.env).isSafari||sr.isChromiumEdge||sr.isOpera||"Chrome"===sr.name&&sr.version>=58||sr.isFirefox&&sr.version>=96)&&(He&&(He.destroy(),He=null),Ze&&(He=vn(Ze.getStats.bind(Ze)))),Lt||ti.trigger("streamAdded",ti);case 34:case"end":return pr.stop()}},Ve)}));return function(ze,Ze){return Ee.apply(this,arguments)}}(),_i=Ee=>{Nt.debug("OT.Subscriber.onStreamRemoved");const Ve=kt&&kt.video();Ve&&Ve.stream===Ee&&kt.destroyVideo(),we(yn),To=null,this.trigger("streamRemoved",this)},ro=Ee=>{xn!==Ee&&this.dispatchEvent(new On.VideoEnabledChangedEvent(Ee?"videoEnabled":"videoDisabled",{reason:Ee?"codecChanged":"codecNotSupported"})),xn=Ee},qi=Ee=>{kt.setAudioBlockedUi(Ee);const Ve=Jr&&Jr.audioBlockedIndicator;Ve&&Ve.setAudioBlocked(Ee);const ze=Jr&&Jr.videoUnsupportedIndicator;ze&&ze.setVideoUnsupported(!Ee&&!xn)};this.on("audioBlocked",()=>{qi(!0)}),this.on("audioUnblocked",()=>{qi(!1)});const yo={new:C.SUBSCRIBER_DISCONNECTED,checking:C.SUBSCRIBER_DISCONNECTED,connected:C.SUBSCRIBER_CONNECTED,completed:C.SUBSCRIBER_CONNECTED,disconnected:C.SUBSCRIBER_DISCONNECTED},Ui=(Ee,Ve)=>{const ze=yo[Ee],Ze=Ve.getSourceStreamId();ze&&ze!==Eo[Ze]&&(Eo[Ze]=ze,"disconnected"===Ee&&"P2P"!==Ze&&setTimeout((0,o.default)(e.default.mark(function Qt(){var hr;return e.default.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(hr=Er._.isSocketReconnecting,"disconnected"!==Eo[Ze]||!Bi.is("connected")||hr()){ur.next=4;break}return ur.next=4,ti._.iceRestart("peer connection disconnected");case 4:case"end":return ur.stop()}},Qt)})),2e3),kt&&kt.loading(ze!==C.SUBSCRIBER_CONNECTED),Nt.debug(`OT.Subscriber.connectionStateChanged to ${Ee}`),this.dispatchEvent(new On.ConnectionStateChangedEvent(ze,this)))},Yi=()=>{Kr("Success")},Ro=()=>{Kr("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})};Fi={get:()=>Wn.getChannelsOfType("audio").length>0?Qi.getStyle("buttonDisplayMode"):"off",update(){const Ee=Fi.get();Jr&&(Jr.muteButton.setDisplayMode(Ee),Jr.backingBar.setMuteMode(Ee))}};const eo=(Ee,Ve)=>{let ze,Ze;kt&&(Ee===Yr.STREAM_LIMIT_EXCEEDED?(ze="The stream was unable to connect.",Ze="The limit for the number of media streams has been reached."):"Tried to subscribe to an encrypted stream without enabling encryption"===Ve?(ze="Unable to subscribe to an encrypted stream without enabling encryption.",Ze=""):(ze="The stream was unable to connect due to a network error.",Ze=ln?"Ensure you have a stable connection and try again.":"Make sure you have a stable network connection and that it isn't blocked by a firewall."),kt.addError(ze,Ze))};function ni(Ee){Xo().forEach(function(){var ze=(0,o.default)(e.default.mark(function Ze(Lt){return e.default.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:return Qt.next=2,Lt;case 2:Qt.sent.subscribeToVideo(!Ee);case 3:case"end":return Qt.stop()}},Ze)}));return function(Ze){return ze.apply(this,arguments)}}());const Ve=Ee||!To||!To.getVideoTracks().length;kt&&(kt.audioOnly(Ve),kt.showPoster(Ve)),co&&co.audioOnly(Ve)}es(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},Fn.showControls,Ee=>{Ut("SetStyle","Subscriber",Ee,null,.1)});const Ce=h(()=>{Ut("GetStats","Called")}),be=h(()=>{Ut("GetRtcStatsReport","Called")}),xe=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){return e.default.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Bo&&(Bo.destroy(),Bo=void 0),Lt.prev=1,Lt.next=4,N(()=>ze._hasAudioTracks());case 4:Lt.next=9;break;case 6:return Lt.prev=6,Lt.t0=Lt.catch(1),Lt.abrupt("return");case 9:Co=mi(ze),Co?Bo=oe({subscriber:ti,audioLevelSampler:Co}):Object.prototype.hasOwnProperty.call(ti,"loudness")||(Object.defineProperty(ti,"loudness",{value:void 0,configurable:!0,writable:!1}),Nt.error("No suitable audio level samplers found, audio level visualisation will not work"));case 11:case"end":return Lt.stop()}},Ve,null,[[1,6]])}));return function(ze){return Ee.apply(this,arguments)}}(),Fe=(Ee,Ve)=>{if(Ao[Ve]){Ao[Ve].removeAll();const Ze=()=>{Ee.off("error",Ze),Ee.off("disconnected",Ze)};Ee.on("error",Ze),Ee.on("disconnected",Ze)}const ze=L(Ee);ze.once("connected",()=>(Ee=>{Si&&"P2P"===Ee.getSourceStreamId()&&xi("Success")})(Ee)),ze.on("disconnected",pn),ze.on("error",ui),ze.once("remoteTrackAdded",(0,o.default)(e.default.mark(function Ze(){var Lt=arguments;return e.default.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:return Qt.next=2,xe(Ee);case 2:return Qt.prev=2,Qt.next=5,hi(...Lt);case 5:Qt.next=10;break;case 7:Qt.prev=7,Qt.t0=Qt.catch(2),Nt.error(Qt.t0);case 10:case"end":return Qt.stop()}},Ze,null,[[2,7]])}))),ze.on("audioLevelStuckWarning",_n),ze.on("signalingStateStable",(0,o.default)(e.default.mark(function Ze(){return e.default.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:Qi.trigger("signalingStateStable"),kt&&kt.video()&&bi&&Co&&"webRTCStream"in Co&&Ee._hasAudioTracks()&&Co.webRTCStream(bi);case 3:case"end":return Qt.stop()}},Ze)}))),ze.on("iceConnectionStateChange",Ze=>Ui(Ze,Ee)),ze.on("iceRestartSuccess",Yi),ze.on("iceRestartFailure",Ro),ze.on("remoteVideoSupported",ro),ze.on("remoteStreamRemoved",_i),ze.on("decryptFailed",()=>this.trigger("encryptionSecretMismatch")),ze.on("decryptRestored",()=>this.trigger("encryptionSecretMatch")),Ao[Ve]=Ao};this._destroy=Ee=>{let Ve=Ee.reason,ze=void 0===Ve?"Unknown":Ve,Ze=Ee.quiet,Lt=Ee.noStateTransition,Dt=void 0!==Lt&&Lt;return Xr.isDestroyed()||(Xr.set("Destroyed"),He&&(He.destroy(),He=null),it={sessionId:Er.sessionId,connectionId:Er&&Er.isConnected()?Er.connection.connectionId:null,partnerId:Er&&Er.sessionInfo?Er.sessionInfo.partnerId:null,streamId:Wn&&!Wn.destroyed?Wn.id:null},this._disconnect({reason:ze,noStateTransition:Dt}),Jr&&(Jr.destroy(),Jr=null),kt&&(kt.destroy(),kt.off(),kt=null,this.element=null),Wn&&!Wn.destroyed&&Ut("unsubscribe",null,{streamId:Wn.id}),Wn.off(ns,this),this.id=null,_o=null,this.stream=null,Wn=null,this.streamId=null,this.session=null,Er=null,Fn=null,!0!==Ze&&(this.dispatchEvent(new On.DestroyedEvent(C.SUBSCRIBER_DESTROYED,this,ze)),this.off())),this},this.destroy=function(Ee,Ve){void 0===Ee&&(Ee="Unsubscribe"),Nt.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),ti._destroy({reason:Ee,quiet:Ve})},this._disconnect=function(Ee){let Ve=void 0===Ee?{}:Ee,ze=Ve.reason,Ze=void 0===ze?"Unknown":ze;if(!Ve.noStateTransition&&!Ur.is("disconnected")){const Dt="Unsubscribe"===Ze?void 0:Wi($i.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));Ur.disconnect({payload:{reason:Ze},error:Dt})}!Xr.isDestroyed()&&!Xr.isFailed()&&Xr.set("NotSubscribing"),kt&&kt.destroyVideo(),Bi.is("connected")&&Wn&&!Wn.destroyed&&Bi.subscriberDestroy(Wn.id,ti.widgetId),Re()},this.disconnect=()=>{Nt.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),this._disconnect({reason:"Unsubscribe"})};const _e=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){var Ze,Lt,Dt,Qt,hr;return e.default.wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return Ze=ze.peerId,Lt=ze.fromConnectionId,Dt=ze.sourceStreamId,Qt=["/v2/partner",(bn={apiKey:Er.apiKey,sessionId:Er.sessionId,streamId:Wn.id,subscriberId:ti.widgetId}).apiKey,"session",bn.sessionId,"stream",bn.streamId,"subscriber",bn.subscriberId].join("/"),hr=$r({socket:ti.session._.getSocket(),uri:Qt,content:{peerId:Ze,sourceStreamId:Dt}}),sr.abrupt("return",ti._setupPeerConnection({send:hr,log:function(pr,ar,Ai,gr,Sr){void 0===gr&&(gr={});const ho=(0,r.default)({peerId:Ze,sourceStreamId:Vt(Dt)},gr);return Ut(pr,ar,Ai,ho,Sr)},logQoS:di=>{yn===Dt&&ii((0,r.default)({},di,{peerId:Ze,remoteConnectionId:Lt,sourceStreamId:Dt}))},sourceStreamId:Dt}));case 6:case"end":return sr.stop()}var bn},Ve)}));return function(ze){return Ee.apply(this,arguments)}}();function ot(Ee){const Ve=kt&&kt.video();if(Ve)try{Ve.setAudioVolume(Ee)}catch(ze){Nt.warn(`setAudioVolume: ${ze}`),0===ke&&(Nt.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),Qi.subscribeToAudio(!1))}Jr&&Jr.muteButton.muted(0===Ee)}this.processMessage=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze,Ze,Lt){var Dt,Qt,hr;return e.default.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return Nt.debug(`OT.Subscriber.processMessage: Received ${ze} message from ${Ze}`),Nt.debug(Lt),Dt=l(Lt,"content.peerId"),Qt=l(Lt,"content.sourceStreamId"),ur.next=6,ue(Qt);case 6:if(!(hr=ur.sent)){ur.next=11;break}hr.processMessage(ze,Lt),ur.next=16;break;case 11:if("offer"!==ze){ur.next=16;break}return ur.next=14,_e({peerId:Dt,fromConnectionId:Ze,sourceStreamId:Qt});case 14:ti.session._.addSubscriberToPeerConnectionsQueue(hr=ur.sent,Lt);case 16:case"end":return ur.stop()}},Ve)}));return function(Ve,ze,Ze){return Ee.apply(this,arguments)}}(),this.disableVideo=Ee=>{if(Ee){if("auto"!==jo)return void Nt.info("Video was not re-enabled because it was manually disabled");Nt.info("Video has been re-enabled")}else Nt.warn("Due to high packet loss and low bandwidth, video has been disabled");this.subscribeToVideo(Ee,"auto"),Ut("updateQuality","video",Ee?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=()=>{if(!this.isSubscribing())return Nt.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;const Ee=kt&&kt.video();return Ee?Ee.imgData():null},this.getStats=Ee=>{(Ee=>{yt(Ee)})((Ve,ze)=>{if(Ve)return void Ee(Ve);const Ze={timestamp:0};ze.forEach(Lt=>{if(yr.isInboundStat(Lt)){const Dt=yr.isVideoStat(Lt,ze),Qt=yr.isAudioStat(Lt,ze);(Qt||Dt)&&(Ze.timestamp=yr.normalizeTimestamp(Lt.timestamp)),Dt?(a(Ze,{video:yr.parseStatCategory(Lt)}),He&&a(Ze,{video:{frameRate:He.getFrameRateFromStat(Lt)}})):Qt&&a(Ze,{audio:yr.parseStatCategory(Lt)})}}),Ee(null,Ze)})},this.getRtcStatsReport=()=>new n((Ee,Ve)=>{(Ee=>{yt("rtcStatsReport",Ee)})((ze,Ze)=>{ze?Ve(ze):Ee(Ze)})}),this.setAudioVolume=Ee=>{const Ve=function Jt(bn){return Math.max(0,Math.min(100,parseInt(bn,10)))}(Ee);return Ut("setAudioVolume","Attempt",{audioVolume:Ve}),isNaN(Ve)?(Nt.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),Ut("setAudioVolume","Failure",{message:"value should be an integer between 0 and 100"}),this):(Ve!==Ee&&Nt.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),Ve===ke?(ot(ke),Ut("setAudioVolume","Success",{audioVolume:ke,message:"Requested volume is same as already set audioVolume"}),this):(ke>0&&(_=ke),ke=Ve,ot(ke),ke>0&&!zo&&(_=ke,this.subscribeToAudio(!0)),Ut("setAudioVolume","Success",{audioVolume:ke}),this))},this.getAudioVolume=()=>{const Ee=kt&&kt.video();if(Ee)try{return Ee.getAudioVolume()}catch(Ve){Nt.warn(`getAudioVolume ${Ve}`)}return ke},this.subscribeToAudio=Ee=>{const Ve=T(Ee,!0);Xo().forEach(function(){var Ze=(0,o.default)(e.default.mark(function Lt(Dt){return e.default.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,Dt;case 2:hr.sent.subscribeToAudio(Ve);case 3:case"end":return hr.stop()}},Lt)}));return function(Lt){return Ze.apply(this,arguments)}}()),Wn&&0!==Xo().length&&Wn.setChannelActiveState("audio",Ve);const ze=zo!==Ve;return zo=Ve,ze&&this.setAudioVolume(Ve?_:0),Ut("subscribeToAudio","Event",{subscribeToAudio:Ve}),this};const It={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if("Safari"===Ir.name){const Ee=()=>{!jt.hidden&&Fn.subscribeToVideo&&(Nt.debug("document visibility restored in Safari - resubscribing to video"),this.subscribeToVideo(!1),this.subscribeToVideo(!0))};jt.addEventListener("visibilitychange",Ee),this.once("destroyed",()=>{jt.removeEventListener("visibilitychange",Ee)})}if(this.subscribeToVideo=(Ee,Ve)=>{const ze=T(Ee,!0);return Ut("subscribeToVideo","Attempt",{subscribeToVideo:ze,reason:Ve}),ni(!ze||!Wn.hasVideo||!bi),Wn.hasVideo&&!br("video")?(ze&&Nt.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),Fn.subscribeToVideo=!1,Ut("subscribeToVideo","Failure",{message:"No video tracks available"}),this):(Jr&&Jr.videoDisabledIndicator&&Jr.videoDisabledIndicator.disableVideo("auto"===Ve&&!ze),Xo().length>0&&Er&&Wn&&(ze!==Fn.subscribeToVideo||Ve!==jo)&&Wn.setChannelActiveState("video",ze,Ve),Fn.subscribeToVideo=ze,jo=Ve,qo=ze,Ut("subscribeToVideo","Success",{subscribeToVideo:ze,reason:Ve}),"loading"!==Ve&&(this.dispatchEvent(new On.VideoEnabledChangedEvent(ze?"videoEnabled":"videoDisabled",{reason:It[Ve]||"subscribeToVideo"})),"videoDisabled"===ze&&"auto"===Ve&&(on=2)),this)},this.setPreferredResolution=Ee=>{if(Xr.isDestroyed()||0===Xo().length&&"Connecting"===!Xr.current)return void Nt.warn("Cannot set the max Resolution when not subscribing to a publisher");if(Fn.preferredResolution=Ee,Er.sessionInfo.p2pEnabled)return void Nt.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");if(!Xr.isStreamAdded())return;const Ve=Wn.getPreferredResolution();Ve&&Ee&&Ve.width===Ee.width&&Ve.height===Ee.height||!Ve&&!Ee||Wn.setPreferredResolution(Ee)},this.setPreferredFrameRate=Ee=>{if(Xr.isDestroyed()||0===Xo().length&&"Connecting"===!Xr.current)return void Nt.warn("Cannot set the max frameRate when not subscribing to a publisher");if(Fn.preferredFrameRate=Ee,Er.sessionInfo.p2pEnabled)return void Nt.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session");const Ve=Wn.getPreferredFrameRate();Ee&&Ve&&Ve===Ee||!Ve&&!Ee||Wn.setPreferredFrameRate(Ee)},this.isSubscribing=()=>Xr.isSubscribing(),this.isWebRTC=!0,this.isLoading=()=>kt&&kt.loading(),this.isAudioBlocked=()=>Boolean(kt&&kt.isAudioBlocked()),this.videoElement=()=>{const Ee=kt&&kt.video();return Ee?Ee.domElement():null},this.videoWidth=()=>{const Ee=kt&&kt.video();return Ee?Ee.videoWidth():void 0},this.videoHeight=()=>{const Ee=kt&&kt.video();return Ee?Ee.videoHeight():void 0},this._subscribeToSelf=(0,o.default)(e.default.mark(function Ee(){var Ve;return e.default.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if((Ve=Er.getPublisherForStream(Wn))&&Ve._.webRtcStream()){Ze.next=5;break}Ur.fail({payload:{reason:"streamNotFound"},error:Wi($i.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),Ze.next=14;break;case 5:return Mn.resolve(),Ze.prev=6,Ze.next=9,Ci(Ve._.webRtcStream());case 9:Ze.next=14;break;case 11:Ze.prev=11,Ze.t0=Ze.catch(6),Nt.error(Ze.t0);case 14:case"end":return Ze.stop()}},Ee,null,[[6,11]])})),this._setupPeerConnection=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){var Ze,Lt,Dt,Qt;return e.default.wrap(function(Hr){for(;;)switch(Hr.prev=Hr.next){case 0:return Ze=ze.send,Lt=ze.log,Dt=ze.logQoS,Qt=ze.sourceStreamId,Fn.testNetwork&&ti.setAudioVolume(0),0===Xo().length&&Xr.set("Connecting"),yn=Qt,Lo[Qt]=new n((ur,ri)=>{Er._.getIceConfig().then(sr=>{sr.needRumorIceServersFallback&&(sr.servers=[...tr||[],...sr.servers||[]]);const di={iceConfig:sr,subscriberId:ti.widgetId,send:Ze,logAnalyticsEvent:Lt,p2p:Er.sessionInfo.p2pEnabled,sourceStreamId:Qt,remoteConnectionId:Wn.connection.id,_singlePeerConnectionController:"MANTIS"===Qt&&us,keyStore:Er.keyStore,sFrameClientStore:Er.sFrameClientStore,isE2ee:Er._.isE2ee()};Object.prototype.hasOwnProperty.call(Fn,"codecFlags")&&(di.codecFlags=Fn.codecFlags);const pr=new yi.SubscriberPeerConnection(di);pr.once("iceConnected",Mn.resolve),pr.once("error",Mn.reject),pr.on("qos",Dt),Fe(pr,Qt),pr.init(ar=>{ar?ri(ar):ur(pr)})})}),Hr.abrupt("return",Lo[Qt]);case 6:case"end":return Hr.stop()}},Ve)}));return function(Ve){return Ee.apply(this,arguments)}}(),this.restrictFrameRate=Ee=>(Nt.debug(`OT.Subscriber.restrictFrameRate(${Ee})`),Ut("restrictFrameRate",Ee.toString(),{streamId:Wn.id}),Er.sessionInfo.p2pEnabled&&Nt.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),"boolean"!=typeof Ee?Nt.error("OT.Subscriber.restrictFrameRate: expected a boolean value got a "+typeof Ee):(Pe=Ee,Wn.setRestrictFrameRate(Ee)),this),this.on("styleValueChanged",(Ee,Ve)=>{if(Jr)switch(Ee){case"nameDisplayMode":Jr.name.setDisplayMode(Ve),Jr.backingBar.setNameMode(Ve);break;case"videoUnsupportedDisplayMode":Jr.videoUnsupportedIndicator.setDisplayMode(Ve);break;case"videoDisabledDisplayMode":Jr.videoDisabledIndicator.setDisplayMode(Ve);break;case"audioBlockedDisplayMode":Jr.audioBlockedIndicator.setDisplayMode(Ve);break;case"showArchiveStatus":Jr.archive.setShowArchiveStatus(Ve);break;case"buttonDisplayMode":Fi.update();break;case"audioLevelDisplayMode":Jr.audioLevel.setDisplayMode(Ve);break;case"bugDisplayMode":break;case"backgroundImageURI":kt.setBackgroundImageURI(Ve)}},this),this._={getDataChannel:(Ee,Ve,ze)=>(0,o.default)(e.default.mark(function Ze(){return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(J()){Dt.next=3;break}return ze(new Mo.Error("Cannot create a DataChannel before there is a publisher connection.")),Dt.abrupt("return");case 3:return Dt.next=5,J();case 5:Dt.sent.getDataChannel(Ee,Ve,ze);case 6:case"end":return Dt.stop()}},Ze)}))(),iceRestart:Ee=>(0,o.default)(e.default.mark(function Ve(){var ze;return e.default.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return Lt.next=2,ue("MANTIS");case 2:(ze=Lt.sent)?(Kr("Attempt",{reason:Ee}),Nt.debug("Subscriber: iceRestart attempt"),ze.iceRestart()):Nt.debug("Subscriber: Skipping ice restart, we have no peer connection");case 4:case"end":return Lt.stop()}},Ve)}))(),unblockAudio:()=>kt&&kt.unblockAudio(),webRtcStream:()=>bi,setIceConfig:(Ee=(0,o.default)(e.default.mark(function ze(Ze){return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:Xo().forEach(function(){var Qt=(0,o.default)(e.default.mark(function hr(Hr){return e.default.wrap(function(ri){for(;;)switch(ri.prev=ri.next){case 0:return ri.next=2,Hr;case 2:return ri.abrupt("return",ri.sent.setIceConfig(Ze));case 3:case"end":return ri.stop()}},hr)}));return function(hr){return Qt.apply(this,arguments)}}());case 1:case"end":return Dt.stop()}},ze)})),function Ve(ze){return Ee.apply(this,arguments)}),privateEvents:new v,startRoutedToRelayedTransition:()=>(0,o.default)(e.default.mark(function Ee(){var Ve;return e.default.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(!Fn.testNetwork&&!Rn(Wn,Er)){Ze.next=2;break}return Ze.abrupt("return");case 2:return xi("Attempt"),Ze.next=5,ue("MANTIS");case 5:if(null!=(Ve=Ze.sent)&&Ve.iceConnectionStateIsConnected()){Ze.next=9;break}return xi("Failure",{reason:"Attempted to transition to Relayed without being connected in Routed mode."}),Ze.abrupt("return");case 9:Bi.subscriberCreate(Wn.id,Zi,hn,"P2P",Er._.isE2ee(),(Lt,Dt)=>{Lt&&!Ur.is("disconnected")&&xi("Failure",Lt),Nt.debug("message received when created a subscriber with source",Dt)});case 10:case"end":return Ze.stop()}},Ee)}))(),startRelayedToRoutedTransition:()=>(0,o.default)(e.default.mark(function Ee(){var Ze;return e.default.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!Fn.testNetwork&&!Rn(Wn,Er)){Dt.next=2;break}return Dt.abrupt("return");case 2:ci("Attempt"),bi=ao.MANTIS,To=bi,Dt.next=11;break;case 9:To=new MediaStream(Dt.sent._getTracks());case 11:return Dt.next=13,rt(To);case 13:return kt.loading(!1),le("P2P"),yn="MANTIS",we("P2P"),Dt.next=19,J();case 19:return Ze=Dt.sent,Dt.next=22,xe(Ze);case 22:ci("Success");case 23:case"end":return Dt.stop()}},Ee)}))(),setSinkId(Ee){if(kt&&kt.video())return kt.setSinkId(Ee);Nt.debug("Called setAudioOutputDevice on a subscriber without a video element")},pauseAndPlayVideoElement(){kt&&kt.pauseAndPlayVideoElement()}},Xr=new fi(Ee=>{Nt.error("OT.Subscriber State Change Failed: ",Ee.message),Nt.debug(Ee)}),Nt.debug(`OT.Subscriber: subscribe to ${Wn.id}`),Xr.set("Init"),!Wn)return Nt.error("OT.Subscriber: No stream parameter."),!1;var Ee;ns={updated:Ee=>{const Ve=kt&&kt.video();switch(Ee.changedProperty){case"videoDimensions":if(!Ve)break;Ve.orientation({width:Ee.newValue.width,height:Ee.newValue.height,videoOrientation:Ee.newValue.orientation}),this.dispatchEvent(new On.VideoDimensionsChangedEvent(this,Ee.oldValue,Ee.newValue));break;case"videoDisableWarning":Jr&&Jr.videoDisabledIndicator.setWarning(Ee.newValue),this.dispatchEvent(new On.VideoDisableWarningEvent(Ee.newValue?"videoDisableWarning":"videoDisableWarningLifted")),on="videoDisableWarning"===Ee.newValue?1:null;break;case"hasVideo":ni(!Wn.hasVideo||!Fn.subscribeToVideo),Ir.isSafari&&!Wn.hasVideo&&kt&&kt.bindAudioTrackOnly(),this.dispatchEvent(new On.VideoEnabledChangedEvent(Wn.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":Fi.update()}}},Wn.on(ns,this),Fn.name=Fn.name||Wn.name,Fn.classNames="OT_root OT_subscriber",Fn.style&&this.setStyle(Fn.style,null,!0),_=100,Fn.subscribeToVideo=T(Fn.subscribeToVideo,!0),Fn.subscribeToAudio=T(Fn.subscribeToAudio,!0),this.subscribeToAudio(Fn.subscribeToAudio),this.setAudioVolume(function Mr(bn){return void 0!==bn.audioVolume?bn.audioVolume:!1===bn.subscribeToAudio?0:100}(Fn)),kt=new yi.WidgetView(Br,(0,r.default)({},Fn,{widgetType:"subscriber"})),kt.on("error",wo),kt.on("audioBlocked",()=>this.trigger("audioBlocked")),kt.on("audioUnblocked",()=>this.trigger("audioUnblocked")),kt.on("amrLogEvent",(Ee,Ve,ze)=>{Ut(Ee,Ve,{},ze)}),this.id=kt.domId(),_o=kt.domId(),this.element=kt.domElement,kt.on("videoElementCreated",Ee=>{const Ve=new On.VideoElementCreatedEvent(Ee),ze=this;Jo?this.dispatchEvent(Ve):this.once("loaded",()=>{ze.dispatchEvent(Ve)})}),this.element&&(()=>{const Ee={backingBar:new uo({nameMode:Fn.name?this.getStyle("nameDisplayMode"):"off",muteMode:Fi.get()}),name:new dr({name:Fn.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new Fo({muted:0===ke,mode:Fi.get()})};if(ai){const Ve=new Gr;co=new Ti({mode:Qi.getStyle("audioLevelDisplayMode")});const ze=new k(()=>{co.setValue(Ve.transform(this.loudness))});co.watchVisibilityChanged(Ze=>{Ze?ze.start():ze.stop()}),co.setDisplayMode(this.getStyle("audioLevelDisplayMode")),co.audioOnly(!1),Ee.audioLevel=co}Ee.videoDisabledIndicator=new Qo({mode:this.getStyle("videoDisabledDisplayMode")}),Ee.audioBlockedIndicator=new Yt({mode:this.getStyle("audioBlockedDisplayMode")}),Ee.videoUnsupportedIndicator=new Sn({mode:this.getStyle("videoUnsupportedDisplayMode")}),kt&&kt.domElement&&(Jr=new qr({parent:kt.domElement}).set(Ee).on({muted(){Qi.setAudioVolume(0)},unmuted(){Qi.setAudioVolume(_)}},this),Jr.hideWhileLoading())}).call(this);const dt=Wn.getChannelsOfType("audio"),tn=Wn.getChannelsOfType("video"),mt=Wn.getChannelsOfType("data");let Gt=mt.some(Ee=>"caption1"===Ee.id&&Ee.active);this.subscribeToCaptions=function(){var Ee=(0,o.default)(e.default.mark(function Ve(ze){var Ze,Lt;return e.default.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:Ze=T(ze,!0),Lt={active:Ze},Gt=Ze,Ut("subscribeToCaptions","Attempt",{subscribeToCaptions:Ze}),Bi.subscriberChannelUpdate(Wn.id,ti.widgetId,"caption1",Lt),Ut("subscribeToCaptions","Success",{subscribeToCaptions:Ze});case 6:case"end":return Qt.stop()}},Ve)}));return function(Ve){return Ee.apply(this,arguments)}}(),this.isSubscribedToCaptions=()=>Gt;const hn=dt.map(Ee=>({id:Ee.id,type:Ee.type,active:Fn.subscribeToAudio})).concat(tn.map(Ee=>{const Ve={id:Ee.id,type:Ee.type,active:Fn.subscribeToVideo,restrictFrameRate:void 0!==Fn.restrictFrameRate&&Fn.restrictFrameRate};return void 0!==Fn.preferredFrameRate&&(Ve.preferredFrameRate=parseFloat(Fn.preferredFrameRate)),void 0!==Fn.preferredHeight&&(Ve.preferredHeight=parseInt(Fn.preferredHeight,10)),void 0!==Fn.preferredWidth&&(Ve.preferredWidth=parseInt(Fn.preferredWidth,10)),Ve})).concat(mt.map(Ee=>({id:Ee.id,type:Ee.type,active:Ee.active}))),Pt=!Fn.testNetwork&&Rn(Wn,Er);return Ur.beginConnect(),Pt?(this._subscribeToSelf(),this):(Bi.subscriberCreate(Wn.id,Zi,hn,null,Er._.isE2ee(),(Ee,Ve)=>{Ee&&!Ur.is("disconnected")&&vo(Ee),tr=Ot(Ve)}),this)};return mr.hasAudioOutputLevelStatCapability=void 0===Cr?ce:Cr,mr.WidgetView=gn,mr.SubscriberPeerConnection=ts,mr}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(3);d.exports=()=>["Chrome","Opera","Safari"].indexOf(n.name)>-1},function(d,E,t){"use strict";const i=t(3).name;d.exports=()=>["Firefox","Safari","Edge","Chrome","Opera"].indexOf(i)>-1},function(d,E,t){"use strict";const o=t(160)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed","BindingRemoteStream"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});o.prototype.isDestroyed=function(){return"Destroyed"===this.current},o.prototype.isFailed=function(){return"Failed"===this.current},o.prototype.isSubscribing=function(){return"Subscribing"===this.current},o.prototype.isAttemptingToSubscribe=function(){return-1!==["Init","Connecting","BindingRemoteStream"].indexOf(this.current)},o.prototype.isStreamAdded=function(){return"BindingRemoteStream"===this.current||this.isSubscribing()},d.exports=o},function(d,E,t){"use strict";var i=t(1)(t(19));d.exports=r=>{let e=r.socket,o=r.uri,s=r.content;return(a,c)=>e.send({uri:o,method:a,content:(0,i.default)({},s,c)})}},function(d,E,t){d.exports=function(n){var i={};function r(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.i=function(e){return e},r.d=function(e,o,s){r.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:s})},r.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="",r(r.s=5)}([function(n,i,r){"use strict";n.exports=function(e,o){var s,a,c;for(s=1;s<arguments.length;s++)for(c in a=arguments[s])a.hasOwnProperty(c)&&(e[c]=a[c]);return e}},function(n,i,r){"use strict";var e=r(0);n.exports={build:function(o,s){var a,c,u,l=s.plugins;for(a=0,c=l.length;a<c;a++)(u=l[a]).methods&&e(o,u.methods),u.properties&&Object.defineProperties(o,u.properties)},hook:function(o,s,a){var c,u,l,p=o.config.plugins,y=[o.context];for(a&&(y=y.concat(a)),c=0,u=p.length;c<u;c++)(l=p[c][s])&&l.apply(p[c],y)}}},function(n,i,r){"use strict";function e(o){if(0===o.length)return o;var s,a,u=o.split(/[_-]/);if(1===u.length&&u[0][0].toLowerCase()===u[0][0])return o;for(a=u[0].toLowerCase(),s=1;s<u.length;s++)a=a+u[s].charAt(0).toUpperCase()+u[s].substring(1).toLowerCase();return a}e.prepended=function(o,s){return o+(s=e(s))[0].toUpperCase()+s.substring(1)},n.exports=e},function(n,i,r){"use strict";var e=r(0),o=r(2);function s(a,c){this.options=a=a||{},this.defaults=c.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(a.init),this.data=this.configureData(a.data),this.methods=this.configureMethods(a.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(a.transitions||[]),this.plugins=this.configurePlugins(a.plugins,c.plugin)}e(s.prototype,{addState:function(a){this.map[a]||(this.states.push(a),this.addStateLifecycleNames(a),this.map[a]={})},addStateLifecycleNames:function(a){this.lifecycle.onEnter[a]=o.prepended("onEnter",a),this.lifecycle.onLeave[a]=o.prepended("onLeave",a),this.lifecycle.on[a]=o.prepended("on",a)},addTransition:function(a){this.transitions.indexOf(a)<0&&(this.transitions.push(a),this.addTransitionLifecycleNames(a))},addTransitionLifecycleNames:function(a){this.lifecycle.onBefore[a]=o.prepended("onBefore",a),this.lifecycle.onAfter[a]=o.prepended("onAfter",a),this.lifecycle.on[a]=o.prepended("on",a)},mapTransition:function(a){var c=a.name,u=a.from,l=a.to;return this.addState(u),"function"!=typeof l&&this.addState(l),this.addTransition(c),this.map[u][c]=a,a},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(a){return"string"==typeof a?this.mapTransition(e({},this.defaults.init,{to:a,active:!0})):"object"==typeof a?this.mapTransition(e({},this.defaults.init,a,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(a){return"function"==typeof a?a:"object"==typeof a?function(){return a}:function(){return{}}},configureMethods:function(a){return a||{}},configurePlugins:function(a,c){var u,l,h;for(u=0,l=(a=a||[]).length;u<l;u++)"function"==typeof(h=a[u])&&(a[u]=h=h()),h.configure&&h.configure(this);return a},configureTransitions:function(a){var c,u,l,h,p,y=this.defaults.wildcard;for(u=0;u<a.length;u++)for(l=a[u],h=Array.isArray(l.from)?l.from:[l.from||y],p=l.to||y,c=0;c<h.length;c++)this.mapTransition({name:l.name,from:h[c],to:p})},transitionFor:function(a,c){return this.map[a][c]||this.map[this.defaults.wildcard][c]},transitionsFor:function(a){var c=this.defaults.wildcard;return Object.keys(this.map[a]).concat(Object.keys(this.map[c]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),n.exports=s},function(n,i,r){var e=r(0),o=r(6),s=r(1),a=[null,[]];function c(u,l){this.context=u,this.config=l,this.state=l.init.from,this.observers=[u]}e(c.prototype,{init:function(u){if(e(this.context,this.config.data.apply(this.context,u)),s.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(u){return Array.isArray(u)?u.indexOf(this.state)>=0:this.state===u},isPending:function(){return this.pending},can:function(u){return!this.isPending()&&!!this.seek(u)},cannot:function(u){return!this.can(u)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(u,l){var h=this.config.defaults.wildcard,p=this.config.transitionFor(this.state,u),y=p&&p.to;return"function"==typeof y?y.apply(this.context,l):y===h?this.state:y},fire:function(u,l){return this.transit(u,this.state,this.seek(u,l),l)},transit:function(u,l,h,p){var y=this.config.lifecycle,O=this.config.options.observeUnchangedState||l!==h;return h?this.isPending()?this.context.onPendingTransition(u,l,h):(this.config.addState(h),this.beginTransit(),p.unshift({transition:u,from:l,to:h,fsm:this.context}),this.observeEvents([this.observersForEvent(y.onBefore.transition),this.observersForEvent(y.onBefore[u]),O?this.observersForEvent(y.onLeave.state):a,O?this.observersForEvent(y.onLeave[l]):a,this.observersForEvent(y.on.transition),O?["doTransit",[this]]:a,O?this.observersForEvent(y.onEnter.state):a,O?this.observersForEvent(y.onEnter[h]):a,O?this.observersForEvent(y.on[h]):a,this.observersForEvent(y.onAfter.transition),this.observersForEvent(y.onAfter[u]),this.observersForEvent(y.on[u])],p)):this.context.onInvalidTransition(u,l,h)},beginTransit:function(){this.pending=!0},endTransit:function(u){return this.pending=!1,u},failTransit:function(u){throw this.pending=!1,u},doTransit:function(u){this.state=u.to},observe:function(u){if(2===u.length){var l={};l[u[0]]=u[1],this.observers.push(l)}else this.observers.push(u[0])},observersForEvent:function(u){for(var p,l=0,h=this.observers.length,y=[];l<h;l++)(p=this.observers[l])[u]&&y.push(p);return[u,y,!0]},observeEvents:function(u,l,h,p){if(0===u.length)return this.endTransit(void 0===p||p);var y=u[0][0],O=u[0][1],v=u[0][2];if(l[0].event=y,y&&v&&y!==h&&s.hook(this,"lifecycle",l),0===O.length)return u.shift(),this.observeEvents(u,l,y,p);var b=O.shift(),T=b[y].apply(b,l);return T&&"function"==typeof T.then?T.then(this.observeEvents.bind(this,u,l,y)).catch(this.failTransit.bind(this)):!1===T?this.endTransit(!1):this.observeEvents(u,l,y,T)},onInvalidTransition:function(u,l,h){throw new o("transition is invalid in current state",u,l,h,this.state)},onPendingTransition:function(u,l,h){throw new o("transition is invalid while previous transition is still in progress",u,l,h,this.state)}}),n.exports=c},function(n,i,r){"use strict";var e=r(0),o=r(2),s=r(1),a=r(3),c=r(4),u={is:function(v){return this._fsm.is(v)},can:function(v){return this._fsm.can(v)},cannot:function(v){return this._fsm.cannot(v)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(v,b,T){return this._fsm.onInvalidTransition(v,b,T)},onPendingTransition:function(v,b,T){return this._fsm.onPendingTransition(v,b,T)}},l={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(v){throw Error("use transitions to change state")}}};function h(v){return y(this||{},v)}function y(v,b){return O(v,new a(b,h)),v._fsm(),v}function O(v,b){if("object"!=typeof v||Array.isArray(v))throw Error("StateMachine can only be applied to objects");s.build(v,b),Object.defineProperties(v,l),e(v,u),e(v,b.methods),b.allTransitions().forEach(function(T){v[o(T)]=function(){return this._fsm.fire(T,[].slice.call(arguments))}}),v._fsm=function(){this._fsm=new c(this,b),this._fsm.init(arguments)}}h.version="3.0.1",h.factory=function p(){var v,b;"function"==typeof arguments[0]?(v=arguments[0],b=arguments[1]||{}):(v=function(){this._fsm.apply(this,arguments)},b=arguments[0]||{});var T=new a(b,h);return O(v.prototype,T),v.prototype._fsm.config=T,v},h.apply=y,h.defaults={wildcard:"*",init:{name:"init",from:"none"}},n.exports=h},function(n,i,r){"use strict";n.exports=function(e,o,s,a,c){this.message=e,this.transition=o,this.from=s,this.to=a,this.current=c}}])},function(d,E,t){"use strict";const n=t(102)();d.exports=n},function(d,E,t){"use strict";(function(n){d.exports=function(r){return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return new n((c,u)=>{r(...s,function(l){if(l)u(l);else{for(var h=arguments.length,p=new Array(h>1?h-1:0),y=1;y<h;y++)p[y-1]=arguments[y];c(1!==p.length?p:p[0])}})})}}}).call(this,t(0))},function(d,E,t){"use strict";const i=t(697).setVonageMetadata,r=t(312);d.exports={isSupported:()=>"undefined"!=typeof MediaStreamTrackProcessor&&"undefined"!=typeof MediaStreamTrackGenerator,setMetadata:i,createConnector:r.createVonageMediaProcessorConnector,setBackgroundOptions:r.setBackgroundOptions}},function(d,E,t){"use strict";t.r(E),function(n,i){t.d(E,"BlurRadius",function(){return xn}),t.d(E,"MediapipeHelper",function(){return it}),t.d(E,"VonageFacedetection",function(){return To}),t.d(E,"VonageFacemash",function(){return ke}),t.d(E,"VonageHands",function(){return us}),t.d(E,"VonageHolistic",function(){return as}),t.d(E,"VonageObjectron",function(){return _}),t.d(E,"VonagePose",function(){return Pe}),t.d(E,"VonageSelfiesegmentation",function(){return ss}),t.d(E,"createVonageMediaProcessorConnector",function(){return Bi}),t.d(E,"getVonageEventEmitter",function(){return Eo}),t.d(E,"isSupported",function(){return Fn}),t.d(E,"setBackgroundOptions",function(){return Xo}),t.d(E,"setTrackExpectedRate",function(){return mo});var e={exports:{}},o=function(J,le){return function(){for(var Re=new Array(arguments.length),rt=0;rt<Re.length;rt++)Re[rt]=arguments[rt];return J.apply(le,Re)}},s=o,a=Object.prototype.toString;function c(ue){return Array.isArray(ue)}function u(ue){return void 0===ue}function h(ue){return"[object ArrayBuffer]"===a.call(ue)}function b(ue){return null!==ue&&"object"==typeof ue}function T(ue){if("[object Object]"!==a.call(ue))return!1;var J=Object.getPrototypeOf(ue);return null===J||J===Object.prototype}function k(ue){return"[object Function]"===a.call(ue)}function oe(ue,J){if(null!=ue)if("object"!=typeof ue&&(ue=[ue]),c(ue))for(var le=0,we=ue.length;le<we;le++)J.call(null,ue[le],le,ue);else for(var Re in ue)Object.prototype.hasOwnProperty.call(ue,Re)&&J.call(null,ue[Re],Re,ue)}var ae={isArray:c,isArrayBuffer:h,isBuffer:function l(ue){return null!==ue&&!u(ue)&&null!==ue.constructor&&!u(ue.constructor)&&"function"==typeof ue.constructor.isBuffer&&ue.constructor.isBuffer(ue)},isFormData:function p(ue){return"[object FormData]"===a.call(ue)},isArrayBufferView:function y(ue){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ue):ue&&ue.buffer&&h(ue.buffer)},isString:function O(ue){return"string"==typeof ue},isNumber:function v(ue){return"number"==typeof ue},isObject:b,isPlainObject:T,isUndefined:u,isDate:function C(ue){return"[object Date]"===a.call(ue)},isFile:function w(ue){return"[object File]"===a.call(ue)},isBlob:function N(ue){return"[object Blob]"===a.call(ue)},isFunction:k,isStream:function L(ue){return b(ue)&&k(ue.pipe)},isURLSearchParams:function D(ue){return"[object URLSearchParams]"===a.call(ue)},isStandardBrowserEnv:function Z(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:oe,merge:function Q(){var ue={};function J(Re,rt){ue[rt]=T(ue[rt])&&T(Re)?Q(ue[rt],Re):T(Re)?Q({},Re):c(Re)?Re.slice():Re}for(var le=0,we=arguments.length;le<we;le++)oe(arguments[le],J);return ue},extend:function ne(ue,J,le){return oe(J,function(Re,rt){ue[rt]=le&&"function"==typeof Re?s(Re,le):Re}),ue},trim:function W(ue){return ue.trim?ue.trim():ue.replace(/^\s+|\s+$/g,"")},stripBOM:function he(ue){return 65279===ue.charCodeAt(0)&&(ue=ue.slice(1)),ue}},ye=ae;function Le(ue){return encodeURIComponent(ue).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var me=function(J,le,we){if(!le)return J;var Re;if(we)Re=we(le);else if(ye.isURLSearchParams(le))Re=le.toString();else{var rt=[];ye.forEach(le,function(Bt,br){null==Bt||(ye.isArray(Bt)?br+="[]":Bt=[Bt],ye.forEach(Bt,function(fr){ye.isDate(fr)?fr=fr.toISOString():ye.isObject(fr)&&(fr=JSON.stringify(fr)),rt.push(Le(br)+"="+Le(fr))}))}),Re=rt.join("&")}if(Re){var yt=J.indexOf("#");-1!==yt&&(J=J.slice(0,yt)),J+=(-1===J.indexOf("?")?"?":"&")+Re}return J},Oe=ae;function ge(){this.handlers=[]}ge.prototype.use=function(J,le,we){return this.handlers.push({fulfilled:J,rejected:le,synchronous:!!we&&we.synchronous,runWhen:we?we.runWhen:null}),this.handlers.length-1},ge.prototype.eject=function(J){this.handlers[J]&&(this.handlers[J]=null)},ge.prototype.forEach=function(J){Oe.forEach(this.handlers,function(we){null!==we&&J(we)})};var ce=ge,pe=ae,de=function(J,le,we,Re,rt){return J.config=le,we&&(J.code=we),J.request=Re,J.response=rt,J.isAxiosError=!0,J.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},J},ve=de,Ae=function(J,le,we,Re,rt){var yt=new Error(J);return ve(yt,le,we,Re,rt)},Xe=Ae,We=ae,at=We.isStandardBrowserEnv()?{write:function(le,we,Re,rt,yt,Qe){var Bt=[];Bt.push(le+"="+encodeURIComponent(we)),We.isNumber(Re)&&Bt.push("expires="+new Date(Re).toGMTString()),We.isString(rt)&&Bt.push("path="+rt),We.isString(yt)&&Bt.push("domain="+yt),!0===Qe&&Bt.push("secure"),document.cookie=Bt.join("; ")},read:function(le){var we=document.cookie.match(new RegExp("(^|;\\s*)("+le+")=([^;]*)"));return we?decodeURIComponent(we[3]):null},remove:function(le){this.write(le,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},En=ae,nt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],De=ae,lt=De.isStandardBrowserEnv()?function(){var we,J=/(msie|trident)/i.test(navigator.userAgent),le=document.createElement("a");function Re(rt){var yt=rt;return J&&(le.setAttribute("href",yt),yt=le.href),le.setAttribute("href",yt),{href:le.href,protocol:le.protocol?le.protocol.replace(/:$/,""):"",host:le.host,search:le.search?le.search.replace(/^\?/,""):"",hash:le.hash?le.hash.replace(/^#/,""):"",hostname:le.hostname,port:le.port,pathname:"/"===le.pathname.charAt(0)?le.pathname:"/"+le.pathname}}return we=Re(window.location.href),function(yt){var Qe=De.isString(yt)?Re(yt):yt;return Qe.protocol===we.protocol&&Qe.host===we.host}}():function(){return!0};function wt(ue){this.message=ue}wt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},wt.prototype.__CANCEL__=!0;var In=wt,Gn=ae,ut=at,Vt=me,Pn=lt,Jt=Ae,Mr=qr,bn=In,Zn=function(J){return new n(function(we,Re){var Bt,rt=J.data,yt=J.headers,Qe=J.responseType;function br(){J.cancelToken&&J.cancelToken.unsubscribe(Bt),J.signal&&J.signal.removeEventListener("abort",Bt)}Gn.isFormData(rt)&&delete yt["Content-Type"];var Ut=new XMLHttpRequest;if(J.auth){var fr=J.auth.username||"",xi=J.auth.password?unescape(encodeURIComponent(J.auth.password)):"";yt.Authorization="Basic "+btoa(fr+":"+xi)}var ci=function(J,le){return J&&!function(J){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(J)}(le)?function(J,le){return le?J.replace(/\/+$/,"")+"/"+le.replace(/^\/+/,""):J}(J,le):le}(J.baseURL,J.url);function Ur(){if(Ut){var Pr="getAllResponseHeaders"in Ut?function(J){var we,Re,rt,le={};return J&&En.forEach(J.split("\n"),function(Qe){if(rt=Qe.indexOf(":"),we=En.trim(Qe.substr(0,rt)).toLowerCase(),Re=En.trim(Qe.substr(rt+1)),we){if(le[we]&&nt.indexOf(we)>=0)return;le[we]="set-cookie"===we?(le[we]?le[we]:[]).concat([Re]):le[we]?le[we]+", "+Re:Re}}),le}(Ut.getAllResponseHeaders()):null;(function(J,le,we){var Re=we.config.validateStatus;we.status&&Re&&!Re(we.status)?le(Xe("Request failed with status code "+we.status,we.config,null,we.request,we)):J(we)})(function(fo){we(fo),br()},function(fo){Re(fo),br()},{data:Qe&&"text"!==Qe&&"json"!==Qe?Ut.response:Ut.responseText,status:Ut.status,statusText:Ut.statusText,headers:Pr,config:J,request:Ut}),Ut=null}}if(Ut.open(J.method.toUpperCase(),Vt(ci,J.params,J.paramsSerializer),!0),Ut.timeout=J.timeout,"onloadend"in Ut?Ut.onloadend=Ur:Ut.onreadystatechange=function(){!Ut||4!==Ut.readyState||0===Ut.status&&(!Ut.responseURL||0!==Ut.responseURL.indexOf("file:"))||setTimeout(Ur)},Ut.onabort=function(){!Ut||(Re(Jt("Request aborted",J,"ECONNABORTED",Ut)),Ut=null)},Ut.onerror=function(){Re(Jt("Network Error",J,null,Ut)),Ut=null},Ut.ontimeout=function(){var Kr=J.timeout?"timeout of "+J.timeout+"ms exceeded":"timeout exceeded";J.timeoutErrorMessage&&(Kr=J.timeoutErrorMessage),Re(Jt(Kr,J,(J.transitional||Mr.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Ut)),Ut=null},Gn.isStandardBrowserEnv()){var $n=(J.withCredentials||Pn(ci))&&J.xsrfCookieName?ut.read(J.xsrfCookieName):void 0;$n&&(yt[J.xsrfHeaderName]=$n)}"setRequestHeader"in Ut&&Gn.forEach(yt,function(Kr,ii){void 0===rt&&"content-type"===ii.toLowerCase()?delete yt[ii]:Ut.setRequestHeader(ii,Kr)}),Gn.isUndefined(J.withCredentials)||(Ut.withCredentials=!!J.withCredentials),Qe&&"json"!==Qe&&(Ut.responseType=J.responseType),"function"==typeof J.onDownloadProgress&&Ut.addEventListener("progress",J.onDownloadProgress),"function"==typeof J.onUploadProgress&&Ut.upload&&Ut.upload.addEventListener("progress",J.onUploadProgress),(J.cancelToken||J.signal)&&(Bt=function(Pr){!Ut||(Re(!Pr||Pr&&Pr.type?new bn("canceled"):Pr),Ut.abort(),Ut=null)},J.cancelToken&&J.cancelToken.subscribe(Bt),J.signal&&(J.signal.aborted?Bt():J.signal.addEventListener("abort",Bt))),rt||(rt=null),Ut.send(rt)})},Ht=ae,rr=function(J,le){pe.forEach(J,function(Re,rt){rt!==le&&rt.toUpperCase()===le.toUpperCase()&&(J[le]=Re,delete J[rt])})},Ti=de,bo={"Content-Type":"application/x-www-form-urlencoded"};function Gr(ue,J){!Ht.isUndefined(ue)&&Ht.isUndefined(ue["Content-Type"])&&(ue["Content-Type"]=J)}var gi={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function pi(){var ue;return("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(ue=Zn),ue}(),transformRequest:[function(J,le){return rr(le,"Accept"),rr(le,"Content-Type"),Ht.isFormData(J)||Ht.isArrayBuffer(J)||Ht.isBuffer(J)||Ht.isStream(J)||Ht.isFile(J)||Ht.isBlob(J)?J:Ht.isArrayBufferView(J)?J.buffer:Ht.isURLSearchParams(J)?(Gr(le,"application/x-www-form-urlencoded;charset=utf-8"),J.toString()):Ht.isObject(J)||le&&"application/json"===le["Content-Type"]?(Gr(le,"application/json"),function uo(ue,J,le){if(Ht.isString(ue))try{return(J||JSON.parse)(ue),Ht.trim(ue)}catch(we){if("SyntaxError"!==we.name)throw we}return(le||JSON.stringify)(ue)}(J)):J}],transformResponse:[function(J){var le=this.transitional||gi.transitional,rt=!(le&&le.silentJSONParsing)&&"json"===this.responseType;if(rt||le&&le.forcedJSONParsing&&Ht.isString(J)&&J.length)try{return JSON.parse(J)}catch(yt){if(rt)throw"SyntaxError"===yt.name?Ti(yt,this,"E_JSON_PARSE"):yt}return J}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(J){return J>=200&&J<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ht.forEach(["delete","get","head"],function(J){gi.headers[J]={}}),Ht.forEach(["post","put","patch"],function(J){gi.headers[J]=Ht.merge(bo)});var qr=gi,Di=ae,Ir=qr,$i=function(J){return!(!J||!J.__CANCEL__)},Zo=ae,On=function(J,le,we){var Re=this||Ir;return Di.forEach(we,function(yt){J=yt.call(Re,J,le)}),J},Lr=$i,Yr=qr,So=In;function mi(ue){if(ue.cancelToken&&ue.cancelToken.throwIfRequested(),ue.signal&&ue.signal.aborted)throw new So("canceled")}var yr=ae,Cr=function(J,le){le=le||{};var we={};function Re(Ut,fr){return yr.isPlainObject(Ut)&&yr.isPlainObject(fr)?yr.merge(Ut,fr):yr.isPlainObject(fr)?yr.merge({},fr):yr.isArray(fr)?fr.slice():fr}function rt(Ut){return yr.isUndefined(le[Ut])?yr.isUndefined(J[Ut])?void 0:Re(void 0,J[Ut]):Re(J[Ut],le[Ut])}function yt(Ut){if(!yr.isUndefined(le[Ut]))return Re(void 0,le[Ut])}function Qe(Ut){return yr.isUndefined(le[Ut])?yr.isUndefined(J[Ut])?void 0:Re(void 0,J[Ut]):Re(void 0,le[Ut])}function Bt(Ut){return Ut in le?Re(J[Ut],le[Ut]):Ut in J?Re(void 0,J[Ut]):void 0}var br={url:yt,method:yt,data:yt,baseURL:Qe,transformRequest:Qe,transformResponse:Qe,paramsSerializer:Qe,timeout:Qe,timeoutMessage:Qe,withCredentials:Qe,adapter:Qe,responseType:Qe,xsrfCookieName:Qe,xsrfHeaderName:Qe,onUploadProgress:Qe,onDownloadProgress:Qe,decompress:Qe,maxContentLength:Qe,maxBodyLength:Qe,transport:Qe,httpAgent:Qe,httpsAgent:Qe,cancelToken:Qe,socketPath:Qe,responseEncoding:Qe,validateStatus:Bt};return yr.forEach(Object.keys(J).concat(Object.keys(le)),function(fr){var xi=br[fr]||rt,ci=xi(fr);yr.isUndefined(ci)&&xi!==Bt||(we[fr]=ci)}),we},Gi={};["object","boolean","number","function","string","symbol"].forEach(function(ue,J){Gi[ue]=function(we){return typeof we===ue||"a"+(J<1?"n ":" ")+ue}});var zr={};Gi.transitional=function(J,le,we){function Re(rt,yt){return"[Axios v0.25.0] Transitional option '"+rt+"'"+yt+(we?". "+we:"")}return function(rt,yt,Qe){if(!1===J)throw new Error(Re(yt," has been removed"+(le?" in "+le:"")));return le&&!zr[yt]&&(zr[yt]=!0,console.warn(Re(yt," has been deprecated since v"+le+" and will be removed in the near future"))),!J||J(rt,yt,Qe)}};var Nt=ae,Po=me,Fo=ce,lo=function(J){return mi(J),J.headers=J.headers||{},J.data=On.call(J,J.data,J.headers,J.transformRequest),J.headers=Zo.merge(J.headers.common||{},J.headers[J.method]||{},J.headers),Zo.forEach(["delete","get","head","post","put","patch","common"],function(Re){delete J.headers[Re]}),(J.adapter||Yr.adapter)(J).then(function(Re){return mi(J),Re.data=On.call(J,Re.data,Re.headers,J.transformResponse),Re},function(Re){return Lr(Re)||(mi(J),Re&&Re.response&&(Re.response.data=On.call(J,Re.response.data,Re.response.headers,J.transformResponse))),n.reject(Re)})},dr=Cr,Uo={assertOptions:function Hn(ue,J,le){if("object"!=typeof ue)throw new TypeError("options must be an object");for(var we=Object.keys(ue),Re=we.length;Re-- >0;){var rt=we[Re],yt=J[rt];if(yt){var Qe=ue[rt],Bt=void 0===Qe||yt(Qe,rt,ue);if(!0!==Bt)throw new TypeError("option "+rt+" must be "+Bt)}else if(!0!==le)throw Error("Unknown option "+rt)}},validators:Gi},Wi=Uo.validators;function Ei(ue){this.defaults=ue,this.interceptors={request:new Fo,response:new Fo}}Ei.prototype.request=function(J,le){if("string"==typeof J?(le=le||{}).url=J:le=J||{},!le.url)throw new Error("Provided config url is not valid");(le=dr(this.defaults,le)).method=le.method?le.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var we=le.transitional;void 0!==we&&Uo.assertOptions(we,{silentJSONParsing:Wi.transitional(Wi.boolean),forcedJSONParsing:Wi.transitional(Wi.boolean),clarifyTimeoutError:Wi.transitional(Wi.boolean)},!1);var Re=[],rt=!0;this.interceptors.request.forEach(function(ci){"function"==typeof ci.runWhen&&!1===ci.runWhen(le)||(rt=rt&&ci.synchronous,Re.unshift(ci.fulfilled,ci.rejected))});var Qe,yt=[];if(this.interceptors.response.forEach(function(ci){yt.push(ci.fulfilled,ci.rejected)}),!rt){var Bt=[lo,void 0];for(Array.prototype.unshift.apply(Bt,Re),Bt=Bt.concat(yt),Qe=n.resolve(le);Bt.length;)Qe=Qe.then(Bt.shift(),Bt.shift());return Qe}for(var br=le;Re.length;){var Ut=Re.shift(),fr=Re.shift();try{br=Ut(br)}catch(xi){fr(xi);break}}try{Qe=lo(br)}catch(xi){return n.reject(xi)}for(;yt.length;)Qe=Qe.then(yt.shift(),yt.shift());return Qe},Ei.prototype.getUri=function(J){if(!J.url)throw new Error("Provided config url is not valid");return J=dr(this.defaults,J),Po(J.url,J.params,J.paramsSerializer).replace(/^\?/,"")},Nt.forEach(["delete","get","head","options"],function(J){Ei.prototype[J]=function(le,we){return this.request(dr(we||{},{method:J,url:le,data:(we||{}).data}))}}),Nt.forEach(["post","put","patch"],function(J){Ei.prototype[J]=function(le,we,Re){return this.request(dr(Re||{},{method:J,url:le,data:we}))}});var Ri=Ei,xo=In;function Mo(ue){if("function"!=typeof ue)throw new TypeError("executor must be a function.");var J;this.promise=new n(function(Re){J=Re});var le=this;this.promise.then(function(we){if(le._listeners){var Re,rt=le._listeners.length;for(Re=0;Re<rt;Re++)le._listeners[Re](we);le._listeners=null}}),this.promise.then=function(we){var Re,rt=new n(function(yt){le.subscribe(yt),Re=yt}).then(we);return rt.cancel=function(){le.unsubscribe(Re)},rt},ue(function(Re){le.reason||(le.reason=new xo(Re),J(le.reason))})}Mo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Mo.prototype.subscribe=function(J){this.reason?J(this.reason):this._listeners?this._listeners.push(J):this._listeners=[J]},Mo.prototype.unsubscribe=function(J){if(this._listeners){var le=this._listeners.indexOf(J);-1!==le&&this._listeners.splice(le,1)}},Mo.source=function(){var J;return{token:new Mo(function(Re){J=Re}),cancel:J}};var Vo=Mo,Io=ae,$o=ae,fi=o,Oi=Ri,Qo=Cr,en=function Yt(ue){var J=new Oi(ue),le=fi(Oi.prototype.request,J);return $o.extend(le,Oi.prototype,J),$o.extend(le,J),le.create=function(Re){return Yt(Qo(ue,Re))},le}(qr);en.Axios=Oi,en.Cancel=In,en.CancelToken=Vo,en.isCancel=$i,en.VERSION="0.25.0",en.all=function(J){return n.all(J)},en.spread=function(J){return function(we){return J.apply(null,we)}},en.isAxiosError=function(J){return Io.isObject(J)&&!0===J.isAxiosError},e.exports=en,e.exports.default=en;for(var Kn=[],vn=0;vn<256;++vn)Kn.push((vn+256).toString(16).substr(1));const Tr=new WeakMap,$r=new WeakMap,pt=new WeakMap,Ot=Symbol("anyProducer"),Rt=n.resolve(),jt=Symbol("listenerAdded"),qt=Symbol("listenerRemoved");let gn=!1;function Nn(ue){if("string"!=typeof ue&&"symbol"!=typeof ue)throw new TypeError("eventName must be a string or a symbol")}function li(ue){if("function"!=typeof ue)throw new TypeError("listener must be a function")}function mr(ue,J){const le=$r.get(ue);return le.has(J)||le.set(J,new Set),le.get(J)}function yi(ue,J){const le="string"==typeof J||"symbol"==typeof J?J:Ot,we=pt.get(ue);return we.has(le)||we.set(le,new Set),we.get(le)}function ei(ue,J){J=Array.isArray(J)?J:[J];let le=!1,we=()=>{},Re=[];const rt={enqueue(yt){Re.push(yt),we()},finish(){le=!0,we()}};for(const yt of J)yi(ue,yt).add(rt);return{next(){var yt=this;return _asyncToGenerator3(function*(){return Re?0===Re.length?le?(Re=void 0,yt.next()):(yield new n(Qe=>{we=Qe}),yt.next()):{done:!1,value:yield Re.shift()}:{done:!0}})()},return(yt){var Qe=arguments;return _asyncToGenerator3(function*(){Re=void 0;for(const Bt of J)yi(ue,Bt).delete(rt);return we(),Qe.length>0?{done:!0,value:yield yt}:{done:!0}})()},[Symbol.asyncIterator](){return this}}}function vi(ue){if(void 0===ue)return Zi;if(!Array.isArray(ue))throw new TypeError("`methodNames` must be an array of strings");for(const J of ue)if(!Zi.includes(J))throw"string"!=typeof J?new TypeError("`methodNames` element must be a string"):new Error(`${J} is not Emittery method`);return ue}const ti=ue=>ue===jt||ue===qt;class Qn{static mixin(J,le){return le=vi(le),we=>{if("function"!=typeof we)throw new TypeError("`target` must be function");for(const yt of le)if(void 0!==we.prototype[yt])throw new Error(`The property \`${yt}\` already exists on \`target\``);Object.defineProperty(we.prototype,J,{enumerable:!1,get:function Re(){return Object.defineProperty(this,J,{enumerable:!1,value:new Qn}),this[J]}});const rt=yt=>function(...Qe){return this[J][yt](...Qe)};for(const yt of le)Object.defineProperty(we.prototype,yt,{enumerable:!1,value:rt(yt)});return we}}static get isDebugEnabled(){if("object"!=typeof i)return gn;const{env:J}=i||{env:{}};return"emittery"===J.DEBUG||"*"===J.DEBUG||gn}static set isDebugEnabled(J){gn=J}constructor(J={}){Tr.set(this,new Set),$r.set(this,new Map),pt.set(this,new Map),this.debug=J.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(le,we,Re,rt)=>{rt=JSON.stringify(rt),"symbol"==typeof Re&&(Re=Re.toString());const yt=new Date,Qe=`${yt.getHours()}:${yt.getMinutes()}:${yt.getSeconds()}.${yt.getMilliseconds()}`;console.log(`[${Qe}][emittery:${le}][${we}] Event Name: ${Re}\n\tdata: ${rt}`)})}logIfDebugEnabled(J,le,we){(Qn.isDebugEnabled||this.debug.enabled)&&this.debug.logger(J,this.debug.name,le,we)}on(J,le){li(le),J=Array.isArray(J)?J:[J];for(const we of J)Nn(we),mr(this,we).add(le),this.logIfDebugEnabled("subscribe",we,void 0),ti(we)||this.emit(jt,{eventName:we,listener:le});return this.off.bind(this,J,le)}off(J,le){li(le),J=Array.isArray(J)?J:[J];for(const we of J)Nn(we),mr(this,we).delete(le),this.logIfDebugEnabled("unsubscribe",we,void 0),ti(we)||this.emit(qt,{eventName:we,listener:le})}once(J){return new n(le=>{const we=this.on(J,Re=>{we(),le(Re)})})}events(J){J=Array.isArray(J)?J:[J];for(const le of J)Nn(le);return ei(this,J)}emit(J,le){var we=this;return _asyncToGenerator3(function*(){Nn(J),we.logIfDebugEnabled("emit",J,le),function Br(ue,J,le){const we=pt.get(ue);if(we.has(J))for(const Re of we.get(J))Re.enqueue(le);if(we.has(Ot)){const Re=n.all([J,le]);for(const rt of we.get(Ot))rt.enqueue(Re)}}(we,J,le);const Re=mr(we,J),rt=Tr.get(we),yt=[...Re],Qe=ti(J)?[]:[...rt];yield Rt,yield n.all([...yt.map(function(){var Bt=_asyncToGenerator3(function*(br){if(Re.has(br))return br(le)});return function(br){return Bt.apply(this,arguments)}}()),...Qe.map(function(){var Bt=_asyncToGenerator3(function*(br){if(rt.has(br))return br(J,le)});return function(br){return Bt.apply(this,arguments)}}())])})()}emitSerial(J,le){var we=this;return _asyncToGenerator3(function*(){Nn(J),we.logIfDebugEnabled("emitSerial",J,le);const Re=mr(we,J),rt=Tr.get(we),yt=[...Re],Qe=[...rt];yield Rt;for(const Bt of yt)Re.has(Bt)&&(yield Bt(le));for(const Bt of Qe)rt.has(Bt)&&(yield Bt(J,le))})()}onAny(J){return li(J),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Tr.get(this).add(J),this.emit(jt,{listener:J}),this.offAny.bind(this,J)}anyEvent(){return ei(this)}offAny(J){li(J),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(qt,{listener:J}),Tr.get(this).delete(J)}clearListeners(J){J=Array.isArray(J)?J:[J];for(const le of J)if(this.logIfDebugEnabled("clear",le,void 0),"string"==typeof le||"symbol"==typeof le){mr(this,le).clear();const we=yi(this,le);for(const Re of we)Re.finish();we.clear()}else{Tr.get(this).clear();for(const we of $r.get(this).values())we.clear();for(const we of pt.get(this).values()){for(const Re of we)Re.finish();we.clear()}}}listenerCount(J){J=Array.isArray(J)?J:[J];let le=0;for(const we of J)if("string"!=typeof we){void 0!==we&&Nn(we),le+=Tr.get(this).size;for(const Re of $r.get(this).values())le+=Re.size;for(const Re of pt.get(this).values())le+=Re.size}else le+=Tr.get(this).size+mr(this,we).size+yi(this,we).size+yi(this).size;return le}bindMethods(J,le){if("object"!=typeof J||null===J)throw new TypeError("`target` must be an object");le=vi(le);for(const we of le){if(void 0!==J[we])throw new Error(`The property \`${we}\` already exists on \`target\``);Object.defineProperty(J,we,{enumerable:!1,value:this[we].bind(this)})}}}const Zi=Object.getOwnPropertyNames(Qn.prototype).filter(ue=>"constructor"!==ue);Object.defineProperty(Qn,"listenerAdded",{value:jt,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Qn,"listenerRemoved",{value:qt,writable:!1,enumerable:!0,configurable:!1});class Qi{constructor(){this.processor_=null,this.generator_=null}init(J){return new n((le,we)=>{try{this.processor_=new MediaStreamTrackProcessor(J)}catch(Re){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${Re}`),we(Re)}try{"audio"===J.kind?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):"video"===J.kind?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):we("kind not supported")}catch(Re){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${Re}`),we(Re)}le()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Mn{constructor(J){this.insertableStreamHelper_=new Qi,this.mediaProcessor_=J}setTrack(J){return new n((le,we)=>{this.insertableStreamHelper_.init(J).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{le(this.insertableStreamHelper_.getProccesorTrack())}).catch(Re=>{we(Re)})}).catch(Re=>{we(Re)})})}destroy(){return new n((J,le)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{J()}).catch(we=>{le(we)}):le("no processor")})}}const Lo="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIFR7fVQudXBkYXRlcz17dHJhbnNmb3JtZXJfbmV3OiJOZXcgdHJhbnNmb3JtZXIiLHRyYW5zZm9ybWVyX251bGw6Ik51bGwgdHJhbnNmb3JtZXIifSxULmVycm9ycz17dHJhbnNmb3JtZXJfbm9uZToiTm8gdHJhbnNmb3JtZXJzIHByb3ZpZGVkIix0cmFuc2Zvcm1lcl9zdGFydDoiQ2Fubm90IHN0YXJ0IHRyYW5zZm9ybWVyIix0cmFuc2Zvcm1lcl90cmFuc2Zvcm06IkNhbm5vdCB0cmFuc2Zvcm0gZnJhbWUiLHRyYW5zZm9ybWVyX2ZsdXNoOiJDYW5ub3QgZmx1c2ggdHJhbnNmb3JtZXIiLHJlYWRhYmxlX251bGw6IlJlYWRhYmxlIGlzIG51bGwiLHdyaXRhYmxlX251bGw6IldyaXRhYmxlIGlzIG51bGwifTt2YXIgWT17ZXhwb3J0czp7fX0sRWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLG89MDtvPG4ubGVuZ3RoO28rKyluW29dPWFyZ3VtZW50c1tvXTtyZXR1cm4gZS5hcHBseSh0LG4pfX0scnQ9RWUsUj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIFoocil7cmV0dXJuIEFycmF5LmlzQXJyYXkocil9ZnVuY3Rpb24gZWUocil7cmV0dXJuIHR5cGVvZiByPT0idW5kZWZpbmVkIn1mdW5jdGlvbiBzdChyKXtyZXR1cm4gciE9PW51bGwmJiFlZShyKSYmci5jb25zdHJ1Y3RvciE9PW51bGwmJiFlZShyLmNvbnN0cnVjdG9yKSYmdHlwZW9mIHIuY29uc3RydWN0b3IuaXNCdWZmZXI9PSJmdW5jdGlvbiImJnIuY29uc3RydWN0b3IuaXNCdWZmZXIocil9ZnVuY3Rpb24gVGUocil7cmV0dXJuIFIuY2FsbChyKT09PSJbb2JqZWN0IEFycmF5QnVmZmVyXSJ9ZnVuY3Rpb24gbnQocil7cmV0dXJuIFIuY2FsbChyKT09PSJbb2JqZWN0IEZvcm1EYXRhXSJ9ZnVuY3Rpb24gaXQocil7dmFyIGU7cmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciE9InVuZGVmaW5lZCImJkFycmF5QnVmZmVyLmlzVmlldz9lPUFycmF5QnVmZmVyLmlzVmlldyhyKTplPXImJnIuYnVmZmVyJiZUZShyLmJ1ZmZlciksZX1mdW5jdGlvbiBvdChyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmcifWZ1bmN0aW9uIGF0KHIpe3JldHVybiB0eXBlb2Ygcj09Im51bWJlciJ9ZnVuY3Rpb24gUmUocil7cmV0dXJuIHIhPT1udWxsJiZ0eXBlb2Ygcj09Im9iamVjdCJ9ZnVuY3Rpb24gRihyKXtpZihSLmNhbGwocikhPT0iW29iamVjdCBPYmplY3RdIilyZXR1cm4hMTt2YXIgZT1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocik7cmV0dXJuIGU9PT1udWxsfHxlPT09T2JqZWN0LnByb3RvdHlwZX1mdW5jdGlvbiB1dChyKXtyZXR1cm4gUi5jYWxsKHIpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIGx0KHIpe3JldHVybiBSLmNhbGwocik9PT0iW29iamVjdCBGaWxlXSJ9ZnVuY3Rpb24gY3Qocil7cmV0dXJuIFIuY2FsbChyKT09PSJbb2JqZWN0IEJsb2JdIn1mdW5jdGlvbiBQZShyKXtyZXR1cm4gUi5jYWxsKHIpPT09IltvYmplY3QgRnVuY3Rpb25dIn1mdW5jdGlvbiBmdChyKXtyZXR1cm4gUmUocikmJlBlKHIucGlwZSl9ZnVuY3Rpb24gaHQocil7cmV0dXJuIFIuY2FsbChyKT09PSJbb2JqZWN0IFVSTFNlYXJjaFBhcmFtc10ifWZ1bmN0aW9uIGR0KHIpe3JldHVybiByLnRyaW0/ci50cmltKCk6ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIil9ZnVuY3Rpb24gcHQoKXtyZXR1cm4gdHlwZW9mIG5hdmlnYXRvciE9InVuZGVmaW5lZCImJihuYXZpZ2F0b3IucHJvZHVjdD09PSJSZWFjdE5hdGl2ZSJ8fG5hdmlnYXRvci5wcm9kdWN0PT09Ik5hdGl2ZVNjcmlwdCJ8fG5hdmlnYXRvci5wcm9kdWN0PT09Ik5TIik/ITE6dHlwZW9mIHdpbmRvdyE9InVuZGVmaW5lZCImJnR5cGVvZiBkb2N1bWVudCE9InVuZGVmaW5lZCJ9ZnVuY3Rpb24gdGUocixlKXtpZighKHI9PT1udWxsfHx0eXBlb2Ygcj09InVuZGVmaW5lZCIpKWlmKHR5cGVvZiByIT0ib2JqZWN0IiYmKHI9W3JdKSxaKHIpKWZvcih2YXIgdD0wLHM9ci5sZW5ndGg7dDxzO3QrKyllLmNhbGwobnVsbCxyW3RdLHQscik7ZWxzZSBmb3IodmFyIG4gaW4gcilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixuKSYmZS5jYWxsKG51bGwscltuXSxuLHIpfWZ1bmN0aW9uIHJlKCl7dmFyIHI9e307ZnVuY3Rpb24gZShuLG8pe0YocltvXSkmJkYobik/cltvXT1yZShyW29dLG4pOkYobik/cltvXT1yZSh7fSxuKTpaKG4pP3Jbb109bi5zbGljZSgpOnJbb109bn1mb3IodmFyIHQ9MCxzPWFyZ3VtZW50cy5sZW5ndGg7dDxzO3QrKyl0ZShhcmd1bWVudHNbdF0sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbXQocixlLHQpe3JldHVybiB0ZShlLGZ1bmN0aW9uKG4sbyl7dCYmdHlwZW9mIG49PSJmdW5jdGlvbiI/cltvXT1ydChuLHQpOnJbb109bn0pLHJ9ZnVuY3Rpb24gZ3Qocil7cmV0dXJuIHIuY2hhckNvZGVBdCgwKT09PTY1Mjc5JiYocj1yLnNsaWNlKDEpKSxyfXZhciBwPXtpc0FycmF5OlosaXNBcnJheUJ1ZmZlcjpUZSxpc0J1ZmZlcjpzdCxpc0Zvcm1EYXRhOm50LGlzQXJyYXlCdWZmZXJWaWV3Oml0LGlzU3RyaW5nOm90LGlzTnVtYmVyOmF0LGlzT2JqZWN0OlJlLGlzUGxhaW5PYmplY3Q6Rixpc1VuZGVmaW5lZDplZSxpc0RhdGU6dXQsaXNGaWxlOmx0LGlzQmxvYjpjdCxpc0Z1bmN0aW9uOlBlLGlzU3RyZWFtOmZ0LGlzVVJMU2VhcmNoUGFyYW1zOmh0LGlzU3RhbmRhcmRCcm93c2VyRW52OnB0LGZvckVhY2g6dGUsbWVyZ2U6cmUsZXh0ZW5kOm10LHRyaW06ZHQsc3RyaXBCT006Z3R9LHg9cDtmdW5jdGlvbiBDZShyKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHIpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgU2U9ZnVuY3Rpb24oZSx0LHMpe2lmKCF0KXJldHVybiBlO3ZhciBuO2lmKHMpbj1zKHQpO2Vsc2UgaWYoeC5pc1VSTFNlYXJjaFBhcmFtcyh0KSluPXQudG9TdHJpbmcoKTtlbHNle3ZhciBvPVtdO3guZm9yRWFjaCh0LGZ1bmN0aW9uKGwsbSl7bD09PW51bGx8fHR5cGVvZiBsPT0idW5kZWZpbmVkInx8KHguaXNBcnJheShsKT9tPW0rIltdIjpsPVtsXSx4LmZvckVhY2gobCxmdW5jdGlvbihmKXt4LmlzRGF0ZShmKT9mPWYudG9JU09TdHJpbmcoKTp4LmlzT2JqZWN0KGYpJiYoZj1KU09OLnN0cmluZ2lmeShmKSksby5wdXNoKENlKG0pKyI9IitDZShmKSl9KSl9KSxuPW8uam9pbigiJiIpfWlmKG4pe3ZhciBpPWUuaW5kZXhPZigiIyIpO2khPT0tMSYmKGU9ZS5zbGljZSgwLGkpKSxlKz0oZS5pbmRleE9mKCI/Iik9PT0tMT8iPyI6IiYiKStufXJldHVybiBlfSx5dD1wO2Z1bmN0aW9uIEwoKXt0aGlzLmhhbmRsZXJzPVtdfUwucHJvdG90eXBlLnVzZT1mdW5jdGlvbihlLHQscyl7cmV0dXJuIHRoaXMuaGFuZGxlcnMucHVzaCh7ZnVsZmlsbGVkOmUscmVqZWN0ZWQ6dCxzeW5jaHJvbm91czpzP3Muc3luY2hyb25vdXM6ITEscnVuV2hlbjpzP3MucnVuV2hlbjpudWxsfSksdGhpcy5oYW5kbGVycy5sZW5ndGgtMX0sTC5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LEwucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7eXQuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLGZ1bmN0aW9uKHMpe3MhPT1udWxsJiZlKHMpfSl9O3ZhciBfdD1MLHZ0PXAsYnQ9ZnVuY3Rpb24oZSx0KXt2dC5mb3JFYWNoKGUsZnVuY3Rpb24obixvKXtvIT09dCYmby50b1VwcGVyQ2FzZSgpPT09dC50b1VwcGVyQ2FzZSgpJiYoZVt0XT1uLGRlbGV0ZSBlW29dKX0pfSx4ZT1mdW5jdGlvbihlLHQscyxuLG8pe3JldHVybiBlLmNvbmZpZz10LHMmJihlLmNvZGU9cyksZS5yZXF1ZXN0PW4sZS5yZXNwb25zZT1vLGUuaXNBeGlvc0Vycm9yPSEwLGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue21lc3NhZ2U6dGhpcy5tZXNzYWdlLG5hbWU6dGhpcy5uYW1lLGRlc2NyaXB0aW9uOnRoaXMuZGVzY3JpcHRpb24sbnVtYmVyOnRoaXMubnVtYmVyLGZpbGVOYW1lOnRoaXMuZmlsZU5hbWUsbGluZU51bWJlcjp0aGlzLmxpbmVOdW1iZXIsY29sdW1uTnVtYmVyOnRoaXMuY29sdW1uTnVtYmVyLHN0YWNrOnRoaXMuc3RhY2ssY29uZmlnOnRoaXMuY29uZmlnLGNvZGU6dGhpcy5jb2RlLHN0YXR1czp0aGlzLnJlc3BvbnNlJiZ0aGlzLnJlc3BvbnNlLnN0YXR1cz90aGlzLnJlc3BvbnNlLnN0YXR1czpudWxsfX0sZX0sd3Q9eGUsT2U9ZnVuY3Rpb24oZSx0LHMsbixvKXt2YXIgaT1uZXcgRXJyb3IoZSk7cmV0dXJuIHd0KGksdCxzLG4sbyl9LEV0PU9lLFR0PWZ1bmN0aW9uKGUsdCxzKXt2YXIgbj1zLmNvbmZpZy52YWxpZGF0ZVN0YXR1czshcy5zdGF0dXN8fCFufHxuKHMuc3RhdHVzKT9lKHMpOnQoRXQoIlJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgIitzLnN0YXR1cyxzLmNvbmZpZyxudWxsLHMucmVxdWVzdCxzKSl9LEQ9cCxSdD1ELmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXtyZXR1cm57d3JpdGU6ZnVuY3Rpb24odCxzLG4sbyxpLGEpe3ZhciBsPVtdO2wucHVzaCh0KyI9IitlbmNvZGVVUklDb21wb25lbnQocykpLEQuaXNOdW1iZXIobikmJmwucHVzaCgiZXhwaXJlcz0iK25ldyBEYXRlKG4pLnRvR01UU3RyaW5nKCkpLEQuaXNTdHJpbmcobykmJmwucHVzaCgicGF0aD0iK28pLEQuaXNTdHJpbmcoaSkmJmwucHVzaCgiZG9tYWluPSIraSksYT09PSEwJiZsLnB1c2goInNlY3VyZSIpLGRvY3VtZW50LmNvb2tpZT1sLmpvaW4oIjsgIil9LHJlYWQ6ZnVuY3Rpb24odCl7dmFyIHM9ZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoIihefDtcXHMqKSgiK3QrIik9KFteO10qKSIpKTtyZXR1cm4gcz9kZWNvZGVVUklDb21wb25lbnQoc1szXSk6bnVsbH0scmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMud3JpdGUodCwiIixEYXRlLm5vdygpLTg2NGU1KX19fSgpOmZ1bmN0aW9uKCl7cmV0dXJue3dyaXRlOmZ1bmN0aW9uKCl7fSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHJlbW92ZTpmdW5jdGlvbigpe319fSgpLFB0PWZ1bmN0aW9uKGUpe3JldHVybi9eKFthLXpdW2EtelxkK1wtLl0qOik/XC9cLy9pLnRlc3QoZSl9LEN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/ZS5yZXBsYWNlKC9cLyskLywiIikrIi8iK3QucmVwbGFjZSgvXlwvKy8sIiIpOmV9LFN0PVB0LHh0PUN0LE90PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJiFTdCh0KT94dChlLHQpOnR9LHNlPXAsSXQ9WyJhZ2UiLCJhdXRob3JpemF0aW9uIiwiY29udGVudC1sZW5ndGgiLCJjb250ZW50LXR5cGUiLCJldGFnIiwiZXhwaXJlcyIsImZyb20iLCJob3N0IiwiaWYtbW9kaWZpZWQtc2luY2UiLCJpZi11bm1vZGlmaWVkLXNpbmNlIiwibGFzdC1tb2RpZmllZCIsImxvY2F0aW9uIiwibWF4LWZvcndhcmRzIiwicHJveHktYXV0aG9yaXphdGlvbiIsInJlZmVyZXIiLCJyZXRyeS1hZnRlciIsInVzZXItYWdlbnQiXSxNdD1mdW5jdGlvbihlKXt2YXIgdD17fSxzLG4sbztyZXR1cm4gZSYmc2UuZm9yRWFjaChlLnNwbGl0KGAKYCksZnVuY3Rpb24oYSl7aWYobz1hLmluZGV4T2YoIjoiKSxzPXNlLnRyaW0oYS5zdWJzdHIoMCxvKSkudG9Mb3dlckNhc2UoKSxuPXNlLnRyaW0oYS5zdWJzdHIobysxKSkscyl7aWYodFtzXSYmSXQuaW5kZXhPZihzKT49MClyZXR1cm47cz09PSJzZXQtY29va2llIj90W3NdPSh0W3NdP3Rbc106W10pLmNvbmNhdChbbl0pOnRbc109dFtzXT90W3NdKyIsICIrbjpufX0pLHR9LEllPXAsa3Q9SWUuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKT9mdW5jdGlvbigpe3ZhciBlPS8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikscztmdW5jdGlvbiBuKG8pe3ZhciBpPW87cmV0dXJuIGUmJih0LnNldEF0dHJpYnV0ZSgiaHJlZiIsaSksaT10LmhyZWYpLHQuc2V0QXR0cmlidXRlKCJocmVmIixpKSx7aHJlZjp0LmhyZWYscHJvdG9jb2w6dC5wcm90b2NvbD90LnByb3RvY29sLnJlcGxhY2UoLzokLywiIik6IiIsaG9zdDp0Lmhvc3Qsc2VhcmNoOnQuc2VhcmNoP3Quc2VhcmNoLnJlcGxhY2UoL15cPy8sIiIpOiIiLGhhc2g6dC5oYXNoP3QuaGFzaC5yZXBsYWNlKC9eIy8sIiIpOiIiLGhvc3RuYW1lOnQuaG9zdG5hbWUscG9ydDp0LnBvcnQscGF0aG5hbWU6dC5wYXRobmFtZS5jaGFyQXQoMCk9PT0iLyI/dC5wYXRobmFtZToiLyIrdC5wYXRobmFtZX19cmV0dXJuIHM9bih3aW5kb3cubG9jYXRpb24uaHJlZiksZnVuY3Rpb24oaSl7dmFyIGE9SWUuaXNTdHJpbmcoaSk/bihpKTppO3JldHVybiBhLnByb3RvY29sPT09cy5wcm90b2NvbCYmYS5ob3N0PT09cy5ob3N0fX0oKTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiEwfX0oKTtmdW5jdGlvbiBuZShyKXt0aGlzLm1lc3NhZ2U9cn1uZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iQ2FuY2VsIisodGhpcy5tZXNzYWdlPyI6ICIrdGhpcy5tZXNzYWdlOiIiKX0sbmUucHJvdG90eXBlLl9fQ0FOQ0VMX189ITA7dmFyIHE9bmUsSD1wLEF0PVR0LE50PVJ0LCR0PVNlLFV0PU90LEJ0PU10LEZ0PWt0LGllPU9lLEx0PUosRHQ9cSxNZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocyxuKXt2YXIgbz1lLmRhdGEsaT1lLmhlYWRlcnMsYT1lLnJlc3BvbnNlVHlwZSxsO2Z1bmN0aW9uIG0oKXtlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnVuc3Vic2NyaWJlKGwpLGUuc2lnbmFsJiZlLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsbCl9SC5pc0Zvcm1EYXRhKG8pJiZkZWxldGUgaVsiQ29udGVudC1UeXBlIl07dmFyIHU9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUuYXV0aCl7dmFyIGY9ZS5hdXRoLnVzZXJuYW1lfHwiIixFPWUuYXV0aC5wYXNzd29yZD91bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZS5hdXRoLnBhc3N3b3JkKSk6IiI7aS5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EoZisiOiIrRSl9dmFyIGc9VXQoZS5iYXNlVVJMLGUudXJsKTt1Lm9wZW4oZS5tZXRob2QudG9VcHBlckNhc2UoKSwkdChnLGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplciksITApLHUudGltZW91dD1lLnRpbWVvdXQ7ZnVuY3Rpb24gZXQoKXtpZighIXUpe3ZhciBiPSJnZXRBbGxSZXNwb25zZUhlYWRlcnMiaW4gdT9CdCh1LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTpudWxsLE49IWF8fGE9PT0idGV4dCJ8fGE9PT0ianNvbiI/dS5yZXNwb25zZVRleHQ6dS5yZXNwb25zZSxTPXtkYXRhOk4sc3RhdHVzOnUuc3RhdHVzLHN0YXR1c1RleHQ6dS5zdGF0dXNUZXh0LGhlYWRlcnM6Yixjb25maWc6ZSxyZXF1ZXN0OnV9O0F0KGZ1bmN0aW9uKHdlKXtzKHdlKSxtKCl9LGZ1bmN0aW9uKHdlKXtuKHdlKSxtKCl9LFMpLHU9bnVsbH19aWYoIm9ubG9hZGVuZCJpbiB1P3Uub25sb2FkZW5kPWV0OnUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7IXV8fHUucmVhZHlTdGF0ZSE9PTR8fHUuc3RhdHVzPT09MCYmISh1LnJlc3BvbnNlVVJMJiZ1LnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6Iik9PT0wKXx8c2V0VGltZW91dChldCl9LHUub25hYm9ydD1mdW5jdGlvbigpeyF1fHwobihpZSgiUmVxdWVzdCBhYm9ydGVkIixlLCJFQ09OTkFCT1JURUQiLHUpKSx1PW51bGwpfSx1Lm9uZXJyb3I9ZnVuY3Rpb24oKXtuKGllKCJOZXR3b3JrIEVycm9yIixlLG51bGwsdSkpLHU9bnVsbH0sdS5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgTj1lLnRpbWVvdXQ/InRpbWVvdXQgb2YgIitlLnRpbWVvdXQrIm1zIGV4Y2VlZGVkIjoidGltZW91dCBleGNlZWRlZCIsUz1lLnRyYW5zaXRpb25hbHx8THQudHJhbnNpdGlvbmFsO2UudGltZW91dEVycm9yTWVzc2FnZSYmKE49ZS50aW1lb3V0RXJyb3JNZXNzYWdlKSxuKGllKE4sZSxTLmNsYXJpZnlUaW1lb3V0RXJyb3I/IkVUSU1FRE9VVCI6IkVDT05OQUJPUlRFRCIsdSkpLHU9bnVsbH0sSC5pc1N0YW5kYXJkQnJvd3NlckVudigpKXt2YXIgdHQ9KGUud2l0aENyZWRlbnRpYWxzfHxGdChnKSkmJmUueHNyZkNvb2tpZU5hbWU/TnQucmVhZChlLnhzcmZDb29raWVOYW1lKTp2b2lkIDA7dHQmJihpW2UueHNyZkhlYWRlck5hbWVdPXR0KX0ic2V0UmVxdWVzdEhlYWRlciJpbiB1JiZILmZvckVhY2goaSxmdW5jdGlvbihOLFMpe3R5cGVvZiBvPT0idW5kZWZpbmVkIiYmUy50b0xvd2VyQ2FzZSgpPT09ImNvbnRlbnQtdHlwZSI/ZGVsZXRlIGlbU106dS5zZXRSZXF1ZXN0SGVhZGVyKFMsTil9KSxILmlzVW5kZWZpbmVkKGUud2l0aENyZWRlbnRpYWxzKXx8KHUud2l0aENyZWRlbnRpYWxzPSEhZS53aXRoQ3JlZGVudGlhbHMpLGEmJmEhPT0ianNvbiImJih1LnJlc3BvbnNlVHlwZT1lLnJlc3BvbnNlVHlwZSksdHlwZW9mIGUub25Eb3dubG9hZFByb2dyZXNzPT0iZnVuY3Rpb24iJiZ1LmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uRG93bmxvYWRQcm9ncmVzcyksdHlwZW9mIGUub25VcGxvYWRQcm9ncmVzcz09ImZ1bmN0aW9uIiYmdS51cGxvYWQmJnUudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIixlLm9uVXBsb2FkUHJvZ3Jlc3MpLChlLmNhbmNlbFRva2VufHxlLnNpZ25hbCkmJihsPWZ1bmN0aW9uKGIpeyF1fHwobighYnx8YiYmYi50eXBlP25ldyBEdCgiY2FuY2VsZWQiKTpiKSx1LmFib3J0KCksdT1udWxsKX0sZS5jYW5jZWxUb2tlbiYmZS5jYW5jZWxUb2tlbi5zdWJzY3JpYmUobCksZS5zaWduYWwmJihlLnNpZ25hbC5hYm9ydGVkP2woKTplLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsbCkpKSxvfHwobz1udWxsKSx1LnNlbmQobyl9KX0saD1wLGtlPWJ0LHF0PXhlLEh0PXsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn07ZnVuY3Rpb24gQWUocixlKXshaC5pc1VuZGVmaW5lZChyKSYmaC5pc1VuZGVmaW5lZChyWyJDb250ZW50LVR5cGUiXSkmJihyWyJDb250ZW50LVR5cGUiXT1lKX1mdW5jdGlvbiBqdCgpe3ZhciByO3JldHVybih0eXBlb2YgWE1MSHR0cFJlcXVlc3QhPSJ1bmRlZmluZWQifHx0eXBlb2YgcHJvY2VzcyE9InVuZGVmaW5lZCImJk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKT09PSJbb2JqZWN0IHByb2Nlc3NdIikmJihyPU1lKSxyfWZ1bmN0aW9uIEp0KHIsZSx0KXtpZihoLmlzU3RyaW5nKHIpKXRyeXtyZXR1cm4oZXx8SlNPTi5wYXJzZSkociksaC50cmltKHIpfWNhdGNoKHMpe2lmKHMubmFtZSE9PSJTeW50YXhFcnJvciIpdGhyb3cgc31yZXR1cm4odHx8SlNPTi5zdHJpbmdpZnkpKHIpfXZhciBqPXt0cmFuc2l0aW9uYWw6e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9LGFkYXB0ZXI6anQoKSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbihlLHQpe3JldHVybiBrZSh0LCJBY2NlcHQiKSxrZSh0LCJDb250ZW50LVR5cGUiKSxoLmlzRm9ybURhdGEoZSl8fGguaXNBcnJheUJ1ZmZlcihlKXx8aC5pc0J1ZmZlcihlKXx8aC5pc1N0cmVhbShlKXx8aC5pc0ZpbGUoZSl8fGguaXNCbG9iKGUpP2U6aC5pc0FycmF5QnVmZmVyVmlldyhlKT9lLmJ1ZmZlcjpoLmlzVVJMU2VhcmNoUGFyYW1zKGUpPyhBZSh0LCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCIpLGUudG9TdHJpbmcoKSk6aC5pc09iamVjdChlKXx8dCYmdFsiQ29udGVudC1UeXBlIl09PT0iYXBwbGljYXRpb24vanNvbiI/KEFlKHQsImFwcGxpY2F0aW9uL2pzb24iKSxKdChlKSk6ZX1dLHRyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zaXRpb25hbHx8ai50cmFuc2l0aW9uYWwscz10JiZ0LnNpbGVudEpTT05QYXJzaW5nLG49dCYmdC5mb3JjZWRKU09OUGFyc2luZyxvPSFzJiZ0aGlzLnJlc3BvbnNlVHlwZT09PSJqc29uIjtpZihvfHxuJiZoLmlzU3RyaW5nKGUpJiZlLmxlbmd0aCl0cnl7cmV0dXJuIEpTT04ucGFyc2UoZSl9Y2F0Y2goaSl7aWYobyl0aHJvdyBpLm5hbWU9PT0iU3ludGF4RXJyb3IiP3F0KGksdGhpcywiRV9KU09OX1BBUlNFIik6aX1yZXR1cm4gZX1dLHRpbWVvdXQ6MCx4c3JmQ29va2llTmFtZToiWFNSRi1UT0tFTiIseHNyZkhlYWRlck5hbWU6IlgtWFNSRi1UT0tFTiIsbWF4Q29udGVudExlbmd0aDotMSxtYXhCb2R5TGVuZ3RoOi0xLHZhbGlkYXRlU3RhdHVzOmZ1bmN0aW9uKGUpe3JldHVybiBlPj0yMDAmJmU8MzAwfSxoZWFkZXJzOntjb21tb246e0FjY2VwdDoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIn19fTtoLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIl0sZnVuY3Rpb24oZSl7ai5oZWFkZXJzW2VdPXt9fSksaC5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sZnVuY3Rpb24oZSl7ai5oZWFkZXJzW2VdPWgubWVyZ2UoSHQpfSk7dmFyIEo9aixWdD1wLHp0PUosV3Q9ZnVuY3Rpb24oZSx0LHMpe3ZhciBuPXRoaXN8fHp0O3JldHVybiBWdC5mb3JFYWNoKHMsZnVuY3Rpb24oaSl7ZT1pLmNhbGwobixlLHQpfSksZX0sTmU9ZnVuY3Rpb24oZSl7cmV0dXJuISEoZSYmZS5fX0NBTkNFTF9fKX0sJGU9cCxvZT1XdCxHdD1OZSxRdD1KLFh0PXE7ZnVuY3Rpb24gYWUocil7aWYoci5jYW5jZWxUb2tlbiYmci5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCksci5zaWduYWwmJnIuc2lnbmFsLmFib3J0ZWQpdGhyb3cgbmV3IFh0KCJjYW5jZWxlZCIpfXZhciBLdD1mdW5jdGlvbihlKXthZShlKSxlLmhlYWRlcnM9ZS5oZWFkZXJzfHx7fSxlLmRhdGE9b2UuY2FsbChlLGUuZGF0YSxlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXF1ZXN0KSxlLmhlYWRlcnM9JGUubWVyZ2UoZS5oZWFkZXJzLmNvbW1vbnx8e30sZS5oZWFkZXJzW2UubWV0aG9kXXx8e30sZS5oZWFkZXJzKSwkZS5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsInBvc3QiLCJwdXQiLCJwYXRjaCIsImNvbW1vbiJdLGZ1bmN0aW9uKG4pe2RlbGV0ZSBlLmhlYWRlcnNbbl19KTt2YXIgdD1lLmFkYXB0ZXJ8fFF0LmFkYXB0ZXI7cmV0dXJuIHQoZSkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gYWUoZSksbi5kYXRhPW9lLmNhbGwoZSxuLmRhdGEsbi5oZWFkZXJzLGUudHJhbnNmb3JtUmVzcG9uc2UpLG59LGZ1bmN0aW9uKG4pe3JldHVybiBHdChuKXx8KGFlKGUpLG4mJm4ucmVzcG9uc2UmJihuLnJlc3BvbnNlLmRhdGE9b2UuY2FsbChlLG4ucmVzcG9uc2UuZGF0YSxuLnJlc3BvbnNlLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSkpKSxQcm9taXNlLnJlamVjdChuKX0pfSx5PXAsVWU9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBzPXt9O2Z1bmN0aW9uIG4odSxmKXtyZXR1cm4geS5pc1BsYWluT2JqZWN0KHUpJiZ5LmlzUGxhaW5PYmplY3QoZik/eS5tZXJnZSh1LGYpOnkuaXNQbGFpbk9iamVjdChmKT95Lm1lcmdlKHt9LGYpOnkuaXNBcnJheShmKT9mLnNsaWNlKCk6Zn1mdW5jdGlvbiBvKHUpe2lmKHkuaXNVbmRlZmluZWQodFt1XSkpe2lmKCF5LmlzVW5kZWZpbmVkKGVbdV0pKXJldHVybiBuKHZvaWQgMCxlW3VdKX1lbHNlIHJldHVybiBuKGVbdV0sdFt1XSl9ZnVuY3Rpb24gaSh1KXtpZigheS5pc1VuZGVmaW5lZCh0W3VdKSlyZXR1cm4gbih2b2lkIDAsdFt1XSl9ZnVuY3Rpb24gYSh1KXtpZih5LmlzVW5kZWZpbmVkKHRbdV0pKXtpZigheS5pc1VuZGVmaW5lZChlW3VdKSlyZXR1cm4gbih2b2lkIDAsZVt1XSl9ZWxzZSByZXR1cm4gbih2b2lkIDAsdFt1XSl9ZnVuY3Rpb24gbCh1KXtpZih1IGluIHQpcmV0dXJuIG4oZVt1XSx0W3VdKTtpZih1IGluIGUpcmV0dXJuIG4odm9pZCAwLGVbdV0pfXZhciBtPXt1cmw6aSxtZXRob2Q6aSxkYXRhOmksYmFzZVVSTDphLHRyYW5zZm9ybVJlcXVlc3Q6YSx0cmFuc2Zvcm1SZXNwb25zZTphLHBhcmFtc1NlcmlhbGl6ZXI6YSx0aW1lb3V0OmEsdGltZW91dE1lc3NhZ2U6YSx3aXRoQ3JlZGVudGlhbHM6YSxhZGFwdGVyOmEscmVzcG9uc2VUeXBlOmEseHNyZkNvb2tpZU5hbWU6YSx4c3JmSGVhZGVyTmFtZTphLG9uVXBsb2FkUHJvZ3Jlc3M6YSxvbkRvd25sb2FkUHJvZ3Jlc3M6YSxkZWNvbXByZXNzOmEsbWF4Q29udGVudExlbmd0aDphLG1heEJvZHlMZW5ndGg6YSx0cmFuc3BvcnQ6YSxodHRwQWdlbnQ6YSxodHRwc0FnZW50OmEsY2FuY2VsVG9rZW46YSxzb2NrZXRQYXRoOmEscmVzcG9uc2VFbmNvZGluZzphLHZhbGlkYXRlU3RhdHVzOmx9O3JldHVybiB5LmZvckVhY2goT2JqZWN0LmtleXMoZSkuY29uY2F0KE9iamVjdC5rZXlzKHQpKSxmdW5jdGlvbihmKXt2YXIgRT1tW2ZdfHxvLGc9RShmKTt5LmlzVW5kZWZpbmVkKGcpJiZFIT09bHx8KHNbZl09Zyl9KSxzfSxCZT17dmVyc2lvbjoiMC4yNS4wIn0sWXQ9QmUudmVyc2lvbix1ZT17fTtbIm9iamVjdCIsImJvb2xlYW4iLCJudW1iZXIiLCJmdW5jdGlvbiIsInN0cmluZyIsInN5bWJvbCJdLmZvckVhY2goZnVuY3Rpb24ocixlKXt1ZVtyXT1mdW5jdGlvbihzKXtyZXR1cm4gdHlwZW9mIHM9PT1yfHwiYSIrKGU8MT8ibiAiOiIgIikrcn19KTt2YXIgRmU9e307dWUudHJhbnNpdGlvbmFsPWZ1bmN0aW9uKGUsdCxzKXtmdW5jdGlvbiBuKG8saSl7cmV0dXJuIltBeGlvcyB2IitZdCsiXSBUcmFuc2l0aW9uYWwgb3B0aW9uICciK28rIiciK2krKHM/Ii4gIitzOiIiKX1yZXR1cm4gZnVuY3Rpb24obyxpLGEpe2lmKGU9PT0hMSl0aHJvdyBuZXcgRXJyb3IobihpLCIgaGFzIGJlZW4gcmVtb3ZlZCIrKHQ/IiBpbiAiK3Q6IiIpKSk7cmV0dXJuIHQmJiFGZVtpXSYmKEZlW2ldPSEwLGNvbnNvbGUud2FybihuKGksIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYiK3QrIiBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSIpKSksZT9lKG8saSxhKTohMH19O2Z1bmN0aW9uIFp0KHIsZSx0KXtpZih0eXBlb2YgciE9Im9iamVjdCIpdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCIpO2Zvcih2YXIgcz1PYmplY3Qua2V5cyhyKSxuPXMubGVuZ3RoO24tLSA+MDspe3ZhciBvPXNbbl0saT1lW29dO2lmKGkpe3ZhciBhPXJbb10sbD1hPT09dm9pZCAwfHxpKGEsbyxyKTtpZihsIT09ITApdGhyb3cgbmV3IFR5cGVFcnJvcigib3B0aW9uICIrbysiIG11c3QgYmUgIitsKTtjb250aW51ZX1pZih0IT09ITApdGhyb3cgRXJyb3IoIlVua25vd24gb3B0aW9uICIrbyl9fXZhciBlcj17YXNzZXJ0T3B0aW9uczpadCx2YWxpZGF0b3JzOnVlfSxMZT1wLHRyPVNlLERlPV90LHFlPUt0LFY9VWUsSGU9ZXIsTz1IZS52YWxpZGF0b3JzO2Z1bmN0aW9uICQocil7dGhpcy5kZWZhdWx0cz1yLHRoaXMuaW50ZXJjZXB0b3JzPXtyZXF1ZXN0Om5ldyBEZSxyZXNwb25zZTpuZXcgRGV9fSQucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZT09InN0cmluZyI/KHQ9dHx8e30sdC51cmw9ZSk6dD1lfHx7fSwhdC51cmwpdGhyb3cgbmV3IEVycm9yKCJQcm92aWRlZCBjb25maWcgdXJsIGlzIG5vdCB2YWxpZCIpO3Q9Vih0aGlzLmRlZmF1bHRzLHQpLHQubWV0aG9kP3QubWV0aG9kPXQubWV0aG9kLnRvTG93ZXJDYXNlKCk6dGhpcy5kZWZhdWx0cy5tZXRob2Q/dC5tZXRob2Q9dGhpcy5kZWZhdWx0cy5tZXRob2QudG9Mb3dlckNhc2UoKTp0Lm1ldGhvZD0iZ2V0Ijt2YXIgcz10LnRyYW5zaXRpb25hbDtzIT09dm9pZCAwJiZIZS5hc3NlcnRPcHRpb25zKHMse3NpbGVudEpTT05QYXJzaW5nOk8udHJhbnNpdGlvbmFsKE8uYm9vbGVhbiksZm9yY2VkSlNPTlBhcnNpbmc6Ty50cmFuc2l0aW9uYWwoTy5ib29sZWFuKSxjbGFyaWZ5VGltZW91dEVycm9yOk8udHJhbnNpdGlvbmFsKE8uYm9vbGVhbil9LCExKTt2YXIgbj1bXSxvPSEwO3RoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbihnKXt0eXBlb2YgZy5ydW5XaGVuPT0iZnVuY3Rpb24iJiZnLnJ1bldoZW4odCk9PT0hMXx8KG89byYmZy5zeW5jaHJvbm91cyxuLnVuc2hpZnQoZy5mdWxmaWxsZWQsZy5yZWplY3RlZCkpfSk7dmFyIGk9W107dGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbihnKXtpLnB1c2goZy5mdWxmaWxsZWQsZy5yZWplY3RlZCl9KTt2YXIgYTtpZighbyl7dmFyIGw9W3FlLHZvaWQgMF07Zm9yKEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGwsbiksbD1sLmNvbmNhdChpKSxhPVByb21pc2UucmVzb2x2ZSh0KTtsLmxlbmd0aDspYT1hLnRoZW4obC5zaGlmdCgpLGwuc2hpZnQoKSk7cmV0dXJuIGF9Zm9yKHZhciBtPXQ7bi5sZW5ndGg7KXt2YXIgdT1uLnNoaWZ0KCksZj1uLnNoaWZ0KCk7dHJ5e209dShtKX1jYXRjaChFKXtmKEUpO2JyZWFrfX10cnl7YT1xZShtKX1jYXRjaChFKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoRSl9Zm9yKDtpLmxlbmd0aDspYT1hLnRoZW4oaS5zaGlmdCgpLGkuc2hpZnQoKSk7cmV0dXJuIGF9LCQucHJvdG90eXBlLmdldFVyaT1mdW5jdGlvbihlKXtpZighZS51cmwpdGhyb3cgbmV3IEVycm9yKCJQcm92aWRlZCBjb25maWcgdXJsIGlzIG5vdCB2YWxpZCIpO3JldHVybiBlPVYodGhpcy5kZWZhdWx0cyxlKSx0cihlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxMZS5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSxmdW5jdGlvbihlKXskLnByb3RvdHlwZVtlXT1mdW5jdGlvbih0LHMpe3JldHVybiB0aGlzLnJlcXVlc3QoVihzfHx7fSx7bWV0aG9kOmUsdXJsOnQsZGF0YTooc3x8e30pLmRhdGF9KSl9fSksTGUuZm9yRWFjaChbInBvc3QiLCJwdXQiLCJwYXRjaCJdLGZ1bmN0aW9uKGUpeyQucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQscyxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFYobnx8e30se21ldGhvZDplLHVybDp0LGRhdGE6c30pKX19KTt2YXIgcnI9JCxzcj1xO2Z1bmN0aW9uIEkocil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpO3ZhciBlO3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihuKXtlPW59KTt2YXIgdD10aGlzO3RoaXMucHJvbWlzZS50aGVuKGZ1bmN0aW9uKHMpe2lmKCEhdC5fbGlzdGVuZXJzKXt2YXIgbixvPXQuX2xpc3RlbmVycy5sZW5ndGg7Zm9yKG49MDtuPG87bisrKXQuX2xpc3RlbmVyc1tuXShzKTt0Ll9saXN0ZW5lcnM9bnVsbH19KSx0aGlzLnByb21pc2UudGhlbj1mdW5jdGlvbihzKXt2YXIgbixvPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe3Quc3Vic2NyaWJlKGkpLG49aX0pLnRoZW4ocyk7cmV0dXJuIG8uY2FuY2VsPWZ1bmN0aW9uKCl7dC51bnN1YnNjcmliZShuKX0sb30scihmdW5jdGlvbihuKXt0LnJlYXNvbnx8KHQucmVhc29uPW5ldyBzcihuKSxlKHQucmVhc29uKSl9KX1JLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFzb24pdGhyb3cgdGhpcy5yZWFzb259LEkucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLnJlYXNvbil7ZSh0aGlzLnJlYXNvbik7cmV0dXJufXRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxJLnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZighIXRoaXMuX2xpc3RlbmVycyl7dmFyIHQ9dGhpcy5fbGlzdGVuZXJzLmluZGV4T2YoZSk7dCE9PS0xJiZ0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKHQsMSl9fSxJLnNvdXJjZT1mdW5jdGlvbigpe3ZhciBlLHQ9bmV3IEkoZnVuY3Rpb24obil7ZT1ufSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgbnI9SSxpcj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24ocyl7cmV0dXJuIGUuYXBwbHkobnVsbCxzKX19LG9yPXAsYXI9ZnVuY3Rpb24oZSl7cmV0dXJuIG9yLmlzT2JqZWN0KGUpJiZlLmlzQXhpb3NFcnJvcj09PSEwfSxqZT1wLHVyPUVlLHo9cnIsbHI9VWUsY3I9SjtmdW5jdGlvbiBKZShyKXt2YXIgZT1uZXcgeihyKSx0PXVyKHoucHJvdG90eXBlLnJlcXVlc3QsZSk7cmV0dXJuIGplLmV4dGVuZCh0LHoucHJvdG90eXBlLGUpLGplLmV4dGVuZCh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBKZShscihyLG4pKX0sdH12YXIgdz1KZShjcik7dy5BeGlvcz16LHcuQ2FuY2VsPXEsdy5DYW5jZWxUb2tlbj1ucix3LmlzQ2FuY2VsPU5lLHcuVkVSU0lPTj1CZS52ZXJzaW9uLHcuYWxsPWZ1bmN0aW9uKGUpe3JldHVybiBQcm9taXNlLmFsbChlKX0sdy5zcHJlYWQ9aXIsdy5pc0F4aW9zRXJyb3I9YXIsWS5leHBvcnRzPXcsWS5leHBvcnRzLmRlZmF1bHQ9dzt2YXIgZnI9WS5leHBvcnRzO2NsYXNzIGN7aXNFbXB0eSgpe3JldHVybiF0aGlzLmlzUHJlc2VudCgpfXN0YXRpYyBvZihlKXtpZihlIT1udWxsKXJldHVybiBuZXcgVmUoZSk7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIHBhc3NlZCB2YWx1ZSB3YXMgbnVsbCBvciB1bmRlZmluZWQuIil9c3RhdGljIG9mTm9uTnVsbChlKXtyZXR1cm4gYy5vZihlKX1zdGF0aWMgb2ZOdWxsYWJsZShlKXtyZXR1cm4gZSE9bnVsbD9uZXcgVmUoZSk6bmV3IHplfXN0YXRpYyBlbXB0eSgpe3JldHVybiBuZXcgemV9c3RhdGljIGZyb20oZSl7c3dpdGNoKGUua2luZCl7Y2FzZSJwcmVzZW50IjpyZXR1cm4gYy5vZihlLnZhbHVlKTtjYXNlImVtcHR5IjpyZXR1cm4gYy5lbXB0eSgpO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIHBhc3NlZCB2YWx1ZSB3YXMgbm90IGFuIE9wdGlvbiB0eXBlLiIpfX19Y2xhc3MgVmUgZXh0ZW5kcyBje2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5wYXlsb2FkPWV9aXNQcmVzZW50KCl7cmV0dXJuITB9Z2V0KCl7cmV0dXJuIHRoaXMucGF5bG9hZH1pZlByZXNlbnQoZSl7ZSh0aGlzLnBheWxvYWQpfWlmUHJlc2VudE9yRWxzZShlLHQpe2UodGhpcy5wYXlsb2FkKX1maWx0ZXIoZSl7cmV0dXJuIGUodGhpcy5wYXlsb2FkKT90aGlzOmMuZW1wdHkoKX1tYXAoZSl7Y29uc3QgdD1lKHRoaXMucGF5bG9hZCk7cmV0dXJuIGMub2ZOdWxsYWJsZSh0KX1mbGF0TWFwKGUpe3JldHVybiBlKHRoaXMucGF5bG9hZCl9b3IoZSl7cmV0dXJuIHRoaXN9b3JFbHNlKGUpe3JldHVybiB0aGlzLnBheWxvYWR9b3JFbHNlR2V0KGUpe3JldHVybiB0aGlzLnBheWxvYWR9b3JFbHNlVGhyb3coZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vck51bGwoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yVW5kZWZpbmVkKCl7cmV0dXJuIHRoaXMucGF5bG9hZH10b09wdGlvbigpe3JldHVybntraW5kOiJwcmVzZW50Iix2YWx1ZTp0aGlzLnBheWxvYWR9fW1hdGNoZXMoZSl7cmV0dXJuIGUucHJlc2VudCh0aGlzLnBheWxvYWQpfXRvSlNPTihlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfX1jbGFzcyB6ZSBleHRlbmRzIGN7aXNQcmVzZW50KCl7cmV0dXJuITF9Y29uc3RydWN0b3IoKXtzdXBlcigpfWdldCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBvcHRpb25hbCBpcyBub3QgcHJlc2VudC4iKX1pZlByZXNlbnQoZSl7fWlmUHJlc2VudE9yRWxzZShlLHQpe3QoKX1maWx0ZXIoZSl7cmV0dXJuIHRoaXN9bWFwKGUpe3JldHVybiBjLmVtcHR5KCl9ZmxhdE1hcChlKXtyZXR1cm4gYy5lbXB0eSgpfW9yKGUpe3JldHVybiBlKCl9b3JFbHNlKGUpe3JldHVybiBlfW9yRWxzZUdldChlKXtyZXR1cm4gdGhpcy5vckVsc2UoZSgpKX1vckVsc2VUaHJvdyhlKXt0aHJvdyBlKCl9b3JOdWxsKCl7cmV0dXJuIG51bGx9b3JVbmRlZmluZWQoKXt9dG9PcHRpb24oKXtyZXR1cm57a2luZDoiZW1wdHkifX1tYXRjaGVzKGUpe3JldHVybiBlLmVtcHR5KCl9dG9KU09OKGUpe3JldHVybiBudWxsfX1jb25zdCBocj0iMS4yLjciO2Z1bmN0aW9uIGRyKHIpe2dsb2JhbFRoaXMuX3ZvbmFnZU1lZGlhUHJvY2Vzc29yTWV0YWRhdGE9cn1mdW5jdGlvbiBwcigpe3JldHVybiBnbG9iYWxUaGlzLl92b25hZ2VNZWRpYVByb2Nlc3Nvck1ldGFkYXRhfWNsYXNzIF97Y29uc3RydWN0b3IoKXtjb25zdCBlPXByKCk7dGhpcy5fcmVwb3J0PXthY3Rpb246Yy5lbXB0eSgpLGFwcGxpY2F0aW9uSWQ6Yy5vZk51bGxhYmxlKGUhPT12b2lkIDAmJmUhPW51bGw/ZS5hcHBJZDpudWxsKSx0aW1lc3RhbXA6RGF0ZS5ub3coKSxmcHM6Yy5lbXB0eSgpLGZyYW1lc1RyYW5zZm9ybWVkOmMuZW1wdHkoKSxndWlkOmMuZW1wdHkoKSxoaWdoZXN0RnJhbWVUcmFuc2Zvcm1DcHU6Yy5lbXB0eSgpLG1lc3NhZ2U6Yy5lbXB0eSgpLHNvdXJjZTpjLm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLnNvdXJjZVR5cGU6bnVsbCksdHJhbnNmb3JtZWRGcHM6Yy5lbXB0eSgpLHRyYW5zZm9ybWVyVHlwZTpjLmVtcHR5KCksdmFyaWF0aW9uOmMuZW1wdHkoKSx2aWRlb0hlaWdodDpjLmVtcHR5KCksdmlkZW9XaWR0aDpjLmVtcHR5KCksdmVyc2lvbjpocixlcnJvcjpjLmVtcHR5KCkscHJveHlVcmw6Yy5vZk51bGxhYmxlKGUhPT12b2lkIDAmJmUhPW51bGw/ZS5wcm94eVVybDpudWxsKX19YWN0aW9uKGUpe3JldHVybiB0aGlzLl9yZXBvcnQuYWN0aW9uPWMub2ZOdWxsYWJsZShlKSx0aGlzfWZyYW1lc1RyYW5zZm9ybWVkKGUpe3JldHVybiB0aGlzLl9yZXBvcnQuZnJhbWVzVHJhbnNmb3JtZWQ9Yy5vZk51bGxhYmxlKGUpLHRoaXN9ZnBzKGUpe3JldHVybiB0aGlzLl9yZXBvcnQuZnBzPWMub2ZOdWxsYWJsZShlKSx0aGlzfWd1aWQoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5ndWlkPWMub2ZOdWxsYWJsZShlKSx0aGlzfW1lc3NhZ2UoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5tZXNzYWdlPWMub2ZOdWxsYWJsZShlKSx0aGlzfXRyYW5zZm9ybWVkRnBzKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudHJhbnNmb3JtZWRGcHM9Yy5vZk51bGxhYmxlKGUpLHRoaXN9dHJhbnNmb3JtZXJUeXBlKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudHJhbnNmb3JtZXJUeXBlPWMub2ZOdWxsYWJsZShlKSx0aGlzfXZhcmlhdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZhcmlhdGlvbj1jLm9mTnVsbGFibGUoZSksdGhpc312aWRlb0hlaWdodChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZpZGVvSGVpZ2h0PWMub2ZOdWxsYWJsZShlKSx0aGlzfXZpZGVvV2lkdGgoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC52aWRlb1dpZHRoPWMub2ZOdWxsYWJsZShlKSx0aGlzfWVycm9yKGUpe3JldHVybiB0aGlzLl9yZXBvcnQuZXJyb3I9Yy5vZk51bGxhYmxlKGUpLHRoaXN9YnVpbGQoKXtyZXR1cm4gdGhpcy5fcmVwb3J0fX1jb25zdCBtcj1yPT5KU09OLnN0cmluZ2lmeShyLChlLHQpPT57aWYodCE9PW51bGwpcmV0dXJuIHR9KTtjbGFzcyB2e3N0YXRpYyByZXBvcnQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCh0LHMpPT57aWYoZS5hcHBsaWNhdGlvbklkLmlzRW1wdHkoKXx8ZS5zb3VyY2UuaXNFbXB0eSgpKXt0KCJzdWNjZXNzIik7cmV0dXJufWxldCBuPWZyLmNyZWF0ZSgpLG89e3RpbWVvdXQ6MWU0LHRpbWVvdXRFcnJvck1lc3NhZ2U6IlJlcXVlc3QgdGltZW91dCIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL2pzb24ifX0saT0iaGxnLnRva2JveC5jb20vcHJvZC9sb2dnaW5nL3ZjcF93ZWJydGMiO2lmKGUucHJveHlVcmwuaXNFbXB0eSgpKWk9Imh0dHBzOi8vIitpO2Vsc2V7bGV0IGE7ZS5wcm94eVVybC5nZXQoKS5zbGljZShlLnByb3h5VXJsLmdldCgpLmxlbmd0aC0xKSE9PSIvIj9hPWUucHJveHlVcmwuZ2V0KCkrIi8iOmE9ZS5wcm94eVVybC5nZXQoKSxpPWEraX1uLnBvc3QoaSxtcihlKSxvKS50aGVuKGE9Pntjb25zb2xlLmxvZyhhKSx0KCJzdWNjZXNzIil9KS5jYXRjaChhPT57Y29uc29sZS5sb2coYSkscyhhKX0pfSl9fXZhciBXLGdyPW5ldyBVaW50OEFycmF5KDE2KTtmdW5jdGlvbiB5cigpe2lmKCFXJiYoVz10eXBlb2YgY3J5cHRvIT0idW5kZWZpbmVkIiYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcyYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byl8fHR5cGVvZiBtc0NyeXB0byE9InVuZGVmaW5lZCImJnR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXM9PSJmdW5jdGlvbiImJm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKSwhVykpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiBXKGdyKX12YXIgX3I9L14oPzpbMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMS01XVswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO2Z1bmN0aW9uIHZyKHIpe3JldHVybiB0eXBlb2Ygcj09InN0cmluZyImJl9yLnRlc3Qocil9Zm9yKHZhciBkPVtdLGxlPTA7bGU8MjU2OysrbGUpZC5wdXNoKChsZSsyNTYpLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSkpO2Z1bmN0aW9uIGJyKHIpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTowLHQ9KGRbcltlKzBdXStkW3JbZSsxXV0rZFtyW2UrMl1dK2RbcltlKzNdXSsiLSIrZFtyW2UrNF1dK2RbcltlKzVdXSsiLSIrZFtyW2UrNl1dK2RbcltlKzddXSsiLSIrZFtyW2UrOF1dK2RbcltlKzldXSsiLSIrZFtyW2UrMTBdXStkW3JbZSsxMV1dK2RbcltlKzEyXV0rZFtyW2UrMTNdXStkW3JbZSsxNF1dK2RbcltlKzE1XV0pLnRvTG93ZXJDYXNlKCk7aWYoIXZyKHQpKXRocm93IFR5cGVFcnJvcigiU3RyaW5naWZpZWQgVVVJRCBpcyBpbnZhbGlkIik7cmV0dXJuIHR9ZnVuY3Rpb24gV2UocixlLHQpe3I9cnx8e307dmFyIHM9ci5yYW5kb218fChyLnJuZ3x8eXIpKCk7aWYoc1s2XT1zWzZdJjE1fDY0LHNbOF09c1s4XSY2M3wxMjgsZSl7dD10fHwwO2Zvcih2YXIgbj0wO248MTY7KytuKWVbdCtuXT1zW25dO3JldHVybiBlfXJldHVybiBicihzKX1jb25zdCBQPW5ldyBXZWFrTWFwLEc9bmV3IFdlYWtNYXAsVT1uZXcgV2Vha01hcCxjZT1TeW1ib2woImFueVByb2R1Y2VyIiksR2U9UHJvbWlzZS5yZXNvbHZlKCksUT1TeW1ib2woImxpc3RlbmVyQWRkZWQiKSxYPVN5bWJvbCgibGlzdGVuZXJSZW1vdmVkIik7bGV0IGZlPSExO2Z1bmN0aW9uIE0ocil7aWYodHlwZW9mIHIhPSJzdHJpbmciJiZ0eXBlb2YgciE9InN5bWJvbCIpdGhyb3cgbmV3IFR5cGVFcnJvcigiZXZlbnROYW1lIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBzeW1ib2wiKX1mdW5jdGlvbiBLKHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGsocixlKXtjb25zdCB0PUcuZ2V0KHIpO3JldHVybiB0LmhhcyhlKXx8dC5zZXQoZSxuZXcgU2V0KSx0LmdldChlKX1mdW5jdGlvbiBCKHIsZSl7Y29uc3QgdD10eXBlb2YgZT09InN0cmluZyJ8fHR5cGVvZiBlPT0ic3ltYm9sIj9lOmNlLHM9VS5nZXQocik7cmV0dXJuIHMuaGFzKHQpfHxzLnNldCh0LG5ldyBTZXQpLHMuZ2V0KHQpfWZ1bmN0aW9uIHdyKHIsZSx0KXtjb25zdCBzPVUuZ2V0KHIpO2lmKHMuaGFzKGUpKWZvcihjb25zdCBuIG9mIHMuZ2V0KGUpKW4uZW5xdWV1ZSh0KTtpZihzLmhhcyhjZSkpe2NvbnN0IG49UHJvbWlzZS5hbGwoW2UsdF0pO2Zvcihjb25zdCBvIG9mIHMuZ2V0KGNlKSlvLmVucXVldWUobil9fWZ1bmN0aW9uIFFlKHIsZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2xldCB0PSExLHM9KCk9Pnt9LG49W107Y29uc3Qgbz17ZW5xdWV1ZShpKXtuLnB1c2goaSkscygpfSxmaW5pc2goKXt0PSEwLHMoKX19O2Zvcihjb25zdCBpIG9mIGUpQihyLGkpLmFkZChvKTtyZXR1cm57YXN5bmMgbmV4dCgpe3JldHVybiBuP24ubGVuZ3RoPT09MD90PyhuPXZvaWQgMCx0aGlzLm5leHQoKSk6KGF3YWl0IG5ldyBQcm9taXNlKGk9PntzPWl9KSx0aGlzLm5leHQoKSk6e2RvbmU6ITEsdmFsdWU6YXdhaXQgbi5zaGlmdCgpfTp7ZG9uZTohMH19LGFzeW5jIHJldHVybihpKXtuPXZvaWQgMDtmb3IoY29uc3QgYSBvZiBlKUIocixhKS5kZWxldGUobyk7cmV0dXJuIHMoKSxhcmd1bWVudHMubGVuZ3RoPjA/e2RvbmU6ITAsdmFsdWU6YXdhaXQgaX06e2RvbmU6ITB9fSxbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCl7cmV0dXJuIHRoaXN9fX1mdW5jdGlvbiBYZShyKXtpZihyPT09dm9pZCAwKXJldHVybiBLZTtpZighQXJyYXkuaXNBcnJheShyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyIpO2Zvcihjb25zdCBlIG9mIHIpaWYoIUtlLmluY2x1ZGVzKGUpKXRocm93IHR5cGVvZiBlIT0ic3RyaW5nIj9uZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOm5ldyBFcnJvcihgJHtlfSBpcyBub3QgRW1pdHRlcnkgbWV0aG9kYCk7cmV0dXJuIHJ9Y29uc3QgaGU9cj0+cj09PVF8fHI9PT1YO2NsYXNzIEN7c3RhdGljIG1peGluKGUsdCl7cmV0dXJuIHQ9WGUodCkscz0+e2lmKHR5cGVvZiBzIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24iKTtmb3IoY29uc3QgaSBvZiB0KWlmKHMucHJvdG90eXBlW2ldIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtpfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtmdW5jdGlvbiBuKCl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITEsdmFsdWU6bmV3IEN9KSx0aGlzW2VdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLnByb3RvdHlwZSxlLHtlbnVtZXJhYmxlOiExLGdldDpufSk7Y29uc3Qgbz1pPT5mdW5jdGlvbiguLi5hKXtyZXR1cm4gdGhpc1tlXVtpXSguLi5hKX07Zm9yKGNvbnN0IGkgb2YgdClPYmplY3QuZGVmaW5lUHJvcGVydHkocy5wcm90b3R5cGUsaSx7ZW51bWVyYWJsZTohMSx2YWx1ZTpvKGkpfSk7cmV0dXJuIHN9fXN0YXRpYyBnZXQgaXNEZWJ1Z0VuYWJsZWQoKXtpZih0eXBlb2YgcHJvY2VzcyE9Im9iamVjdCIpcmV0dXJuIGZlO2NvbnN0e2VudjplfT1wcm9jZXNzfHx7ZW52Ont9fTtyZXR1cm4gZS5ERUJVRz09PSJlbWl0dGVyeSJ8fGUuREVCVUc9PT0iKiJ8fGZlfXN0YXRpYyBzZXQgaXNEZWJ1Z0VuYWJsZWQoZSl7ZmU9ZX1jb25zdHJ1Y3RvcihlPXt9KXtQLnNldCh0aGlzLG5ldyBTZXQpLEcuc2V0KHRoaXMsbmV3IE1hcCksVS5zZXQodGhpcyxuZXcgTWFwKSx0aGlzLmRlYnVnPWUuZGVidWd8fHt9LHRoaXMuZGVidWcuZW5hYmxlZD09PXZvaWQgMCYmKHRoaXMuZGVidWcuZW5hYmxlZD0hMSksdGhpcy5kZWJ1Zy5sb2dnZXJ8fCh0aGlzLmRlYnVnLmxvZ2dlcj0odCxzLG4sbyk9PntvPUpTT04uc3RyaW5naWZ5KG8pLHR5cGVvZiBuPT0ic3ltYm9sIiYmKG49bi50b1N0cmluZygpKTtjb25zdCBpPW5ldyBEYXRlLGE9YCR7aS5nZXRIb3VycygpfToke2kuZ2V0TWludXRlcygpfToke2kuZ2V0U2Vjb25kcygpfS4ke2kuZ2V0TWlsbGlzZWNvbmRzKCl9YDtjb25zb2xlLmxvZyhgWyR7YX1dW2VtaXR0ZXJ5OiR7dH1dWyR7c31dIEV2ZW50IE5hbWU6ICR7bn0KCWRhdGE6ICR7b31gKX0pfWxvZ0lmRGVidWdFbmFibGVkKGUsdCxzKXsoQy5pc0RlYnVnRW5hYmxlZHx8dGhpcy5kZWJ1Zy5lbmFibGVkKSYmdGhpcy5kZWJ1Zy5sb2dnZXIoZSx0aGlzLmRlYnVnLm5hbWUsdCxzKX1vbihlLHQpe0sodCksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCBzIG9mIGUpTShzKSxrKHRoaXMscykuYWRkKHQpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoInN1YnNjcmliZSIscyx2b2lkIDApLGhlKHMpfHx0aGlzLmVtaXQoUSx7ZXZlbnROYW1lOnMsbGlzdGVuZXI6dH0pO3JldHVybiB0aGlzLm9mZi5iaW5kKHRoaXMsZSx0KX1vZmYoZSx0KXtLKHQpLGU9QXJyYXkuaXNBcnJheShlKT9lOltlXTtmb3IoY29uc3QgcyBvZiBlKU0ocyksayh0aGlzLHMpLmRlbGV0ZSh0KSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIscyx2b2lkIDApLGhlKHMpfHx0aGlzLmVtaXQoWCx7ZXZlbnROYW1lOnMsbGlzdGVuZXI6dH0pfW9uY2UoZSl7cmV0dXJuIG5ldyBQcm9taXNlKHQ9Pntjb25zdCBzPXRoaXMub24oZSxuPT57cygpLHQobil9KX0pfWV2ZW50cyhlKXtlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IHQgb2YgZSlNKHQpO3JldHVybiBRZSh0aGlzLGUpfWFzeW5jIGVtaXQoZSx0KXtNKGUpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLGUsdCksd3IodGhpcyxlLHQpO2NvbnN0IHM9ayh0aGlzLGUpLG49UC5nZXQodGhpcyksbz1bLi4uc10saT1oZShlKT9bXTpbLi4ubl07YXdhaXQgR2UsYXdhaXQgUHJvbWlzZS5hbGwoWy4uLm8ubWFwKGFzeW5jIGE9PntpZihzLmhhcyhhKSlyZXR1cm4gYSh0KX0pLC4uLmkubWFwKGFzeW5jIGE9PntpZihuLmhhcyhhKSlyZXR1cm4gYShlLHQpfSldKX1hc3luYyBlbWl0U2VyaWFsKGUsdCl7TShlKSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIixlLHQpO2NvbnN0IHM9ayh0aGlzLGUpLG49UC5nZXQodGhpcyksbz1bLi4uc10saT1bLi4ubl07YXdhaXQgR2U7Zm9yKGNvbnN0IGEgb2YgbylzLmhhcyhhKSYmYXdhaXQgYSh0KTtmb3IoY29uc3QgYSBvZiBpKW4uaGFzKGEpJiZhd2FpdCBhKGUsdCl9b25BbnkoZSl7cmV0dXJuIEsoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iix2b2lkIDAsdm9pZCAwKSxQLmdldCh0aGlzKS5hZGQoZSksdGhpcy5lbWl0KFEse2xpc3RlbmVyOmV9KSx0aGlzLm9mZkFueS5iaW5kKHRoaXMsZSl9YW55RXZlbnQoKXtyZXR1cm4gUWUodGhpcyl9b2ZmQW55KGUpe0soZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLHZvaWQgMCx2b2lkIDApLHRoaXMuZW1pdChYLHtsaXN0ZW5lcjplfSksUC5nZXQodGhpcykuZGVsZXRlKGUpfWNsZWFyTGlzdGVuZXJzKGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtmb3IoY29uc3QgdCBvZiBlKWlmKHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImNsZWFyIix0LHZvaWQgMCksdHlwZW9mIHQ9PSJzdHJpbmcifHx0eXBlb2YgdD09InN5bWJvbCIpe2sodGhpcyx0KS5jbGVhcigpO2NvbnN0IHM9Qih0aGlzLHQpO2Zvcihjb25zdCBuIG9mIHMpbi5maW5pc2goKTtzLmNsZWFyKCl9ZWxzZXtQLmdldCh0aGlzKS5jbGVhcigpO2Zvcihjb25zdCBzIG9mIEcuZ2V0KHRoaXMpLnZhbHVlcygpKXMuY2xlYXIoKTtmb3IoY29uc3QgcyBvZiBVLmdldCh0aGlzKS52YWx1ZXMoKSl7Zm9yKGNvbnN0IG4gb2YgcyluLmZpbmlzaCgpO3MuY2xlYXIoKX19fWxpc3RlbmVyQ291bnQoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2xldCB0PTA7Zm9yKGNvbnN0IHMgb2YgZSl7aWYodHlwZW9mIHM9PSJzdHJpbmciKXt0Kz1QLmdldCh0aGlzKS5zaXplK2sodGhpcyxzKS5zaXplK0IodGhpcyxzKS5zaXplK0IodGhpcykuc2l6ZTtjb250aW51ZX10eXBlb2YgcyE9InVuZGVmaW5lZCImJk0ocyksdCs9UC5nZXQodGhpcykuc2l6ZTtmb3IoY29uc3QgbiBvZiBHLmdldCh0aGlzKS52YWx1ZXMoKSl0Kz1uLnNpemU7Zm9yKGNvbnN0IG4gb2YgVS5nZXQodGhpcykudmFsdWVzKCkpdCs9bi5zaXplfXJldHVybiB0fWJpbmRNZXRob2RzKGUsdCl7aWYodHlwZW9mIGUhPSJvYmplY3QifHxlPT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpO3Q9WGUodCk7Zm9yKGNvbnN0IHMgb2YgdCl7aWYoZVtzXSE9PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7c31cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUscyx7ZW51bWVyYWJsZTohMSx2YWx1ZTp0aGlzW3NdLmJpbmQodGhpcyl9KX19fWNvbnN0IEtlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEMucHJvdG90eXBlKS5maWx0ZXIocj0+ciE9PSJjb25zdHJ1Y3RvciIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShDLCJsaXN0ZW5lckFkZGVkIix7dmFsdWU6USx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLCJsaXN0ZW5lclJlbW92ZWQiLHt2YWx1ZTpYLHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSk7dmFyIGRlPUM7ZnVuY3Rpb24gRXIocil7cmV0dXJuIHR5cGVvZiByPT0ib2JqZWN0IiYmciE9PW51bGwmJiJtZXNzYWdlImluIHImJnR5cGVvZiByLm1lc3NhZ2U9PSJzdHJpbmcifWZ1bmN0aW9uIFRyKHIpe2lmKEVyKHIpKXJldHVybiByO3RyeXtyZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHIpKX1jYXRjaHtyZXR1cm4gbmV3IEVycm9yKFN0cmluZyhyKSl9fWZ1bmN0aW9uIHBlKHIpe3JldHVybiBUcihyKS5tZXNzYWdlfXZhciBtZTsoZnVuY3Rpb24ocil7ci5GUFNfRFJPUD0iZnBzX2Ryb3AifSkobWV8fChtZT17fSkpO2NvbnN0IFJyPTUwMCxQcj0uODtjbGFzcyBDciBleHRlbmRzIGRle2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmluZGV4Xz10LHRoaXMudXVpZF89V2UoKSx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wLHRoaXMudHJhbnNmb3JtZXJfPWUsdGhpcy5zaG91bGRTdG9wXz0hMSx0aGlzLmlzRmxhc2hlZF89ITEsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnBzXz0wLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMudmlkZW9IZWlnaHRfPTAsdGhpcy52aWRlb1dpZHRoXz0wLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xLHRoaXMudHJhbnNmb3JtZXJUeXBlXz0iQ3VzdG9tIiwiZ2V0VHJhbnNmb3JtZXJUeXBlImluIGUmJih0aGlzLnRyYW5zZm9ybWVyVHlwZV89ZS5nZXRUcmFuc2Zvcm1lclR5cGUoKSk7Y29uc3Qgcz1uZXcgXygpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJDcmVhdGUiKS5idWlsZCgpO3YucmVwb3J0KHMpfXNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpe3RoaXMudHJhY2tFeHBlY3RlZFJhdGVfPWV9YXN5bmMgc3RhcnQoZSl7aWYodGhpcy5jb250cm9sbGVyXz1lLHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uc3RhcnQ9PSJmdW5jdGlvbiIpdHJ5e2F3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpfWNhdGNoKHQpe2NvbnN0IHM9bmV3IF8oKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoVC5lcnJvcnMudHJhbnNmb3JtZXJfc3RhcnQpLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRXJyb3IiKS5lcnJvcihwZSh0KSkuYnVpbGQoKTt2LnJlcG9ydChzKTtjb25zdCBuPXtldmVudE1ldGFEYXRhOnt0cmFuc2Zvcm1lckluZGV4OnRoaXMuaW5kZXhffSxlcnJvcjp0LGZ1bmN0aW9uOiJzdGFydCJ9O3RoaXMuZW1pdCgiZXJyb3IiLG4pfX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt2YXIgcyxuLG8saTtpZih0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnRTdGFydFRpbWVzdGFtcF89PT0wJiYodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPURhdGUubm93KCkpLGUgaW5zdGFuY2VvZiBWaWRlb0ZyYW1lJiYodGhpcy52aWRlb0hlaWdodF89KHM9ZT09bnVsbD92b2lkIDA6ZS5kaXNwbGF5SGVpZ2h0KSE9bnVsbD9zOjAsdGhpcy52aWRlb1dpZHRoXz0obj1lPT1udWxsP3ZvaWQgMDplLmRpc3BsYXlXaWR0aCkhPW51bGw/bjowKSwrK3RoaXMuZnJhbWVzRnJvbVNvdXJjZV8sdGhpcy50cmFuc2Zvcm1lcl8paWYodGhpcy5zaG91bGRTdG9wXyljb25zb2xlLndhcm4oIltQaXBlbGluZV0gZmx1c2ggZnJvbSB0cmFuc2Zvcm0iKSxlLmNsb3NlKCksdGhpcy5mbHVzaCh0KSx0LnRlcm1pbmF0ZSgpO2Vsc2UgdHJ5e2F3YWl0KChpPShvPXRoaXMudHJhbnNmb3JtZXJfKS50cmFuc2Zvcm0pPT1udWxsP3ZvaWQgMDppLmNhbGwobyxlLHQpKSwrK3RoaXMuZnJhbWVzVHJhbnNmb3JtZWRfLHRoaXMuZnJhbWVzVHJhbnNmb3JtZWRfPT09UnImJnRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpfWNhdGNoKGEpe2NvbnN0IGw9bmV3IF8oKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoVC5lcnJvcnMudHJhbnNmb3JtZXJfdHJhbnNmb3JtKS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52YXJpYXRpb24oIkVycm9yIikuZXJyb3IocGUoYSkpLmJ1aWxkKCk7di5yZXBvcnQobCk7Y29uc3QgbT17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sZXJyb3I6YSxmdW5jdGlvbjoidHJhbnNmb3JtIn07dGhpcy5lbWl0KCJlcnJvciIsbSl9fWFzeW5jIGZsdXNoKGUpe2lmKHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2g9PSJmdW5jdGlvbiImJiF0aGlzLmlzRmxhc2hlZF8pe3RoaXMuaXNGbGFzaGVkXz0hMDt0cnl7YXdhaXQgdGhpcy50cmFuc2Zvcm1lcl8uZmx1c2goZSl9Y2F0Y2gocyl7Y29uc3Qgbj1uZXcgXygpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykubWVzc2FnZShULmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCkudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJFcnJvciIpLmVycm9yKHBlKHMpKS5idWlsZCgpO3YucmVwb3J0KG4pO2NvbnN0IG89e2V2ZW50TWV0YURhdGE6e3RyYW5zZm9ybWVySW5kZXg6dGhpcy5pbmRleF99LGVycm9yOnMsZnVuY3Rpb246ImZsdXNoIn07dGhpcy5lbWl0KCJlcnJvciIsbyl9fXRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpO2NvbnN0IHQ9bmV3IF8oKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTt2LnJlcG9ydCh0KX1zdG9wKCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksdGhpcy5jb250cm9sbGVyXyYmKHRoaXMuZmx1c2godGhpcy5jb250cm9sbGVyXyksdGhpcy5jb250cm9sbGVyXy50ZXJtaW5hdGUoKSksdGhpcy5zaG91bGRTdG9wXz0hMH1tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0KCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfKS8xZTMsdD10aGlzLmZyYW1lc0Zyb21Tb3VyY2VfL2Uscz10aGlzLmZyYW1lc1RyYW5zZm9ybWVkXy9lO2lmKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfIT0tMSYmdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8qUHI+dCl7Y29uc3Qgbz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sd2FybmluZ1R5cGU6bWUuRlBTX0RST1AsZHJvcEluZm86e3JlcXVlc3RlZDp0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyxjdXJyZW50OnR9fTt0aGlzLmVtaXQoIndhcm4iLG8pfWNvbnN0IG49bmV3IF8oKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5mcHModCkudHJhbnNmb3JtZWRGcHMocykuZnJhbWVzVHJhbnNmb3JtZWQodGhpcy5mcmFtZXNUcmFuc2Zvcm1lZF8pLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmlkZW9IZWlnaHQodGhpcy52aWRlb0hlaWdodF8pLnZpZGVvV2lkdGgodGhpcy52aWRlb1dpZHRoXykudmFyaWF0aW9uKCJRb1MiKS5idWlsZCgpO3YucmVwb3J0KG4pLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMuZnJhbWVzRnJvbVNvdXJjZV89MCx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wfX1jbGFzcyBTciBleHRlbmRzIGRle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy50cmFuc2Zvcm1lcnNfPVtdLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtsZXQgcz1uZXcgQ3IoZVt0XSx0KTtzLm9uKCJlcnJvciIsbj0+e3RoaXMuZW1pdCgiZXJyb3IiLG4pfSkscy5vbigid2FybiIsbj0+e3RoaXMuZW1pdCgid2FybiIsbil9KSx0aGlzLnRyYW5zZm9ybWVyc18ucHVzaChzKX19c2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy50cmFja0V4cGVjdGVkUmF0ZV89ZTtmb3IobGV0IHQgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKXQuc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy50cmFja0V4cGVjdGVkUmF0ZV8pfWFzeW5jIHN0YXJ0KGUsdCl7aWYoIXRoaXMudHJhbnNmb3JtZXJzX3x8dGhpcy50cmFuc2Zvcm1lcnNfLmxlbmd0aD09PTApe2NvbnNvbGUubG9nKCJbUGlwZWxpbmVdIE5vIHRyYW5zZm9ybWVycy4iKTtyZXR1cm59dHJ5e2xldCBzPWU7Zm9yKGxldCBuIG9mIHRoaXMudHJhbnNmb3JtZXJzXyllPWUucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbShuKSk7ZS5waXBlVG8odCkudGhlbihhc3luYygpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2V0dXAuIiksYXdhaXQgdC5hYm9ydCgpLGF3YWl0IHMuY2FuY2VsKCksdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLHttZXNzYWdlOiJwaXBlbGluZV9lbmRlZCJ9KX0pLmNhdGNoKGFzeW5jIG49PntlLmNhbmNlbCgpLnRoZW4oKCk9Pntjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTaHV0dGluZyBkb3duIHN0cmVhbXMgYWZ0ZXIgYWJvcnQuIil9KS5jYXRjaChvPT57Y29uc29sZS5lcnJvcigiW1BpcGVsaW5lXSBFcnJvciBmcm9tIHN0cmVhbSB0cmFuc2Zvcm06IixvKX0pLGF3YWl0IHQuYWJvcnQobiksYXdhaXQgcy5jYW5jZWwobiksdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLHttZXNzYWdlOiJwaXBlbGluZV9lbmRlZF93aXRoX2Vycm9yIn0pfSl9Y2F0Y2h7dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLHttZXNzYWdlOiJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IifSksdGhpcy5kZXN0cm95KCk7cmV0dXJufXRoaXMuZW1pdCgicGlwZWxpbmVJbmZvIix7bWVzc2FnZToicGlwZWxpbmVfc3RhcnRlZCJ9KSxjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBQaXBlbGluZSBzdGFydGVkLiIpfWFzeW5jIGRlc3Ryb3koKXtjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBEZXN0cm95aW5nIFBpcGVsaW5lLiIpO2ZvcihsZXQgZSBvZiB0aGlzLnRyYW5zZm9ybWVyc18pZS5zdG9wKCl9fWNsYXNzIHhyIGV4dGVuZHMgZGV7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudXVpZF89V2UoKSx0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz0tMTtjb25zdCBlPW5ldyBfKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykudmFyaWF0aW9uKCJDcmVhdGUiKS5idWlsZCgpO3YucmVwb3J0KGUpfXNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpe3RoaXMudHJhY2tFeHBlY3RlZFJhdGVfPWUsdGhpcy5waXBlbGluZV8mJnRoaXMucGlwZWxpbmVfLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfKX10cmFuc2Zvcm0oZSx0KXtyZXR1cm4gdGhpcy5yZWFkYWJsZV89ZSx0aGlzLndyaXRhYmxlXz10LHRoaXMudHJhbnNmb3JtSW50ZXJuYWwoKX10cmFuc2Zvcm1JbnRlcm5hbCgpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e2lmKCF0aGlzLnRyYW5zZm9ybWVyc198fHRoaXMudHJhbnNmb3JtZXJzXy5sZW5ndGg9PT0wKXtjb25zdCBuPW5ldyBfKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykubWVzc2FnZShULmVycm9ycy50cmFuc2Zvcm1lcl9ub25lKS52YXJpYXRpb24oIkVycm9yIikuYnVpbGQoKTt2LnJlcG9ydChuKSx0KCJbTWVkaWFQcm9jZXNzb3JdIE5lZWQgdG8gc2V0IHRyYW5zZm9ybWVycy4iKTtyZXR1cm59aWYoIXRoaXMucmVhZGFibGVfKXtjb25zdCBuPW5ldyBfKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykubWVzc2FnZShULmVycm9ycy5yZWFkYWJsZV9udWxsKS52YXJpYXRpb24oIkVycm9yIikuYnVpbGQoKTt2LnJlcG9ydChuKSx0KCJbTWVkaWFQcm9jZXNzb3JdIFJlYWRhYmxlIGlzIG51bGwuIik7cmV0dXJufWlmKCF0aGlzLndyaXRhYmxlXyl7Y29uc3Qgbj1uZXcgXygpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoVC5lcnJvcnMud3JpdGFibGVfbnVsbCkudmFyaWF0aW9uKCJFcnJvciIpLmJ1aWxkKCk7di5yZXBvcnQobiksdCgiW01lZGlhUHJvY2Vzc29yXSBXcml0YWJsZSBpcyBudWxsLiIpO3JldHVybn1sZXQgcz0hMTt0aGlzLnBpcGVsaW5lXyYmKHM9ITAsdGhpcy5waXBlbGluZV8uY2xlYXJMaXN0ZW5lcnMoKSx0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCkpLHRoaXMucGlwZWxpbmVfPW5ldyBTcih0aGlzLnRyYW5zZm9ybWVyc18pLHRoaXMucGlwZWxpbmVfLm9uKCJ3YXJuIixuPT57dGhpcy5lbWl0KCJ3YXJuIixuKX0pLHRoaXMucGlwZWxpbmVfLm9uKCJlcnJvciIsbj0+e3RoaXMuZW1pdCgiZXJyb3IiLG4pfSksdGhpcy5waXBlbGluZV8ub24oInBpcGVsaW5lSW5mbyIsbj0+e3MmJihuLm1lc3NhZ2U9PT0icGlwZWxpbmVfc3RhcnRlZCI/bi5tZXNzYWdlPSJwaXBlbGluZV9yZXN0YXJ0ZWQiOm4ubWVzc2FnZT09PSJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiJiYobi5tZXNzYWdlPSJwaXBlbGluZV9yZXN0YXJ0ZWRfd2l0aF9lcnJvciIpKSx0aGlzLmVtaXQoInBpcGVsaW5lSW5mbyIsbil9KSx0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyE9LTEmJnRoaXMucGlwZWxpbmVfLnNldFRyYWNrRXhwZWN0ZWRSYXRlKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfKSx0aGlzLnBpcGVsaW5lXy5zdGFydCh0aGlzLnJlYWRhYmxlXyx0aGlzLndyaXRhYmxlXykudGhlbigoKT0+e2UoKX0pLmNhdGNoKG49Pnt0KG4pfSl9KX1zZXRUcmFuc2Zvcm1lcnMoZSl7Y29uc3QgdD1uZXcgXygpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UoVC51cGRhdGVzLnRyYW5zZm9ybWVyX25ldykudmFyaWF0aW9uKCJVcGRhdGUiKS5idWlsZCgpO3JldHVybiB2LnJlcG9ydCh0KSx0aGlzLnRyYW5zZm9ybWVyc189ZSx0aGlzLnJlYWRhYmxlXyYmdGhpcy53cml0YWJsZV8/dGhpcy50cmFuc2Zvcm1JbnRlcm5hbCgpOlByb21pc2UucmVzb2x2ZSgpfWRlc3Ryb3koKXtyZXR1cm4gbmV3IFByb21pc2UoZT0+e3RoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5kZXN0cm95KCk7Y29uc3QgdD1uZXcgXygpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTt2LnJlcG9ydCh0KSxlKCl9KX19dmFyIGdlPShyPT4oci5Mb3c9IkxvdyIsci5IaWdoPSJIaWdoIixyKSkoZ2V8fHt9KTtjbGFzcyBZZXtjb25zdHJ1Y3RvcihlKXt0eXBlb2YgZT09Im51bWJlciI/dGhpcy5ibHVyRmlsdGVyXz0iYmx1cigiK2UrInB4KSI6dGhpcy5ibHVyRmlsdGVyXz1lPT09Z2UuSGlnaD8iYmx1cigxMHB4KSI6ImJsdXIoNXB4KSJ9ZGVzdHJveSgpe3JldHVybiBuZXcgUHJvbWlzZShlPT57ZSgpfSl9cnVuUG9zdFByb2Nlc3NpbmcoZSx0KXt0cnl7ZS5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImRlc3RpbmF0aW9uLW92ZXIiLGUuZmlsdGVyPXRoaXMuYmx1ckZpbHRlcl8sZS5kcmF3SW1hZ2UodCwwLDAsdC53aWR0aCx0LmhlaWdodCl9Y2F0Y2gocyl7Y29uc29sZS5sb2coIltCbHVyUG9zdFByb2Nlc3NdIEZhaWxlZCB0byBkcmF3IGNhbnZhcyIscyl9fX1jbGFzcyBaZXtjb25zdHJ1Y3Rvcigpe31kZXN0cm95KCl7cmV0dXJuIG5ldyBQcm9taXNlKGU9Pnt0aGlzLmJnSW1hZ2VfJiZ0aGlzLmJnSW1hZ2VfLmNsb3NlKCksZSgpfSl9c2V0VmlydHVhbEJHSW1hZ2UoZSl7dGhpcy5iZ0ltYWdlXyYmdGhpcy5iZ0ltYWdlXy5jbG9zZSgpLHRoaXMuYmdJbWFnZV89ZX1hc3luYyBydW5Qb3N0UHJvY2Vzc2luZyhlLHQpe2lmKHRoaXMuYmdJbWFnZV8pe2lmKHRoaXMuYmdJbWFnZV8ud2lkdGghPXQud2lkdGh8fHRoaXMuYmdJbWFnZV8uaGVpZ2h0IT10LmhlaWdodCl7Y29uc3Qgcz0iaGlnaCIsbj17cmVzaXplV2lkdGg6dC53aWR0aCxyZXNpemVIZWlnaHQ6dC5oZWlnaHQscmVzaXplUXVhbGl0eTpzfTt0cnl7dGhpcy5iZ0ltYWdlXz1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0aGlzLmJnSW1hZ2VfLG4pfWNhdGNoKG8pe3Rocm93IG99fWUuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdmVyIixlLmRyYXdJbWFnZSh0aGlzLmJnSW1hZ2VfLDAsMCx0aGlzLmJnSW1hZ2VfLndpZHRoLHRoaXMuYmdJbWFnZV8uaGVpZ2h0KX19fWNsYXNzIE9ye2NvbnN0cnVjdG9yKGU9MS8wKXt0aGlzLmNhcGFjaXR5PWUsdGhpcy5zdG9yYWdlPVtdfWVucXVldWUoZSl7aWYodGhpcy5zaXplKCk9PT10aGlzLmNhcGFjaXR5KXRocm93IEVycm9yKCJRdWV1ZSBoYXMgcmVhY2hlZCBtYXggY2FwYWNpdHksIHlvdSBjYW5ub3QgYWRkIG1vcmUgaXRlbXMiKTt0aGlzLnN0b3JhZ2UucHVzaChlKX1kZXF1ZXVlKCl7cmV0dXJuIHRoaXMuc3RvcmFnZS5zaGlmdCgpfXNpemUoKXtyZXR1cm4gdGhpcy5zdG9yYWdlLmxlbmd0aH19Y29uc3QgeWU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLnF1ZXVlXz1uZXcgT3J9Y2xlYXJRdWV1ZShyKXtmb3IoO3RoaXMucXVldWVfLnNpemUoKT4wOyl0aGlzLnF1ZXVlXy5kZXF1ZXVlKCkuY2xvc2UoKX1zZXRWaWRlb1JlYWRhYmxlKHIpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e3RoaXMuZnJhbWVSZWFkZXJfPXIuZ2V0UmVhZGVyKCksdGhpcy5mcmFtZVJlYWRlcl8ucmVhZCgpLnRoZW4ocz0+e3RoaXMucHJvY2Vzc0ZyYW1lKHMpfSkuY2F0Y2gocz0+e3Qocyl9KSxlKCl9KX1kZXN0cm95KCl7cmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jKHIsZSk9Pnt2YXIgdDt0aGlzLmNsZWFyUXVldWUoITApLHRoaXMuZnJhbWVSZWFkZXJfPyh0PXRoaXMuZnJhbWVSZWFkZXJfKT09bnVsbHx8dC5jYW5jZWwoKS50aGVuKCgpPT57cigpfSkuY2F0Y2gocz0+e2Uocyl9KTpyKCl9KX1wcm9jZXNzRnJhbWUocil7aWYoIXIuZG9uZSl7aWYoIXRoaXMuZnJhbWVSZWFkZXJfKXtyLnZhbHVlLmNsb3NlKCk7cmV0dXJufWZvcig7dGhpcy5xdWV1ZV8uc2l6ZSgpPj15ZS5OVU1CRVJfT0ZfRlJBTUVTX1RPX0NMRUFSOyl7bGV0IGU9dGhpcy5xdWV1ZV8uZGVxdWV1ZSgpO2UmJmUuY2xvc2UoKX10aGlzLnF1ZXVlXy5lbnF1ZXVlKHIudmFsdWUpLHRoaXMuZnJhbWVSZWFkZXJfLnJlYWQoKS50aGVuKGU9Pnt0aGlzLnByb2Nlc3NGcmFtZShlKX0pLmNhdGNoKGU9Pntjb25zb2xlLmVycm9yKGUpfSl9fXJ1blBvc3RQcm9jZXNzaW5nKHIsZSl7dHJ5e2lmKHIuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdmVyIix0aGlzLnF1ZXVlXy5zaXplKCk+eWUuTlVNQkVSX09GX0ZSQU1FU19UT19DTEVBUiYmdGhpcy5jbGVhclF1ZXVlKCExKSx0aGlzLnF1ZXVlXy5zaXplKCk+MCl7Y29uc3QgdD10aGlzLnF1ZXVlXy5kZXF1ZXVlKCk7ci5kcmF3SW1hZ2UodCwwLDAsZS53aWR0aCxlLmhlaWdodCksdC5jbG9zZSgpfX1jYXRjaCh0KXtjb25zb2xlLmVycm9yKCJbVmlkZW9Qb3N0UHJvY2Vzc10gRmFpbGVkIHRvIGRyYXcgY2FudmFzIix0KX19fTtsZXQgX2U9eWU7X2UuTlVNQkVSX09GX0ZSQU1FU19UT19DTEVBUj01O2NsYXNzIElye2NvbnN0cnVjdG9yKGUpe3R5cGVvZiBlPT0ibnVtYmVyIj90aGlzLmJsdXJGaWx0ZXJfPSJibHVyKCIrZSsicHgpIjp0aGlzLmJsdXJGaWx0ZXJfPWU9PT1nZS5IaWdoPyJibHVyKDEwcHgpIjoiYmx1cig1cHgpIn1kZXN0cm95KCl7cmV0dXJuIG5ldyBQcm9taXNlKGU9PntlKCl9KX1ydW5Qb3N0UHJvY2Vzc2luZyhlLHQpe3RyeXtlLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0ic291cmNlLWluIixlLmZpbHRlcj10aGlzLmJsdXJGaWx0ZXJfLGUuZHJhd0ltYWdlKHQsMCwwLHQud2lkdGgsdC5oZWlnaHQpLGUuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJkZXN0aW5hdGlvbi1vdmVyIixlLmZpbHRlcj0iYmx1cigwcHgpIixlLmRyYXdJbWFnZSh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KX1jYXRjaChzKXtjb25zb2xlLmxvZygiW0JsdXJQb3N0UHJvY2Vzc10gRmFpbGVkIHRvIGRyYXcgY2FudmFzIixzKX19fWNvbnN0IHZlPWNsYXNze2NvbnN0cnVjdG9yKCl7aWYodGhpcy5yZXN1bHRDYW52YXNfPW5ldyBPZmZzY3JlZW5DYW52YXMoMSwxKSx0aGlzLnJlc3VsdEN0eF89dGhpcy5yZXN1bHRDYW52YXNfLmdldENvbnRleHQoIjJkIix7ZGVzeW5jaHJvbml6ZWQ6ITB9KSwhdGhpcy5yZXN1bHRDdHhfKXRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGNyZWF0ZSBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQiKTtpZih0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfPW5ldyBPZmZzY3JlZW5DYW52YXModmUuU0VMRklFX1dJRFRILHZlLlNFTEZJRV9ISUdIVCksdGhpcy5zZWdtZW50YXRpb25NYXNrQ3R4Xz10aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITEsZGVzeW5jaHJvbml6ZWQ6ITB9KSwhdGhpcy5zZWdtZW50YXRpb25NYXNrQ3R4Xyl0aHJvdyBuZXcgRXJyb3IoIlVuYWJsZSB0byBjcmVhdGUgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIik7aWYodGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDEsMSksdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ3R4Xz10aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDYW52YXNfLmdldENvbnRleHQoIjJkIix7ZGVzeW5jaHJvbml6ZWQ6ITB9KSwhdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ3R4Xyl0aHJvdyBuZXcgRXJyb3IoIlVuYWJsZSB0byBjcmVhdGUgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIil9aW5pdChyKXt0aGlzLnByb2Nlc3NGcmFtZUNiPXJ9YXN5bmMgc2V0QmFja2dyb3VuZE9wdGlvbnMocil7aWYodHlwZW9mIHRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfIT0idW5kZWZpbmVkIil0cnl7YXdhaXQgdGhpcy5wb3N0UHJvY2Vzc0ludGVyZmFjZV8uZGVzdHJveSgpfWNhdGNoKGUpe3Rocm93IGV9aWYoci50cmFuc2Zvcm1lclR5cGU9PT0iVmlydHVhbEJhY2tncm91bmQiKXRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfPW5ldyBaZTtlbHNlIGlmKHIudHJhbnNmb3JtZXJUeXBlPT09IkJhY2tncm91bmRCbHVyIil7bGV0IGU9cjt0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXz1uZXcgWWUoZS5yYWRpdXMpfWVsc2UgaWYoci50cmFuc2Zvcm1lclR5cGU9PT0iVmlkZW9CYWNrZ3JvdW5kIil0aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXz1uZXcgX2U7ZWxzZSBpZihyLnRyYW5zZm9ybWVyVHlwZT09PSJTaWx1ZXRlQmx1ciIpe2xldCBlPXI7dGhpcy5wb3N0UHJvY2Vzc0ludGVyZmFjZV89bmV3IElyKGUucmFkaXVzKX1lbHNlIHRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfPW5ldyBZZX1jbG9zZSgpe3JldHVybiBuZXcgUHJvbWlzZSgocixlKT0+e3RoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfP3RoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfLmRlc3Ryb3koKS50aGVuKCgpPT57cigpfSkuY2F0Y2godD0+e2UodCl9KTpyKCl9KX1zdGFydCgpe31hc3luYyB0cmFuc2Zvcm0ocixlKXsodGhpcy5yZXN1bHRDYW52YXNfLndpZHRoIT1yLmRpc3BsYXlXaWR0aHx8dGhpcy5yZXN1bHRDYW52YXNfLmhlaWdodCE9ci5kaXNwbGF5SGVpZ2h0KSYmKHRoaXMucmVzdWx0Q2FudmFzXy53aWR0aD1yLmRpc3BsYXlXaWR0aCx0aGlzLnJlc3VsdENhbnZhc18uaGVpZ2h0PXIuZGlzcGxheUhlaWdodCk7Y29uc3QgdD1yLnRpbWVzdGFtcDtjcmVhdGVJbWFnZUJpdG1hcChyKS50aGVuKHM9PntyLmNsb3NlKCksdGhpcy5wcm9jZXNzRnJhbWUoZSxzLHQpfSkuY2F0Y2gocz0+e2UuZW5xdWV1ZShyKX0pfXByb2Nlc3NGcmFtZShyLGUsdCl7dGhpcy5wcm9jZXNzU291cmNlKGUpLHRoaXMucmVzdWx0Q3R4Xy5zYXZlKCksdGhpcy5yZXN1bHRDdHhfLmNsZWFyUmVjdCgwLDAsdGhpcy5yZXN1bHRDYW52YXNfLndpZHRoLHRoaXMucmVzdWx0Q2FudmFzXy5oZWlnaHQpLHRoaXMucmVzdWx0Q3R4Xy5kcmF3SW1hZ2UodGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXywwLDAsdGhpcy5zZWdtZW50YXRpb25NYXNrQ2FudmFzXy53aWR0aCx0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfLmhlaWdodCwwLDAsdGhpcy5yZXN1bHRDYW52YXNfLndpZHRoLHRoaXMucmVzdWx0Q2FudmFzXy5oZWlnaHQpLHRoaXMucmVzdWx0Q3R4Xy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1pbiIsdGhpcy5yZXN1bHRDdHhfLmZpbHRlcj0ibm9uZSIsdGhpcy5yZXN1bHRDdHhfLmRyYXdJbWFnZShlLDAsMCxlLndpZHRoLGUuaGVpZ2h0LDAsMCx0aGlzLnJlc3VsdENhbnZhc18ud2lkdGgsdGhpcy5yZXN1bHRDYW52YXNfLmhlaWdodCksdGhpcy5wb3N0UHJvY2Vzc0ludGVyZmFjZV8mJnRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfLnJ1blBvc3RQcm9jZXNzaW5nKHRoaXMucmVzdWx0Q3R4XyxlKSx0aGlzLnJlc3VsdEN0eF8ucmVzdG9yZSgpLHIuZW5xdWV1ZShuZXcgVmlkZW9GcmFtZSh0aGlzLnJlc3VsdENhbnZhc18se3RpbWVzdGFtcDp0LGFscGhhOiJkaXNjYXJkIn0pKSxlLmNsb3NlKCl9cHJvY2Vzc1NvdXJjZShyKXtpZih0aGlzLnNlZ21lbnRhdGlvbk1hc2tDdHhfLmNsZWFyUmVjdCgwLDAsdGhpcy5zZWdtZW50YXRpb25NYXNrQ2FudmFzXy53aWR0aCx0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfLmhlaWdodCksdGhpcy5zZWdtZW50YXRpb25NYXNrQ3R4Xy5kcmF3SW1hZ2UociwwLDAsci53aWR0aCxyLmhlaWdodCwwLDAsdGhpcy5zZWdtZW50YXRpb25NYXNrQ2FudmFzXy53aWR0aCx0aGlzLnNlZ21lbnRhdGlvbk1hc2tDYW52YXNfLmhlaWdodCksdGhpcy5wcm9jZXNzRnJhbWVDYil7bGV0IGU9dGhpcy5zZWdtZW50YXRpb25NYXNrQ2FudmFzXy50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKTt0aGlzLnByb2Nlc3NGcmFtZUNiKGUpfX1mbHVzaCgpe31nZXRUcmFuc2Zvcm1lclR5cGUoKXtyZXR1cm4iQmFja2dyb3VuZFRyYW5zZm9ybWVyIn1zZXRWaWRlb0JHUmVhZGFibGUocil7cmV0dXJuIG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5wb3N0UHJvY2Vzc0ludGVyZmFjZV8gaW5zdGFuY2VvZiBfZT90aGlzLnBvc3RQcm9jZXNzSW50ZXJmYWNlXy5zZXRWaWRlb1JlYWRhYmxlKHIpLnRoZW4oKCk9PntlKCl9KS5jYXRjaChzPT57dChzKX0pOnQoInBvc3QgcHJvY2VzcyBpcyBub3QgdmlkZW8iKX0pfXNldFZpcnR1YWxCR0ltYWdlKHIpe3JldHVybiBuZXcgUHJvbWlzZSgoZSx0KT0+e3RoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfIGluc3RhbmNlb2YgWmU/KHRoaXMucG9zdFByb2Nlc3NJbnRlcmZhY2VfLnNldFZpcnR1YWxCR0ltYWdlKHIpLGUoKSk6dCgicG9zdCBwcm9jZXNzIGlzIG5vdCB2aWRlbyIpfSl9c2V0U2VnbWVudGF0aW9uTWFza0ltYWdlKHIpeyhyLmhlaWdodCE9dGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXy5oZWlnaHR8fHIud2lkdGghPXRoaXMuc2VnbWVudGF0aW9uUmVzdWx0c0NhbnZhc18ud2lkdGgpJiYodGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXy53aWR0aD1yLndpZHRoLHRoaXMuc2VnbWVudGF0aW9uUmVzdWx0c0NhbnZhc18uaGVpZ2h0PXIuaGVpZ2h0KSx0aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDdHhfLmNsZWFyUmVjdCgwLDAsdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXy53aWR0aCx0aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDYW52YXNfLmhlaWdodCksdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ3R4Xy5kcmF3SW1hZ2UociwwLDApO2xldCBlPXRoaXMuc2VnbWVudGF0aW9uUmVzdWx0c0N0eF8uZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDYW52YXNfLndpZHRoLHRoaXMuc2VnbWVudGF0aW9uUmVzdWx0c0NhbnZhc18uaGVpZ2h0KSx0PXRoaXMuc2VnbWVudGF0aW9uUmVzdWx0c0NhbnZhc18ud2lkdGgqdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXy5oZWlnaHQ7Zm9yKGxldCBzPTA7czx0O3MrKyllLmRhdGFbcyo0XTwxMDAmJihlLmRhdGFbcyo0XT0wKTt0aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDdHhfLmNsZWFyUmVjdCgwLDAsdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ2FudmFzXy53aWR0aCx0aGlzLnNlZ21lbnRhdGlvblJlc3VsdHNDYW52YXNfLmhlaWdodCksdGhpcy5zZWdtZW50YXRpb25SZXN1bHRzQ3R4Xy5wdXRJbWFnZURhdGEoZSwwLDApLHIuY2xvc2UoKX19O2xldCBiZT12ZTtiZS5TRUxGSUVfV0lEVEg9MjU2LGJlLlNFTEZJRV9ISUdIVD0xNDQ7ZnVuY3Rpb24gTXIocil7cmV0dXJuIHR5cGVvZiByPT0ib2JqZWN0IiYmciE9PW51bGwmJiJtZXNzYWdlImluIHImJnR5cGVvZiByLm1lc3NhZ2U9PSJzdHJpbmcifWZ1bmN0aW9uIGtyKHIpe2lmKE1yKHIpKXJldHVybiByO3RyeXtyZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHIpKX1jYXRjaHtyZXR1cm4gbmV3IEVycm9yKFN0cmluZyhyKSl9fWZ1bmN0aW9uIEEocil7cmV0dXJuIHR5cGVvZiByPT0idW5kZWZpbmVkIj8iIjprcihyKS5tZXNzYWdlfWlmKHR5cGVvZiBpbXBvcnRTY3JpcHRzPT0iZnVuY3Rpb24iKXtsZXQgcj1mdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZSgocyxuKT0+e2U9bmV3IHhyLGUub24oImVycm9yIixpPT57Y29uc3QgYT17Y2FsbGJhY2tUeXBlOiJtZWRpYV9wcm9jZXNzb3JfZXJyb3JfZXZlbnQiLG1lc3NhZ2U6aX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYSkpfSksZS5vbigid2FybiIsaT0+e2NvbnN0IGE9e2NhbGxiYWNrVHlwZToibWVkaWFfcHJvY2Vzc29yX3dhcm5fZXZlbnQiLG1lc3NhZ2U6aX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYSkpfSksZS5vbigicGlwZWxpbmVJbmZvIixpPT57Y29uc3QgYT17Y2FsbGJhY2tUeXBlOiJtZWRpYV9wcm9jZXNzb3JfcGlwZWxpbmVfZXZlbnQiLG1lc3NhZ2U6aX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYSkpfSksdD1uZXcgYmUsdC5pbml0KGk9Pntwb3N0TWVzc2FnZShpLFtpXSl9KTtsZXQgbz1bXTtvLnB1c2godCksZS5zZXRUcmFuc2Zvcm1lcnMobykudGhlbigoKT0+e3MoKX0pLmNhdGNoKGk9PntuKGkpfSl9KX0sZSx0O29ubWVzc2FnZT1hc3luYyBzPT57aWYocy5kYXRhIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApe3QmJnQuc2V0U2VnbWVudGF0aW9uTWFza0ltYWdlKHMuZGF0YSk7cmV0dXJufWNvbnN0e29wZXJhdGlvbjpufT1zLmRhdGE7aWYobj09PSJpbml0Iil7Y29uc3R7bWV0YURhdGE6b309cy5kYXRhO3R5cGVvZiBvPT0ic3RyaW5nIiYmZHIoSlNPTi5wYXJzZShvKSkscigpLnRoZW4oKCk9Pntjb25zdCBpPXtjYWxsYmFja1R5cGU6InN1Y2Nlc3MiLG1lc3NhZ2U6bn07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoaSkpfSkuY2F0Y2goaT0+e2NvbnN0IGE9e2NhbGxiYWNrVHlwZToiZXJyb3IiLG1lc3NhZ2U6bixlcnJvcjpBKGkpfTtwb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShhKSl9KX1lbHNlIGlmKG49PT0idHJhbnNmb3JtIil7Y29uc3R7cmVhZGFibGU6byx3cml0YWJsZTppfT1zLmRhdGE7ZS50cmFuc2Zvcm0obyxpKS50aGVuKCgpPT57Y29uc3QgYT17Y2FsbGJhY2tUeXBlOiJzdWNjZXNzIixtZXNzYWdlOm59O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGEpKX0pLmNhdGNoKGE9Pntjb25zdCBsPXtjYWxsYmFja1R5cGU6ImVycm9yIixtZXNzYWdlOm4sZXJyb3I6QShhKX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobCkpfSl9ZWxzZSBpZihuPT09ImRlc3Ryb3kiKXQuY2xvc2UoKS5maW5hbGx5KCgpPT57ZS5kZXN0cm95KCkudGhlbigoKT0+e2NvbnN0IG89e2NhbGxiYWNrVHlwZToic3VjY2VzcyIsbWVzc2FnZTpufTtwb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShvKSl9KS5jYXRjaChvPT57Y29uc3QgaT17Y2FsbGJhY2tUeXBlOiJlcnJvciIsbWVzc2FnZTpuLGVycm9yOkEobyl9O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0pfSk7ZWxzZSBpZihuPT09InNldFRyYWNrRXhwZWN0ZWRSYXRlIil7ZS5zZXRUcmFja0V4cGVjdGVkUmF0ZShzLmRhdGEucmF0ZSk7Y29uc3Qgbz17Y2FsbGJhY2tUeXBlOiJzdWNjZXNzIixtZXNzYWdlOm59O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KG8pKX1lbHNlIGlmKG49PT0ic2V0QmFja2dyb3VuZE9wdGlvbnMiKXtjb25zdHtiYWNrZ3JvdW5kT3B0aW9uczpvfT1zLmRhdGE7dC5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhKU09OLnBhcnNlKG8pKS50aGVuKCgpPT57Y29uc3QgaT17Y2FsbGJhY2tUeXBlOiJzdWNjZXNzIixtZXNzYWdlOm59O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0pLmNhdGNoKGk9Pntjb25zdCBhPXtjYWxsYmFja1R5cGU6ImVycm9yIixtZXNzYWdlOm4sZXJyb3I6QShpKX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYSkpfSl9ZWxzZSBpZihuPT09InNldFZpZGVvQkdSZWFkYWJsZSIpe2NvbnN0e3JlYWRhYmxlOm99PXMuZGF0YTt0LnNldFZpZGVvQkdSZWFkYWJsZShvKS50aGVuKCgpPT57Y29uc3QgaT17Y2FsbGJhY2tUeXBlOiJzdWNjZXNzIixtZXNzYWdlOm59O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0pLmNhdGNoKGk9Pntjb25zdCBhPXtjYWxsYmFja1R5cGU6ImVycm9yIixtZXNzYWdlOm4sZXJyb3I6QShpKX07cG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYSkpfSl9ZWxzZSBpZihuPT09InNldFZpcnR1YWxCR0ltYWdlIil7Y29uc3R7aW1hZ2U6b309cy5kYXRhO3Quc2V0VmlydHVhbEJHSW1hZ2UobykudGhlbigoKT0+e2NvbnN0IGk9e2NhbGxiYWNrVHlwZToic3VjY2VzcyIsbWVzc2FnZTpufTtwb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeShpKSl9KS5jYXRjaChpPT57Y29uc3QgYT17Y2FsbGJhY2tUeXBlOiJlcnJvciIsbWVzc2FnZTpuLGVycm9yOkEoaSl9O3Bvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KGEpKX0pfX19fSkoKTsK",ao="undefined"!=typeof window&&window.Blob&&new Blob([atob(Lo)],{type:"text/javascript;charset=utf-8"});function Yo(){const ue=ao&&(window.URL||window.webkitURL).createObjectURL(ao);try{return ue?new Worker(ue,{}):new Worker("data:application/javascript;base64,"+Lo,{type:"module"})}finally{ue&&(window.URL||window.webkitURL).revokeObjectURL(ue)}}const Ao=new WeakMap,kt=new WeakMap,Jr=new WeakMap,Fi=Symbol("anyProducer"),co=n.resolve(),rs=Symbol("listenerAdded"),Xr=Symbol("listenerRemoved");let Co=!1;function Bo(ue){if("string"!=typeof ue&&"symbol"!=typeof ue)throw new TypeError("eventName must be a string or a symbol")}function bi(ue){if("function"!=typeof ue)throw new TypeError("listener must be a function")}function qo(ue,J){const le=kt.get(ue);return le.has(J)||le.set(J,new Set),le.get(J)}function jo(ue,J){const le="string"==typeof J||"symbol"==typeof J?J:Fi,we=Jr.get(ue);return we.has(le)||we.set(le,new Set),we.get(le)}function ns(ue,J){J=Array.isArray(J)?J:[J];let le=!1,we=()=>{},Re=[];const rt={enqueue(yt){Re.push(yt),we()},finish(){le=!0,we()}};for(const yt of J)jo(ue,yt).add(rt);return{next(){var yt=this;return _asyncToGenerator3(function*(){return Re?0===Re.length?le?(Re=void 0,yt.next()):(yield new n(Qe=>{we=Qe}),yt.next()):{done:!1,value:yield Re.shift()}:{done:!0}})()},return(yt){var Qe=arguments;return _asyncToGenerator3(function*(){Re=void 0;for(const Bt of J)jo(ue,Bt).delete(rt);return we(),Qe.length>0?{done:!0,value:yield yt}:{done:!0}})()},[Symbol.asyncIterator](){return this}}}function zo(ue){if(void 0===ue)return Er;if(!Array.isArray(ue))throw new TypeError("`methodNames` must be an array of strings");for(const J of ue)if(!Er.includes(J))throw"string"!=typeof J?new TypeError("`methodNames` element must be a string"):new Error(`${J} is not Emittery method`);return ue}const Jo=ue=>ue===rs||ue===Xr;class _o{static mixin(J,le){return le=zo(le),we=>{if("function"!=typeof we)throw new TypeError("`target` must be function");for(const yt of le)if(void 0!==we.prototype[yt])throw new Error(`The property \`${yt}\` already exists on \`target\``);Object.defineProperty(we.prototype,J,{enumerable:!1,get:function Re(){return Object.defineProperty(this,J,{enumerable:!1,value:new _o}),this[J]}});const rt=yt=>function(...Qe){return this[J][yt](...Qe)};for(const yt of le)Object.defineProperty(we.prototype,yt,{enumerable:!1,value:rt(yt)});return we}}static get isDebugEnabled(){if("object"!=typeof i)return Co;const{env:J}=i||{env:{}};return"emittery"===J.DEBUG||"*"===J.DEBUG||Co}static set isDebugEnabled(J){Co=J}constructor(J={}){Ao.set(this,new Set),kt.set(this,new Map),Jr.set(this,new Map),this.debug=J.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(le,we,Re,rt)=>{try{rt=JSON.stringify(rt)}catch(Bt){rt=`Object with the following keys failed to stringify: ${Object.keys(rt).join(",")}`}"symbol"==typeof Re&&(Re=Re.toString());const yt=new Date,Qe=`${yt.getHours()}:${yt.getMinutes()}:${yt.getSeconds()}.${yt.getMilliseconds()}`;console.log(`[${Qe}][emittery:${le}][${we}] Event Name: ${Re}\n\tdata: ${rt}`)})}logIfDebugEnabled(J,le,we){(_o.isDebugEnabled||this.debug.enabled)&&this.debug.logger(J,this.debug.name,le,we)}on(J,le){bi(le),J=Array.isArray(J)?J:[J];for(const we of J)Bo(we),qo(this,we).add(le),this.logIfDebugEnabled("subscribe",we,void 0),Jo(we)||this.emit(rs,{eventName:we,listener:le});return this.off.bind(this,J,le)}off(J,le){bi(le),J=Array.isArray(J)?J:[J];for(const we of J)Bo(we),qo(this,we).delete(le),this.logIfDebugEnabled("unsubscribe",we,void 0),Jo(we)||this.emit(Xr,{eventName:we,listener:le})}once(J){return new n(le=>{const we=this.on(J,Re=>{we(),le(Re)})})}events(J){J=Array.isArray(J)?J:[J];for(const le of J)Bo(le);return ns(this,J)}emit(J,le){var we=this;return _asyncToGenerator3(function*(){Bo(J),we.logIfDebugEnabled("emit",J,le),function cs(ue,J,le){const we=Jr.get(ue);if(we.has(J))for(const Re of we.get(J))Re.enqueue(le);if(we.has(Fi)){const Re=n.all([J,le]);for(const rt of we.get(Fi))rt.enqueue(Re)}}(we,J,le);const Re=qo(we,J),rt=Ao.get(we),yt=[...Re],Qe=Jo(J)?[]:[...rt];yield co,yield n.all([...yt.map(function(){var Bt=_asyncToGenerator3(function*(br){if(Re.has(br))return br(le)});return function(br){return Bt.apply(this,arguments)}}()),...Qe.map(function(){var Bt=_asyncToGenerator3(function*(br){if(rt.has(br))return br(J,le)});return function(br){return Bt.apply(this,arguments)}}())])})()}emitSerial(J,le){var we=this;return _asyncToGenerator3(function*(){Bo(J),we.logIfDebugEnabled("emitSerial",J,le);const Re=qo(we,J),rt=Ao.get(we),yt=[...Re],Qe=[...rt];yield co;for(const Bt of yt)Re.has(Bt)&&(yield Bt(le));for(const Bt of Qe)rt.has(Bt)&&(yield Bt(J,le))})()}onAny(J){return bi(J),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Ao.get(this).add(J),this.emit(rs,{listener:J}),this.offAny.bind(this,J)}anyEvent(){return ns(this)}offAny(J){bi(J),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Xr,{listener:J}),Ao.get(this).delete(J)}clearListeners(J){J=Array.isArray(J)?J:[J];for(const le of J)if(this.logIfDebugEnabled("clear",le,void 0),"string"==typeof le||"symbol"==typeof le){qo(this,le).clear();const we=jo(this,le);for(const Re of we)Re.finish();we.clear()}else{Ao.get(this).clear();for(const we of kt.get(this).values())we.clear();for(const we of Jr.get(this).values()){for(const Re of we)Re.finish();we.clear()}}}listenerCount(J){J=Array.isArray(J)?J:[J];let le=0;for(const we of J)if("string"!=typeof we){void 0!==we&&Bo(we),le+=Ao.get(this).size;for(const Re of kt.get(this).values())le+=Re.size;for(const Re of Jr.get(this).values())le+=Re.size}else le+=Ao.get(this).size+qo(this,we).size+jo(this,we).size+jo(this).size;return le}bindMethods(J,le){if("object"!=typeof J||null===J)throw new TypeError("`target` must be an object");le=zo(le);for(const we of le){if(void 0!==J[we])throw new Error(`The property \`${we}\` already exists on \`target\``);Object.defineProperty(J,we,{enumerable:!1,value:this[we].bind(this)})}}}const Er=Object.getOwnPropertyNames(_o.prototype).filter(ue=>"constructor"!==ue);Object.defineProperty(_o,"listenerAdded",{value:rs,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(_o,"listenerRemoved",{value:Xr,writable:!1,enumerable:!0,configurable:!1});var Wn=_o;const ss={};(function(){var ue;function J(B){var ee=0;return function(){return ee<B.length?{done:!1,value:B[ee++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(B,ee,te){return B==Array.prototype||B==Object.prototype||(B[ee]=te.value),B},Re=function we(B){B=["object"==typeof globalThis&&globalThis,B,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var ee=0;ee<B.length;++ee){var te=B[ee];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}(this);function rt(B,ee){if(ee)e:{var te=Re;B=B.split(".");for(var Be=0;Be<B.length-1;Be++){var vt=B[Be];if(!(vt in te))break e;te=te[vt]}(ee=ee(Be=te[B=B[B.length-1]]))!=Be&&null!=ee&&le(te,B,{configurable:!0,writable:!0,value:ee})}}function yt(B){return(B={next:B})[Symbol.iterator]=function(){return this},B}function Qe(B){var ee="undefined"!=typeof Symbol&&Symbol.iterator&&B[Symbol.iterator];return ee?ee.call(B):{next:J(B)}}function Bt(B){if(!(B instanceof Array)){B=Qe(B);for(var ee,te=[];!(ee=B.next()).done;)te.push(ee.value);B=te}return B}rt("Symbol",function(B){function te(zt,gt){this.g=zt,le(this,"description",{configurable:!0,writable:!0,value:gt})}if(B)return B;te.prototype.toString=function(){return this.g};var Be="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",vt=0;return function ee(zt){if(this instanceof ee)throw new TypeError("Symbol is not a constructor");return new te(Be+(zt||"")+"_"+vt++,zt)}}),rt("Symbol.iterator",function(B){if(B)return B;B=Symbol("Symbol.iterator");for(var ee="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),te=0;te<ee.length;te++){var Be=Re[ee[te]];"function"==typeof Be&&"function"!=typeof Be.prototype[B]&&le(Be.prototype,B,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return B});var Ut,br="function"==typeof Object.create?Object.create:function(B){function ee(){}return ee.prototype=B,new ee};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(B){}fr=!1}Ut=fr?function(B,ee){if(B.__proto__=ee,B.__proto__!==ee)throw new TypeError(B+" is not extensible");return B}:null}var Ur=Ut;function $n(B,ee){if(B.prototype=br(ee.prototype),B.prototype.constructor=B,Ur)Ur(B,ee);else for(var te in ee)if("prototype"!=te)if(Object.defineProperties){var Be=Object.getOwnPropertyDescriptor(ee,te);Be&&Object.defineProperty(B,te,Be)}else B[te]=ee[te];B.ea=ee.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Kr(B){if(B.l)throw new TypeError("Generator is already running");B.l=!0}function ii(B,ee){B.j={U:ee,V:!0},B.g=B.m||B.s}function Et(B,ee,te){return B.g=te,{value:ee}}function fo(B){this.g=new Pr,this.h=B}function Ii(B,ee,te,Be){try{var vt=ee.call(B.g.i,te);if(!(vt instanceof Object))throw new TypeError("Iterator result "+vt+" is not an object");if(!vt.done)return B.g.l=!1,vt;var zt=vt.value}catch(gt){return B.g.i=null,ii(B.g,gt),_n(B)}return B.g.i=null,Be.call(B.g,zt),_n(B)}function _n(B){for(;B.g.g;)try{var ee=B.h(B.g);if(ee)return B.g.l=!1,{value:ee.value,done:!1}}catch(te){B.g.h=void 0,ii(B.g,te)}if(B.g.l=!1,B.g.j){if(ee=B.g.j,B.g.j=null,ee.V)throw ee.U;return{value:ee.return,done:!0}}return{value:void 0,done:!0}}function Pi(B){this.next=function(ee){return Kr(B.g),B.g.i?ee=Ii(B,B.g.i.next,ee,B.g.o):(B.g.o(ee),ee=_n(B)),ee},this.throw=function(ee){return Kr(B.g),B.g.i?ee=Ii(B,B.g.i.throw,ee,B.g.o):(ii(B.g,ee),ee=_n(B)),ee},this.return=function(ee){return function Go(B,ee){Kr(B.g);var te=B.g.i;return te?Ii(B,"return"in te?te.return:function(Be){return{value:Be,done:!0}},ee,B.g.return):(B.g.return(ee),_n(B))}(B,ee)},this[Symbol.iterator]=function(){return this}}function Wr(B,ee){return ee=new Pi(new fo(ee)),Ur&&B.prototype&&Ur(ee,B.prototype),ee}Pr.prototype.o=function(B){this.h=B},Pr.prototype.return=function(B){this.j={return:B},this.g=this.s};var wo="function"==typeof Object.assign?Object.assign:function(B,ee){for(var te=1;te<arguments.length;te++){var Be=arguments[te];if(Be)for(var vt in Be)Object.prototype.hasOwnProperty.call(Be,vt)&&(B[vt]=Be[vt])}return B};rt("Object.assign",function(B){return B||wo}),rt("Promise",function(B){function ee(gt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Ft=this.j();try{gt(Ft.resolve,Ft.reject)}catch(dn){Ft.reject(dn)}}function te(){this.g=null}function Be(gt){return gt instanceof ee?gt:new ee(function(Ft){Ft(gt)})}if(B)return B;te.prototype.h=function(gt){if(null==this.g){this.g=[];var Ft=this;this.i(function(){Ft.l()})}this.g.push(gt)};var vt=Re.setTimeout;te.prototype.i=function(gt){vt(gt,0)},te.prototype.l=function(){for(;this.g&&this.g.length;){var gt=this.g;this.g=[];for(var Ft=0;Ft<gt.length;++Ft){var dn=gt[Ft];gt[Ft]=null;try{dn()}catch(Dn){this.j(Dn)}}}this.g=null},te.prototype.j=function(gt){this.i(function(){throw gt})},ee.prototype.j=function(){function gt(Dn){return function(cr){dn||(dn=!0,Dn.call(Ft,cr))}}var Ft=this,dn=!1;return{resolve:gt(this.C),reject:gt(this.l)}},ee.prototype.C=function(gt){if(gt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(gt instanceof ee)this.F(gt);else{e:switch(typeof gt){case"object":var Ft=null!=gt;break e;case"function":Ft=!0;break e;default:Ft=!1}Ft?this.u(gt):this.m(gt)}},ee.prototype.u=function(gt){var Ft=void 0;try{Ft=gt.then}catch(dn){return void this.l(dn)}"function"==typeof Ft?this.G(Ft,gt):this.m(gt)},ee.prototype.l=function(gt){this.s(2,gt)},ee.prototype.m=function(gt){this.s(1,gt)},ee.prototype.s=function(gt,Ft){if(0!=this.h)throw Error("Cannot settle("+gt+", "+Ft+"): Promise already settled in state"+this.h);this.h=gt,this.i=Ft,2===this.h&&this.D(),this.A()},ee.prototype.D=function(){var gt=this;vt(function(){if(gt.B()){var Ft=Re.console;void 0!==Ft&&Ft.error(gt.i)}},1)},ee.prototype.B=function(){if(this.o)return!1;var gt=Re.CustomEvent,Ft=Re.Event,dn=Re.dispatchEvent;return void 0===dn||("function"==typeof gt?gt=new gt("unhandledrejection",{cancelable:!0}):"function"==typeof Ft?gt=new Ft("unhandledrejection",{cancelable:!0}):(gt=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,gt),gt.promise=this,gt.reason=this.i,dn(gt))},ee.prototype.A=function(){if(null!=this.g){for(var gt=0;gt<this.g.length;++gt)zt.h(this.g[gt]);this.g=null}};var zt=new te;return ee.prototype.F=function(gt){var Ft=this.j();gt.J(Ft.resolve,Ft.reject)},ee.prototype.G=function(gt,Ft){var dn=this.j();try{gt.call(Ft,dn.resolve,dn.reject)}catch(Dn){dn.reject(Dn)}},ee.prototype.then=function(gt,Ft){function dn(Rr,nr){return"function"==typeof Rr?function(Bn){try{Dn(Rr(Bn))}catch(or){cr(or)}}:nr}var Dn,cr,er=new ee(function(Rr,nr){Dn=Rr,cr=nr});return this.J(dn(gt,Dn),dn(Ft,cr)),er},ee.prototype.catch=function(gt){return this.then(void 0,gt)},ee.prototype.J=function(gt,Ft){function dn(){switch(Dn.h){case 1:gt(Dn.i);break;case 2:Ft(Dn.i);break;default:throw Error("Unexpected state: "+Dn.h)}}var Dn=this;null==this.g?zt.h(dn):this.g.push(dn),this.o=!0},ee.resolve=Be,ee.reject=function(gt){return new ee(function(Ft,dn){dn(gt)})},ee.race=function(gt){return new ee(function(Ft,dn){for(var Dn=Qe(gt),cr=Dn.next();!cr.done;cr=Dn.next())Be(cr.value).J(Ft,dn)})},ee.all=function(gt){var Ft=Qe(gt),dn=Ft.next();return dn.done?Be([]):new ee(function(Dn,cr){function er(Bn){return function(or){Rr[Bn]=or,0==--nr&&Dn(Rr)}}var Rr=[],nr=0;do{Rr.push(void 0),nr++,Be(dn.value).J(er(Rr.length-1),cr),dn=Ft.next()}while(!dn.done)})},ee}),rt("Object.is",function(B){return B||function(ee,te){return ee===te?0!==ee||1/ee==1/te:ee!=ee&&te!=te}}),rt("Array.prototype.includes",function(B){return B||function(ee,te){var Be=this;Be instanceof String&&(Be=String(Be));var vt=Be.length;for(0>(te=te||0)&&(te=Math.max(te+vt,0));te<vt;te++){var zt=Be[te];if(zt===ee||Object.is(zt,ee))return!0}return!1}}),rt("String.prototype.includes",function(B){return B||function(ee,te){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(ee instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(ee,te||0)}}),rt("Array.prototype.keys",function(B){return B||function(){return function pn(B,ee){B instanceof String&&(B+="");var te=0,Be=!1,vt={next:function(){if(!Be&&te<B.length){var zt=te++;return{value:ee(zt,B[zt]),done:!1}}return Be=!0,{done:!0,value:void 0}}};return vt[Symbol.iterator]=function(){return vt},vt}(this,function(ee){return ee})}});var vo=this||self;function ui(B,ee){B=B.split(".");var Be,te=vo;B[0]in te||void 0===te.execScript||te.execScript("var "+B[0]);for(;B.length&&(Be=B.shift());)B.length||void 0===ee?te=te[Be]&&te[Be]!==Object.prototype[Be]?te[Be]:te[Be]={}:te[Be]=ee}function Yn(B,ee){return ee=String.fromCharCode.apply(null,ee),null==B?ee:B+ee}var hi,_i,Ci="undefined"!=typeof TextDecoder,ro="undefined"!=typeof TextEncoder;function qi(B){if(ro)B=(_i||(_i=new TextEncoder)).encode(B);else{var ee=void 0;ee=void 0!==ee&&ee;for(var te=0,Be=new Uint8Array(3*B.length),vt=0;vt<B.length;vt++){var zt=B.charCodeAt(vt);if(128>zt)Be[te++]=zt;else{if(2048>zt)Be[te++]=zt>>6|192;else{if(55296<=zt&&57343>=zt){if(56319>=zt&&vt<B.length){var gt=B.charCodeAt(++vt);if(56320<=gt&&57343>=gt){Be[te++]=(zt=1024*(zt-55296)+gt-56320+65536)>>18|240,Be[te++]=zt>>12&63|128,Be[te++]=zt>>6&63|128,Be[te++]=63&zt|128;continue}vt--}if(ee)throw Error("Found an unpaired surrogate");zt=65533}Be[te++]=zt>>12|224,Be[te++]=zt>>6&63|128}Be[te++]=63&zt|128}}B=Be.subarray(0,te)}return B}var yo={},Ui=null;function Yi(B,ee){void 0===ee&&(ee=0),Xi(),ee=yo[ee];for(var te=Array(Math.floor(B.length/3)),Be=ee[64]||"",vt=0,zt=0;vt<B.length-2;vt+=3){var gt=B[vt],Ft=B[vt+1],dn=B[vt+2],Dn=ee[gt>>2];te[zt++]=Dn+(gt=ee[(3&gt)<<4|Ft>>4])+(Ft=ee[(15&Ft)<<2|dn>>6])+(dn=ee[63&dn])}switch(Dn=0,dn=Be,B.length-vt){case 2:dn=ee[(15&(Dn=B[vt+1]))<<2]||Be;case 1:te[zt]=ee[(B=B[vt])>>2]+ee[(3&B)<<4|Dn>>4]+dn+Be}return te.join("")}function Xi(){if(!Ui){Ui={};for(var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ee=["+/=","+/","-_=","-_.","-_"],te=0;5>te;te++){var Be=B.concat(ee[te].split(""));yo[te]=Be;for(var vt=0;vt<Be.length;vt++){var zt=Be[vt];void 0===Ui[zt]&&(Ui[zt]=vt)}}}}var oo,Hi="function"==typeof Uint8Array.prototype.slice;function eo(B,ee,te){return ee===te?oo||(oo=new Uint8Array(0)):Hi?B.slice(ee,te):new Uint8Array(B.subarray(ee,te))}var ni=0;function be(B,ee){ee=void 0!==(ee=void 0===ee?{}:ee).v&&ee.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=ee,B&&xe(this,B)}function xe(B,ee){ee=ee.constructor===Uint8Array?ee:ee.constructor===ArrayBuffer||ee.constructor===Array?new Uint8Array(ee):ee.constructor===String?function Ro(B){var ee=B.length,te=3*ee/4;te%3?te=Math.floor(te):-1!="=.".indexOf(B[ee-1])&&(te=-1!="=.".indexOf(B[ee-2])?te-2:te-1);var Be=new Uint8Array(te),vt=0;return function io(B,ee){function te(dn){for(;Be<B.length;){var Dn=B.charAt(Be++),cr=Ui[Dn];if(null!=cr)return cr;if(!/^[\s\xa0]*$/.test(Dn))throw Error("Unknown base64 encoding at char: "+Dn)}return dn}Xi();for(var Be=0;;){var vt=te(-1),zt=te(0),gt=te(64),Ft=te(64);if(64===Ft&&-1===vt)break;ee(vt<<2|zt>>4),64!=gt&&(ee(zt<<4&240|gt>>2),64!=Ft&&ee(gt<<6&192|Ft))}}(B,function(zt){Be[vt++]=zt}),Be.subarray(0,vt)}(ee):ee instanceof Uint8Array?new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength):new Uint8Array(0),B.h=ee,B.j=0,B.i=B.h.length,B.g=B.j}function Fe(B){var ee=B.h,te=ee[B.g],Be=127&te;return 128>te?(B.g+=1,Be):(Be|=(127&(te=ee[B.g+1]))<<7,128>te?(B.g+=2,Be):(Be|=(127&(te=ee[B.g+2]))<<14,128>te?(B.g+=3,Be):(Be|=(127&(te=ee[B.g+3]))<<21,128>te?(B.g+=4,Be):(Be|=(15&(te=ee[B.g+4]))<<28,128>te?(B.g+=5,Be>>>0):(B.g+=5,128<=ee[B.g++]&&128<=ee[B.g++]&&128<=ee[B.g++]&&128<=ee[B.g++]&&B.g++,Be)))))}function _e(B){var ee=B.h[B.g],te=B.h[B.g+1],Be=B.h[B.g+2],vt=B.h[B.g+3];return B.g+=4,B=2*((te=(ee<<0|te<<8|Be<<16|vt<<24)>>>0)>>31)+1,ee=te>>>23&255,te&=8388607,255==ee?te?NaN:1/0*B:0==ee?B*Math.pow(2,-149)*te:B*Math.pow(2,ee-150)*(te+Math.pow(2,23))}be.prototype.reset=function(){this.g=this.j};var ot=[];function It(){this.g=new Uint8Array(64),this.h=0}function dt(B,ee){for(;127<ee;)B.push(127&ee|128),ee>>>=7;B.push(ee)}function tn(B){var ee={},te=void 0!==ee.N&&ee.N;this.o={v:void 0!==ee.v&&ee.v},this.N=te,ee=this.o,ot.length?(te=ot.pop(),ee&&(te.v=ee.v),B&&xe(te,B),B=te):B=new be(B,ee),this.g=B,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function mt(B){var ee=B.g;if((ee=ee.g==ee.i)||(ee=B.j)||(ee=(ee=B.g).l||0>ee.g||ee.g>ee.i),ee)return!1;B.m=B.g.g;var te=7&(ee=Fe(B.g));return 0!=te&&5!=te&&1!=te&&2!=te&&3!=te&&4!=te?(B.j=!0,!1):(B.i=ee,B.l=ee>>>3,B.h=te,!0)}function Gt(B){switch(B.h){case 0:if(0!=B.h)Gt(B);else{for(B=B.g;128&B.h[B.g];)B.g++;B.g++}break;case 1:1!=B.h?Gt(B):(B=B.g).g+=8;break;case 2:if(2!=B.h)Gt(B);else{var ee=Fe(B.g);(B=B.g).g+=ee}break;case 5:5!=B.h?Gt(B):(B=B.g).g+=4;break;case 3:for(ee=B.l;;){if(!mt(B)){B.j=!0;break}if(4==B.h){B.l!=ee&&(B.j=!0);break}Gt(B)}break;default:B.j=!0}}function hn(B,ee,te){var Be=B.g.i,vt=Fe(B.g);return B.g.i=vt=B.g.g+vt,te(ee,B),B.g.g=vt,B.g.i=Be,ee}function Pt(B){var Be,ee=Fe(B.g),te=(B=B.g).g;if(B.g+=ee,B=B.h,Ci)(Be=hi)||(Be=hi=new TextDecoder("utf-8",{fatal:!1})),Be=Be.decode(B.subarray(te,te+ee));else{ee=te+ee;for(var gt,Ft,dn,vt=[],zt=null;te<ee;)128>(gt=B[te++])?vt.push(gt):224>gt?te>=ee?vt.push(65533):(Ft=B[te++],194>gt||128!=(192&Ft)?(te--,vt.push(65533)):vt.push((31&gt)<<6|63&Ft)):240>gt?te>=ee-1?vt.push(65533):128!=(192&(Ft=B[te++]))||224===gt&&160>Ft||237===gt&&160<=Ft||128!=(192&(Be=B[te++]))?(te--,vt.push(65533)):vt.push((15&gt)<<12|(63&Ft)<<6|63&Be):244>=gt?te>=ee-2?vt.push(65533):128!=(192&(Ft=B[te++]))||Ft-144+(gt<<28)>>30!=0||128!=(192&(Be=B[te++]))||128!=(192&(dn=B[te++]))?(te--,vt.push(65533)):(gt=(7&gt)<<18|(63&Ft)<<12|(63&Be)<<6|63&dn,vt.push(55296+((gt-=65536)>>10&1023),56320+(1023&gt))):vt.push(65533),8192<=vt.length&&(zt=Yn(zt,vt),vt.length=0);Be=Yn(zt,vt)}return Be}function Ee(){this.h=[],this.i=0,this.g=new It}function Ve(B,ee){0!==ee.length&&(B.h.push(ee),B.i+=ee.length)}function ze(B){var ee=B.i+B.g.length();if(0===ee)return new Uint8Array(0);ee=new Uint8Array(ee);for(var te=B.h,Be=te.length,vt=0,zt=0;zt<Be;zt++){var gt=te[zt];0!==gt.length&&(ee.set(gt,vt),vt+=gt.length)}return 0!==(Be=(te=B.g).h)&&(ee.set(te.g.subarray(0,Be),vt),te.h=0),B.h=[ee],ee}function Ze(B,ee,te){if(null!=te){dt(B.g,8*ee+5),B=B.g;var Be=te;0===(Be=(te=0>Be?1:0)?-Be:Be)?ni=0<1/Be?0:2147483648:isNaN(Be)?ni=2147483647:34028234663852886e22<Be?ni=(te<<31|2139095040)>>>0:11754943508222875e-54>Be?(Be=Math.round(Be/Math.pow(2,-149)),ni=(te<<31|Be)>>>0):(ee=Math.floor(Math.log(Be)/Math.LN2),Be*=Math.pow(2,-ee),Be=8388607&Math.round(8388608*Be),ni=(te<<31|ee+127<<23|Be)>>>0),B.push((te=ni)>>>0&255),B.push(te>>>8&255),B.push(te>>>16&255),B.push(te>>>24&255)}}It.prototype.push=function(B){if(!(this.h+1<this.g.length)){var ee=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(ee)}this.g[this.h++]=B},It.prototype.length=function(){return this.h},It.prototype.end=function(){var B=this.g,ee=this.h;return this.h=0,eo(B,0,ee)},tn.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var Lt="function"==typeof Uint8Array;function Dt(B,ee,te){if(null!=B)return"object"==typeof B?Lt&&B instanceof Uint8Array?te(B):Qt(B,ee,te):ee(B)}function Qt(B,ee,te){if(Array.isArray(B)){for(var Be=Array(B.length),vt=0;vt<B.length;vt++)Be[vt]=Dt(B[vt],ee,te);return Array.isArray(B)&&B.W&&ur(Be),Be}for(vt in Be={},B)Be[vt]=Dt(B[vt],ee,te);return Be}function hr(B){return"number"==typeof B?isFinite(B)?B:String(B):B}var ri,Hr={W:{value:!0,configurable:!0}};function ur(B){return Array.isArray(B)&&!Object.isFrozen(B)&&Object.defineProperties(B,Hr),B}function sr(B,ee,te){var Be=ri;if(ri=null,B||(B=Be),Be=this.constructor.ca,B||(B=Be?[Be]:[]),this.j=Be?0:-1,this.i=null,this.g=B,B=(Be=this.g.length)-1,Be&&null!==(Be=this.g[B])&&"object"==typeof Be&&Be.constructor===Object?(this.l=B-this.j,this.h=Be):void 0!==ee&&-1<ee?(this.l=Math.max(ee,B+1-this.j),this.h=null):this.l=Number.MAX_VALUE,te)for(ee=0;ee<te.length;ee++)(B=te[ee])<this.l?(Be=this.g[B+=this.j])?ur(Be):this.g[B]=di:(pr(this),(Be=this.h[B])?ur(Be):this.h[B]=di)}var di=Object.freeze(ur([]));function pr(B){var ee=B.l+B.j;B.g[ee]||(B.h=B.g[ee]={})}function ar(B,ee,te){return-1===ee?null:void 0!==te&&te||ee>=B.l?B.h?B.h[ee]:void 0:B.g[ee+B.j]}function Ai(B){var ee=void 0!==ee&&ee,te=ar(B,1,ee);return null==te&&(te=di),te===di&&Sr(B,1,te=ur([]),ee),te}function gr(B,ee,te){return null==(B=null==(B=ar(B,ee))?B:+B)?void 0===te?0:te:B}function Sr(B,ee,te,Be){void 0!==Be&&Be||ee>=B.l?(pr(B),B.h[ee]=te):B.g[ee+B.j]=te}function ho(B,ee){B.i||(B.i={});var te=B.i[1];if(!te){var Be=Ai(B);te=[];for(var vt=0;vt<Be.length;vt++)te[vt]=new ee(Be[vt]);B.i[1]=te}return te}function Qr(B,ee,te,Be){var vt=ho(B,te);ee=ee||new te,B=Ai(B),null!=Be?(vt.splice(Be,0,ee),B.splice(Be,0,qn(ee))):(vt.push(ee),B.push(qn(ee)))}function qn(B,ee){if(B.i)for(var te in B.i){var Be=B.i[te];if(Array.isArray(Be))for(var vt=0;vt<Be.length;vt++)Be[vt]&&qn(Be[vt]);else Be&&qn(Be)}return B.g}function Un(B,ee){return null==(B=ar(B,ee))?0:B}function Dr(B,ee){return null==(B=ar(B,ee))?"":B}function Mi(B,ee){if(B=B.m){Ve(ee,ee.g.end());for(var te=0;te<B.length;te++)Ve(ee,B[te])}}function wr(B,ee){if(4==ee.h)return!1;var te=ee.m;return Gt(ee),ee.N||(ee=eo(ee.g.h,te,ee.g.g),(te=B.m)?te.push(ee):B.m=[ee]),!0}function kr(B,ee){var te=void 0;return new(te||(te=n))(function(Be,vt){function zt(dn){try{Ft(ee.next(dn))}catch(Dn){vt(Dn)}}function gt(dn){try{Ft(ee.throw(dn))}catch(Dn){vt(Dn)}}function Ft(dn){dn.done?Be(dn.value):new te(function(Dn){Dn(dn.value)}).then(zt,gt)}Ft((ee=ee.apply(B,void 0)).next())})}function Vi(B){sr.call(this,B)}function xr(B,ee){for(;mt(ee);)switch(ee.i){case 8:var te=Fe(ee.g);Sr(B,1,te);break;case 21:Sr(B,2,te=_e(ee.g));break;case 26:Sr(B,3,te=Pt(ee));break;case 34:Sr(B,4,te=Pt(ee));break;default:if(!wr(B,ee))return B}return B}function zn(B){sr.call(this,B,-1,zi)}sr.prototype.toJSON=function(){return Qt(qn(this),hr,Yi)},sr.prototype.toString=function(){return qn(this).toString()},$n(Vi,sr),$n(zn,sr),zn.prototype.addClassification=function(B,ee){Qr(this,B,Vi,ee)};var zi=[1];function Ji(B){sr.call(this,B)}function j(B,ee){for(;mt(ee);)switch(ee.i){case 13:var te=_e(ee.g);Sr(B,1,te);break;case 21:Sr(B,2,te=_e(ee.g));break;case 29:Sr(B,3,te=_e(ee.g));break;case 37:Sr(B,4,te=_e(ee.g));break;case 45:Sr(B,5,te=_e(ee.g));break;default:if(!wr(B,ee))return B}return B}function U(B){sr.call(this,B,-1,m)}$n(Ji,sr),$n(U,sr);var m=[1];function M(B){sr.call(this,B)}function q(B,ee,te){if(te=B.createShader(0===te?B.VERTEX_SHADER:B.FRAGMENT_SHADER),B.shaderSource(te,ee),B.compileShader(te),!B.getShaderParameter(te,B.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+B.getShaderInfoLog(te));return te}function Ie(B){return ho(B,Vi).map(function(ee){return{index:Un(ee,1),Y:gr(ee,2),label:null!=ar(ee,3)?Dr(ee,3):void 0,displayName:null!=ar(ee,4)?Dr(ee,4):void 0}})}function qe(B){return{x:gr(B,1),y:gr(B,2),z:gr(B,3),visibility:null!=ar(B,4)?gr(B,4):void 0}}function Xt(B,ee){this.h=B,this.g=ee,this.l=0}function rn(B,ee,te){return function Ln(B,ee){var te=B.g;if(void 0===B.m){var Be=q(te,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),vt=q(te,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),zt=te.createProgram();if(te.attachShader(zt,Be),te.attachShader(zt,vt),te.linkProgram(zt),!te.getProgramParameter(zt,te.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+te.getProgramInfoLog(zt));Be=B.m=zt,te.useProgram(Be),vt=te.getUniformLocation(Be,"sampler0"),B.j={I:te.getAttribLocation(Be,"aVertex"),H:te.getAttribLocation(Be,"aTex"),da:vt},B.s=te.createBuffer(),te.bindBuffer(te.ARRAY_BUFFER,B.s),te.enableVertexAttribArray(B.j.I),te.vertexAttribPointer(B.j.I,2,te.FLOAT,!1,0,0),te.bufferData(te.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),te.STATIC_DRAW),te.bindBuffer(te.ARRAY_BUFFER,null),B.o=te.createBuffer(),te.bindBuffer(te.ARRAY_BUFFER,B.o),te.enableVertexAttribArray(B.j.H),te.vertexAttribPointer(B.j.H,2,te.FLOAT,!1,0,0),te.bufferData(te.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),te.STATIC_DRAW),te.bindBuffer(te.ARRAY_BUFFER,null),te.uniform1i(vt,0)}Be=B.j,te.useProgram(B.m),te.canvas.width=ee.width,te.canvas.height=ee.height,te.viewport(0,0,ee.width,ee.height),te.activeTexture(te.TEXTURE0),B.h.bindTexture2d(ee.glName),te.enableVertexAttribArray(Be.I),te.bindBuffer(te.ARRAY_BUFFER,B.s),te.vertexAttribPointer(Be.I,2,te.FLOAT,!1,0,0),te.enableVertexAttribArray(Be.H),te.bindBuffer(te.ARRAY_BUFFER,B.o),te.vertexAttribPointer(Be.H,2,te.FLOAT,!1,0,0),te.bindFramebuffer(te.DRAW_FRAMEBUFFER?te.DRAW_FRAMEBUFFER:te.FRAMEBUFFER,null),te.clearColor(0,0,0,0),te.clear(te.COLOR_BUFFER_BIT),te.colorMask(!0,!0,!0,!0),te.drawArrays(te.TRIANGLE_FAN,0,4),te.disableVertexAttribArray(Be.I),te.disableVertexAttribArray(Be.H),te.bindBuffer(te.ARRAY_BUFFER,null),B.h.bindTexture2d(0)}(B,ee),"function"==typeof B.g.canvas.transferToImageBitmap?n.resolve(B.g.canvas.transferToImageBitmap()):te?n.resolve(B.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(B.g.canvas):(void 0===B.i&&(B.i=document.createElement("canvas")),new n(function(Be){B.i.height=B.g.canvas.height,B.i.width=B.g.canvas.width,B.i.getContext("2d",{}).drawImage(B.g.canvas,0,0,B.g.canvas.width,B.g.canvas.height),Be(B.i)}))}function Or(B){this.g=B}$n(M,sr);var Vn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function mn(B,ee){return ee+B}function ir(B,ee){window[B]=ee}function to(B){if(this.g=B,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=B&&B.locateFile||mn,"object"==typeof window)var ee=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");ee=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=ee,B.options)for(var te=(ee=Qe(Object.keys(B.options))).next();!te.done;te=ee.next()){var Be=B.options[te=te.value].default;void 0!==Be&&(this.j[te]="function"==typeof Be?Be():Be)}}function ji(B,ee){return kr(B,function te(){var vt,zt,Be=this;return Wr(te,function(gt){return ee in Be.F?gt.return(Be.F[ee]):(vt=Be.locateFile(ee,""),zt=fetch(vt).then(function(Ft){return Ft.arrayBuffer()}),Be.F[ee]=zt,gt.return(zt))})})}function os(B,ee){for(var te=ee.name||"$",Be=[].concat(Bt(ee.wants)),vt=new B.h.StringList,zt=Qe(ee.wants),gt=zt.next();!gt.done;gt=zt.next())vt.push_back(gt.value);zt=B.h.PacketListener.implement({onResults:function(Ft){for(var dn={},Dn=0;Dn<ee.wants.length;++Dn)dn[Be[Dn]]=Ft.get(Dn);var cr=B.listeners[te];cr&&(B.C=function Ki(B,ee,te){return kr(B,function Be(){var vt,zt,gt,Ft,Dn,er,Rr,nr,Bn,or,jr,_r,cr=this;return Wr(Be,function(si){switch(si.g){case 1:if(!te)return si.return(ee);for(vt={},zt=0,gt=Qe(Object.keys(te)),Ft=gt.next();!Ft.done;Ft=gt.next())"string"!=typeof(Dn=te[Ft.value])&&"texture"===Dn.type&&void 0!==ee[Dn.stream]&&++zt;1<zt&&(cr.G=!1),er=Qe(Object.keys(te)),Ft=er.next();case 2:if(Ft.done){si.g=4;break}if("string"==typeof(nr=te[Rr=Ft.value]))return jr=vt,_r=Rr,Et(si,function is(B,ee,te){return kr(B,function Be(){var zt,vt=this;return Wr(Be,function(gt){return"number"==typeof te||te instanceof Uint8Array||te instanceof vt.h.Uint8BlobList?gt.return(te):te instanceof vt.h.Texture2dDataOut?((zt=vt.s[ee])||(zt=new Xt(vt.h,vt.D),vt.s[ee]=zt),gt.return(rn(zt,te,vt.G))):gt.return(void 0)})})}(cr,Rr,ee[nr]),14);if(Bn=ee[nr.stream],"detection_list"===nr.type){if(Bn){for(var wi=Bn.getRectList(),V=Bn.getLandmarksList(),H=Bn.getClassificationsList(),K=[],Ne=0;Ne<wi.size();++Ne){var $e=wi.get(Ne);e:{var bt=new M;for($e=new tn($e);mt($e);)switch($e.i){case 13:var et=_e($e.g);Sr(bt,1,et);break;case 21:Sr(bt,2,et=_e($e.g));break;case 29:Sr(bt,3,et=_e($e.g));break;case 37:Sr(bt,4,et=_e($e.g));break;case 45:Sr(bt,5,et=_e($e.g));break;case 48:for(var xt=$e.g,_t=128,x=0,$=et=0;4>$&&128<=_t;$++)x|=(127&(_t=xt.h[xt.g++]))<<7*$;if(128<=_t&&(x|=(127&(_t=xt.h[xt.g++]))<<28,et|=(127&_t)>>4),128<=_t)for($=0;5>$&&128<=_t;$++)et|=(127&(_t=xt.h[xt.g++]))<<7*$+3;128>_t?(xt=x>>>0,(et=2147483648&(_t=et>>>0))&&(_t=~_t>>>0,0==(xt=1+~xt>>>0)&&(_t=_t+1>>>0)),xt=4294967296*_t+(xt>>>0),et=et?-xt:xt):(xt.l=!0,et=void 0),Sr(bt,6,et);break;default:if(!wr(bt,$e))break e}}bt={Z:gr(bt,1),$:gr(bt,2),height:gr(bt,3),width:gr(bt,4),rotation:gr(bt,5,0),X:Un(bt,6)},et=V.get(Ne);e:for($e=new U,et=new tn(et);mt(et);)if(10===et.i)Qr($e,xt=hn(et,new Ji,j),Ji,void 0);else if(!wr($e,et))break e;$e=ho($e,Ji).map(qe),xt=H.get(Ne);e:for(et=new zn,xt=new tn(xt);mt(xt);)if(10===xt.i)et.addClassification(hn(xt,new Vi,xr));else if(!wr(et,xt))break e;bt={T:bt,O:$e,M:Ie(et)},K.push(bt)}wi=K}else wi=[];vt[Rr]=wi,si.g=7;break}if("proto_list"===nr.type){if(Bn){for(wi=Array(Bn.size()),V=0;V<Bn.size();V++)wi[V]=Bn.get(V);Bn.delete()}else wi=[];vt[Rr]=wi,si.g=7;break}if(void 0===Bn){si.g=3;break}if("float_list"===nr.type){vt[Rr]=Bn,si.g=7;break}if("proto"===nr.type){vt[Rr]=Bn,si.g=7;break}if("texture"!==nr.type)throw Error("Unknown output config type: '"+nr.type+"'");return(or=cr.s[Rr])||(or=new Xt(cr.h,cr.D),cr.s[Rr]=or),Et(si,rn(or,Bn,cr.G),13);case 13:vt[Rr]=si.h;case 7:nr.transform&&vt[Rr]&&(vt[Rr]=nr.transform(vt[Rr])),si.g=3;break;case 14:jr[_r]=si.h;case 3:Ft=er.next(),si.g=2;break;case 4:return si.return(vt)}})})}(B,dn,ee.outs).then(function(er){er=cr(er);for(var Rr=0;Rr<ee.wants.length;++Rr){var nr=dn[Be[Rr]];"object"==typeof nr&&nr.hasOwnProperty&&nr.hasOwnProperty("delete")&&nr.delete()}er&&(B.C=er)}))}}),B.i.attachMultiListener(vt,zt),vt.delete()}function ko(B){return 1===(void 0===B&&(B=0),B)?"selfie_segmentation_landscape.tflite":"selfie_segmentation.tflite"}function Wo(B){var ee=this;this.g=new to({locateFile:(B=B||{}).locateFile,files:function(te){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:ko(te.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(te){return kr(ee,function Be(){var vt,zt,gt=this;return Wr(Be,function(dn){return 1==dn.g?(vt=ko(te),zt="third_party/mediapipe/modules/selfie_segmentation/"+vt,Et(dn,ji(gt.g,vt),2)):(gt.g.overrideFile(zt,dn.h),dn.return(!0))})})}}}})}(ue=to.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){return kr(this,function B(){var ee=this;return Wr(B,function(te){ee.i&&(ee.i.reset(),ee.m={},ee.s={}),te.g=0})})},ue.setOptions=function(B,ee){var te=this;if(ee=ee||this.g.options){for(var Be=[],vt=[],zt={},gt=Qe(Object.keys(B)),Ft=gt.next();!Ft.done;zt={K:zt.K,L:zt.L},Ft=gt.next()){var dn=Ft.value;dn in this.j&&this.j[dn]===B[dn]||(this.j[dn]=B[dn],void 0!==(Ft=ee[dn])&&(Ft.onChange&&(zt.K=Ft.onChange,zt.L=B[dn],Be.push(function(Dn){return function(){return kr(te,function cr(){var Rr=this;return Wr(cr,function(nr){if(1==nr.g)return Et(nr,Dn.K(Dn.L),2);!0===nr.h&&(Rr.o=!0),nr.g=0})})}}(zt))),Ft.graphOptionXref&&(dn={valueNumber:1===Ft.type?B[dn]:0,valueBoolean:0===Ft.type&&B[dn],valueString:2===Ft.type?B[dn]:""},Ft=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Ft.graphOptionXref),dn),vt.push(Ft))))}(0!==Be.length||0!==vt.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(vt),this.u=(void 0===this.u?[]:this.u).concat(Be))}},ue.initialize=function(){return kr(this,function B(){var ee=this;return Wr(B,function(te){return 1==te.g?Et(te,function no(B){return kr(B,function ee(){var Be,vt,zt,gt,Ft,dn,Dn,cr,er,Rr,nr,te=this;return Wr(ee,function(Bn){switch(Bn.g){case 1:return Be=te,te.R?(vt=function Vr(B,ee){return void 0===B.g.files?[]:"function"==typeof B.g.files?B.g.files(ee):B.g.files}(te,te.j),Et(Bn,function oi(){return kr(this,function B(){return Wr(B,function(ee){switch(ee.g){case 1:return ee.m=2,Et(ee,WebAssembly.instantiate(Vn),4);case 4:ee.g=3,ee.m=0;break;case 2:return ee.m=0,ee.j=null,ee.return(!1);case 3:return ee.return(!0)}})})}(),2)):Bn.return();case 2:if(zt=Bn.h,"object"==typeof window)return ir("createMediapipeSolutionsWasm",{locateFile:te.locateFile}),ir("createMediapipeSolutionsPackedAssets",{locateFile:te.locateFile}),dn=vt.filter(function(or){return void 0!==or.data}),Dn=vt.filter(function(or){return void 0===or.data}),cr=n.all(dn.map(function(or){var Ar=ji(Be,or.url);if(void 0!==or.path){var jr=or.path;Ar=Ar.then(function(_r){return Be.overrideFile(jr,_r),n.resolve(_r)})}return Ar})),er=n.all(Dn.map(function(or){return void 0===or.simd||or.simd&&zt||!or.simd&&!zt?function Nr(B){var ee=document.createElement("script");return ee.setAttribute("src",B),ee.setAttribute("crossorigin","anonymous"),new n(function(te){ee.addEventListener("load",function(){te()},!1),ee.addEventListener("error",function(){te()},!1),document.body.appendChild(ee)})}(Be.locateFile(or.url,Be.S)):n.resolve()})).then(function(){return kr(Be,function or(){var Ar,jr,_r=this;return Wr(or,function(si){if(1==si.g)return Ar=window.createMediapipeSolutionsWasm,jr=window.createMediapipeSolutionsPackedAssets,Et(si,Ar(jr),2);_r.h=si.h,si.g=0})})}),Rr=kr(Be,function or(){var Ar=this;return Wr(or,function(jr){return Ar.g.graph&&Ar.g.graph.url?jr=Et(jr,ji(Ar,Ar.g.graph.url),0):(jr.g=0,jr=void 0),jr})}),Et(Bn,n.all([er,cr,Rr]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return gt=vt.filter(function(or){return void 0===or.simd||or.simd&&zt||!or.simd&&!zt}).map(function(or){return Be.locateFile(or.url,Be.S)}),importScripts.apply(null,Bt(gt)),Et(Bn,createMediapipeSolutionsWasm(Module),6);case 6:te.h=Bn.h,te.l=new OffscreenCanvas(1,1),te.h.canvas=te.l,Ft=te.h.GL.createContext(te.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),te.h.GL.makeContextCurrent(Ft),Bn.g=4;break;case 7:if(te.l=document.createElement("canvas"),!(nr=te.l.getContext("webgl2",{}))&&!(nr=te.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Bn.return();te.D=nr,te.h.canvas=te.l,te.h.createContext(te.l,!0,!0,{});case 4:te.i=new te.h.SolutionWasm,te.R=!1,Bn.g=0}})})}(ee),2):3!=te.g?Et(te,function po(B){return kr(B,function ee(){var vt,zt,gt,Ft,dn,cr,te=this;return Wr(ee,function(er){if(1==er.g)return te.g.graph&&te.g.graph.url&&te.P===te.g.graph.url?er.return():(te.o=!0,te.g.graph&&te.g.graph.url?(te.P=te.g.graph.url,Et(er,ji(te,te.g.graph.url),3)):void(er.g=2));for(2!=er.g&&te.i.loadGraph(er.h),vt=Qe(Object.keys(te.B)),zt=vt.next();!zt.done;zt=vt.next())te.i.overrideFile(gt=zt.value,te.B[gt]);if(te.B={},te.g.listeners)for(Ft=Qe(te.g.listeners),dn=Ft.next();!dn.done;dn=Ft.next())os(te,dn.value);cr=te.j,te.j={},te.setOptions(cr),er.g=0})})}(ee),3):Et(te,function Do(B){return kr(B,function ee(){var Be,vt,gt,Ft,dn,te=this;return Wr(ee,function(cr){switch(cr.g){case 1:if(!te.o)return cr.return();if(!te.u){cr.g=2;break}Be=Qe(te.u),vt=Be.next();case 3:if(vt.done){cr.g=5;break}return Et(cr,(0,vt.value)(),4);case 4:vt=Be.next(),cr.g=3;break;case 5:te.u=void 0;case 2:if(te.A){for(gt=new te.h.GraphOptionChangeRequestList,Ft=Qe(te.A),dn=Ft.next();!dn.done;dn=Ft.next())gt.push_back(dn.value);te.i.changeOptions(gt),gt.delete(),te.A=void 0}te.o=!1,cr.g=0}})})}(ee),0)})})},ue.overrideFile=function(B,ee){this.i?this.i.overrideFile(B,ee):this.B[B]=ee},ue.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(B,ee){return kr(this,function te(){var vt,zt,gt,Ft,dn,Dn,cr,er,Rr,Be=this;return Wr(te,function(nr){switch(nr.g){case 1:return Be.g.inputs?(vt=1e3*(null==ee?performance.now():ee),Et(nr,Be.C,2)):nr.return();case 2:return Et(nr,Be.initialize(),3);case 3:for(zt=new Be.h.PacketDataList,gt=Qe(Object.keys(B)),Ft=gt.next();!Ft.done;Ft=gt.next())if(Dn=Be.g.inputs[dn=Ft.value]){e:{var Bn=Be,or=B[dn];switch(Dn.type){case"video":var Ar=Bn.m[Dn.stream];if(Ar||(Ar=new Xt(Bn.h,Bn.D),Bn.m[Dn.stream]=Ar),0===(Bn=Ar).l&&(Bn.l=Bn.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&or instanceof HTMLVideoElement){var jr=or.videoWidth;Ar=or.videoHeight}else"undefined"!=typeof HTMLImageElement&&or instanceof HTMLImageElement?(jr=or.naturalWidth,Ar=or.naturalHeight):(jr=or.width,Ar=or.height);Ar={glName:Bn.l,width:jr,height:Ar},(jr=Bn.g).canvas.width=Ar.width,jr.canvas.height=Ar.height,jr.activeTexture(jr.TEXTURE0),Bn.h.bindTexture2d(Bn.l),jr.texImage2D(jr.TEXTURE_2D,0,jr.RGBA,jr.RGBA,jr.UNSIGNED_BYTE,or),Bn.h.bindTexture2d(0),Bn=Ar;break e;case"detections":for((Ar=Bn.m[Dn.stream])||(Ar=new Or(Bn.h),Bn.m[Dn.stream]=Ar),(Bn=Ar).data||(Bn.data=new Bn.g.DetectionListData),Bn.data.reset(or.length),Ar=0;Ar<or.length;++Ar){var _r=Bn.data,si=_r.setBoundingBox,wi=Ar,V=(jr=or[Ar]).T,H=new M;Sr(H,1,V.Z),Sr(H,2,V.$),Sr(H,3,V.height),Sr(H,4,V.width),Sr(H,5,V.rotation),Sr(H,6,V.X);var K=V=new Ee;Ze(K,1,ar(H,1)),Ze(K,2,ar(H,2)),Ze(K,3,ar(H,3)),Ze(K,4,ar(H,4)),Ze(K,5,ar(H,5));var Ne=ar(H,6);if(null!=Ne&&null!=Ne){dt(K.g,48);var $e=K.g,bt=Ne;Ne=0>bt;var et=(bt=Math.abs(bt))>>>0;for(bt=Math.floor((bt-et)/4294967296),bt>>>=0,Ne&&(bt=~bt>>>0,4294967295<(et=1+(~et>>>0))&&(et=0,4294967295<++bt&&(bt=0))),Ne=ni=et,et=bt;0<et||127<Ne;)$e.push(127&Ne|128),Ne=(Ne>>>7|et<<25)>>>0,et>>>=7;$e.push(Ne)}if(Mi(H,K),V=ze(V),si.call(_r,wi,V),jr.O)for(_r=0;_r<jr.O.length;++_r)K=!!(H=jr.O[_r]).visibility,wi=(si=Bn.data).addNormalizedLandmark,V=Ar,H=Object.assign(Object.assign({},H),{visibility:K?H.visibility:0}),Sr(K=new Ji,1,H.x),Sr(K,2,H.y),Sr(K,3,H.z),H.visibility&&Sr(K,4,H.visibility),Ze($e=H=new Ee,1,ar(K,1)),Ze($e,2,ar(K,2)),Ze($e,3,ar(K,3)),Ze($e,4,ar(K,4)),Ze($e,5,ar(K,5)),Mi(K,$e),H=ze(H),wi.call(si,V,H);if(jr.M)for(_r=0;_r<jr.M.length;++_r){if(wi=(si=Bn.data).addClassification,V=Ar,H=jr.M[_r],Sr(K=new Vi,2,H.Y),H.index&&Sr(K,1,H.index),H.label&&Sr(K,3,H.label),H.displayName&&Sr(K,4,H.displayName),$e=H=new Ee,null!=(et=ar(K,1))&&null!=et)if(dt($e.g,8),Ne=$e.g,0<=et)dt(Ne,et);else{for(bt=0;9>bt;bt++)Ne.push(127&et|128),et>>=7;Ne.push(1)}Ze($e,2,ar(K,2)),null!=(Ne=ar(K,3))&&(Ne=qi(Ne),dt($e.g,26),dt($e.g,Ne.length),Ve($e,$e.g.end()),Ve($e,Ne)),null!=(Ne=ar(K,4))&&(Ne=qi(Ne),dt($e.g,34),dt($e.g,Ne.length),Ve($e,$e.g.end()),Ve($e,Ne)),Mi(K,$e),H=ze(H),wi.call(si,V,H)}}Bn=Bn.data;break e;default:Bn={}}}switch(cr=Bn,er=Dn.stream,Dn.type){case"video":zt.pushTexture2d(Object.assign(Object.assign({},cr),{stream:er,timestamp:vt}));break;case"detections":(Rr=cr).stream=er,Rr.timestamp=vt,zt.pushDetectionList(Rr);break;default:throw Error("Unknown input config type: '"+Dn.type+"'")}}return Be.i.send(zt),Et(nr,Be.C,4);case 4:zt.delete(),nr.g=0}})})},ue.onResults=function(B,ee){this.listeners[ee||"$"]=B},ui("Solution",to),ui("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(ue=Wo.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(B){this.g.onResults(B)},ue.initialize=function(){return kr(this,function B(){var ee=this;return Wr(B,function(te){return Et(te,ee.g.initialize(),0)})})},ue.reset=function(){this.g.reset()},ue.send=function(B){return kr(this,function ee(){var te=this;return Wr(ee,function(Be){return Et(Be,te.g.send(B),0)})})},ue.setOptions=function(B){this.g.setOptions(B)},ui("SelfieSegmentation",Wo),ui("VERSION","0.1.1632777926")}).call(ss);const us={};(function(){var ue;function J(I){var z=0;return function(){return z<I.length?{done:!1,value:I[z++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(I,z,ie){return I==Array.prototype||I==Object.prototype||(I[z]=ie.value),I},Re=function we(I){I=["object"==typeof globalThis&&globalThis,I,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var z=0;z<I.length;++z){var ie=I[z];if(ie&&ie.Math==Math)return ie}throw Error("Cannot find global object")}(this);function rt(I,z){if(z)e:{var ie=Re;I=I.split(".");for(var fe=0;fe<I.length-1;fe++){var Ge=I[fe];if(!(Ge in ie))break e;ie=ie[Ge]}(z=z(fe=ie[I=I[I.length-1]]))!=fe&&null!=z&&le(ie,I,{configurable:!0,writable:!0,value:z})}}function yt(I){return(I={next:I})[Symbol.iterator]=function(){return this},I}function Qe(I){var z="undefined"!=typeof Symbol&&Symbol.iterator&&I[Symbol.iterator];return z?z.call(I):{next:J(I)}}function Bt(I){if(!(I instanceof Array)){I=Qe(I);for(var z,ie=[];!(z=I.next()).done;)ie.push(z.value);I=ie}return I}rt("Symbol",function(I){function ie(S,F){this.g=S,le(this,"description",{configurable:!0,writable:!0,value:F})}if(I)return I;ie.prototype.toString=function(){return this.g};var fe="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ge=0;return function z(S){if(this instanceof z)throw new TypeError("Symbol is not a constructor");return new ie(fe+(S||"")+"_"+Ge++,S)}}),rt("Symbol.iterator",function(I){if(I)return I;I=Symbol("Symbol.iterator");for(var z="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ie=0;ie<z.length;ie++){var fe=Re[z[ie]];"function"==typeof fe&&"function"!=typeof fe.prototype[I]&&le(fe.prototype,I,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return I});var Ut,br="function"==typeof Object.create?Object.create:function(I){function z(){}return z.prototype=I,new z};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(I){}fr=!1}Ut=fr?function(I,z){if(I.__proto__=z,I.__proto__!==z)throw new TypeError(I+" is not extensible");return I}:null}var Ur=Ut;function $n(I,z){if(I.prototype=br(z.prototype),I.prototype.constructor=I,Ur)Ur(I,z);else for(var ie in z)if("prototype"!=ie)if(Object.defineProperties){var fe=Object.getOwnPropertyDescriptor(z,ie);fe&&Object.defineProperty(I,ie,fe)}else I[ie]=z[ie];I.ra=z.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Kr(I){if(I.l)throw new TypeError("Generator is already running");I.l=!0}function ii(I,z){I.j={fa:z,ga:!0},I.g=I.o||I.u}function Et(I,z,ie){return I.g=ie,{value:z}}function fo(I){this.g=new Pr,this.h=I}function Ii(I,z,ie,fe){try{var Ge=z.call(I.g.i,ie);if(!(Ge instanceof Object))throw new TypeError("Iterator result "+Ge+" is not an object");if(!Ge.done)return I.g.l=!1,Ge;var S=Ge.value}catch(F){return I.g.i=null,ii(I.g,F),_n(I)}return I.g.i=null,fe.call(I.g,S),_n(I)}function _n(I){for(;I.g.g;)try{var z=I.h(I.g);if(z)return I.g.l=!1,{value:z.value,done:!1}}catch(ie){I.g.h=void 0,ii(I.g,ie)}if(I.g.l=!1,I.g.j){if(z=I.g.j,I.g.j=null,z.ga)throw z.fa;return{value:z.return,done:!0}}return{value:void 0,done:!0}}function Pi(I){this.next=function(z){return Kr(I.g),I.g.i?z=Ii(I,I.g.i.next,z,I.g.s):(I.g.s(z),z=_n(I)),z},this.throw=function(z){return Kr(I.g),I.g.i?z=Ii(I,I.g.i.throw,z,I.g.s):(ii(I.g,z),z=_n(I)),z},this.return=function(z){return function Go(I,z){Kr(I.g);var ie=I.g.i;return ie?Ii(I,"return"in ie?ie.return:function(fe){return{value:fe,done:!0}},z,I.g.return):(I.g.return(z),_n(I))}(I,z)},this[Symbol.iterator]=function(){return this}}function pn(I){return function Wr(I){function z(fe){return I.next(fe)}function ie(fe){return I.throw(fe)}return new n(function(fe,Ge){!function S(F){F.done?fe(F.value):n.resolve(F.value).then(z,ie).then(S,Ge)}(I.next())})}(new Pi(new fo(I)))}Pr.prototype.s=function(I){this.h=I},Pr.prototype.return=function(I){this.j={return:I},this.g=this.u},rt("Promise",function(I){function z(F){this.h=0,this.i=void 0,this.g=[],this.s=!1;var Y=this.j();try{F(Y.resolve,Y.reject)}catch(g){Y.reject(g)}}function ie(){this.g=null}function fe(F){return F instanceof z?F:new z(function(Y){Y(F)})}if(I)return I;ie.prototype.h=function(F){if(null==this.g){this.g=[];var Y=this;this.i(function(){Y.l()})}this.g.push(F)};var Ge=Re.setTimeout;ie.prototype.i=function(F){Ge(F,0)},ie.prototype.l=function(){for(;this.g&&this.g.length;){var F=this.g;this.g=[];for(var Y=0;Y<F.length;++Y){var g=F[Y];F[Y]=null;try{g()}catch(R){this.j(R)}}}this.g=null},ie.prototype.j=function(F){this.i(function(){throw F})},z.prototype.j=function(){function F(R){return function(G){g||(g=!0,R.call(Y,G))}}var Y=this,g=!1;return{resolve:F(this.D),reject:F(this.l)}},z.prototype.D=function(F){if(F===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(F instanceof z)this.H(F);else{e:switch(typeof F){case"object":var Y=null!=F;break e;case"function":Y=!0;break e;default:Y=!1}Y?this.A(F):this.o(F)}},z.prototype.A=function(F){var Y=void 0;try{Y=F.then}catch(g){return void this.l(g)}"function"==typeof Y?this.I(Y,F):this.o(F)},z.prototype.l=function(F){this.u(2,F)},z.prototype.o=function(F){this.u(1,F)},z.prototype.u=function(F,Y){if(0!=this.h)throw Error("Cannot settle("+F+", "+Y+"): Promise already settled in state"+this.h);this.h=F,this.i=Y,2===this.h&&this.G(),this.B()},z.prototype.G=function(){var F=this;Ge(function(){if(F.C()){var Y=Re.console;void 0!==Y&&Y.error(F.i)}},1)},z.prototype.C=function(){if(this.s)return!1;var F=Re.CustomEvent,Y=Re.Event,g=Re.dispatchEvent;return void 0===g||("function"==typeof F?F=new F("unhandledrejection",{cancelable:!0}):"function"==typeof Y?F=new Y("unhandledrejection",{cancelable:!0}):(F=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,F),F.promise=this,F.reason=this.i,g(F))},z.prototype.B=function(){if(null!=this.g){for(var F=0;F<this.g.length;++F)S.h(this.g[F]);this.g=null}};var S=new ie;return z.prototype.H=function(F){var Y=this.j();F.M(Y.resolve,Y.reject)},z.prototype.I=function(F,Y){var g=this.j();try{F.call(Y,g.resolve,g.reject)}catch(R){g.reject(R)}},z.prototype.then=function(F,Y){function g(A,P){return"function"==typeof A?function(X){try{R(A(X))}catch(se){G(se)}}:P}var R,G,f=new z(function(A,P){R=A,G=P});return this.M(g(F,R),g(Y,G)),f},z.prototype.catch=function(F){return this.then(void 0,F)},z.prototype.M=function(F,Y){function g(){switch(R.h){case 1:F(R.i);break;case 2:Y(R.i);break;default:throw Error("Unexpected state: "+R.h)}}var R=this;null==this.g?S.h(g):this.g.push(g),this.s=!0},z.resolve=fe,z.reject=function(F){return new z(function(Y,g){g(F)})},z.race=function(F){return new z(function(Y,g){for(var R=Qe(F),G=R.next();!G.done;G=R.next())fe(G.value).M(Y,g)})},z.all=function(F){var Y=Qe(F),g=Y.next();return g.done?fe([]):new z(function(R,G){function f(X){return function(se){A[X]=se,0==--P&&R(A)}}var A=[],P=0;do{A.push(void 0),P++,fe(g.value).M(f(A.length-1),G),g=Y.next()}while(!g.done)})},z});var vo="function"==typeof Object.assign?Object.assign:function(I,z){for(var ie=1;ie<arguments.length;ie++){var fe=arguments[ie];if(fe)for(var Ge in fe)Object.prototype.hasOwnProperty.call(fe,Ge)&&(I[Ge]=fe[Ge])}return I};rt("Object.assign",function(I){return I||vo}),rt("Object.is",function(I){return I||function(z,ie){return z===ie?0!==z||1/z==1/ie:z!=z&&ie!=ie}}),rt("Array.prototype.includes",function(I){return I||function(z,ie){var fe=this;fe instanceof String&&(fe=String(fe));var Ge=fe.length;for(0>(ie=ie||0)&&(ie=Math.max(ie+Ge,0));ie<Ge;ie++){var S=fe[ie];if(S===z||Object.is(S,z))return!0}return!1}}),rt("String.prototype.includes",function(I){return I||function(z,ie){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(z instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(z,ie||0)}}),rt("Array.prototype.keys",function(I){return I||function(){return function wo(I,z){I instanceof String&&(I+="");var ie=0,fe=!1,Ge={next:function(){if(!fe&&ie<I.length){var S=ie++;return{value:z(S,I[S]),done:!1}}return fe=!0,{done:!0,value:void 0}}};return Ge[Symbol.iterator]=function(){return Ge},Ge}(this,function(z){return z})}});var ui=this||self;function Yn(I,z){I=I.split(".");var fe,ie=ui;I[0]in ie||void 0===ie.execScript||ie.execScript("var "+I[0]);for(;I.length&&(fe=I.shift());)I.length||void 0===z?ie=ie[fe]&&ie[fe]!==Object.prototype[fe]?ie[fe]:ie[fe]={}:ie[fe]=z}function hi(){throw Error("Invalid UTF8")}function Ci(I,z){return z=String.fromCharCode.apply(null,z),null==I?z:I+z}var _i,qi,ro="undefined"!=typeof TextDecoder,yo="undefined"!=typeof TextEncoder,Ui={},Yi=null;function Ro(I){var z;void 0===z&&(z=0),Hi(),z=Ui[z];for(var ie=Array(Math.floor(I.length/3)),fe=z[64]||"",Ge=0,S=0;Ge<I.length-2;Ge+=3){var F=I[Ge],Y=I[Ge+1],g=I[Ge+2],R=z[F>>2];ie[S++]=R+(F=z[(3&F)<<4|Y>>4])+(Y=z[(15&Y)<<2|g>>6])+(g=z[63&g])}switch(R=0,g=fe,I.length-Ge){case 2:g=z[(15&(R=I[Ge+1]))<<2]||fe;case 1:ie[S]=z[(I=I[Ge])>>2]+z[(3&I)<<4|R>>4]+g+fe}return ie.join("")}function io(I){var z=I.length,ie=3*z/4;ie%3?ie=Math.floor(ie):-1!="=.".indexOf(I[z-1])&&(ie=-1!="=.".indexOf(I[z-2])?ie-2:ie-1);var fe=new Uint8Array(ie),Ge=0;return function Xi(I,z){function ie(g){for(;fe<I.length;){var R=I.charAt(fe++),G=Yi[R];if(null!=G)return G;if(!/^[\s\xa0]*$/.test(R))throw Error("Unknown base64 encoding at char: "+R)}return g}Hi();for(var fe=0;;){var Ge=ie(-1),S=ie(0),F=ie(64),Y=ie(64);if(64===Y&&-1===Ge)break;z(Ge<<2|S>>4),64!=F&&(z(S<<4&240|F>>2),64!=Y&&z(F<<6&192|Y))}}(I,function(S){fe[Ge++]=S}),Ge!==ie?fe.subarray(0,Ge):fe}function Hi(){if(!Yi){Yi={};for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),z=["+/=","+/","-_=","-_.","-_"],ie=0;5>ie;ie++){var fe=I.concat(z[ie].split(""));Ui[ie]=fe;for(var Ge=0;Ge<fe.length;Ge++){var S=fe[Ge];void 0===Yi[S]&&(Yi[S]=Ge)}}}}var ni,oo="function"==typeof Uint8Array;function eo(I){return oo&&null!=I&&I instanceof Uint8Array}function Ce(I){if(this.L=I,null!==I&&0===I.length)throw Error("ByteString should be constructed with non-empty values")}var be="function"==typeof Uint8Array.prototype.slice,xe=0;function ot(I,z){return Error("Invalid wire type: "+I+" (at position "+z+")")}function It(){return Error("Failed to read varint, encoding is invalid.")}function dt(I,z){z=void 0!==(z=void 0===z?{}:z).v&&z.v,this.h=null,this.g=this.i=this.j=0,this.v=z,I&&tn(this,I)}function tn(I,z){I.h=function _e(I,z){if(I.constructor===Uint8Array)return I;if(I.constructor===ArrayBuffer)return new Uint8Array(I);if(I.constructor===Array)return new Uint8Array(I);if(I.constructor===String)return io(I);if(I.constructor===Ce)return!z&&(z=I.L)&&z.constructor===Uint8Array?z:(z=null==(z=I.L)||eo(z)?z:"string"==typeof z?io(z):null,(I=I.L=z)?new Uint8Array(I):ni||(ni=new Uint8Array(0)));if(I instanceof Uint8Array)return new Uint8Array(I.buffer,I.byteOffset,I.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(z,I.v),I.j=0,I.i=I.h.length,I.g=I.j}function mt(I){if(I.g>I.i)throw Error("Tried to read past the end of the data "+I.g+" > "+I.i)}function Gt(I){var z=I.h,ie=z[I.g],fe=127&ie;if(128>ie)return I.g+=1,mt(I),fe;if(fe|=(127&(ie=z[I.g+1]))<<7,128>ie)return I.g+=2,mt(I),fe;if(fe|=(127&(ie=z[I.g+2]))<<14,128>ie)return I.g+=3,mt(I),fe;if(fe|=(127&(ie=z[I.g+3]))<<21,128>ie)return I.g+=4,mt(I),fe;if(ie=z[I.g+4],I.g+=5,fe|=(15&ie)<<28,128>ie)return mt(I),fe;if(128<=z[I.g++]&&128<=z[I.g++]&&128<=z[I.g++]&&128<=z[I.g++]&&128<=z[I.g++])throw It();return mt(I),fe}dt.prototype.reset=function(){this.g=this.j};var hn=[];function Pt(){this.g=[]}function Ee(I,z){for(;127<z;)I.g.push(127&z|128),z>>>=7;I.g.push(z)}function Ve(I){var z={},ie=void 0!==z.W&&z.W;this.l={v:void 0!==z.v&&z.v},this.W=ie,z=this.l,hn.length?(ie=hn.pop(),z&&(ie.v=z.v),I&&tn(ie,I),I=ie):I=new dt(I,z),this.g=I,this.j=this.g.g,this.h=this.i=-1}function ze(I){var z=I.g;if(z.g==z.i)return!1;I.j=I.g.g;var ie=Gt(I.g)>>>0;if(z=ie>>>3,!(0<=(ie&=7)&&5>=ie))throw ot(ie,I.j);if(1>z)throw Error("Invalid field number: "+z+" (at position "+I.j+")");return I.i=z,I.h=ie,!0}function Ze(I){switch(I.h){case 0:if(0!=I.h)Ze(I);else e:{for(var z=(I=I.g).g,ie=z+10;z<ie;)if(0==(128&I.h[z++])){I.g=z,mt(I);break e}throw It()}break;case 1:(I=I.g).g+=8,mt(I);break;case 2:2!=I.h?Ze(I):(z=Gt(I.g)>>>0,(I=I.g).g+=z,mt(I));break;case 5:(I=I.g).g+=4,mt(I);break;case 3:for(z=I.i;;){if(!ze(I))throw Error("Unmatched start-group tag: stream EOF");if(4==I.h){if(I.i!=z)throw Error("Unmatched end-group tag");break}Ze(I)}break;default:throw ot(I.h,I.j)}}Pt.prototype.length=function(){return this.g.length},Pt.prototype.end=function(){var I=this.g;return this.g=[],I},Ve.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var Lt=[];function Dt(){this.i=[],this.h=0,this.g=new Pt}function Qt(I,z){0!==z.length&&(I.i.push(z),I.h+=z.length)}var Hr="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ur(I,z){Object.isFrozen(I)||(Hr?I[Hr]|=z:void 0!==I.N?I.N|=z:Object.defineProperties(I,{N:{value:z,configurable:!0,writable:!0,enumerable:!1}}))}function ri(I){var z;return null==(z=Hr?I[Hr]:I.N)?0:z}function sr(I){return ur(I,1),I}function di(I){return!!Array.isArray(I)&&!!(2&ri(I))}function pr(I){if(!Array.isArray(I))throw Error("cannot mark non-array as immutable");ur(I,2)}function ar(I){return null!==I&&"object"==typeof I&&!Array.isArray(I)&&I.constructor===Object}var Ai=Object.freeze(sr([]));function gr(I){if(di(I.m))throw Error("Cannot mutate an immutable Message")}var M,Sr="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function ho(I){return{value:I,configurable:!1,writable:!1,enumerable:!1}}function Qr(I,z,ie){return-1===z?null:z>=I.i?I.g?I.g[z]:void 0:void 0!==ie&&ie&&I.g&&null!=(ie=I.g[z])?ie:I.m[z+I.h]}function qn(I,z,ie,fe){fe=void 0!==fe&&fe,gr(I),z<I.i&&!fe?I.m[z+I.h]=ie:(I.g||(I.g=I.m[I.i+I.h]={}))[z]=ie}function Un(I,z,ie,fe){ie=void 0===ie||ie;var Ge=Qr(I,z,fe=void 0!==fe&&fe);return null==Ge&&(Ge=Ai),di(I.m)?ie&&(pr(Ge),Object.freeze(Ge)):(Ge===Ai||di(Ge))&&qn(I,z,Ge=sr(Ge.slice()),fe),Ge}function Dr(I,z,ie){return null==(I=null==(I=Qr(I,z))?I:+I)?void 0===ie?0:ie:I}function Mi(I,z,ie,fe){I.j||(I.j={});var Ge=di(I.m),S=I.j[ie];if(!S){fe=Un(I,ie,!0,void 0!==fe&&fe),S=[],Ge=Ge||di(fe);for(var F=0;F<fe.length;F++)S[F]=new z(fe[F]),Ge&&pr(S[F].m);Ge&&(pr(S),Object.freeze(S)),I.j[ie]=S}return S}function wr(I,z,ie,fe,Ge){var S=void 0!==S&&S;return gr(I),S=Mi(I,ie,z,S),ie=fe||new ie,I=Un(I,z),null!=Ge?(S.splice(Ge,0,ie),I.splice(Ge,0,ie.m)):(S.push(ie),I.push(ie.m)),ie}function kr(I,z){return null==(I=Qr(I,z))?0:I}function Vi(I,z){return null==(I=Qr(I,z))?"":I}function zn(I){return Ji(I,void 0===j?U:j)}function zi(I,z){if(null!=I){if(Array.isArray(I))I=Ji(I,z);else if(ar(I)){var fe,ie={};for(fe in I)ie[fe]=zi(I[fe],z);I=ie}else I=z(I);return I}}function Ji(I,z){for(var ie=I.slice(),fe=0;fe<ie.length;fe++)ie[fe]=zi(ie[fe],z);return Array.isArray(I)&&1&ri(I)&&sr(ie),ie}function j(I){return I&&"object"==typeof I&&I.toJSON?I.toJSON():(I=function xr(I){switch(typeof I){case"number":return isFinite(I)?I:String(I);case"object":if(I&&!Array.isArray(I)){if(eo(I))return Ro(I);if(I instanceof Ce){var z=I.L;return z=null==z||"string"==typeof z?z:oo&&z instanceof Uint8Array?Ro(z):null,(I.L=z)||""}}}return I}(I),Array.isArray(I)?zn(I):I)}function U(I){return eo(I)?new Uint8Array(I):I}function m(I,z,ie){I||(I=M),M=null;var fe=this.constructor.h;if(I||(I=fe?[fe]:[]),this.h=(fe?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=I,I=(fe=this.m.length)-1,fe&&ar(fe=this.m[I])?(this.i=I-this.h,this.g=fe):void 0!==z&&-1<z?(this.i=Math.max(z,I+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,ie)for(z=0;z<ie.length;z++)if((I=ie[z])<this.i)(fe=this.m[I+=this.h])?Array.isArray(fe)&&sr(fe):this.m[I]=Ai;else{var Ge=(fe=this.g||(this.g=this.m[this.i+this.h]={}))[I];Ge?Array.isArray(Ge)&&sr(Ge):fe[I]=Ai}}function q(){m.apply(this,arguments)}if(m.prototype.toJSON=function(){return zn(this.m)},m.prototype.toString=function(){return this.m.toString()},$n(q,m),Sr){var Ie={};Object.defineProperties(q,(Ie[Symbol.hasInstance]=ho(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ie))}function qe(I,z,ie){if(ie){var Ge,fe={};for(Ge in ie){var S=ie[Ge],F=S.ja;F||(fe.F=S.pa||S.ha.P,S.ba?(fe.U=Nr(S.ba),F=function(Y){return function(g,R,G){return Y.F(g,R,G,Y.U)}}(fe)):S.da?(fe.T=oi(S.X.g,S.da),F=function(Y){return function(g,R,G){return Y.F(g,R,G,Y.T)}}(fe)):F=fe.F,S.ja=F),F(z,I,S.X),fe={F:fe.F,U:fe.U,T:fe.T}}}!function hr(I,z){if(z=z.ca){Qt(I,I.g.end());for(var ie=0;ie<z.length;ie++)Qt(I,z[ie])}}(z,I)}var Xt=Symbol();function rn(I,z,ie){return I[Xt]||(I[Xt]=function(fe,Ge){return z(fe,Ge,ie)})}function Ln(I){var z=I[Xt];if(!z){var ie=B(I);I[Xt]=z=function(fe,Ge){return ee(fe,Ge,ie)}}return z}function Vn(I){var z=function Or(I){var z=I.ba;return z?Ln(z):(z=I.oa)?rn(I.X.g,z,I.da):void 0}(I),ie=I.X,fe=I.ha.O;return z?function(Ge,S){return fe(Ge,S,ie,z)}:function(Ge,S){return fe(Ge,S,ie)}}function mn(I,z,ie,fe,Ge,S){var F=0;for((I=I()).length&&"number"!=typeof I[0]&&(ie(z,I[0]),F++);F<I.length;){ie=I[F++];for(var Y=F+1;Y<I.length&&"number"!=typeof I[Y];)Y++;var g=I[F++];switch(Y-=F){case 0:fe(z,ie,g);break;case 1:fe(z,ie,g,I[F++]);break;case 2:Ge(z,ie,g,I[F++],I[F++]);break;case 3:Y=I[F++];var R=I[F++],G=I[F++];Array.isArray(G)?Ge(z,ie,g,Y,R,G):S(z,ie,g,Y,R,G);break;case 4:S(z,ie,g,I[F++],I[F++],I[F++],I[F++]);break;default:throw Error("unexpected number of binary field arguments: "+Y)}}return z}var ir=Symbol();function Nr(I){var z=I[ir];if(!z){var ie=ji(I);I[ir]=z=function(fe,Ge){return Be(fe,Ge,ie)}}return z}function oi(I,z){var ie=I[ir];return ie||(I[ir]=ie=function(fe,Ge){return qe(fe,Ge,z)}),ie}var to=Symbol();function Vr(I,z){I.push(z)}function no(I,z,ie){I.push(z,ie.P)}function po(I,z,ie,fe,Ge){var S=Nr(Ge),F=ie.P;I.push(z,function(Y,g,R){return F(Y,g,R,fe,S)})}function Do(I,z,ie,fe,Ge,S){var F=oi(fe,S),Y=ie.P;I.push(z,function(g,R,G){return Y(g,R,G,fe,F)})}function ji(I){return I[to]||mn(I,I[to]=[],Vr,no,po,Do)}var Ki=Symbol();function is(I,z){I[0]=z}function os(I,z,ie,fe){var Ge=ie.O;I[z]=fe?function(S,F,Y){return Ge(S,F,Y,fe)}:Ge}function ko(I,z,ie,fe,Ge,S){var F=ie.O,Y=Ln(Ge);I[z]=function(g,R,G){return F(g,R,G,fe,Y,S)}}function Wo(I,z,ie,fe,Ge,S,F){var Y=ie.O,g=rn(fe,Ge,S);I[z]=function(R,G,f){return Y(R,G,f,fe,g,F)}}function B(I){return I[Ki]||mn(I,I[Ki]={},is,os,ko,Wo)}function ee(I,z,ie){for(;ze(z)&&4!=z.h;){var fe=z.i,Ge=ie[fe];if(!Ge){var S=ie[0];S&&(S=S[fe])&&(Ge=ie[fe]=Vn(S))}if(!(Ge&&Ge(z,I,fe)||(Ge=z,fe=I,S=Ge.j,Ze(Ge),Ge.W))){var F=Ge.g.h;Ge=S===(Ge=Ge.g.g)?ni||(ni=new Uint8Array(0)):be?F.slice(S,Ge):new Uint8Array(F.subarray(S,Ge)),(S=fe.ca)?S.push(Ge):fe.ca=[Ge]}}return I}function te(I,z,ie){if(Lt.length){var fe=Lt.pop();I&&(tn(fe.g,I),fe.i=-1,fe.h=-1),I=fe}else I=new Ve(I);try{return ee(new z,I,B(ie))}finally{(z=I.g).h=null,z.j=0,z.i=0,z.g=0,z.v=!1,I.i=-1,I.h=-1,100>Lt.length&&Lt.push(I)}}function Be(I,z,ie){for(var fe=ie.length,Ge=fe%2==1,S=Ge?1:0;S<fe;S+=2)(0,ie[S+1])(z,I,ie[S]);qe(I,z,Ge?ie[0]:void 0)}function vt(I,z){var ie=new Dt;Be(I,ie,ji(z)),Qt(ie,ie.g.end()),I=new Uint8Array(ie.h);for(var fe=(z=ie.i).length,Ge=0,S=0;S<fe;S++){var F=z[S];I.set(F,Ge),Ge+=F.length}return ie.i=[I],I}function zt(I,z){return{O:I,P:z}}var gt=zt(function(I,z,ie){if(5!==I.h)return!1;var fe=(I=I.g).h[I.g],Ge=I.h[I.g+1],S=I.h[I.g+2],F=I.h[I.g+3];return I.g+=4,mt(I),I=2*((Ge=(fe<<0|Ge<<8|S<<16|F<<24)>>>0)>>31)+1,fe=Ge>>>23&255,Ge&=8388607,qn(z,ie,255==fe?Ge?NaN:1/0*I:0==fe?I*Math.pow(2,-149)*Ge:I*Math.pow(2,fe-150)*(Ge+Math.pow(2,23))),!0},function(I,z,ie){if(null!=(z=Qr(z,ie))){Ee(I.g,8*ie+5),I=I.g;var fe=z;0===(fe=(ie=0>fe?1:0)?-fe:fe)?xe=0<1/fe?0:2147483648:isNaN(fe)?xe=2147483647:34028234663852886e22<fe?xe=(ie<<31|2139095040)>>>0:11754943508222875e-54>fe?(fe=Math.round(fe/Math.pow(2,-149)),xe=(ie<<31|fe)>>>0):(z=Math.floor(Math.log(fe)/Math.LN2),fe*=Math.pow(2,-z),16777216<=(fe=Math.round(8388608*fe))&&++z,xe=(ie<<31|z+127<<23|8388607&fe)>>>0),I.g.push((ie=xe)>>>0&255),I.g.push(ie>>>8&255),I.g.push(ie>>>16&255),I.g.push(ie>>>24&255)}}),Ft=zt(function(I,z,ie){if(0!==I.h)return!1;for(var fe=I.g,Ge=128,S=0,F=I=0;4>F&&128<=Ge;F++)Ge=fe.h[fe.g++],mt(fe),S|=(127&Ge)<<7*F;if(128<=Ge&&(Ge=fe.h[fe.g++],mt(fe),S|=(127&Ge)<<28,I|=(127&Ge)>>4),128<=Ge)for(F=0;5>F&&128<=Ge;F++)Ge=fe.h[fe.g++],mt(fe),I|=(127&Ge)<<7*F+3;if(!(128>Ge))throw It();return fe=S>>>0,(I=2147483648&(Ge=I>>>0))&&(Ge=~Ge>>>0,0==(fe=1+~fe>>>0)&&(Ge=Ge+1>>>0)),fe=4294967296*Ge+(fe>>>0),qn(z,ie,I?-fe:fe),!0},function(I,z,ie){if(null!=(z=Qr(z,ie))&&null!=z){Ee(I.g,8*ie),I=I.g;var fe=z;for(ie=0>fe,z=(fe=Math.abs(fe))>>>0,fe=Math.floor((fe-z)/4294967296),fe>>>=0,ie&&(fe=~fe>>>0,4294967295<(z=1+(~z>>>0))&&(z=0,4294967295<++fe&&(fe=0))),ie=xe=z,z=fe;0<z||127<ie;)I.g.push(127&ie|128),ie=(ie>>>7|z<<25)>>>0,z>>>=7;I.g.push(ie)}}),dn=zt(function(I,z,ie){return 0===I.h&&(qn(z,ie,Gt(I.g)),!0)},function(I,z,ie){if(null!=(z=Qr(z,ie))&&null!=z)if(Ee(I.g,8*ie),I=I.g,0<=(ie=z))Ee(I,ie);else{for(z=0;9>z;z++)I.g.push(127&ie|128),ie>>=7;I.g.push(1)}}),Dn=zt(function(I,z,ie){if(2!==I.h)return!1;var S,fe=Gt(I.g)>>>0,Ge=(I=I.g).g;if(I.g+=fe,mt(I),I=I.h,ro)(S=_i)||(S=_i=new TextDecoder("utf-8",{fatal:!0})),S=S.decode(I.subarray(Ge,Ge+fe));else{fe=Ge+fe;for(var g,R,G,F=[],Y=null;Ge<fe;)128>(g=I[Ge++])?F.push(g):224>g?Ge>=fe?hi():(R=I[Ge++],194>g||128!=(192&R)?(Ge--,hi()):F.push((31&g)<<6|63&R)):240>g?Ge>=fe-1?hi():128!=(192&(R=I[Ge++]))||224===g&&160>R||237===g&&160<=R||128!=(192&(S=I[Ge++]))?(Ge--,hi()):F.push((15&g)<<12|(63&R)<<6|63&S):244>=g?Ge>=fe-2?hi():128!=(192&(R=I[Ge++]))||R-144+(g<<28)>>30!=0||128!=(192&(S=I[Ge++]))||128!=(192&(G=I[Ge++]))?(Ge--,hi()):(g=(7&g)<<18|(63&R)<<12|(63&S)<<6|63&G,F.push(55296+((g-=65536)>>10&1023),56320+(1023&g))):hi(),8192<=F.length&&(Y=Ci(Y,F),F.length=0);S=Ci(Y,F)}return qn(z,ie,S),!0},function(I,z,ie){if(null!=(z=Qr(z,ie))){var fe=!1;if(fe=void 0!==fe&&fe,yo){if(fe&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(z))throw Error("Found an unpaired surrogate");z=(qi||(qi=new TextEncoder)).encode(z)}else{for(var Ge=0,S=new Uint8Array(3*z.length),F=0;F<z.length;F++){var Y=z.charCodeAt(F);if(128>Y)S[Ge++]=Y;else{if(2048>Y)S[Ge++]=Y>>6|192;else{if(55296<=Y&&57343>=Y){if(56319>=Y&&F<z.length){var g=z.charCodeAt(++F);if(56320<=g&&57343>=g){S[Ge++]=(Y=1024*(Y-55296)+g-56320+65536)>>18|240,S[Ge++]=Y>>12&63|128,S[Ge++]=Y>>6&63|128,S[Ge++]=63&Y|128;continue}F--}if(fe)throw Error("Found an unpaired surrogate");Y=65533}S[Ge++]=Y>>12|224,S[Ge++]=Y>>6&63|128}S[Ge++]=63&Y|128}}z=S.subarray(0,Ge)}Ee(I.g,8*ie+2),Ee(I.g,z.length),Qt(I,I.g.end()),Qt(I,z)}}),cr=zt(function(I,z,ie,fe,Ge){if(2!==I.h)return!1;z=wr(z,ie,fe),ie=I.g.i,fe=Gt(I.g)>>>0;var S=I.g.g+fe,F=S-ie;if(0>=F&&(I.g.i=S,Ge(z,I),F=S-I.g.g),F)throw Error("Message parsing ended unexpectedly. Expected to read "+fe+" bytes, instead read "+(fe-F)+" bytes, either the data ended unexpectedly or the message misreported its own length");return I.g.g=S,I.g.i=ie,!0},function(I,z,ie,fe,Ge){if(null!=(z=Mi(z,fe,ie)))for(fe=0;fe<z.length;fe++){var S=I;Ee(S.g,8*ie+2);var F=S.g.end();Qt(S,F),F.push(S.h),S=F,Ge(z[fe],I),F=I;var Y=S.pop();for(Y=F.h+F.g.length()-Y;127<Y;)S.push(127&Y|128),Y>>>=7,F.h++;S.push(Y),F.h++}});function er(){q.apply(this,arguments)}if($n(er,q),Sr){var Rr={};Object.defineProperties(er,(Rr[Symbol.hasInstance]=ho(Object[Symbol.hasInstance]),Rr))}function nr(I){er.call(this,I)}function Bn(){return[1,dn,2,gt,3,Dn,4,Dn]}function or(I){er.call(this,I,-1,jr)}function Ar(){return[1,cr,nr,Bn]}$n(nr,er),$n(or,er),or.prototype.addClassification=function(I,z){return wr(this,1,nr,I,z),this};var jr=[1];function _r(I){er.call(this,I)}function si(){return[1,gt,2,gt,3,gt,4,gt,5,gt]}function wi(I){er.call(this,I,-1,H)}function V(){return[1,cr,_r,si]}$n(_r,er),$n(wi,er);var H=[1];function K(I){er.call(this,I)}function Ne(){return[1,gt,2,gt,3,gt,4,gt,5,gt,6,Ft]}function $e(I,z,ie){if(ie=I.createShader(0===ie?I.VERTEX_SHADER:I.FRAGMENT_SHADER),I.shaderSource(ie,z),I.compileShader(ie),!I.getShaderParameter(ie,I.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+I.getShaderInfoLog(ie));return ie}function bt(I){return Mi(I,nr,1).map(function(z){return{index:kr(z,1),score:Dr(z,2),label:null!=Qr(z,3)?Vi(z,3):void 0,displayName:null!=Qr(z,4)?Vi(z,4):void 0}})}function et(I){return{x:Dr(I,1),y:Dr(I,2),z:Dr(I,3),visibility:null!=Qr(I,4)?Dr(I,4):void 0}}function xt(I){return I.map(function(z){return Mi(te(z,wi,V),_r,1).map(et)})}function _t(I,z){this.h=I,this.g=z,this.l=0}function x(I,z,ie){return function $(I,z){var ie=I.g;if(void 0===I.o){var fe=$e(ie,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),Ge=$e(ie,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),S=ie.createProgram();if(ie.attachShader(S,fe),ie.attachShader(S,Ge),ie.linkProgram(S),!ie.getProgramParameter(S,ie.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+ie.getProgramInfoLog(S));fe=I.o=S,ie.useProgram(fe),Ge=ie.getUniformLocation(fe,"sampler0"),I.j={K:ie.getAttribLocation(fe,"aVertex"),J:ie.getAttribLocation(fe,"aTex"),qa:Ge},I.u=ie.createBuffer(),ie.bindBuffer(ie.ARRAY_BUFFER,I.u),ie.enableVertexAttribArray(I.j.K),ie.vertexAttribPointer(I.j.K,2,ie.FLOAT,!1,0,0),ie.bufferData(ie.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ie.STATIC_DRAW),ie.bindBuffer(ie.ARRAY_BUFFER,null),I.s=ie.createBuffer(),ie.bindBuffer(ie.ARRAY_BUFFER,I.s),ie.enableVertexAttribArray(I.j.J),ie.vertexAttribPointer(I.j.J,2,ie.FLOAT,!1,0,0),ie.bufferData(ie.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ie.STATIC_DRAW),ie.bindBuffer(ie.ARRAY_BUFFER,null),ie.uniform1i(Ge,0)}fe=I.j,ie.useProgram(I.o),ie.canvas.width=z.width,ie.canvas.height=z.height,ie.viewport(0,0,z.width,z.height),ie.activeTexture(ie.TEXTURE0),I.h.bindTexture2d(z.glName),ie.enableVertexAttribArray(fe.K),ie.bindBuffer(ie.ARRAY_BUFFER,I.u),ie.vertexAttribPointer(fe.K,2,ie.FLOAT,!1,0,0),ie.enableVertexAttribArray(fe.J),ie.bindBuffer(ie.ARRAY_BUFFER,I.s),ie.vertexAttribPointer(fe.J,2,ie.FLOAT,!1,0,0),ie.bindFramebuffer(ie.DRAW_FRAMEBUFFER?ie.DRAW_FRAMEBUFFER:ie.FRAMEBUFFER,null),ie.clearColor(0,0,0,0),ie.clear(ie.COLOR_BUFFER_BIT),ie.colorMask(!0,!0,!0,!0),ie.drawArrays(ie.TRIANGLE_FAN,0,4),ie.disableVertexAttribArray(fe.K),ie.disableVertexAttribArray(fe.J),ie.bindBuffer(ie.ARRAY_BUFFER,null),I.h.bindTexture2d(0)}(I,z),"function"==typeof I.g.canvas.transferToImageBitmap?n.resolve(I.g.canvas.transferToImageBitmap()):ie?n.resolve(I.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(I.g.canvas):(void 0===I.i&&(I.i=document.createElement("canvas")),new n(function(fe){I.i.height=I.g.canvas.height,I.i.width=I.g.canvas.width,I.i.getContext("2d",{}).drawImage(I.g.canvas,0,0,I.g.canvas.width,I.g.canvas.height),fe(I.i)}))}function re(I){this.g=I}$n(K,er);var Se=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function je(I,z){return z+I}function tt(I,z){window[I]=z}function Tt(I){if(this.g=I,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=n.resolve(),this.Z="",this.C={},this.locateFile=I&&I.locateFile||je,"object"==typeof window)var z=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");z=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.aa=z,I.options)for(var ie=(z=Qe(Object.keys(I.options))).next();!ie.done;ie=z.next()){var fe=I.options[ie=ie.value].default;void 0!==fe&&(this.j[ie]="function"==typeof fe?fe():fe)}}function kn(I,z){var ie,fe;return pn(function(Ge){return z in I.H?Ge.return(I.H[z]):(ie=I.locateFile(z,""),fe=fetch(ie).then(function(S){return S.arrayBuffer()}),I.H[z]=fe,Ge.return(fe))})}function jn(I,z){for(var ie=z.name||"$",fe=[].concat(Bt(z.wants)),Ge=new I.h.StringList,S=Qe(z.wants),F=S.next();!F.done;F=S.next())Ge.push_back(F.value);S=I.h.PacketListener.implement({onResults:function(Y){for(var g={},R=0;R<z.wants.length;++R)g[fe[R]]=Y.get(R);var G=I.listeners[ie];G&&(I.D=function sn(I,z,ie){var fe,Ge,S,F,g,R,G,f,A,P,se,Te;return pn(function(Me){switch(Me.g){case 1:if(!ie)return Me.return(z);for(fe={},Ge=0,S=Qe(Object.keys(ie)),F=S.next();!F.done;F=S.next())"string"!=typeof(g=ie[F.value])&&"texture"===g.type&&void 0!==z[g.stream]&&++Ge;1<Ge&&(I.I=!1),R=Qe(Object.keys(ie)),F=R.next();case 2:if(F.done){Me.g=4;break}if("string"==typeof(f=ie[G=F.value]))return se=fe,Te=G,Et(Me,function wn(I,z,ie){var fe;return pn(function(Ge){return"number"==typeof ie||ie instanceof Uint8Array||ie instanceof I.h.Uint8BlobList?Ge.return(ie):ie instanceof I.h.Texture2dDataOut?((fe=I.u[z])||(fe=new _t(I.h,I.G),I.u[z]=fe),Ge.return(x(fe,ie,I.I))):Ge.return(void 0)})}(I,G,z[f]),14);if(A=z[f.stream],"detection_list"===f.type){if(A){for(var Je=A.getRectList(),st=A.getLandmarksList(),St=A.getClassificationsList(),Ct=[],Kt=0;Kt<Je.size();++Kt){var an=te(Je.get(Kt),K,Ne);an={ea:{ka:Dr(an,1),la:Dr(an,2),height:Dr(an,3),width:Dr(an,4),rotation:Dr(an,5,0),ia:kr(an,6)},Y:Mi(te(st.get(Kt),wi,V),_r,1).map(et),V:bt(te(St.get(Kt),or,Ar))},Ct.push(an)}Je=Ct}else Je=[];fe[G]=Je,Me.g=7;break}if("proto_list"===f.type){if(A){for(Je=Array(A.size()),st=0;st<A.size();st++)Je[st]=A.get(st);A.delete()}else Je=[];fe[G]=Je,Me.g=7;break}if(void 0===A){Me.g=3;break}if("float_list"===f.type){fe[G]=A,Me.g=7;break}if("proto"===f.type){fe[G]=A,Me.g=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(P=I.u[G])||(P=new _t(I.h,I.G),I.u[G]=P),Et(Me,x(P,A,I.I),13);case 13:fe[G]=Me.h;case 7:f.transform&&fe[G]&&(fe[G]=f.transform(fe[G])),Me.g=3;break;case 14:se[Te]=Me.h;case 3:F=R.next(),Me.g=2;break;case 4:return Me.return(fe)}})}(I,g,z.outs).then(function(f){f=G(f);for(var A=0;A<z.wants.length;++A){var P=g[fe[A]];"object"==typeof P&&P.hasOwnProperty&&P.hasOwnProperty("delete")&&P.delete()}f&&(I.D=f)}))}}),I.i.attachMultiListener(Ge,S),Ge.delete()}function Xn(I){return void 0===I&&(I=0),1===I?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Jn(I){var z=this;this.g=new Tt({locateFile:(I=I||{}).locateFile,files:function(ie){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Xn(ie.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:xt},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:xt},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(ie){return ie.map(function(fe){return bt(te(fe,or,Ar))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(ie){var fe,Ge;return pn(function(F){return 1==F.g?(fe=Xn(ie),Ge="third_party/mediapipe/modules/hand_landmark/"+fe,Et(F,kn(z.g,fe),2)):(z.g.overrideFile(Ge,F.h),F.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}(ue=Tt.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){var I=this;return pn(function(z){I.i&&(I.i.reset(),I.o={},I.u={}),z.g=0})},ue.setOptions=function(I,z){var ie=this;if(z=z||this.g.options){for(var fe=[],Ge=[],S={},F=Qe(Object.keys(I)),Y=F.next();!Y.done;S={R:S.R,S:S.S},Y=F.next()){var g=Y.value;g in this.j&&this.j[g]===I[g]||(this.j[g]=I[g],void 0!==(Y=z[g])&&(Y.onChange&&(S.R=Y.onChange,S.S=I[g],fe.push(function(R){return function(){return pn(function(f){if(1==f.g)return Et(f,R.R(R.S),2);!0===f.h&&(ie.s=!0),f.g=0})}}(S))),Y.graphOptionXref&&(g={valueNumber:1===Y.type?I[g]:0,valueBoolean:0===Y.type&&I[g],valueString:2===Y.type?I[g]:""},Y=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Y.graphOptionXref),g),Ge.push(Y))))}(0!==fe.length||0!==Ge.length)&&(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(Ge),this.A=(void 0===this.A?[]:this.A).concat(fe))}},ue.initialize=function(){var I=this;return pn(function(z){return 1==z.g?Et(z,function fn(I){var z,ie,fe,Ge,S,F,Y,g,R,G,f;return pn(function(A){switch(A.g){case 1:return I.$?(z=void 0===I.g.files?[]:"function"==typeof I.g.files?I.g.files(I.j):I.g.files,Et(A,function Mt(){return pn(function(I){switch(I.g){case 1:return I.o=2,Et(I,WebAssembly.instantiate(Se),4);case 4:I.g=3,I.o=0;break;case 2:return I.o=0,I.j=null,I.return(!1);case 3:return I.return(!0)}})}(),2)):A.return();case 2:if(ie=A.h,"object"==typeof window)return tt("createMediapipeSolutionsWasm",{locateFile:I.locateFile}),tt("createMediapipeSolutionsPackedAssets",{locateFile:I.locateFile}),F=z.filter(function(P){return void 0!==P.data}),Y=z.filter(function(P){return void 0===P.data}),g=n.all(F.map(function(P){var X=kn(I,P.url);if(void 0!==P.path){var se=P.path;X=X.then(function(Te){return I.overrideFile(se,Te),n.resolve(Te)})}return X})),R=n.all(Y.map(function(P){return void 0===P.simd||P.simd&&ie||!P.simd&&!ie?function Ke(I){var z=document.createElement("script");return z.setAttribute("src",I),z.setAttribute("crossorigin","anonymous"),new n(function(ie){z.addEventListener("load",function(){ie()},!1),z.addEventListener("error",function(){ie()},!1),document.body.appendChild(z)})}(I.locateFile(P.url,I.aa)):n.resolve()})).then(function(){var P,X,se;return pn(function(Te){if(1==Te.g)return P=window.createMediapipeSolutionsWasm,X=window.createMediapipeSolutionsPackedAssets,se=I,Et(Te,P(X),2);se.h=Te.h,Te.g=0})}),G=pn(function(P){return I.g.graph&&I.g.graph.url?P=Et(P,kn(I,I.g.graph.url),0):(P.g=0,P=void 0),P}),Et(A,n.all([R,g,G]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return fe=z.filter(function(P){return void 0===P.simd||P.simd&&ie||!P.simd&&!ie}).map(function(P){return I.locateFile(P.url,I.aa)}),importScripts.apply(null,Bt(fe)),Ge=I,Et(A,createMediapipeSolutionsWasm(Module),6);case 6:Ge.h=A.h,I.l=new OffscreenCanvas(1,1),I.h.canvas=I.l,S=I.h.GL.createContext(I.l,{antialias:!1,alpha:!1,na:"undefined"!=typeof WebGL2RenderingContext?2:1}),I.h.GL.makeContextCurrent(S),A.g=4;break;case 7:if(I.l=document.createElement("canvas"),!(f=I.l.getContext("webgl2",{}))&&!(f=I.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),A.return();I.G=f,I.h.canvas=I.l,I.h.createContext(I.l,!0,!0,{});case 4:I.i=new I.h.SolutionWasm,I.$=!1,A.g=0}})}(I),2):3!=z.g?Et(z,function An(I){var ie,fe,Ge,S,F,g;return pn(function(R){if(1==R.g)return I.g.graph&&I.g.graph.url&&I.Z===I.g.graph.url?R.return():(I.s=!0,I.g.graph&&I.g.graph.url?(I.Z=I.g.graph.url,Et(R,kn(I,I.g.graph.url),3)):void(R.g=2));for(2!=R.g&&I.i.loadGraph(R.h),ie=Qe(Object.keys(I.C)),fe=ie.next();!fe.done;fe=ie.next())I.i.overrideFile(Ge=fe.value,I.C[Ge]);if(I.C={},I.g.listeners)for(S=Qe(I.g.listeners),F=S.next();!F.done;F=S.next())jn(I,F.value);g=I.j,I.j={},I.setOptions(g),R.g=0})}(I),3):Et(z,function lr(I){var z,ie,Ge,S,F;return pn(function(g){switch(g.g){case 1:if(!I.s)return g.return();if(!I.A){g.g=2;break}z=Qe(I.A),ie=z.next();case 3:if(ie.done){g.g=5;break}return Et(g,(0,ie.value)(),4);case 4:ie=z.next(),g.g=3;break;case 5:I.A=void 0;case 2:if(I.B){for(Ge=new I.h.GraphOptionChangeRequestList,S=Qe(I.B),F=S.next();!F.done;F=S.next())Ge.push_back(F.value);I.i.changeOptions(Ge),Ge.delete(),I.B=void 0}I.s=!1,g.g=0}})}(I),0)})},ue.overrideFile=function(I,z){this.i?this.i.overrideFile(I,z):this.C[I]=z},ue.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(I,z){var fe,Ge,S,F,Y,g,R,G,f,ie=this;return pn(function(A){switch(A.g){case 1:return ie.g.inputs?(fe=1e3*(null==z?performance.now():z),Et(A,ie.D,2)):A.return();case 2:return Et(A,ie.initialize(),3);case 3:for(Ge=new ie.h.PacketDataList,S=Qe(Object.keys(I)),F=S.next();!F.done;F=S.next())if(g=ie.g.inputs[Y=F.value]){e:{var P=I[Y];switch(g.type){case"video":var X=ie.o[g.stream];if(X||(X=new _t(ie.h,ie.G),ie.o[g.stream]=X),0===X.l&&(X.l=X.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&P instanceof HTMLVideoElement)var se=P.videoWidth,Te=P.videoHeight;else"undefined"!=typeof HTMLImageElement&&P instanceof HTMLImageElement?(se=P.naturalWidth,Te=P.naturalHeight):(se=P.width,Te=P.height);Te={glName:X.l,width:se,height:Te},(se=X.g).canvas.width=Te.width,se.canvas.height=Te.height,se.activeTexture(se.TEXTURE0),X.h.bindTexture2d(X.l),se.texImage2D(se.TEXTURE_2D,0,se.RGBA,se.RGBA,se.UNSIGNED_BYTE,P),X.h.bindTexture2d(0),X=Te;break e;case"detections":for((X=ie.o[g.stream])||(X=new re(ie.h),ie.o[g.stream]=X),X.data||(X.data=new X.g.DetectionListData),X.data.reset(P.length),Te=0;Te<P.length;++Te){var Me=X.data,Je=Me.setBoundingBox,st=Te,St=(se=P[Te]).ea,Ct=new K;if(qn(Ct,1,St.ka),qn(Ct,2,St.la),qn(Ct,3,St.height),qn(Ct,4,St.width),qn(Ct,5,St.rotation),qn(Ct,6,St.ia),St=vt(Ct,Ne),Je.call(Me,st,St),se.Y)for(Me=0;Me<se.Y.length;++Me){var Kt=!!(Ct=se.Y[Me]).visibility;st=(Je=X.data).addNormalizedLandmark,St=Te,Ct=Object.assign(Object.assign({},Ct),{visibility:Kt?Ct.visibility:0}),qn(Kt=new _r,1,Ct.x),qn(Kt,2,Ct.y),qn(Kt,3,Ct.z),Ct.visibility&&qn(Kt,4,Ct.visibility),Ct=vt(Kt,si),st.call(Je,St,Ct)}if(se.V)for(Me=0;Me<se.V.length;++Me)st=(Je=X.data).addClassification,St=Te,Ct=se.V[Me],qn(Kt=new nr,2,Ct.score),Ct.index&&qn(Kt,1,Ct.index),Ct.label&&qn(Kt,3,Ct.label),Ct.displayName&&qn(Kt,4,Ct.displayName),Ct=vt(Kt,Bn),st.call(Je,St,Ct)}X=X.data;break e;default:X={}}}switch(R=X,G=g.stream,g.type){case"video":Ge.pushTexture2d(Object.assign(Object.assign({},R),{stream:G,timestamp:fe}));break;case"detections":(f=R).stream=G,f.timestamp=fe,Ge.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+g.type+"'")}}return ie.i.send(Ge),Et(A,ie.D,4);case 4:Ge.delete(),A.g=0}})},ue.onResults=function(I,z){this.listeners[z||"$"]=I},Yn("Solution",Tt),Yn("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(ue=Jn.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(I){this.g.onResults(I)},ue.initialize=function(){var I=this;return pn(function(z){return Et(z,I.g.initialize(),0)})},ue.reset=function(){this.g.reset()},ue.send=function(I){var z=this;return pn(function(ie){return Et(ie,z.g.send(I),0)})},ue.setOptions=function(I){this.g.setOptions(I)},Yn("Hands",Jn),Yn("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Yn("VERSION","0.4.1646424915")}).call(us);var as={};(function(){var ue;function J(g){var R=0;return function(){return R<g.length?{done:!1,value:g[R++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(g,R,G){return g==Array.prototype||g==Object.prototype||(g[R]=G.value),g},Re=function we(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var R=0;R<g.length;++R){var G=g[R];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}(this);function rt(g,R){if(R)e:{var G=Re;g=g.split(".");for(var f=0;f<g.length-1;f++){var A=g[f];if(!(A in G))break e;G=G[A]}(R=R(f=G[g=g[g.length-1]]))!=f&&null!=R&&le(G,g,{configurable:!0,writable:!0,value:R})}}function yt(g){return(g={next:g})[Symbol.iterator]=function(){return this},g}function Qe(g){var R="undefined"!=typeof Symbol&&Symbol.iterator&&g[Symbol.iterator];return R?R.call(g):{next:J(g)}}function Bt(g){if(!(g instanceof Array)){g=Qe(g);for(var R,G=[];!(R=g.next()).done;)G.push(R.value);g=G}return g}rt("Symbol",function(g){function G(P,X){this.g=P,le(this,"description",{configurable:!0,writable:!0,value:X})}if(g)return g;G.prototype.toString=function(){return this.g};var f="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",A=0;return function R(P){if(this instanceof R)throw new TypeError("Symbol is not a constructor");return new G(f+(P||"")+"_"+A++,P)}}),rt("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var R="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),G=0;G<R.length;G++){var f=Re[R[G]];"function"==typeof f&&"function"!=typeof f.prototype[g]&&le(f.prototype,g,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return g});var Ut,br="function"==typeof Object.create?Object.create:function(g){function R(){}return R.prototype=g,new R};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(g){}fr=!1}Ut=fr?function(g,R){if(g.__proto__=R,g.__proto__!==R)throw new TypeError(g+" is not extensible");return g}:null}var Ur=Ut;function $n(g,R){if(g.prototype=br(R.prototype),g.prototype.constructor=g,Ur)Ur(g,R);else for(var G in R)if("prototype"!=G)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(R,G);f&&Object.defineProperty(g,G,f)}else g[G]=R[G];g.da=R.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Kr(g){if(g.l)throw new TypeError("Generator is already running");g.l=!0}function ii(g,R){g.j={U:R,V:!0},g.g=g.m||g.s}function Et(g,R,G){return g.g=G,{value:R}}function fo(g){this.g=new Pr,this.h=g}function Ii(g,R,G,f){try{var A=R.call(g.g.i,G);if(!(A instanceof Object))throw new TypeError("Iterator result "+A+" is not an object");if(!A.done)return g.g.l=!1,A;var P=A.value}catch(X){return g.g.i=null,ii(g.g,X),_n(g)}return g.g.i=null,f.call(g.g,P),_n(g)}function _n(g){for(;g.g.g;)try{var R=g.h(g.g);if(R)return g.g.l=!1,{value:R.value,done:!1}}catch(G){g.g.h=void 0,ii(g.g,G)}if(g.g.l=!1,g.g.j){if(R=g.g.j,g.g.j=null,R.V)throw R.U;return{value:R.return,done:!0}}return{value:void 0,done:!0}}function Pi(g){this.next=function(R){return Kr(g.g),g.g.i?R=Ii(g,g.g.i.next,R,g.g.o):(g.g.o(R),R=_n(g)),R},this.throw=function(R){return Kr(g.g),g.g.i?R=Ii(g,g.g.i.throw,R,g.g.o):(ii(g.g,R),R=_n(g)),R},this.return=function(R){return function Go(g,R){Kr(g.g);var G=g.g.i;return G?Ii(g,"return"in G?G.return:function(f){return{value:f,done:!0}},R,g.g.return):(g.g.return(R),_n(g))}(g,R)},this[Symbol.iterator]=function(){return this}}function pn(g){return function Wr(g){function R(f){return g.next(f)}function G(f){return g.throw(f)}return new n(function(f,A){!function P(X){X.done?f(X.value):n.resolve(X.value).then(R,G).then(P,A)}(g.next())})}(new Pi(new fo(g)))}Pr.prototype.o=function(g){this.h=g},Pr.prototype.return=function(g){this.j={return:g},this.g=this.s},rt("Promise",function(g){function R(X){this.h=0,this.i=void 0,this.g=[],this.o=!1;var se=this.j();try{X(se.resolve,se.reject)}catch(Te){se.reject(Te)}}function G(){this.g=null}function f(X){return X instanceof R?X:new R(function(se){se(X)})}if(g)return g;G.prototype.h=function(X){if(null==this.g){this.g=[];var se=this;this.i(function(){se.l()})}this.g.push(X)};var A=Re.setTimeout;G.prototype.i=function(X){A(X,0)},G.prototype.l=function(){for(;this.g&&this.g.length;){var X=this.g;this.g=[];for(var se=0;se<X.length;++se){var Te=X[se];X[se]=null;try{Te()}catch(Me){this.j(Me)}}}this.g=null},G.prototype.j=function(X){this.i(function(){throw X})},R.prototype.j=function(){function X(Me){return function(Je){Te||(Te=!0,Me.call(se,Je))}}var se=this,Te=!1;return{resolve:X(this.C),reject:X(this.l)}},R.prototype.C=function(X){if(X===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(X instanceof R)this.F(X);else{e:switch(typeof X){case"object":var se=null!=X;break e;case"function":se=!0;break e;default:se=!1}se?this.v(X):this.m(X)}},R.prototype.v=function(X){var se=void 0;try{se=X.then}catch(Te){return void this.l(Te)}"function"==typeof se?this.G(se,X):this.m(X)},R.prototype.l=function(X){this.s(2,X)},R.prototype.m=function(X){this.s(1,X)},R.prototype.s=function(X,se){if(0!=this.h)throw Error("Cannot settle("+X+", "+se+"): Promise already settled in state"+this.h);this.h=X,this.i=se,2===this.h&&this.D(),this.A()},R.prototype.D=function(){var X=this;A(function(){if(X.B()){var se=Re.console;void 0!==se&&se.error(X.i)}},1)},R.prototype.B=function(){if(this.o)return!1;var X=Re.CustomEvent,se=Re.Event,Te=Re.dispatchEvent;return void 0===Te||("function"==typeof X?X=new X("unhandledrejection",{cancelable:!0}):"function"==typeof se?X=new se("unhandledrejection",{cancelable:!0}):(X=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,X),X.promise=this,X.reason=this.i,Te(X))},R.prototype.A=function(){if(null!=this.g){for(var X=0;X<this.g.length;++X)P.h(this.g[X]);this.g=null}};var P=new G;return R.prototype.F=function(X){var se=this.j();X.J(se.resolve,se.reject)},R.prototype.G=function(X,se){var Te=this.j();try{X.call(se,Te.resolve,Te.reject)}catch(Me){Te.reject(Me)}},R.prototype.then=function(X,se){function Te(St,Ct){return"function"==typeof St?function(Kt){try{Me(St(Kt))}catch(an){Je(an)}}:Ct}var Me,Je,st=new R(function(St,Ct){Me=St,Je=Ct});return this.J(Te(X,Me),Te(se,Je)),st},R.prototype.catch=function(X){return this.then(void 0,X)},R.prototype.J=function(X,se){function Te(){switch(Me.h){case 1:X(Me.i);break;case 2:se(Me.i);break;default:throw Error("Unexpected state: "+Me.h)}}var Me=this;null==this.g?P.h(Te):this.g.push(Te),this.o=!0},R.resolve=f,R.reject=function(X){return new R(function(se,Te){Te(X)})},R.race=function(X){return new R(function(se,Te){for(var Me=Qe(X),Je=Me.next();!Je.done;Je=Me.next())f(Je.value).J(se,Te)})},R.all=function(X){var se=Qe(X),Te=se.next();return Te.done?f([]):new R(function(Me,Je){function st(Kt){return function(an){St[Kt]=an,0==--Ct&&Me(St)}}var St=[],Ct=0;do{St.push(void 0),Ct++,f(Te.value).J(st(St.length-1),Je),Te=se.next()}while(!Te.done)})},R});var vo="function"==typeof Object.assign?Object.assign:function(g,R){for(var G=1;G<arguments.length;G++){var f=arguments[G];if(f)for(var A in f)Object.prototype.hasOwnProperty.call(f,A)&&(g[A]=f[A])}return g};rt("Object.assign",function(g){return g||vo}),rt("Object.is",function(g){return g||function(R,G){return R===G?0!==R||1/R==1/G:R!=R&&G!=G}}),rt("Array.prototype.includes",function(g){return g||function(R,G){var f=this;f instanceof String&&(f=String(f));var A=f.length;for(0>(G=G||0)&&(G=Math.max(G+A,0));G<A;G++){var P=f[G];if(P===R||Object.is(P,R))return!0}return!1}}),rt("String.prototype.includes",function(g){return g||function(R,G){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(R instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(R,G||0)}}),rt("Array.prototype.keys",function(g){return g||function(){return function wo(g,R){g instanceof String&&(g+="");var G=0,f=!1,A={next:function(){if(!f&&G<g.length){var P=G++;return{value:R(P,g[P]),done:!1}}return f=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}(this,function(R){return R})}});var ui=this||self;function Yn(g,R){g=g.split(".");var f,G=ui;g[0]in G||void 0===G.execScript||G.execScript("var "+g[0]);for(;g.length&&(f=g.shift());)g.length||void 0===R?G=G[f]&&G[f]!==Object.prototype[f]?G[f]:G[f]={}:G[f]=R}function Ci(g){!function hi(g){ui.setTimeout(function(){throw g},0)}(g)}function _i(g,R){Ci(Error("Invalid wire type: "+g+" (at position "+R+")"))}function ro(){Ci(Error("Failed to read varint, encoding is invalid."))}function qi(g,R){return R=String.fromCharCode.apply(null,R),null==g?R:g+R}var yo,Yi,Ui="undefined"!=typeof TextDecoder,Ro="undefined"!=typeof TextEncoder;function io(g){if(Ro)g=(Yi||(Yi=new TextEncoder)).encode(g);else{var R=void 0;R=void 0!==R&&R;for(var G=0,f=new Uint8Array(3*g.length),A=0;A<g.length;A++){var P=g.charCodeAt(A);if(128>P)f[G++]=P;else{if(2048>P)f[G++]=P>>6|192;else{if(55296<=P&&57343>=P){if(56319>=P&&A<g.length){var X=g.charCodeAt(++A);if(56320<=X&&57343>=X){f[G++]=(P=1024*(P-55296)+X-56320+65536)>>18|240,f[G++]=P>>12&63|128,f[G++]=P>>6&63|128,f[G++]=63&P|128;continue}A--}if(R)throw Error("Found an unpaired surrogate");P=65533}f[G++]=P>>12|224,f[G++]=P>>6&63|128}f[G++]=63&P|128}}g=f.subarray(0,G)}return g}var Xi={},Hi=null;function oo(g){var R;void 0===R&&(R=0),Ce(),R=Xi[R];for(var G=Array(Math.floor(g.length/3)),f=R[64]||"",A=0,P=0;A<g.length-2;A+=3){var X=g[A],se=g[A+1],Te=g[A+2],Me=R[X>>2];G[P++]=Me+(X=R[(3&X)<<4|se>>4])+(se=R[(15&se)<<2|Te>>6])+(Te=R[63&Te])}switch(Me=0,Te=f,g.length-A){case 2:Te=R[(15&(Me=g[A+1]))<<2]||f;case 1:G[P]=R[(g=g[A])>>2]+R[(3&g)<<4|Me>>4]+Te+f}return G.join("")}function eo(g){var R=g.length,G=3*R/4;G%3?G=Math.floor(G):-1!="=.".indexOf(g[R-1])&&(G=-1!="=.".indexOf(g[R-2])?G-2:G-1);var f=new Uint8Array(G),A=0;return function ni(g,R){function G(Te){for(;f<g.length;){var Me=g.charAt(f++),Je=Hi[Me];if(null!=Je)return Je;if(!/^[\s\xa0]*$/.test(Me))throw Error("Unknown base64 encoding at char: "+Me)}return Te}Ce();for(var f=0;;){var A=G(-1),P=G(0),X=G(64),se=G(64);if(64===se&&-1===A)break;R(A<<2|P>>4),64!=X&&(R(P<<4&240|X>>2),64!=se&&R(X<<6&192|se))}}(g,function(P){f[A++]=P}),f.subarray(0,A)}function Ce(){if(!Hi){Hi={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),R=["+/=","+/","-_=","-_.","-_"],G=0;5>G;G++){var f=g.concat(R[G].split(""));Xi[G]=f;for(var A=0;A<f.length;A++){var P=f[A];void 0===Hi[P]&&(Hi[P]=A)}}}}var xe,be="function"==typeof Uint8Array;function Fe(g){if(this.g=g,null!==g&&0===g.length)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(null==this.g)var g="";else g=this.g=null==(g=this.g)||"string"==typeof g?g:be&&g instanceof Uint8Array?oo(g):null;return g};var _e="function"==typeof Uint8Array.prototype.slice;function ot(g,R,G){return R===G?xe||(xe=new Uint8Array(0)):_e?g.slice(R,G):new Uint8Array(g.subarray(R,G))}var It=0;function mt(g,R){R=void 0!==(R=void 0===R?{}:R).u&&R.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=R,g&&Gt(this,g)}function Gt(g,R){g.h=function tn(g){if(g.constructor===Uint8Array)return g;if(g.constructor===ArrayBuffer)return new Uint8Array(g);if(g.constructor===Array)return new Uint8Array(g);if(g.constructor===String)return eo(g);if(g.constructor===Fe){if(null==g.g)var R=xe||(xe=new Uint8Array(0));else{R=Uint8Array;var G=g.g;G=null==G||be&&null!=G&&G instanceof Uint8Array?G:"string"==typeof G?eo(G):null,R=new R(g=g.g=G)}return R}if(g instanceof Uint8Array)return new Uint8Array(g.buffer,g.byteOffset,g.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(R),g.m=0,g.i=g.h.length,g.g=g.m}function hn(g){for(var R=128,G=0,f=0,A=0;4>A&&128<=R;A++)G|=(127&(R=g.h[g.g++]))<<7*A;if(128<=R&&(G|=(127&(R=g.h[g.g++]))<<28,f|=(127&R)>>4),128<=R)for(A=0;5>A&&128<=R;A++)f|=(127&(R=g.h[g.g++]))<<7*A+3;if(128>R)return g=G>>>0,(f=2147483648&(R=f>>>0))&&(R=~R>>>0,0==(g=1+~g>>>0)&&(R=R+1>>>0)),g=4294967296*R+(g>>>0),f?-g:g;g.l=!0,ro()}function Pt(g){g.g>g.i&&(g.l=!0,Ci(Error("Tried to read past the end of the data "+g.g+" > "+g.i)))}mt.prototype.reset=function(){this.g=this.m},mt.prototype.j=function(){var g=this.h,R=g[this.g],G=127&R;return 128>R?(this.g+=1,Pt(this),G):(G|=(127&(R=g[this.g+1]))<<7,128>R?(this.g+=2,Pt(this),G):(G|=(127&(R=g[this.g+2]))<<14,128>R?(this.g+=3,Pt(this),G):(G|=(127&(R=g[this.g+3]))<<21,128>R?(this.g+=4,Pt(this),G):(G|=(15&(R=g[this.g+4]))<<28,128>R?(this.g+=5,Pt(this),G>>>0):(this.g+=5,128<=g[this.g++]&&128<=g[this.g++]&&128<=g[this.g++]&&128<=g[this.g++]&&128<=g[this.g++]?(this.l=!0,ro(),G):(Pt(this),G))))))},mt.prototype.o=function(){var g=this.h[this.g],R=this.h[this.g+1],G=this.h[this.g+2],f=this.h[this.g+3];return this.g+=4,Pt(this),g=2*((G=(g<<0|R<<8|G<<16|f<<24)>>>0)>>31)+1,R=G>>>23&255,G&=8388607,255==R?G?NaN:1/0*g:0==R?g*Math.pow(2,-149)*G:g*Math.pow(2,R-150)*(G+Math.pow(2,23))};var Ee=[];function Ve(){this.g=new Uint8Array(64),this.h=0}function ze(g,R){if(!(g.h+1<g.g.length)){var G=g.g;g.g=new Uint8Array(Math.ceil(1+2*g.g.length)),g.g.set(G)}g.g[g.h++]=R}function Ze(g,R){for(;127<R;)ze(g,127&R|128),R>>>=7;ze(g,R)}function Lt(g){var R={},G=void 0!==R.N&&R.N;this.m={u:void 0!==R.u&&R.u},this.N=G,R=this.m,Ee.length?(G=Ee.pop(),R&&(G.u=R.u),g&&Gt(G,g),g=G):g=new mt(g,R),this.g=g,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function Dt(g){var R=g.g;if((R=R.g==R.i)||(R=g.j)||(R=(R=g.g).l||0>R.g||R.g>R.i),R)return!1;g.l=g.g.g;var G=g.g.j();return R=G>>>3,0<=(G&=7)&&5>=G?(g.i=R,g.h=G,!0):(g.j=!0,_i(G,g.l),!1)}function Qt(g){switch(g.h){case 0:if(0!=g.h)Qt(g);else e:{for(var R=(g=g.g).g,G=0;10>G;G++){if(0==(128&g.h[R])){g.g=R+1,Pt(g);break e}R++}g.l=!0,ro()}break;case 1:(g=g.g).g+=8,Pt(g);break;case 2:2!=g.h?Qt(g):(R=g.g.j(),(g=g.g).g+=R,Pt(g));break;case 5:(g=g.g).g+=4,Pt(g);break;case 3:for(R=g.i;;){if(!Dt(g)){g.j=!0,Ci(Error("Unmatched start-group tag: stream EOF"));break}if(4==g.h){g.i!=R&&(g.j=!0,Ci(Error("Unmatched end-group tag")));break}Qt(g)}break;default:g.j=!0,_i(g.h,g.l)}}function hr(g,R,G){g.N||(g=ot(g.g.h,G,g.g.g),(G=R.o)?G.push(g):R.o=[g])}function Hr(g,R,G){var f=g.g.i,A=g.g.j(),P=g.g.g+A;if(g.g.i=P,G(R,g),0!=(G=P-g.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+A+" bytes, instead read "+(A-G)+" bytes, either the data ended unexpectedly or the message misreported its own length");return g.g.g=P,g.g.i=f,R}function ur(g,R,G){var f=g.g.j();for(f=g.g.g+f;g.g.g<f;)G.push(R.call(g.g))}Ve.prototype.length=function(){return this.h},Ve.prototype.end=function(){var g=this.g,R=this.h;return this.h=0,ot(g,0,R)},Lt.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ri=[];function sr(){this.h=[],this.i=0,this.g=new Ve}function di(g,R){0!==R.length&&(g.h.push(R),g.i+=R.length)}function pr(g,R,G){Ze(g.g,8*R+2),Ze(g.g,G.length),di(g,g.g.end()),di(g,G)}var Mi,ar="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function Ai(g,R){Object.isFrozen(g)||(ar?g[ar]|=R:void 0!==g.g?g.g|=R:Object.defineProperties(g,{g:{value:R,configurable:!0,writable:!0,enumerable:!1}}))}function gr(g){return g?null==(R=ar?g[ar]:g.g)?0:R:0;var R}function Sr(g){return Array.isArray(g)&&Ai(g,1),g}function ho(g){if(!Array.isArray(g))throw Error("cannot mark non-array as immutable");Ai(g,2)}function Qr(g){return null!==g&&"object"==typeof g&&g.constructor===Object}function qn(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":return be&&null!=g&&g instanceof Uint8Array?oo(g):g;default:return g}}function Un(g,R){if(null!=g)return Array.isArray(g)||Qr(g)?Dr(g,R):R(g)}function Dr(g,R){if(Array.isArray(g)){for(var G=Array(g.length),f=0;f<g.length;f++)G[f]=Un(g[f],R);return 1&gr(g)&&Sr(G),G}for(f in G={},g)G[f]=Un(g[f],R);return G}function wr(g,R,G){var f=Mi;if(Mi=null,g||(g=f),f=this.constructor.ba,g||(g=f?[f]:[]),this.j=(f?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=g,g=(f=this.h.length)-1,f&&Qr(f=this.h[g])?(this.l=g-this.j,this.i=f):void 0!==R&&-1<R?(this.l=Math.max(R,g+1-this.j),this.i=null):this.l=Number.MAX_VALUE,G)for(R=0;R<G.length;R++)(g=G[R])<this.l?(f=this.h[g+=this.j])?Sr(f):this.h[g]=kr:(Vi(this),(f=this.i[g])?Sr(f):this.i[g]=kr)}var Ki,kr=Object.freeze(Sr([]));function Vi(g){var R=g.l+g.j;g.h[R]||(g.i=g.h[R]={})}function xr(g,R,G){return-1===R?null:void 0!==G&&G||R>=g.l?g.i?g.i[R]:void 0:g.h[R+g.j]}function zn(g,R,G){G=void 0===G||G;var f=void 0!==f&&f,A=xr(g,R,f);return null==A&&(A=kr),A===kr?U(g,R,A=Sr([]),f):G&&Array.isArray(A)&&2&gr(A)&&U(g,R,A=A.slice(),f),A}function zi(g){var R=zn(g,3,!1);if(g.m||(g.m={}),!g.m[3]){for(var G=0;G<R.length;G++)R[G]=+R[G];g.m[3]=!0}return R}function Ji(g,R,G){return null==(g=xr(g,R))?G:g}function j(g,R,G){return null==(g=null==(g=xr(g,R))?g:+g)?void 0===G?0:G:g}function U(g,R,G,f){void 0!==f&&f||R>=g.l?(Vi(g),g.i[R]=G):g.h[R+g.j]=G}function m(g,R,G){if(-1===G)return null;g.g||(g.g={});var f=g.g[G];if(f)return f;var A=xr(g,G,!1);return null==A?f:(R=new R(A),g.g[G]=R)}function M(g,R,G){g.g||(g.g={});var f=g.g[G];if(!f){var A=zn(g,G,!1);f=[];for(var P=!!Array.isArray(A)&&!!(2&gr(A)),X=0;X<A.length;X++)f[X]=new R(A[X]),P&&ho(f[X].h);P&&(ho(f),Object.freeze(f)),g.g[G]=f}return f}function q(g,R,G,f,A){var P=M(g,f,R);G=G||new f,g=zn(g,R),null!=A?(P.splice(A,0,G),g.splice(A,0,Ie(G))):(P.push(G),g.push(Ie(G)))}function Ie(g){if(g.g)for(var R in g.g){var G=g.g[R];if(Array.isArray(G))for(var f=0;f<G.length;f++)G[f]&&Ie(G[f]);else G&&Ie(G)}return g.h}function qe(g,R){if(g=g.o){di(R,R.g.end());for(var G=0;G<g.length;G++)di(R,g[G])}}function Xt(g){var R=g[0];switch(g.length){case 2:var G=g[1];return function(Te,Me,Je){return R(Te,Me,Je,G)};case 3:var f=g[1],A=g[2];return function(Te,Me,Je){return R(Te,Me,Je,f,A)};case 4:var P=g[1],X=g[2],se=g[3];return function(Te,Me,Je){return R(Te,Me,Je,P,X,se)};default:throw Error("unsupported number of parameters, expected [2-4], got "+g.length)}}function rn(g,R,G){for(;Dt(R)&&4!=R.h;){var f=R.i,A=G[f];if(A){if(Array.isArray(A)&&(A=G[f]=Xt(A)),!A(R,g,f)){A=g;var P=(f=R).l;Qt(f),hr(f,A,P)}}else A=g,P=(f=R).l,Qt(f),hr(f,A,P)}return g}function Ln(g,R){var G=new sr;if(R(g,G),0===(g=G.i+G.g.length()))G=new Uint8Array(0);else{g=new Uint8Array(g);for(var f=G.h,A=f.length,P=R=0;P<A;P++){var X=f[P];0!==X.length&&(g.set(X,R),R+=X.length)}0!==(A=(f=G.g).h)&&(g.set(f.g.subarray(0,A),R),f.h=0),G.h=[g],G=g}return G}function Or(g,R,G){if(ri.length){var f=ri.pop();g&&(Gt(f.g,g),f.i=-1,f.h=-1),g=f}else g=new Lt(g);try{return G(new R,g)}finally{(R=g.g).h=null,R.m=0,R.i=0,R.g=0,R.l=!1,R.u=!1,g.i=-1,g.h=-1,g.j=!1,100>ri.length&&ri.push(g)}}function Vn(g,R,G){if(null!=(R=xr(R,G))){Ze(g.g,8*G+5),g=g.g;var f=R;0===(f=(G=0>f?1:0)?-f:f)?It=0<1/f?0:2147483648:isNaN(f)?It=2147483647:34028234663852886e22<f?It=(G<<31|2139095040)>>>0:11754943508222875e-54>f?(f=Math.round(f/Math.pow(2,-149)),It=(G<<31|f)>>>0):(R=Math.floor(Math.log(f)/Math.LN2),f*=Math.pow(2,-R),16777216<=(f=Math.round(8388608*f))&&++R,It=(G<<31|R+127<<23|8388607&f)>>>0),ze(g,(G=It)>>>0&255),ze(g,G>>>8&255),ze(g,G>>>16&255),ze(g,G>>>24&255)}}function mn(g,R,G){return 5===g.h&&(U(R,G,g.g.o()),!0)}function ir(g,R,G){return(5===g.h||2===g.h)&&(R=zn(R,G),2==g.h?ur(g,mt.prototype.o,R):R.push(g.g.o()),!0)}function Nr(g,R,G){return 0===g.h&&(U(R,G,hn(g.g)),!0)}function oi(g,R,G){return 0===g.h&&(U(R,G,g.g.j()),!0)}function to(g,R,G){if(2!==g.h)return!1;var P,f=g.g.j(),A=(g=g.g).g;if(g.g+=f,Pt(g),g=g.h,Ui)(P=yo)||(P=yo=new TextDecoder("utf-8",{fatal:!1})),P=P.decode(g.subarray(A,A+f));else{f=A+f;for(var Te,Me,Je,X=[],se=null;A<f;)128>(Te=g[A++])?X.push(Te):224>Te?A>=f?X.push(65533):(Me=g[A++],194>Te||128!=(192&Me)?(A--,X.push(65533)):X.push((31&Te)<<6|63&Me)):240>Te?A>=f-1?X.push(65533):128!=(192&(Me=g[A++]))||224===Te&&160>Me||237===Te&&160<=Me||128!=(192&(P=g[A++]))?(A--,X.push(65533)):X.push((15&Te)<<12|(63&Me)<<6|63&P):244>=Te?A>=f-2?X.push(65533):128!=(192&(Me=g[A++]))||Me-144+(Te<<28)>>30!=0||128!=(192&(P=g[A++]))||128!=(192&(Je=g[A++]))?(A--,X.push(65533)):(Te=(7&Te)<<18|(63&Me)<<12|(63&P)<<6|63&Je,X.push(55296+((Te-=65536)>>10&1023),56320+(1023&Te))):X.push(65533),8192<=X.length&&(se=qi(se,X),X.length=0);P=qi(se,X)}return U(R,G,P),!0}function Vr(g,R,G,f,A){if(2!==g.h)return!1;g=Hr(g,new f,A);var P=void 0!==P&&P;return R.g||(R.g={}),f=g&&Ie(g),R.g[G]=g,U(R,G,f,P),!0}function no(g,R,G,f,A){return 2===g.h&&(q(R,G,g=Hr(g,new f,A),f,void 0),!0)}function po(g,R,G){return(0===g.h||2===g.h)&&(R=zn(R,G),2==g.h?ur(g,mt.prototype.j,R):R.push(g.g.j()),!0)}function Do(g,R,G){return 0===g.h&&(U(R,G,hn(g.g)),!0)}function ji(g){wr.call(this,g,-1,os)}function is(g,R){return rn(g,R,Ki||(Ki={1:oi,2:oi,3:ir,4:Do}))}wr.prototype.toJSON=function(){return Dr(Ie(this),qn)},wr.prototype.toString=function(){return Ie(this).toString()},$n(ji,wr),ji.prototype.getRows=function(){return xr(this,1)},ji.prototype.getCols=function(){return xr(this,2)},ji.prototype.getPackedDataList=function(){return zi(this)},ji.prototype.getLayout=function(){return Ji(this,4,0)};var Wo,Be,os=[3];function ko(g){wr.call(this,g)}function B(g,R){var G=xr(g,1);if(null!=G&&null!=G){Ze(R.g,8);var f=R.g;if(0<=G)Ze(f,G);else{for(var A=0;9>A;A++)ze(f,127&G|128),G>>=7;ze(f,1)}}Vn(R,g,2),null!=(f=xr(g,3))&&pr(R,3,io(f)),null!=(f=xr(g,4))&&pr(R,4,io(f)),qe(g,R)}function ee(g,R){return rn(g,R,Wo||(Wo={1:oi,2:mn,3:to,4:to}))}function te(g){wr.call(this,g,-1,zt)}function vt(g,R){return rn(g,R,Be||(Be={1:[no,ko,ee]}))}$n(ko,wr),$n(te,wr),te.prototype.addClassification=function(g,R){return q(this,1,g,ko,R),this};var Ft,er,zt=[1];function gt(g){wr.call(this,g)}function dn(g,R){Vn(R,g,1),Vn(R,g,2),Vn(R,g,3),Vn(R,g,4),Vn(R,g,5),qe(g,R)}function Dn(g,R){return rn(g,R,Ft||(Ft={1:mn,2:mn,3:mn,4:mn,5:mn}))}function cr(g){wr.call(this,g,-1,nr)}function Rr(g,R){return rn(g,R,er||(er={1:[no,gt,Dn]}))}$n(gt,wr),$n(cr,wr);var or,si,nr=[1];function Bn(g){wr.call(this,g)}function Ar(g,R){Vn(R,g,1),Vn(R,g,2),Vn(R,g,3),Vn(R,g,4),Vn(R,g,5);var G=xr(g,6);if(null!=G&&null!=G){Ze(R.g,48);var f=R.g,A=G;G=0>A;var P=(A=Math.abs(A))>>>0;for(A=Math.floor((A-P)/4294967296),A>>>=0,G&&(A=~A>>>0,4294967295<(P=1+(~P>>>0))&&(P=0,4294967295<++A&&(A=0))),G=It=P,P=A;0<P||127<G;)ze(f,127&G|128),G=(G>>>7|P<<25)>>>0,P>>>=7;ze(f,G)}qe(g,R)}function jr(g,R){return rn(g,R,or||(or={1:mn,2:mn,3:mn,4:mn,5:mn,6:Nr}))}function _r(g){wr.call(this,g,-1,V)}function wi(g,R){return rn(g,R,si||(si={1:Do,2:Do,3:ir,4:po}))}$n(Bn,wr),$n(_r,wr),_r.prototype.getVertexType=function(){return Ji(this,1,0)},_r.prototype.getPrimitiveType=function(){return Ji(this,2,0)},_r.prototype.getVertexBufferList=function(){return zi(this)},_r.prototype.getIndexBufferList=function(){return zn(this,4)};var K,V=[3,4];function H(g){wr.call(this,g)}function Ne(g,R){return rn(g,R,K||(K={1:[Vr,_r,wi],2:[Vr,ji,is]}))}$n(H,wr),H.prototype.getMesh=function(){return m(this,_r,1)},H.prototype.getPoseTransformMatrix=function(){return m(this,ji,2)};var $e=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],bt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],et=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],xt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],_t=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],x=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],$=[].concat(Bt($e),Bt(bt),Bt(et),Bt(xt),Bt(_t),Bt(x));function re(g,R,G){if(G=g.createShader(0===G?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(G,R),g.compileShader(G),!g.getShaderParameter(G,g.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+g.getShaderInfoLog(G));return G}function Se(g){return M(g,ko,1).map(function(R){return{index:Ji(R,1,0),score:j(R,2),label:null!=xr(R,3)?Ji(R,3,""):void 0,displayName:null!=xr(R,4)?Ji(R,4,""):void 0}})}function je(g){return{x:j(g,1),y:j(g,2),z:j(g,3),visibility:null!=xr(g,4)?j(g,4):void 0}}function tt(g){return M(Or(g,cr,Rr),gt,1).map(je)}function Ke(g,R){this.h=g,this.g=R,this.l=0}function Mt(g,R,G){return function Tt(g,R){var G=g.g;if(void 0===g.m){var f=re(G,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),A=re(G,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),P=G.createProgram();if(G.attachShader(P,f),G.attachShader(P,A),G.linkProgram(P),!G.getProgramParameter(P,G.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+G.getProgramInfoLog(P));f=g.m=P,G.useProgram(f),A=G.getUniformLocation(f,"sampler0"),g.j={I:G.getAttribLocation(f,"aVertex"),H:G.getAttribLocation(f,"aTex"),ca:A},g.s=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,g.s),G.enableVertexAttribArray(g.j.I),G.vertexAttribPointer(g.j.I,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),g.o=G.createBuffer(),G.bindBuffer(G.ARRAY_BUFFER,g.o),G.enableVertexAttribArray(g.j.H),G.vertexAttribPointer(g.j.H,2,G.FLOAT,!1,0,0),G.bufferData(G.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),G.STATIC_DRAW),G.bindBuffer(G.ARRAY_BUFFER,null),G.uniform1i(A,0)}f=g.j,G.useProgram(g.m),G.canvas.width=R.width,G.canvas.height=R.height,G.viewport(0,0,R.width,R.height),G.activeTexture(G.TEXTURE0),g.h.bindTexture2d(R.glName),G.enableVertexAttribArray(f.I),G.bindBuffer(G.ARRAY_BUFFER,g.s),G.vertexAttribPointer(f.I,2,G.FLOAT,!1,0,0),G.enableVertexAttribArray(f.H),G.bindBuffer(G.ARRAY_BUFFER,g.o),G.vertexAttribPointer(f.H,2,G.FLOAT,!1,0,0),G.bindFramebuffer(G.DRAW_FRAMEBUFFER?G.DRAW_FRAMEBUFFER:G.FRAMEBUFFER,null),G.clearColor(0,0,0,0),G.clear(G.COLOR_BUFFER_BIT),G.colorMask(!0,!0,!0,!0),G.drawArrays(G.TRIANGLE_FAN,0,4),G.disableVertexAttribArray(f.I),G.disableVertexAttribArray(f.H),G.bindBuffer(G.ARRAY_BUFFER,null),g.h.bindTexture2d(0)}(g,R),"function"==typeof g.g.canvas.transferToImageBitmap?n.resolve(g.g.canvas.transferToImageBitmap()):G?n.resolve(g.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(g.g.canvas):(void 0===g.i&&(g.i=document.createElement("canvas")),new n(function(f){g.i.height=g.g.canvas.height,g.i.width=g.g.canvas.width,g.i.getContext("2d",{}).drawImage(g.g.canvas,0,0,g.g.canvas.width,g.g.canvas.height),f(g.i)}))}function fn(g){this.g=g}var An=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function lr(g,R){return R+g}function kn(g,R){window[g]=R}function jn(g){if(this.g=g,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=g&&g.locateFile||lr,"object"==typeof window)var R=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");R=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=R,g.options)for(var G=(R=Qe(Object.keys(g.options))).next();!G.done;G=R.next()){var f=g.options[G=G.value].default;void 0!==f&&(this.j[G]="function"==typeof f?f():f)}}function z(g,R){var G,f;return pn(function(A){return R in g.F?A.return(g.F[R]):(G=g.locateFile(R,""),f=fetch(G).then(function(P){return P.arrayBuffer()}),g.F[R]=f,A.return(f))})}function Ge(g,R){for(var G=R.name||"$",f=[].concat(Bt(R.wants)),A=new g.h.StringList,P=Qe(R.wants),X=P.next();!X.done;X=P.next())A.push_back(X.value);P=g.h.PacketListener.implement({onResults:function(se){for(var Te={},Me=0;Me<R.wants.length;++Me)Te[f[Me]]=se.get(Me);var Je=g.listeners[G];Je&&(g.C=function ie(g,R,G){var f,A,P,X,Te,Me,Je,st,St,Ct,an,cn;return pn(function(Tn){switch(Tn.g){case 1:if(!G)return Tn.return(R);for(f={},A=0,P=Qe(Object.keys(G)),X=P.next();!X.done;X=P.next())"string"!=typeof(Te=G[X.value])&&"texture"===Te.type&&void 0!==R[Te.stream]&&++A;1<A&&(g.G=!1),Me=Qe(Object.keys(G)),X=Me.next();case 2:if(X.done){Tn.g=4;break}if("string"==typeof(st=G[Je=X.value]))return an=f,cn=Je,Et(Tn,function fe(g,R,G){var f;return pn(function(A){return"number"==typeof G||G instanceof Uint8Array||G instanceof g.h.Uint8BlobList?A.return(G):G instanceof g.h.Texture2dDataOut?((f=g.s[R])||(f=new Ke(g.h,g.D),g.s[R]=f),A.return(Mt(f,G,g.G))):A.return(void 0)})}(g,Je,R[st]),14);if(St=R[st.stream],"detection_list"===st.type){if(St){for(var Cn=St.getRectList(),vr=St.getLandmarksList(),Zr=St.getClassificationsList(),Fr=[],Ni=0;Ni<Cn.size();++Ni){var Oo=Or(Cn.get(Ni),Bn,jr);Oo={T:{X:j(Oo,1),Y:j(Oo,2),height:j(Oo,3),width:j(Oo,4),rotation:j(Oo,5,0),W:Ji(Oo,6,0)},O:tt(vr.get(Ni)),M:Se(Or(Zr.get(Ni),te,vt))},Fr.push(Oo)}Cn=Fr}else Cn=[];f[Je]=Cn,Tn.g=7;break}if("proto_list"===st.type){if(St){for(Cn=Array(St.size()),vr=0;vr<St.size();vr++)Cn[vr]=St.get(vr);St.delete()}else Cn=[];f[Je]=Cn,Tn.g=7;break}if(void 0===St){Tn.g=3;break}if("float_list"===st.type){f[Je]=St,Tn.g=7;break}if("proto"===st.type){f[Je]=St,Tn.g=7;break}if("texture"!==st.type)throw Error("Unknown output config type: '"+st.type+"'");return(Ct=g.s[Je])||(Ct=new Ke(g.h,g.D),g.s[Je]=Ct),Et(Tn,Mt(Ct,St,g.G),13);case 13:f[Je]=Tn.h;case 7:st.transform&&f[Je]&&(f[Je]=st.transform(f[Je])),Tn.g=3;break;case 14:an[cn]=Tn.h;case 3:X=Me.next(),Tn.g=2;break;case 4:return Tn.return(f)}})}(g,Te,R.outs).then(function(st){st=Je(st);for(var St=0;St<R.wants.length;++St){var Ct=Te[f[St]];"object"==typeof Ct&&Ct.hasOwnProperty&&Ct.hasOwnProperty("delete")&&Ct.delete()}st&&(g.C=st)}))}}),g.i.attachMultiListener(A,P),A.delete()}function S(g){return g.map(F)}function F(g){var R=(g=Or(g,H,Ne)).getMesh();if(!R)return g;var G=new Float32Array(R.getVertexBufferList());R.getVertexBufferList=function(){return G};var f=new Uint32Array(R.getIndexBufferList());return R.getIndexBufferList=function(){return f},g}function Y(g){var R=this;this.g=new jn({locateFile:(g=g||{}).locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:tt},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:tt},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:tt},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:tt},ea:{type:"proto",stream:"world_landmarks",transform:tt},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:S}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(G){var f,A,P;return pn(function(se){if(1==se.g){switch(f="",G){case 1:f="pose_landmark_full.tflite";break;case 2:f="pose_landmark_heavy.tflite";break;default:f="pose_landmark_lite.tflite"}return A="third_party/mediapipe/modules/pose_landmark/"+f,P=R.g.locateFile(f,""),Et(se,fetch(P),3)}return 2!=se.g?Et(se,se.h.arrayBuffer(),2):(R.g.overrideFile(A,se.h),Et(se,R.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}(ue=jn.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){var g=this;return pn(function(R){g.i&&(g.i.reset(),g.m={},g.s={}),R.g=0})},ue.setOptions=function(g,R){var G=this;if(R=R||this.g.options){for(var f=[],A=[],P={},X=Qe(Object.keys(g)),se=X.next();!se.done;P={K:P.K,L:P.L},se=X.next()){var Te=se.value;Te in this.j&&this.j[Te]===g[Te]||(this.j[Te]=g[Te],void 0!==(se=R[Te])&&(se.onChange&&(P.K=se.onChange,P.L=g[Te],f.push(function(Me){return function(){return pn(function(st){if(1==st.g)return Et(st,Me.K(Me.L),2);!0===st.h&&(G.o=!0),st.g=0})}}(P))),se.graphOptionXref&&(Te={valueNumber:1===se.type?g[Te]:0,valueBoolean:0===se.type&&g[Te],valueString:2===se.type?g[Te]:""},se=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),se.graphOptionXref),Te),A.push(se))))}(0!==f.length||0!==A.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(A),this.v=(void 0===this.v?[]:this.v).concat(f))}},ue.initialize=function(){var g=this;return pn(function(R){return 1==R.g?Et(R,function Xn(g){var R,G,f,A,P,X,se,Te,Me,Je,st;return pn(function(St){switch(St.g){case 1:return g.R?(R=void 0===g.g.files?[]:"function"==typeof g.g.files?g.g.files(g.j):g.g.files,Et(St,function wn(){return pn(function(g){switch(g.g){case 1:return g.m=2,Et(g,WebAssembly.instantiate(An),4);case 4:g.g=3,g.m=0;break;case 2:return g.m=0,g.j=null,g.return(!1);case 3:return g.return(!0)}})}(),2)):St.return();case 2:if(G=St.h,"object"==typeof window)return kn("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),kn("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),X=R.filter(function(Ct){return void 0!==Ct.data}),se=R.filter(function(Ct){return void 0===Ct.data}),Te=n.all(X.map(function(Ct){var Kt=z(g,Ct.url);if(void 0!==Ct.path){var an=Ct.path;Kt=Kt.then(function(cn){return g.overrideFile(an,cn),n.resolve(cn)})}return Kt})),Me=n.all(se.map(function(Ct){return void 0===Ct.simd||Ct.simd&&G||!Ct.simd&&!G?function sn(g){var R=document.createElement("script");return R.setAttribute("src",g),R.setAttribute("crossorigin","anonymous"),new n(function(G){R.addEventListener("load",function(){G()},!1),R.addEventListener("error",function(){G()},!1),document.body.appendChild(R)})}(g.locateFile(Ct.url,g.S)):n.resolve()})).then(function(){var Ct,Kt,an;return pn(function(cn){if(1==cn.g)return Ct=window.createMediapipeSolutionsWasm,Kt=window.createMediapipeSolutionsPackedAssets,an=g,Et(cn,Ct(Kt),2);an.h=cn.h,cn.g=0})}),Je=pn(function(Ct){return g.g.graph&&g.g.graph.url?Ct=Et(Ct,z(g,g.g.graph.url),0):(Ct.g=0,Ct=void 0),Ct}),Et(St,n.all([Me,Te,Je]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return f=R.filter(function(Ct){return void 0===Ct.simd||Ct.simd&&G||!Ct.simd&&!G}).map(function(Ct){return g.locateFile(Ct.url,g.S)}),importScripts.apply(null,Bt(f)),A=g,Et(St,createMediapipeSolutionsWasm(Module),6);case 6:A.h=St.h,g.l=new OffscreenCanvas(1,1),g.h.canvas=g.l,P=g.h.GL.createContext(g.l,{antialias:!1,alpha:!1,aa:"undefined"!=typeof WebGL2RenderingContext?2:1}),g.h.GL.makeContextCurrent(P),St.g=4;break;case 7:if(g.l=document.createElement("canvas"),!(st=g.l.getContext("webgl2",{}))&&!(st=g.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),St.return();g.D=st,g.h.canvas=g.l,g.h.createContext(g.l,!0,!0,{});case 4:g.i=new g.h.SolutionWasm,g.R=!1,St.g=0}})}(g),2):3!=R.g?Et(R,function Jn(g){var G,f,A,P,X,Te;return pn(function(Me){if(1==Me.g)return g.g.graph&&g.g.graph.url&&g.P===g.g.graph.url?Me.return():(g.o=!0,g.g.graph&&g.g.graph.url?(g.P=g.g.graph.url,Et(Me,z(g,g.g.graph.url),3)):void(Me.g=2));for(2!=Me.g&&g.i.loadGraph(Me.h),G=Qe(Object.keys(g.B)),f=G.next();!f.done;f=G.next())g.i.overrideFile(A=f.value,g.B[A]);if(g.B={},g.g.listeners)for(P=Qe(g.g.listeners),X=P.next();!X.done;X=P.next())Ge(g,X.value);Te=g.j,g.j={},g.setOptions(Te),Me.g=0})}(g),3):Et(R,function I(g){var R,G,A,P,X;return pn(function(Te){switch(Te.g){case 1:if(!g.o)return Te.return();if(!g.v){Te.g=2;break}R=Qe(g.v),G=R.next();case 3:if(G.done){Te.g=5;break}return Et(Te,(0,G.value)(),4);case 4:G=R.next(),Te.g=3;break;case 5:g.v=void 0;case 2:if(g.A){for(A=new g.h.GraphOptionChangeRequestList,P=Qe(g.A),X=P.next();!X.done;X=P.next())A.push_back(X.value);g.i.changeOptions(A),A.delete(),g.A=void 0}g.o=!1,Te.g=0}})}(g),0)})},ue.overrideFile=function(g,R){this.i?this.i.overrideFile(g,R):this.B[g]=R},ue.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(g,R){var f,A,P,X,se,Te,Me,Je,st,G=this;return pn(function(St){switch(St.g){case 1:return G.g.inputs?(f=1e3*(null==R?performance.now():R),Et(St,G.C,2)):St.return();case 2:return Et(St,G.initialize(),3);case 3:for(A=new G.h.PacketDataList,P=Qe(Object.keys(g)),X=P.next();!X.done;X=P.next())if(Te=G.g.inputs[se=X.value]){e:{var Ct=g[se];switch(Te.type){case"video":var Kt=G.m[Te.stream];if(Kt||(Kt=new Ke(G.h,G.D),G.m[Te.stream]=Kt),0===Kt.l&&(Kt.l=Kt.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&Ct instanceof HTMLVideoElement)var an=Ct.videoWidth,cn=Ct.videoHeight;else"undefined"!=typeof HTMLImageElement&&Ct instanceof HTMLImageElement?(an=Ct.naturalWidth,cn=Ct.naturalHeight):(an=Ct.width,cn=Ct.height);cn={glName:Kt.l,width:an,height:cn},(an=Kt.g).canvas.width=cn.width,an.canvas.height=cn.height,an.activeTexture(an.TEXTURE0),Kt.h.bindTexture2d(Kt.l),an.texImage2D(an.TEXTURE_2D,0,an.RGBA,an.RGBA,an.UNSIGNED_BYTE,Ct),Kt.h.bindTexture2d(0),Kt=cn;break e;case"detections":for((Kt=G.m[Te.stream])||(Kt=new fn(G.h),G.m[Te.stream]=Kt),Kt.data||(Kt.data=new Kt.g.DetectionListData),Kt.data.reset(Ct.length),cn=0;cn<Ct.length;++cn){var Tn=Kt.data,Cn=Tn.setBoundingBox,vr=cn,Zr=(an=Ct[cn]).T,Fr=new Bn;if(U(Fr,1,Zr.X),U(Fr,2,Zr.Y),U(Fr,3,Zr.height),U(Fr,4,Zr.width),U(Fr,5,Zr.rotation),U(Fr,6,Zr.W),Zr=Ln(Fr,Ar),Cn.call(Tn,vr,Zr),an.O)for(Tn=0;Tn<an.O.length;++Tn){var Ni=!!(Fr=an.O[Tn]).visibility;vr=(Cn=Kt.data).addNormalizedLandmark,Zr=cn,Fr=Object.assign(Object.assign({},Fr),{visibility:Ni?Fr.visibility:0}),U(Ni=new gt,1,Fr.x),U(Ni,2,Fr.y),U(Ni,3,Fr.z),Fr.visibility&&U(Ni,4,Fr.visibility),Fr=Ln(Ni,dn),vr.call(Cn,Zr,Fr)}if(an.M)for(Tn=0;Tn<an.M.length;++Tn)vr=(Cn=Kt.data).addClassification,Zr=cn,Fr=an.M[Tn],U(Ni=new ko,2,Fr.score),Fr.index&&U(Ni,1,Fr.index),Fr.label&&U(Ni,3,Fr.label),Fr.displayName&&U(Ni,4,Fr.displayName),Fr=Ln(Ni,B),vr.call(Cn,Zr,Fr)}Kt=Kt.data;break e;default:Kt={}}}switch(Me=Kt,Je=Te.stream,Te.type){case"video":A.pushTexture2d(Object.assign(Object.assign({},Me),{stream:Je,timestamp:f}));break;case"detections":(st=Me).stream=Je,st.timestamp=f,A.pushDetectionList(st);break;default:throw Error("Unknown input config type: '"+Te.type+"'")}}return G.i.send(A),Et(St,G.C,4);case 4:A.delete(),St.g=0}})},ue.onResults=function(g,R){this.listeners[R||"$"]=g},Yn("Solution",jn),Yn("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(ue=Y.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(g){this.g.onResults(g)},ue.initialize=function(){var g=this;return pn(function(R){return Et(R,g.g.initialize(),0)})},ue.reset=function(){this.g.reset()},ue.send=function(g){var R=this;return pn(function(G){return Et(G,R.g.send(g),0)})},ue.setOptions=function(g){this.g.setOptions(g)},Yn("Holistic",Y),Yn("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Yn("FACEMESH_LIPS",$e),Yn("FACEMESH_LEFT_EYE",bt),Yn("FACEMESH_LEFT_EYEBROW",et),Yn("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Yn("FACEMESH_RIGHT_EYE",xt),Yn("FACEMESH_RIGHT_EYEBROW",_t),Yn("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Yn("FACEMESH_FACE_OVAL",x),Yn("FACEMESH_CONTOURS",$),Yn("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Yn("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Yn("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Yn("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Yn("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Yn("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Yn("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Yn("matrixDataToMatrix",function(g){for(var R=g.getCols(),G=g.getRows(),f=g.getPackedDataList(),A=[],P=0;P<G;P++)A.push(Array(R));for(P=0;P<G;P++)for(var X=0;X<R;X++){var se=1===g.getLayout()?P*R+X:X*G+P;A[P][X]=f[se]}return A}),Yn("VERSION","0.5.1635989137")}).call(as);const To={};(function(){var ue;function J(S){var F=0;return function(){return F<S.length?{done:!1,value:S[F++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(S,F,Y){return S==Array.prototype||S==Object.prototype||(S[F]=Y.value),S},Re=function we(S){S=["object"==typeof globalThis&&globalThis,S,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var F=0;F<S.length;++F){var Y=S[F];if(Y&&Y.Math==Math)return Y}throw Error("Cannot find global object")}(this);function rt(S,F){if(F)e:{var Y=Re;S=S.split(".");for(var g=0;g<S.length-1;g++){var R=S[g];if(!(R in Y))break e;Y=Y[R]}(F=F(g=Y[S=S[S.length-1]]))!=g&&null!=F&&le(Y,S,{configurable:!0,writable:!0,value:F})}}function yt(S){return(S={next:S})[Symbol.iterator]=function(){return this},S}function Qe(S){var F="undefined"!=typeof Symbol&&Symbol.iterator&&S[Symbol.iterator];return F?F.call(S):{next:J(S)}}function Bt(S){if(!(S instanceof Array)){S=Qe(S);for(var F,Y=[];!(F=S.next()).done;)Y.push(F.value);S=Y}return S}rt("Symbol",function(S){function Y(G,f){this.g=G,le(this,"description",{configurable:!0,writable:!0,value:f})}if(S)return S;Y.prototype.toString=function(){return this.g};var g="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",R=0;return function F(G){if(this instanceof F)throw new TypeError("Symbol is not a constructor");return new Y(g+(G||"")+"_"+R++,G)}}),rt("Symbol.iterator",function(S){if(S)return S;S=Symbol("Symbol.iterator");for(var F="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Y=0;Y<F.length;Y++){var g=Re[F[Y]];"function"==typeof g&&"function"!=typeof g.prototype[S]&&le(g.prototype,S,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return S});var Ut,br="function"==typeof Object.create?Object.create:function(S){function F(){}return F.prototype=S,new F};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(S){}fr=!1}Ut=fr?function(S,F){if(S.__proto__=F,S.__proto__!==F)throw new TypeError(S+" is not extensible");return S}:null}var Ur=Ut;function $n(S,F){if(S.prototype=br(F.prototype),S.prototype.constructor=S,Ur)Ur(S,F);else for(var Y in F)if("prototype"!=Y)if(Object.defineProperties){var g=Object.getOwnPropertyDescriptor(F,Y);g&&Object.defineProperty(S,Y,g)}else S[Y]=F[Y];S.na=F.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Kr(S){if(S.l)throw new TypeError("Generator is already running");S.l=!0}function ii(S,F){S.j={da:F,ea:!0},S.g=S.o||S.u}function Et(S,F,Y){return S.g=Y,{value:F}}function fo(S){this.g=new Pr,this.h=S}function Ii(S,F,Y,g){try{var R=F.call(S.g.i,Y);if(!(R instanceof Object))throw new TypeError("Iterator result "+R+" is not an object");if(!R.done)return S.g.l=!1,R;var G=R.value}catch(f){return S.g.i=null,ii(S.g,f),_n(S)}return S.g.i=null,g.call(S.g,G),_n(S)}function _n(S){for(;S.g.g;)try{var F=S.h(S.g);if(F)return S.g.l=!1,{value:F.value,done:!1}}catch(Y){S.g.h=void 0,ii(S.g,Y)}if(S.g.l=!1,S.g.j){if(F=S.g.j,S.g.j=null,F.ea)throw F.da;return{value:F.return,done:!0}}return{value:void 0,done:!0}}function Pi(S){this.next=function(F){return Kr(S.g),S.g.i?F=Ii(S,S.g.i.next,F,S.g.s):(S.g.s(F),F=_n(S)),F},this.throw=function(F){return Kr(S.g),S.g.i?F=Ii(S,S.g.i.throw,F,S.g.s):(ii(S.g,F),F=_n(S)),F},this.return=function(F){return function Go(S,F){Kr(S.g);var Y=S.g.i;return Y?Ii(S,"return"in Y?Y.return:function(g){return{value:g,done:!0}},F,S.g.return):(S.g.return(F),_n(S))}(S,F)},this[Symbol.iterator]=function(){return this}}function pn(S){return function Wr(S){function F(g){return S.next(g)}function Y(g){return S.throw(g)}return new n(function(g,R){!function G(f){f.done?g(f.value):n.resolve(f.value).then(F,Y).then(G,R)}(S.next())})}(new Pi(new fo(S)))}Pr.prototype.s=function(S){this.h=S},Pr.prototype.return=function(S){this.j={return:S},this.g=this.u},rt("Promise",function(S){function F(f){this.h=0,this.i=void 0,this.g=[],this.s=!1;var A=this.j();try{f(A.resolve,A.reject)}catch(P){A.reject(P)}}function Y(){this.g=null}function g(f){return f instanceof F?f:new F(function(A){A(f)})}if(S)return S;Y.prototype.h=function(f){if(null==this.g){this.g=[];var A=this;this.i(function(){A.l()})}this.g.push(f)};var R=Re.setTimeout;Y.prototype.i=function(f){R(f,0)},Y.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var A=0;A<f.length;++A){var P=f[A];f[A]=null;try{P()}catch(X){this.j(X)}}}this.g=null},Y.prototype.j=function(f){this.i(function(){throw f})},F.prototype.j=function(){function f(X){return function(se){P||(P=!0,X.call(A,se))}}var A=this,P=!1;return{resolve:f(this.D),reject:f(this.l)}},F.prototype.D=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof F)this.H(f);else{e:switch(typeof f){case"object":var A=null!=f;break e;case"function":A=!0;break e;default:A=!1}A?this.A(f):this.o(f)}},F.prototype.A=function(f){var A=void 0;try{A=f.then}catch(P){return void this.l(P)}"function"==typeof A?this.I(A,f):this.o(f)},F.prototype.l=function(f){this.u(2,f)},F.prototype.o=function(f){this.u(1,f)},F.prototype.u=function(f,A){if(0!=this.h)throw Error("Cannot settle("+f+", "+A+"): Promise already settled in state"+this.h);this.h=f,this.i=A,2===this.h&&this.G(),this.B()},F.prototype.G=function(){var f=this;R(function(){if(f.C()){var A=Re.console;void 0!==A&&A.error(f.i)}},1)},F.prototype.C=function(){if(this.s)return!1;var f=Re.CustomEvent,A=Re.Event,P=Re.dispatchEvent;return void 0===P||("function"==typeof f?f=new f("unhandledrejection",{cancelable:!0}):"function"==typeof A?f=new A("unhandledrejection",{cancelable:!0}):(f=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,f),f.promise=this,f.reason=this.i,P(f))},F.prototype.B=function(){if(null!=this.g){for(var f=0;f<this.g.length;++f)G.h(this.g[f]);this.g=null}};var G=new Y;return F.prototype.H=function(f){var A=this.j();f.M(A.resolve,A.reject)},F.prototype.I=function(f,A){var P=this.j();try{f.call(A,P.resolve,P.reject)}catch(X){P.reject(X)}},F.prototype.then=function(f,A){function P(Me,Je){return"function"==typeof Me?function(st){try{X(Me(st))}catch(St){se(St)}}:Je}var X,se,Te=new F(function(Me,Je){X=Me,se=Je});return this.M(P(f,X),P(A,se)),Te},F.prototype.catch=function(f){return this.then(void 0,f)},F.prototype.M=function(f,A){function P(){switch(X.h){case 1:f(X.i);break;case 2:A(X.i);break;default:throw Error("Unexpected state: "+X.h)}}var X=this;null==this.g?G.h(P):this.g.push(P),this.s=!0},F.resolve=g,F.reject=function(f){return new F(function(A,P){P(f)})},F.race=function(f){return new F(function(A,P){for(var X=Qe(f),se=X.next();!se.done;se=X.next())g(se.value).M(A,P)})},F.all=function(f){var A=Qe(f),P=A.next();return P.done?g([]):new F(function(X,se){function Te(st){return function(St){Me[st]=St,0==--Je&&X(Me)}}var Me=[],Je=0;do{Me.push(void 0),Je++,g(P.value).M(Te(Me.length-1),se),P=A.next()}while(!P.done)})},F});var vo="function"==typeof Object.assign?Object.assign:function(S,F){for(var Y=1;Y<arguments.length;Y++){var g=arguments[Y];if(g)for(var R in g)Object.prototype.hasOwnProperty.call(g,R)&&(S[R]=g[R])}return S};rt("Object.assign",function(S){return S||vo}),rt("Object.is",function(S){return S||function(F,Y){return F===Y?0!==F||1/F==1/Y:F!=F&&Y!=Y}}),rt("Array.prototype.includes",function(S){return S||function(F,Y){var g=this;g instanceof String&&(g=String(g));var R=g.length;for(0>(Y=Y||0)&&(Y=Math.max(Y+R,0));Y<R;Y++){var G=g[Y];if(G===F||Object.is(G,F))return!0}return!1}}),rt("String.prototype.includes",function(S){return S||function(F,Y){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(F instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(F,Y||0)}}),rt("Array.prototype.keys",function(S){return S||function(){return function wo(S,F){S instanceof String&&(S+="");var Y=0,g=!1,R={next:function(){if(!g&&Y<S.length){var G=Y++;return{value:F(G,S[G]),done:!1}}return g=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}(this,function(F){return F})}});var ui=this||self;function Yn(S,F){S=S.split(".");var g,Y=ui;S[0]in Y||void 0===Y.execScript||Y.execScript("var "+S[0]);for(;S.length&&(g=S.shift());)S.length||void 0===F?Y=Y[g]&&Y[g]!==Object.prototype[g]?Y[g]:Y[g]={}:Y[g]=F}function hi(){throw Error("Invalid UTF8")}function Ci(S,F){return F=String.fromCharCode.apply(null,F),null==S?F:S+F}var _i,qi,ro="undefined"!=typeof TextDecoder,yo="undefined"!=typeof TextEncoder,Ui={},Yi=null;function Ro(S){var F;void 0===F&&(F=0),Hi(),F=Ui[F];for(var Y=Array(Math.floor(S.length/3)),g=F[64]||"",R=0,G=0;R<S.length-2;R+=3){var f=S[R],A=S[R+1],P=S[R+2],X=F[f>>2];Y[G++]=X+(f=F[(3&f)<<4|A>>4])+(A=F[(15&A)<<2|P>>6])+(P=F[63&P])}switch(X=0,P=g,S.length-R){case 2:P=F[(15&(X=S[R+1]))<<2]||g;case 1:Y[G]=F[(S=S[R])>>2]+F[(3&S)<<4|X>>4]+P+g}return Y.join("")}function io(S){var F=S.length,Y=3*F/4;Y%3?Y=Math.floor(Y):-1!="=.".indexOf(S[F-1])&&(Y=-1!="=.".indexOf(S[F-2])?Y-2:Y-1);var g=new Uint8Array(Y),R=0;return function Xi(S,F){function Y(P){for(;g<S.length;){var X=S.charAt(g++),se=Yi[X];if(null!=se)return se;if(!/^[\s\xa0]*$/.test(X))throw Error("Unknown base64 encoding at char: "+X)}return P}Hi();for(var g=0;;){var R=Y(-1),G=Y(0),f=Y(64),A=Y(64);if(64===A&&-1===R)break;F(R<<2|G>>4),64!=f&&(F(G<<4&240|f>>2),64!=A&&F(f<<6&192|A))}}(S,function(G){g[R++]=G}),R!==Y?g.subarray(0,R):g}function Hi(){if(!Yi){Yi={};for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),F=["+/=","+/","-_=","-_.","-_"],Y=0;5>Y;Y++){var g=S.concat(F[Y].split(""));Ui[Y]=g;for(var R=0;R<g.length;R++){var G=g[R];void 0===Yi[G]&&(Yi[G]=R)}}}}var ni,oo="function"==typeof Uint8Array;function eo(S){return oo&&null!=S&&S instanceof Uint8Array}function Ce(S){if(this.L=S,null!==S&&0===S.length)throw Error("ByteString should be constructed with non-empty values")}var be="function"==typeof Uint8Array.prototype.slice,xe=0;function ot(S,F){return Error("Invalid wire type: "+S+" (at position "+F+")")}function It(){return Error("Failed to read varint, encoding is invalid.")}function dt(S,F){F=void 0!==(F=void 0===F?{}:F).v&&F.v,this.h=null,this.g=this.i=this.j=0,this.v=F,S&&tn(this,S)}function tn(S,F){S.h=function _e(S,F){if(S.constructor===Uint8Array)return S;if(S.constructor===ArrayBuffer)return new Uint8Array(S);if(S.constructor===Array)return new Uint8Array(S);if(S.constructor===String)return io(S);if(S.constructor===Ce)return!F&&(F=S.L)&&F.constructor===Uint8Array?F:(F=null==(F=S.L)||eo(F)?F:"string"==typeof F?io(F):null,(S=S.L=F)?new Uint8Array(S):ni||(ni=new Uint8Array(0)));if(S instanceof Uint8Array)return new Uint8Array(S.buffer,S.byteOffset,S.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(F,S.v),S.j=0,S.i=S.h.length,S.g=S.j}function mt(S){if(S.g>S.i)throw Error("Tried to read past the end of the data "+S.g+" > "+S.i)}function Gt(S){var F=S.h,Y=F[S.g],g=127&Y;if(128>Y)return S.g+=1,mt(S),g;if(g|=(127&(Y=F[S.g+1]))<<7,128>Y)return S.g+=2,mt(S),g;if(g|=(127&(Y=F[S.g+2]))<<14,128>Y)return S.g+=3,mt(S),g;if(g|=(127&(Y=F[S.g+3]))<<21,128>Y)return S.g+=4,mt(S),g;if(Y=F[S.g+4],S.g+=5,g|=(15&Y)<<28,128>Y)return mt(S),g;if(128<=F[S.g++]&&128<=F[S.g++]&&128<=F[S.g++]&&128<=F[S.g++]&&128<=F[S.g++])throw It();return mt(S),g}dt.prototype.reset=function(){this.g=this.j};var hn=[];function Pt(){this.g=[]}function Ee(S,F){for(;127<F;)S.g.push(127&F|128),F>>>=7;S.g.push(F)}function Ve(S){var F={},Y=void 0!==F.W&&F.W;this.l={v:void 0!==F.v&&F.v},this.W=Y,F=this.l,hn.length?(Y=hn.pop(),F&&(Y.v=F.v),S&&tn(Y,S),S=Y):S=new dt(S,F),this.g=S,this.j=this.g.g,this.h=this.i=-1}function ze(S){var F=S.g;if(F.g==F.i)return!1;S.j=S.g.g;var Y=Gt(S.g)>>>0;if(F=Y>>>3,!(0<=(Y&=7)&&5>=Y))throw ot(Y,S.j);if(1>F)throw Error("Invalid field number: "+F+" (at position "+S.j+")");return S.i=F,S.h=Y,!0}function Ze(S){switch(S.h){case 0:if(0!=S.h)Ze(S);else e:{for(var F=(S=S.g).g,Y=F+10;F<Y;)if(0==(128&S.h[F++])){S.g=F,mt(S);break e}throw It()}break;case 1:(S=S.g).g+=8,mt(S);break;case 2:2!=S.h?Ze(S):(F=Gt(S.g)>>>0,(S=S.g).g+=F,mt(S));break;case 5:(S=S.g).g+=4,mt(S);break;case 3:for(F=S.i;;){if(!ze(S))throw Error("Unmatched start-group tag: stream EOF");if(4==S.h){if(S.i!=F)throw Error("Unmatched end-group tag");break}Ze(S)}break;default:throw ot(S.h,S.j)}}Pt.prototype.length=function(){return this.g.length},Pt.prototype.end=function(){var S=this.g;return this.g=[],S},Ve.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};var Lt=[];function Dt(){this.i=[],this.h=0,this.g=new Pt}function Qt(S,F){0!==F.length&&(S.i.push(F),S.h+=F.length)}var Hr="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ur(S,F){Object.isFrozen(S)||(Hr?S[Hr]|=F:void 0!==S.N?S.N|=F:Object.defineProperties(S,{N:{value:F,configurable:!0,writable:!0,enumerable:!1}}))}function ri(S){var F;return null==(F=Hr?S[Hr]:S.N)?0:F}function sr(S){return ur(S,1),S}function di(S){return!!Array.isArray(S)&&!!(2&ri(S))}function pr(S){if(!Array.isArray(S))throw Error("cannot mark non-array as immutable");ur(S,2)}function ar(S){return null!==S&&"object"==typeof S&&!Array.isArray(S)&&S.constructor===Object}var Ai=Object.freeze(sr([]));function gr(S){if(di(S.m))throw Error("Cannot mutate an immutable Message")}var M,Sr="undefined"!=typeof Symbol&&void 0!==Symbol.hasInstance;function ho(S){return{value:S,configurable:!1,writable:!1,enumerable:!1}}function Qr(S,F,Y){return-1===F?null:F>=S.i?S.g?S.g[F]:void 0:void 0!==Y&&Y&&S.g&&null!=(Y=S.g[F])?Y:S.m[F+S.h]}function qn(S,F,Y,g){g=void 0!==g&&g,gr(S),F<S.i&&!g?S.m[F+S.h]=Y:(S.g||(S.g=S.m[S.i+S.h]={}))[F]=Y}function Un(S,F,Y,g){Y=void 0===Y||Y;var R=Qr(S,F,g=void 0!==g&&g);return null==R&&(R=Ai),di(S.m)?Y&&(pr(R),Object.freeze(R)):(R===Ai||di(R))&&qn(S,F,R=sr(R.slice()),g),R}function Dr(S,F,Y){return null==(S=null==(S=Qr(S,F))?S:+S)?void 0===Y?0:Y:S}function Mi(S,F,Y,g){S.j||(S.j={});var R=di(S.m),G=S.j[Y];if(!G){g=Un(S,Y,!0,void 0!==g&&g),G=[],R=R||di(g);for(var f=0;f<g.length;f++)G[f]=new F(g[f]),R&&pr(G[f].m);R&&(pr(G),Object.freeze(G)),S.j[Y]=G}return G}function wr(S,F,Y,g,R){var G=void 0!==G&&G;return gr(S),G=Mi(S,Y,F,G),Y=g||new Y,S=Un(S,F),null!=R?(G.splice(R,0,Y),S.splice(R,0,Y.m)):(G.push(Y),S.push(Y.m)),Y}function kr(S,F){return null==(S=Qr(S,F))?0:S}function Vi(S,F){return null==(S=Qr(S,F))?"":S}function zn(S){return Ji(S,void 0===j?U:j)}function zi(S,F){if(null!=S){if(Array.isArray(S))S=Ji(S,F);else if(ar(S)){var g,Y={};for(g in S)Y[g]=zi(S[g],F);S=Y}else S=F(S);return S}}function Ji(S,F){for(var Y=S.slice(),g=0;g<Y.length;g++)Y[g]=zi(Y[g],F);return Array.isArray(S)&&1&ri(S)&&sr(Y),Y}function j(S){return S&&"object"==typeof S&&S.toJSON?S.toJSON():(S=function xr(S){switch(typeof S){case"number":return isFinite(S)?S:String(S);case"object":if(S&&!Array.isArray(S)){if(eo(S))return Ro(S);if(S instanceof Ce){var F=S.L;return F=null==F||"string"==typeof F?F:oo&&F instanceof Uint8Array?Ro(F):null,(S.L=F)||""}}}return S}(S),Array.isArray(S)?zn(S):S)}function U(S){return eo(S)?new Uint8Array(S):S}function m(S,F,Y){S||(S=M),M=null;var g=this.constructor.h;if(S||(S=g?[g]:[]),this.h=(g?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=S,S=(g=this.m.length)-1,g&&ar(g=this.m[S])?(this.i=S-this.h,this.g=g):void 0!==F&&-1<F?(this.i=Math.max(F,S+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE,Y)for(F=0;F<Y.length;F++)if((S=Y[F])<this.i)(g=this.m[S+=this.h])?Array.isArray(g)&&sr(g):this.m[S]=Ai;else{var R=(g=this.g||(this.g=this.m[this.i+this.h]={}))[S];R?Array.isArray(R)&&sr(R):g[S]=Ai}}function q(){m.apply(this,arguments)}if(m.prototype.toJSON=function(){return zn(this.m)},m.prototype.toString=function(){return this.m.toString()},$n(q,m),Sr){var Ie={};Object.defineProperties(q,(Ie[Symbol.hasInstance]=ho(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Ie))}function qe(S,F,Y){if(Y){var R,g={};for(R in Y){var G=Y[R],f=G.ha;f||(g.F=G.la||G.fa.P,G.aa?(g.U=Nr(G.aa),f=function(A){return function(P,X,se){return A.F(P,X,se,A.U)}}(g)):G.ca?(g.T=oi(G.X.g,G.ca),f=function(A){return function(P,X,se){return A.F(P,X,se,A.T)}}(g)):f=g.F,G.ha=f),f(F,S,G.X),g={F:g.F,U:g.U,T:g.T}}}!function hr(S,F){if(F=F.ba){Qt(S,S.g.end());for(var Y=0;Y<F.length;Y++)Qt(S,F[Y])}}(F,S)}var Xt=Symbol();function rn(S,F,Y){return S[Xt]||(S[Xt]=function(g,R){return F(g,R,Y)})}function Ln(S){var F=S[Xt];if(!F){var Y=B(S);S[Xt]=F=function(g,R){return ee(g,R,Y)}}return F}function Vn(S){var F=function Or(S){var F=S.aa;return F?Ln(F):(F=S.ka)?rn(S.X.g,F,S.ca):void 0}(S),Y=S.X,g=S.fa.O;return F?function(R,G){return g(R,G,Y,F)}:function(R,G){return g(R,G,Y)}}function mn(S,F,Y,g,R,G){var f=0;for((S=S()).length&&"number"!=typeof S[0]&&(Y(F,S[0]),f++);f<S.length;){Y=S[f++];for(var A=f+1;A<S.length&&"number"!=typeof S[A];)A++;var P=S[f++];switch(A-=f){case 0:g(F,Y,P);break;case 1:g(F,Y,P,S[f++]);break;case 2:R(F,Y,P,S[f++],S[f++]);break;case 3:A=S[f++];var X=S[f++],se=S[f++];Array.isArray(se)?R(F,Y,P,A,X,se):G(F,Y,P,A,X,se);break;case 4:G(F,Y,P,S[f++],S[f++],S[f++],S[f++]);break;default:throw Error("unexpected number of binary field arguments: "+A)}}return F}var ir=Symbol();function Nr(S){var F=S[ir];if(!F){var Y=ji(S);S[ir]=F=function(g,R){return Be(g,R,Y)}}return F}function oi(S,F){var Y=S[ir];return Y||(S[ir]=Y=function(g,R){return qe(g,R,F)}),Y}var to=Symbol();function Vr(S,F){S.push(F)}function no(S,F,Y){S.push(F,Y.P)}function po(S,F,Y,g,R){var G=Nr(R),f=Y.P;S.push(F,function(A,P,X){return f(A,P,X,g,G)})}function Do(S,F,Y,g,R,G){var f=oi(g,G),A=Y.P;S.push(F,function(P,X,se){return A(P,X,se,g,f)})}function ji(S){return S[to]||mn(S,S[to]=[],Vr,no,po,Do)}var Ki=Symbol();function is(S,F){S[0]=F}function os(S,F,Y,g){var R=Y.O;S[F]=g?function(G,f,A){return R(G,f,A,g)}:R}function ko(S,F,Y,g,R,G){var f=Y.O,A=Ln(R);S[F]=function(P,X,se){return f(P,X,se,g,A,G)}}function Wo(S,F,Y,g,R,G,f){var A=Y.O,P=rn(g,R,G);S[F]=function(X,se,Te){return A(X,se,Te,g,P,f)}}function B(S){return S[Ki]||mn(S,S[Ki]={},is,os,ko,Wo)}function ee(S,F,Y){for(;ze(F)&&4!=F.h;){var g=F.i,R=Y[g];if(!R){var G=Y[0];G&&(G=G[g])&&(R=Y[g]=Vn(G))}if(!(R&&R(F,S,g)||(R=F,g=S,G=R.j,Ze(R),R.W))){var f=R.g.h;R=G===(R=R.g.g)?ni||(ni=new Uint8Array(0)):be?f.slice(G,R):new Uint8Array(f.subarray(G,R)),(G=g.ba)?G.push(R):g.ba=[R]}}return S}function te(S,F,Y){if(Lt.length){var g=Lt.pop();S&&(tn(g.g,S),g.i=-1,g.h=-1),S=g}else S=new Ve(S);try{return ee(new F,S,B(Y))}finally{(F=S.g).h=null,F.j=0,F.i=0,F.g=0,F.v=!1,S.i=-1,S.h=-1,100>Lt.length&&Lt.push(S)}}function Be(S,F,Y){for(var g=Y.length,R=g%2==1,G=R?1:0;G<g;G+=2)(0,Y[G+1])(F,S,Y[G]);qe(S,F,R?Y[0]:void 0)}function vt(S,F){var Y=new Dt;Be(S,Y,ji(F)),Qt(Y,Y.g.end()),S=new Uint8Array(Y.h);for(var g=(F=Y.i).length,R=0,G=0;G<g;G++){var f=F[G];S.set(f,R),R+=f.length}return Y.i=[S],S}function zt(S,F){return{O:S,P:F}}var gt=zt(function(S,F,Y){if(5!==S.h)return!1;var g=(S=S.g).h[S.g],R=S.h[S.g+1],G=S.h[S.g+2],f=S.h[S.g+3];return S.g+=4,mt(S),S=2*((R=(g<<0|R<<8|G<<16|f<<24)>>>0)>>31)+1,g=R>>>23&255,R&=8388607,qn(F,Y,255==g?R?NaN:1/0*S:0==g?S*Math.pow(2,-149)*R:S*Math.pow(2,g-150)*(R+Math.pow(2,23))),!0},function(S,F,Y){if(null!=(F=Qr(F,Y))){Ee(S.g,8*Y+5),S=S.g;var g=F;0===(g=(Y=0>g?1:0)?-g:g)?xe=0<1/g?0:2147483648:isNaN(g)?xe=2147483647:34028234663852886e22<g?xe=(Y<<31|2139095040)>>>0:11754943508222875e-54>g?(g=Math.round(g/Math.pow(2,-149)),xe=(Y<<31|g)>>>0):(F=Math.floor(Math.log(g)/Math.LN2),g*=Math.pow(2,-F),16777216<=(g=Math.round(8388608*g))&&++F,xe=(Y<<31|F+127<<23|8388607&g)>>>0),S.g.push((Y=xe)>>>0&255),S.g.push(Y>>>8&255),S.g.push(Y>>>16&255),S.g.push(Y>>>24&255)}}),Ft=zt(function(S,F,Y){if(0!==S.h)return!1;for(var g=S.g,R=128,G=0,f=S=0;4>f&&128<=R;f++)R=g.h[g.g++],mt(g),G|=(127&R)<<7*f;if(128<=R&&(R=g.h[g.g++],mt(g),G|=(127&R)<<28,S|=(127&R)>>4),128<=R)for(f=0;5>f&&128<=R;f++)R=g.h[g.g++],mt(g),S|=(127&R)<<7*f+3;if(!(128>R))throw It();return g=G>>>0,(S=2147483648&(R=S>>>0))&&(R=~R>>>0,0==(g=1+~g>>>0)&&(R=R+1>>>0)),g=4294967296*R+(g>>>0),qn(F,Y,S?-g:g),!0},function(S,F,Y){if(null!=(F=Qr(F,Y))&&null!=F){Ee(S.g,8*Y),S=S.g;var g=F;for(Y=0>g,F=(g=Math.abs(g))>>>0,g=Math.floor((g-F)/4294967296),g>>>=0,Y&&(g=~g>>>0,4294967295<(F=1+(~F>>>0))&&(F=0,4294967295<++g&&(g=0))),Y=xe=F,F=g;0<F||127<Y;)S.g.push(127&Y|128),Y=(Y>>>7|F<<25)>>>0,F>>>=7;S.g.push(Y)}}),dn=zt(function(S,F,Y){return 0===S.h&&(qn(F,Y,Gt(S.g)),!0)},function(S,F,Y){if(null!=(F=Qr(F,Y))&&null!=F)if(Ee(S.g,8*Y),S=S.g,0<=(Y=F))Ee(S,Y);else{for(F=0;9>F;F++)S.g.push(127&Y|128),Y>>=7;S.g.push(1)}}),Dn=zt(function(S,F,Y){if(2!==S.h)return!1;var G,g=Gt(S.g)>>>0,R=(S=S.g).g;if(S.g+=g,mt(S),S=S.h,ro)(G=_i)||(G=_i=new TextDecoder("utf-8",{fatal:!0})),G=G.decode(S.subarray(R,R+g));else{g=R+g;for(var P,X,se,f=[],A=null;R<g;)128>(P=S[R++])?f.push(P):224>P?R>=g?hi():(X=S[R++],194>P||128!=(192&X)?(R--,hi()):f.push((31&P)<<6|63&X)):240>P?R>=g-1?hi():128!=(192&(X=S[R++]))||224===P&&160>X||237===P&&160<=X||128!=(192&(G=S[R++]))?(R--,hi()):f.push((15&P)<<12|(63&X)<<6|63&G):244>=P?R>=g-2?hi():128!=(192&(X=S[R++]))||X-144+(P<<28)>>30!=0||128!=(192&(G=S[R++]))||128!=(192&(se=S[R++]))?(R--,hi()):(P=(7&P)<<18|(63&X)<<12|(63&G)<<6|63&se,f.push(55296+((P-=65536)>>10&1023),56320+(1023&P))):hi(),8192<=f.length&&(A=Ci(A,f),f.length=0);G=Ci(A,f)}return qn(F,Y,G),!0},function(S,F,Y){if(null!=(F=Qr(F,Y))){var g=!1;if(g=void 0!==g&&g,yo){if(g&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(F))throw Error("Found an unpaired surrogate");F=(qi||(qi=new TextEncoder)).encode(F)}else{for(var R=0,G=new Uint8Array(3*F.length),f=0;f<F.length;f++){var A=F.charCodeAt(f);if(128>A)G[R++]=A;else{if(2048>A)G[R++]=A>>6|192;else{if(55296<=A&&57343>=A){if(56319>=A&&f<F.length){var P=F.charCodeAt(++f);if(56320<=P&&57343>=P){G[R++]=(A=1024*(A-55296)+P-56320+65536)>>18|240,G[R++]=A>>12&63|128,G[R++]=A>>6&63|128,G[R++]=63&A|128;continue}f--}if(g)throw Error("Found an unpaired surrogate");A=65533}G[R++]=A>>12|224,G[R++]=A>>6&63|128}G[R++]=63&A|128}}F=G.subarray(0,R)}Ee(S.g,8*Y+2),Ee(S.g,F.length),Qt(S,S.g.end()),Qt(S,F)}}),cr=zt(function(S,F,Y,g,R){if(2!==S.h)return!1;F=wr(F,Y,g),Y=S.g.i,g=Gt(S.g)>>>0;var G=S.g.g+g,f=G-Y;if(0>=f&&(S.g.i=G,R(F,S),f=G-S.g.g),f)throw Error("Message parsing ended unexpectedly. Expected to read "+g+" bytes, instead read "+(g-f)+" bytes, either the data ended unexpectedly or the message misreported its own length");return S.g.g=G,S.g.i=Y,!0},function(S,F,Y,g,R){if(null!=(F=Mi(F,g,Y)))for(g=0;g<F.length;g++){var G=S;Ee(G.g,8*Y+2);var f=G.g.end();Qt(G,f),f.push(G.h),G=f,R(F[g],S),f=S;var A=G.pop();for(A=f.h+f.g.length()-A;127<A;)G.push(127&A|128),A>>>=7,f.h++;G.push(A),f.h++}});function er(){q.apply(this,arguments)}if($n(er,q),Sr){var Rr={};Object.defineProperties(er,(Rr[Symbol.hasInstance]=ho(Object[Symbol.hasInstance]),Rr))}function nr(S){er.call(this,S)}function Bn(){return[1,dn,2,gt,3,Dn,4,Dn]}function or(S){er.call(this,S,-1,jr)}function Ar(){return[1,cr,nr,Bn]}$n(nr,er),$n(or,er),or.prototype.addClassification=function(S,F){return wr(this,1,nr,S,F),this};var jr=[1];function _r(S){er.call(this,S)}function si(){return[1,gt,2,gt,3,gt,4,gt,5,gt]}function wi(S){er.call(this,S,-1,H)}function V(){return[1,cr,_r,si]}$n(_r,er),$n(wi,er);var H=[1];function K(S){er.call(this,S)}function Ne(){return[1,gt,2,gt,3,gt,4,gt,5,gt,6,Ft]}$n(K,er);var $e=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],bt=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],et=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],xt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],_t=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],x=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],$=[].concat(Bt($e),Bt(bt),Bt(et),Bt(xt),Bt(_t),Bt(x));function re(S,F,Y){if(Y=S.createShader(0===Y?S.VERTEX_SHADER:S.FRAGMENT_SHADER),S.shaderSource(Y,F),S.compileShader(Y),!S.getShaderParameter(Y,S.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+S.getShaderInfoLog(Y));return Y}function Se(S){return Mi(S,nr,1).map(function(F){return{index:kr(F,1),ga:Dr(F,2),label:null!=Qr(F,3)?Vi(F,3):void 0,displayName:null!=Qr(F,4)?Vi(F,4):void 0}})}function je(S){return{x:Dr(S,1),y:Dr(S,2),z:Dr(S,3),visibility:null!=Qr(S,4)?Dr(S,4):void 0}}function tt(S,F){this.h=S,this.g=F,this.l=0}function Ke(S,F,Y){return function Mt(S,F){var Y=S.g;if(void 0===S.o){var g=re(Y,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),R=re(Y,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),G=Y.createProgram();if(Y.attachShader(G,g),Y.attachShader(G,R),Y.linkProgram(G),!Y.getProgramParameter(G,Y.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+Y.getProgramInfoLog(G));g=S.o=G,Y.useProgram(g),R=Y.getUniformLocation(g,"sampler0"),S.j={K:Y.getAttribLocation(g,"aVertex"),J:Y.getAttribLocation(g,"aTex"),ma:R},S.u=Y.createBuffer(),Y.bindBuffer(Y.ARRAY_BUFFER,S.u),Y.enableVertexAttribArray(S.j.K),Y.vertexAttribPointer(S.j.K,2,Y.FLOAT,!1,0,0),Y.bufferData(Y.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Y.STATIC_DRAW),Y.bindBuffer(Y.ARRAY_BUFFER,null),S.s=Y.createBuffer(),Y.bindBuffer(Y.ARRAY_BUFFER,S.s),Y.enableVertexAttribArray(S.j.J),Y.vertexAttribPointer(S.j.J,2,Y.FLOAT,!1,0,0),Y.bufferData(Y.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Y.STATIC_DRAW),Y.bindBuffer(Y.ARRAY_BUFFER,null),Y.uniform1i(R,0)}g=S.j,Y.useProgram(S.o),Y.canvas.width=F.width,Y.canvas.height=F.height,Y.viewport(0,0,F.width,F.height),Y.activeTexture(Y.TEXTURE0),S.h.bindTexture2d(F.glName),Y.enableVertexAttribArray(g.K),Y.bindBuffer(Y.ARRAY_BUFFER,S.u),Y.vertexAttribPointer(g.K,2,Y.FLOAT,!1,0,0),Y.enableVertexAttribArray(g.J),Y.bindBuffer(Y.ARRAY_BUFFER,S.s),Y.vertexAttribPointer(g.J,2,Y.FLOAT,!1,0,0),Y.bindFramebuffer(Y.DRAW_FRAMEBUFFER?Y.DRAW_FRAMEBUFFER:Y.FRAMEBUFFER,null),Y.clearColor(0,0,0,0),Y.clear(Y.COLOR_BUFFER_BIT),Y.colorMask(!0,!0,!0,!0),Y.drawArrays(Y.TRIANGLE_FAN,0,4),Y.disableVertexAttribArray(g.K),Y.disableVertexAttribArray(g.J),Y.bindBuffer(Y.ARRAY_BUFFER,null),S.h.bindTexture2d(0)}(S,F),"function"==typeof S.g.canvas.transferToImageBitmap?n.resolve(S.g.canvas.transferToImageBitmap()):Y?n.resolve(S.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(S.g.canvas):(void 0===S.i&&(S.i=document.createElement("canvas")),new n(function(g){S.i.height=S.g.canvas.height,S.i.width=S.g.canvas.width,S.i.getContext("2d",{}).drawImage(S.g.canvas,0,0,S.g.canvas.width,S.g.canvas.height),g(S.i)}))}function Tt(S){this.g=S}var fn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function An(S,F){return F+S}function lr(S,F){window[S]=F}function wn(S){if(this.g=S,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=n.resolve(),this.Y="",this.C={},this.locateFile=S&&S.locateFile||An,"object"==typeof window)var F=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");F=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.$=F,S.options)for(var Y=(F=Qe(Object.keys(S.options))).next();!Y.done;Y=F.next()){var g=S.options[Y=Y.value].default;void 0!==g&&(this.j[Y]="function"==typeof g?g():g)}}function I(S,F){var Y,g;return pn(function(R){return F in S.H?R.return(S.H[F]):(Y=S.locateFile(F,""),g=fetch(Y).then(function(G){return G.arrayBuffer()}),S.H[F]=g,R.return(g))})}function fe(S,F){for(var Y=F.name||"$",g=[].concat(Bt(F.wants)),R=new S.h.StringList,G=Qe(F.wants),f=G.next();!f.done;f=G.next())R.push_back(f.value);G=S.h.PacketListener.implement({onResults:function(A){for(var P={},X=0;X<F.wants.length;++X)P[g[X]]=A.get(X);var se=S.listeners[Y];se&&(S.D=function z(S,F,Y){var g,R,G,f,P,X,se,Te,Me,Je,St,Ct;return pn(function(Kt){switch(Kt.g){case 1:if(!Y)return Kt.return(F);for(g={},R=0,G=Qe(Object.keys(Y)),f=G.next();!f.done;f=G.next())"string"!=typeof(P=Y[f.value])&&"texture"===P.type&&void 0!==F[P.stream]&&++R;1<R&&(S.I=!1),X=Qe(Object.keys(Y)),f=X.next();case 2:if(f.done){Kt.g=4;break}if("string"==typeof(Te=Y[se=f.value]))return St=g,Ct=se,Et(Kt,function ie(S,F,Y){var g;return pn(function(R){return"number"==typeof Y||Y instanceof Uint8Array||Y instanceof S.h.Uint8BlobList?R.return(Y):Y instanceof S.h.Texture2dDataOut?((g=S.u[F])||(g=new tt(S.h,S.G),S.u[F]=g),R.return(Ke(g,Y,S.I))):R.return(void 0)})}(S,se,F[Te]),14);if(Me=F[Te.stream],"detection_list"===Te.type){if(Me){for(var an=Me.getRectList(),cn=Me.getLandmarksList(),Tn=Me.getClassificationsList(),Cn=[],vr=0;vr<an.size();++vr){var Zr=te(an.get(vr),K,Ne);Zr={boundingBox:{xCenter:Dr(Zr,1),yCenter:Dr(Zr,2),height:Dr(Zr,3),width:Dr(Zr,4),rotation:Dr(Zr,5,0),rectId:kr(Zr,6)},landmarks:Mi(te(cn.get(vr),wi,V),_r,1).map(je),V:Se(te(Tn.get(vr),or,Ar))},Cn.push(Zr)}an=Cn}else an=[];g[se]=an,Kt.g=7;break}if("proto_list"===Te.type){if(Me){for(an=Array(Me.size()),cn=0;cn<Me.size();cn++)an[cn]=Me.get(cn);Me.delete()}else an=[];g[se]=an,Kt.g=7;break}if(void 0===Me){Kt.g=3;break}if("float_list"===Te.type){g[se]=Me,Kt.g=7;break}if("proto"===Te.type){g[se]=Me,Kt.g=7;break}if("texture"!==Te.type)throw Error("Unknown output config type: '"+Te.type+"'");return(Je=S.u[se])||(Je=new tt(S.h,S.G),S.u[se]=Je),Et(Kt,Ke(Je,Me,S.I),13);case 13:g[se]=Kt.h;case 7:Te.transform&&g[se]&&(g[se]=Te.transform(g[se])),Kt.g=3;break;case 14:St[Ct]=Kt.h;case 3:f=X.next(),Kt.g=2;break;case 4:return Kt.return(g)}})}(S,P,F.outs).then(function(Te){Te=se(Te);for(var Me=0;Me<F.wants.length;++Me){var Je=P[g[Me]];"object"==typeof Je&&Je.hasOwnProperty&&Je.hasOwnProperty("delete")&&Je.delete()}Te&&(S.D=Te)}))}}),S.i.attachMultiListener(R,G),R.delete()}function Ge(S){var F=this,Y={url:"face_detection_short.binarypb"},g={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new wn({locateFile:(S=S||{}).locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:Y,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(R){var f,A,P,X;return pn(function(Te){switch(Te.g){case 1:f=Qe("short"===R?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"]),A=f.next();case 2:if(A.done){Te.g=4;break}return X="third_party/mediapipe/modules/face_detection/"+(P=A.value),Et(Te,I(F.g,P),5);case 5:F.g.overrideFile(X,Te.h),A=f.next(),Te.g=2;break;case 4:return Y.url="short"===R?"face_detection_short.binarypb":"face_detection_full.binarypb",g.graphOptionXref.calculatorName="short"===R?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Te.return(!0)}})}},minDetectionConfidence:g}})}(ue=wn.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){var S=this;return pn(function(F){S.i&&(S.i.reset(),S.o={},S.u={}),F.g=0})},ue.setOptions=function(S,F){var Y=this;if(F=F||this.g.options){for(var g=[],R=[],G={},f=Qe(Object.keys(S)),A=f.next();!A.done;G={R:G.R,S:G.S},A=f.next()){var P=A.value;P in this.j&&this.j[P]===S[P]||(this.j[P]=S[P],void 0!==(A=F[P])&&(A.onChange&&(G.R=A.onChange,G.S=S[P],g.push(function(X){return function(){return pn(function(Te){if(1==Te.g)return Et(Te,X.R(X.S),2);!0===Te.h&&(Y.s=!0),Te.g=0})}}(G))),A.graphOptionXref&&(P={valueNumber:1===A.type?S[P]:0,valueBoolean:0===A.type&&S[P],valueString:2===A.type?S[P]:""},A=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),A.graphOptionXref),P),R.push(A))))}(0!==g.length||0!==R.length)&&(this.s=!0,this.B=(void 0===this.B?[]:this.B).concat(R),this.A=(void 0===this.A?[]:this.A).concat(g))}},ue.initialize=function(){var S=this;return pn(function(F){return 1==F.g?Et(F,function jn(S){var F,Y,g,R,G,f,A,P,X,se,Te;return pn(function(Me){switch(Me.g){case 1:return S.Z?(F=void 0===S.g.files?[]:"function"==typeof S.g.files?S.g.files(S.j):S.g.files,Et(Me,function sn(){return pn(function(S){switch(S.g){case 1:return S.o=2,Et(S,WebAssembly.instantiate(fn),4);case 4:S.g=3,S.o=0;break;case 2:return S.o=0,S.j=null,S.return(!1);case 3:return S.return(!0)}})}(),2)):Me.return();case 2:if(Y=Me.h,"object"==typeof window)return lr("createMediapipeSolutionsWasm",{locateFile:S.locateFile}),lr("createMediapipeSolutionsPackedAssets",{locateFile:S.locateFile}),f=F.filter(function(Je){return void 0!==Je.data}),A=F.filter(function(Je){return void 0===Je.data}),P=n.all(f.map(function(Je){var st=I(S,Je.url);if(void 0!==Je.path){var St=Je.path;st=st.then(function(Ct){return S.overrideFile(St,Ct),n.resolve(Ct)})}return st})),X=n.all(A.map(function(Je){return void 0===Je.simd||Je.simd&&Y||!Je.simd&&!Y?function kn(S){var F=document.createElement("script");return F.setAttribute("src",S),F.setAttribute("crossorigin","anonymous"),new n(function(Y){F.addEventListener("load",function(){Y()},!1),F.addEventListener("error",function(){Y()},!1),document.body.appendChild(F)})}(S.locateFile(Je.url,S.$)):n.resolve()})).then(function(){var Je,st,St;return pn(function(Ct){if(1==Ct.g)return Je=window.createMediapipeSolutionsWasm,st=window.createMediapipeSolutionsPackedAssets,St=S,Et(Ct,Je(st),2);St.h=Ct.h,Ct.g=0})}),se=pn(function(Je){return S.g.graph&&S.g.graph.url?Je=Et(Je,I(S,S.g.graph.url),0):(Je.g=0,Je=void 0),Je}),Et(Me,n.all([X,P,se]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return g=F.filter(function(Je){return void 0===Je.simd||Je.simd&&Y||!Je.simd&&!Y}).map(function(Je){return S.locateFile(Je.url,S.$)}),importScripts.apply(null,Bt(g)),R=S,Et(Me,createMediapipeSolutionsWasm(Module),6);case 6:R.h=Me.h,S.l=new OffscreenCanvas(1,1),S.h.canvas=S.l,G=S.h.GL.createContext(S.l,{antialias:!1,alpha:!1,ja:"undefined"!=typeof WebGL2RenderingContext?2:1}),S.h.GL.makeContextCurrent(G),Me.g=4;break;case 7:if(S.l=document.createElement("canvas"),!(Te=S.l.getContext("webgl2",{}))&&!(Te=S.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),Me.return();S.G=Te,S.h.canvas=S.l,S.h.createContext(S.l,!0,!0,{});case 4:S.i=new S.h.SolutionWasm,S.Z=!1,Me.g=0}})}(S),2):3!=F.g?Et(F,function Xn(S){var Y,g,R,G,f,P;return pn(function(X){if(1==X.g)return S.g.graph&&S.g.graph.url&&S.Y===S.g.graph.url?X.return():(S.s=!0,S.g.graph&&S.g.graph.url?(S.Y=S.g.graph.url,Et(X,I(S,S.g.graph.url),3)):void(X.g=2));for(2!=X.g&&S.i.loadGraph(X.h),Y=Qe(Object.keys(S.C)),g=Y.next();!g.done;g=Y.next())S.i.overrideFile(R=g.value,S.C[R]);if(S.C={},S.g.listeners)for(G=Qe(S.g.listeners),f=G.next();!f.done;f=G.next())fe(S,f.value);P=S.j,S.j={},S.setOptions(P),X.g=0})}(S),3):Et(F,function Jn(S){var F,Y,R,G,f;return pn(function(P){switch(P.g){case 1:if(!S.s)return P.return();if(!S.A){P.g=2;break}F=Qe(S.A),Y=F.next();case 3:if(Y.done){P.g=5;break}return Et(P,(0,Y.value)(),4);case 4:Y=F.next(),P.g=3;break;case 5:S.A=void 0;case 2:if(S.B){for(R=new S.h.GraphOptionChangeRequestList,G=Qe(S.B),f=G.next();!f.done;f=G.next())R.push_back(f.value);S.i.changeOptions(R),R.delete(),S.B=void 0}S.s=!1,P.g=0}})}(S),0)})},ue.overrideFile=function(S,F){this.i?this.i.overrideFile(S,F):this.C[S]=F},ue.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(S,F){var g,R,G,f,A,P,X,se,Te,Y=this;return pn(function(Me){switch(Me.g){case 1:return Y.g.inputs?(g=1e3*(null==F?performance.now():F),Et(Me,Y.D,2)):Me.return();case 2:return Et(Me,Y.initialize(),3);case 3:for(R=new Y.h.PacketDataList,G=Qe(Object.keys(S)),f=G.next();!f.done;f=G.next())if(P=Y.g.inputs[A=f.value]){e:{var Je=S[A];switch(P.type){case"video":var st=Y.o[P.stream];if(st||(st=new tt(Y.h,Y.G),Y.o[P.stream]=st),0===st.l&&(st.l=st.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&Je instanceof HTMLVideoElement)var St=Je.videoWidth,Ct=Je.videoHeight;else"undefined"!=typeof HTMLImageElement&&Je instanceof HTMLImageElement?(St=Je.naturalWidth,Ct=Je.naturalHeight):(St=Je.width,Ct=Je.height);Ct={glName:st.l,width:St,height:Ct},(St=st.g).canvas.width=Ct.width,St.canvas.height=Ct.height,St.activeTexture(St.TEXTURE0),st.h.bindTexture2d(st.l),St.texImage2D(St.TEXTURE_2D,0,St.RGBA,St.RGBA,St.UNSIGNED_BYTE,Je),st.h.bindTexture2d(0),st=Ct;break e;case"detections":for((st=Y.o[P.stream])||(st=new Tt(Y.h),Y.o[P.stream]=st),st.data||(st.data=new st.g.DetectionListData),st.data.reset(Je.length),Ct=0;Ct<Je.length;++Ct){var Kt=st.data,an=Kt.setBoundingBox,cn=Ct,Tn=(St=Je[Ct]).boundingBox,Cn=new K;if(qn(Cn,1,Tn.xCenter),qn(Cn,2,Tn.yCenter),qn(Cn,3,Tn.height),qn(Cn,4,Tn.width),qn(Cn,5,Tn.rotation),qn(Cn,6,Tn.rectId),Tn=vt(Cn,Ne),an.call(Kt,cn,Tn),St.landmarks)for(Kt=0;Kt<St.landmarks.length;++Kt){var vr=!!(Cn=St.landmarks[Kt]).visibility;cn=(an=st.data).addNormalizedLandmark,Tn=Ct,Cn=Object.assign(Object.assign({},Cn),{visibility:vr?Cn.visibility:0}),qn(vr=new _r,1,Cn.x),qn(vr,2,Cn.y),qn(vr,3,Cn.z),Cn.visibility&&qn(vr,4,Cn.visibility),Cn=vt(vr,si),cn.call(an,Tn,Cn)}if(St.V)for(Kt=0;Kt<St.V.length;++Kt)cn=(an=st.data).addClassification,Tn=Ct,Cn=St.V[Kt],qn(vr=new nr,2,Cn.ga),Cn.index&&qn(vr,1,Cn.index),Cn.label&&qn(vr,3,Cn.label),Cn.displayName&&qn(vr,4,Cn.displayName),Cn=vt(vr,Bn),cn.call(an,Tn,Cn)}st=st.data;break e;default:st={}}}switch(X=st,se=P.stream,P.type){case"video":R.pushTexture2d(Object.assign(Object.assign({},X),{stream:se,timestamp:g}));break;case"detections":(Te=X).stream=se,Te.timestamp=g,R.pushDetectionList(Te);break;default:throw Error("Unknown input config type: '"+P.type+"'")}}return Y.i.send(R),Et(Me,Y.D,4);case 4:R.delete(),Me.g=0}})},ue.onResults=function(S,F){this.listeners[F||"$"]=S},Yn("Solution",wn),Yn("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(ue=Ge.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(S){this.g.onResults(S)},ue.initialize=function(){var S=this;return pn(function(F){return Et(F,S.g.initialize(),0)})},ue.reset=function(){this.g.reset()},ue.send=function(S){var F=this;return pn(function(Y){return Et(Y,F.g.send(S),0)})},ue.setOptions=function(S){this.g.setOptions(S)},Yn("FaceDetection",Ge),Yn("FACEDETECTION_LIPS",$e),Yn("FACEDETECTION_LEFT_EYE",bt),Yn("FACEDETECTION_LEFT_EYEBROW",et),Yn("FACEDETECTION_RIGHT_EYE",xt),Yn("FACEDETECTION_RIGHT_EYEBROW",_t),Yn("FACEDETECTION_FACE_OVAL",x),Yn("FACEDETECTION_CONTOURS",$),Yn("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Yn("VERSION","0.4.1646425229")}).call(To);const ke={};(function(){var ue;function J(V){var H=0;return function(){return H<V.length?{done:!1,value:V[H++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(V,H,K){return V==Array.prototype||V==Object.prototype||(V[H]=K.value),V},Re=function we(V){V=["object"==typeof globalThis&&globalThis,V,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var H=0;H<V.length;++H){var K=V[H];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}(this);function rt(V,H){if(H)e:{var K=Re;V=V.split(".");for(var Ne=0;Ne<V.length-1;Ne++){var $e=V[Ne];if(!($e in K))break e;K=K[$e]}(H=H(Ne=K[V=V[V.length-1]]))!=Ne&&null!=H&&le(K,V,{configurable:!0,writable:!0,value:H})}}function yt(V){return(V={next:V})[Symbol.iterator]=function(){return this},V}function Qe(V){var H="undefined"!=typeof Symbol&&Symbol.iterator&&V[Symbol.iterator];return H?H.call(V):{next:J(V)}}function Bt(V){if(!(V instanceof Array)){V=Qe(V);for(var H,K=[];!(H=V.next()).done;)K.push(H.value);V=K}return V}rt("Symbol",function(V){function K(bt,et){this.g=bt,le(this,"description",{configurable:!0,writable:!0,value:et})}if(V)return V;K.prototype.toString=function(){return this.g};var Ne="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",$e=0;return function H(bt){if(this instanceof H)throw new TypeError("Symbol is not a constructor");return new K(Ne+(bt||"")+"_"+$e++,bt)}}),rt("Symbol.iterator",function(V){if(V)return V;V=Symbol("Symbol.iterator");for(var H="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),K=0;K<H.length;K++){var Ne=Re[H[K]];"function"==typeof Ne&&"function"!=typeof Ne.prototype[V]&&le(Ne.prototype,V,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return V});var Ut,br="function"==typeof Object.create?Object.create:function(V){function H(){}return H.prototype=V,new H};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(V){}fr=!1}Ut=fr?function(V,H){if(V.__proto__=H,V.__proto__!==H)throw new TypeError(V+" is not extensible");return V}:null}var Ur=Ut;function $n(V,H){if(V.prototype=br(H.prototype),V.prototype.constructor=V,Ur)Ur(V,H);else for(var K in H)if("prototype"!=K)if(Object.defineProperties){var Ne=Object.getOwnPropertyDescriptor(H,K);Ne&&Object.defineProperty(V,K,Ne)}else V[K]=H[K];V.ea=H.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Kr(V){if(V.l)throw new TypeError("Generator is already running");V.l=!0}function ii(V,H){V.j={U:H,V:!0},V.g=V.m||V.s}function Et(V,H,K){return V.g=K,{value:H}}function fo(V){this.g=new Pr,this.h=V}function Ii(V,H,K,Ne){try{var $e=H.call(V.g.i,K);if(!($e instanceof Object))throw new TypeError("Iterator result "+$e+" is not an object");if(!$e.done)return V.g.l=!1,$e;var bt=$e.value}catch(et){return V.g.i=null,ii(V.g,et),_n(V)}return V.g.i=null,Ne.call(V.g,bt),_n(V)}function _n(V){for(;V.g.g;)try{var H=V.h(V.g);if(H)return V.g.l=!1,{value:H.value,done:!1}}catch(K){V.g.h=void 0,ii(V.g,K)}if(V.g.l=!1,V.g.j){if(H=V.g.j,V.g.j=null,H.V)throw H.U;return{value:H.return,done:!0}}return{value:void 0,done:!0}}function Pi(V){this.next=function(H){return Kr(V.g),V.g.i?H=Ii(V,V.g.i.next,H,V.g.o):(V.g.o(H),H=_n(V)),H},this.throw=function(H){return Kr(V.g),V.g.i?H=Ii(V,V.g.i.throw,H,V.g.o):(ii(V.g,H),H=_n(V)),H},this.return=function(H){return function Go(V,H){Kr(V.g);var K=V.g.i;return K?Ii(V,"return"in K?K.return:function(Ne){return{value:Ne,done:!0}},H,V.g.return):(V.g.return(H),_n(V))}(V,H)},this[Symbol.iterator]=function(){return this}}function Wr(V,H){return H=new Pi(new fo(H)),Ur&&V.prototype&&Ur(H,V.prototype),H}Pr.prototype.o=function(V){this.h=V},Pr.prototype.return=function(V){this.j={return:V},this.g=this.s};var wo="function"==typeof Object.assign?Object.assign:function(V,H){for(var K=1;K<arguments.length;K++){var Ne=arguments[K];if(Ne)for(var $e in Ne)Object.prototype.hasOwnProperty.call(Ne,$e)&&(V[$e]=Ne[$e])}return V};rt("Object.assign",function(V){return V||wo}),rt("Promise",function(V){function H(et){this.h=0,this.i=void 0,this.g=[],this.o=!1;var xt=this.j();try{et(xt.resolve,xt.reject)}catch(_t){xt.reject(_t)}}function K(){this.g=null}function Ne(et){return et instanceof H?et:new H(function(xt){xt(et)})}if(V)return V;K.prototype.h=function(et){if(null==this.g){this.g=[];var xt=this;this.i(function(){xt.l()})}this.g.push(et)};var $e=Re.setTimeout;K.prototype.i=function(et){$e(et,0)},K.prototype.l=function(){for(;this.g&&this.g.length;){var et=this.g;this.g=[];for(var xt=0;xt<et.length;++xt){var _t=et[xt];et[xt]=null;try{_t()}catch(x){this.j(x)}}}this.g=null},K.prototype.j=function(et){this.i(function(){throw et})},H.prototype.j=function(){function et(x){return function($){_t||(_t=!0,x.call(xt,$))}}var xt=this,_t=!1;return{resolve:et(this.C),reject:et(this.l)}},H.prototype.C=function(et){if(et===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(et instanceof H)this.F(et);else{e:switch(typeof et){case"object":var xt=null!=et;break e;case"function":xt=!0;break e;default:xt=!1}xt?this.u(et):this.m(et)}},H.prototype.u=function(et){var xt=void 0;try{xt=et.then}catch(_t){return void this.l(_t)}"function"==typeof xt?this.G(xt,et):this.m(et)},H.prototype.l=function(et){this.s(2,et)},H.prototype.m=function(et){this.s(1,et)},H.prototype.s=function(et,xt){if(0!=this.h)throw Error("Cannot settle("+et+", "+xt+"): Promise already settled in state"+this.h);this.h=et,this.i=xt,2===this.h&&this.D(),this.A()},H.prototype.D=function(){var et=this;$e(function(){if(et.B()){var xt=Re.console;void 0!==xt&&xt.error(et.i)}},1)},H.prototype.B=function(){if(this.o)return!1;var et=Re.CustomEvent,xt=Re.Event,_t=Re.dispatchEvent;return void 0===_t||("function"==typeof et?et=new et("unhandledrejection",{cancelable:!0}):"function"==typeof xt?et=new xt("unhandledrejection",{cancelable:!0}):(et=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,et),et.promise=this,et.reason=this.i,_t(et))},H.prototype.A=function(){if(null!=this.g){for(var et=0;et<this.g.length;++et)bt.h(this.g[et]);this.g=null}};var bt=new K;return H.prototype.F=function(et){var xt=this.j();et.J(xt.resolve,xt.reject)},H.prototype.G=function(et,xt){var _t=this.j();try{et.call(xt,_t.resolve,_t.reject)}catch(x){_t.reject(x)}},H.prototype.then=function(et,xt){function _t(Se,je){return"function"==typeof Se?function(tt){try{x(Se(tt))}catch(Ke){$(Ke)}}:je}var x,$,re=new H(function(Se,je){x=Se,$=je});return this.J(_t(et,x),_t(xt,$)),re},H.prototype.catch=function(et){return this.then(void 0,et)},H.prototype.J=function(et,xt){function _t(){switch(x.h){case 1:et(x.i);break;case 2:xt(x.i);break;default:throw Error("Unexpected state: "+x.h)}}var x=this;null==this.g?bt.h(_t):this.g.push(_t),this.o=!0},H.resolve=Ne,H.reject=function(et){return new H(function(xt,_t){_t(et)})},H.race=function(et){return new H(function(xt,_t){for(var x=Qe(et),$=x.next();!$.done;$=x.next())Ne($.value).J(xt,_t)})},H.all=function(et){var xt=Qe(et),_t=xt.next();return _t.done?Ne([]):new H(function(x,$){function re(tt){return function(Ke){Se[tt]=Ke,0==--je&&x(Se)}}var Se=[],je=0;do{Se.push(void 0),je++,Ne(_t.value).J(re(Se.length-1),$),_t=xt.next()}while(!_t.done)})},H}),rt("Object.is",function(V){return V||function(H,K){return H===K?0!==H||1/H==1/K:H!=H&&K!=K}}),rt("Array.prototype.includes",function(V){return V||function(H,K){var Ne=this;Ne instanceof String&&(Ne=String(Ne));var $e=Ne.length;for(0>(K=K||0)&&(K=Math.max(K+$e,0));K<$e;K++){var bt=Ne[K];if(bt===H||Object.is(bt,H))return!0}return!1}}),rt("String.prototype.includes",function(V){return V||function(H,K){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(H instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(H,K||0)}}),rt("Array.prototype.keys",function(V){return V||function(){return function pn(V,H){V instanceof String&&(V+="");var K=0,Ne=!1,$e={next:function(){if(!Ne&&K<V.length){var bt=K++;return{value:H(bt,V[bt]),done:!1}}return Ne=!0,{done:!0,value:void 0}}};return $e[Symbol.iterator]=function(){return $e},$e}(this,function(H){return H})}});var vo=this||self;function ui(V,H){V=V.split(".");var Ne,K=vo;V[0]in K||void 0===K.execScript||K.execScript("var "+V[0]);for(;V.length&&(Ne=V.shift());)V.length||void 0===H?K=K[Ne]&&K[Ne]!==Object.prototype[Ne]?K[Ne]:K[Ne]={}:K[Ne]=H}function Yn(V,H){return H=String.fromCharCode.apply(null,H),null==V?H:V+H}var hi,_i,Ci="undefined"!=typeof TextDecoder,ro="undefined"!=typeof TextEncoder;function qi(V){if(ro)V=(_i||(_i=new TextEncoder)).encode(V);else{var H=void 0;H=void 0!==H&&H;for(var K=0,Ne=new Uint8Array(3*V.length),$e=0;$e<V.length;$e++){var bt=V.charCodeAt($e);if(128>bt)Ne[K++]=bt;else{if(2048>bt)Ne[K++]=bt>>6|192;else{if(55296<=bt&&57343>=bt){if(56319>=bt&&$e<V.length){var et=V.charCodeAt(++$e);if(56320<=et&&57343>=et){Ne[K++]=(bt=1024*(bt-55296)+et-56320+65536)>>18|240,Ne[K++]=bt>>12&63|128,Ne[K++]=bt>>6&63|128,Ne[K++]=63&bt|128;continue}$e--}if(H)throw Error("Found an unpaired surrogate");bt=65533}Ne[K++]=bt>>12|224,Ne[K++]=bt>>6&63|128}Ne[K++]=63&bt|128}}V=Ne.subarray(0,K)}return V}var yo={},Ui=null;function Yi(V,H){void 0===H&&(H=0),Xi(),H=yo[H];for(var K=Array(Math.floor(V.length/3)),Ne=H[64]||"",$e=0,bt=0;$e<V.length-2;$e+=3){var et=V[$e],xt=V[$e+1],_t=V[$e+2],x=H[et>>2];K[bt++]=x+(et=H[(3&et)<<4|xt>>4])+(xt=H[(15&xt)<<2|_t>>6])+(_t=H[63&_t])}switch(x=0,_t=Ne,V.length-$e){case 2:_t=H[(15&(x=V[$e+1]))<<2]||Ne;case 1:K[bt]=H[(V=V[$e])>>2]+H[(3&V)<<4|x>>4]+_t+Ne}return K.join("")}function Xi(){if(!Ui){Ui={};for(var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),H=["+/=","+/","-_=","-_.","-_"],K=0;5>K;K++){var Ne=V.concat(H[K].split(""));yo[K]=Ne;for(var $e=0;$e<Ne.length;$e++){var bt=Ne[$e];void 0===Ui[bt]&&(Ui[bt]=$e)}}}}var oo,Hi="function"==typeof Uint8Array.prototype.slice;function eo(V,H,K){return H===K?oo||(oo=new Uint8Array(0)):Hi?V.slice(H,K):new Uint8Array(V.subarray(H,K))}var ni=0;function be(V,H){H=void 0!==(H=void 0===H?{}:H).v&&H.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=H,V&&xe(this,V)}function xe(V,H){H=H.constructor===Uint8Array?H:H.constructor===ArrayBuffer||H.constructor===Array?new Uint8Array(H):H.constructor===String?function Ro(V){var H=V.length,K=3*H/4;K%3?K=Math.floor(K):-1!="=.".indexOf(V[H-1])&&(K=-1!="=.".indexOf(V[H-2])?K-2:K-1);var Ne=new Uint8Array(K),$e=0;return function io(V,H){function K(_t){for(;Ne<V.length;){var x=V.charAt(Ne++),$=Ui[x];if(null!=$)return $;if(!/^[\s\xa0]*$/.test(x))throw Error("Unknown base64 encoding at char: "+x)}return _t}Xi();for(var Ne=0;;){var $e=K(-1),bt=K(0),et=K(64),xt=K(64);if(64===xt&&-1===$e)break;H($e<<2|bt>>4),64!=et&&(H(bt<<4&240|et>>2),64!=xt&&H(et<<6&192|xt))}}(V,function(bt){Ne[$e++]=bt}),Ne.subarray(0,$e)}(H):H instanceof Uint8Array?new Uint8Array(H.buffer,H.byteOffset,H.byteLength):new Uint8Array(0),V.h=H,V.l=0,V.j=V.h.length,V.g=V.l}function Fe(V){for(var H=128,K=0,Ne=0,$e=0;4>$e&&128<=H;$e++)K|=(127&(H=V.h[V.g++]))<<7*$e;if(128<=H&&(K|=(127&(H=V.h[V.g++]))<<28,Ne|=(127&H)>>4),128<=H)for($e=0;5>$e&&128<=H;$e++)Ne|=(127&(H=V.h[V.g++]))<<7*$e+3;if(128>H)return V=K>>>0,(Ne=2147483648&(H=Ne>>>0))&&(H=~H>>>0,0==(V=1+~V>>>0)&&(H=H+1>>>0)),V=4294967296*H+(V>>>0),Ne?-V:V;V.m=!0}be.prototype.reset=function(){this.g=this.l},be.prototype.i=function(){var V=this.h,H=V[this.g],K=127&H;return 128>H?(this.g+=1,K):(K|=(127&(H=V[this.g+1]))<<7,128>H?(this.g+=2,K):(K|=(127&(H=V[this.g+2]))<<14,128>H?(this.g+=3,K):(K|=(127&(H=V[this.g+3]))<<21,128>H?(this.g+=4,K):(K|=(15&(H=V[this.g+4]))<<28,128>H?(this.g+=5,K>>>0):(this.g+=5,128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&128<=V[this.g++]&&this.g++,K)))))},be.prototype.o=function(){var V=this.h[this.g],H=this.h[this.g+1],K=this.h[this.g+2],Ne=this.h[this.g+3];return this.g+=4,V=2*((K=(V<<0|H<<8|K<<16|Ne<<24)>>>0)>>31)+1,H=K>>>23&255,K&=8388607,255==H?K?NaN:1/0*V:0==H?V*Math.pow(2,-149)*K:V*Math.pow(2,H-150)*(K+Math.pow(2,23))};var _e=[];function ot(){this.g=new Uint8Array(64),this.h=0}function It(V,H){for(;127<H;)V.push(127&H|128),H>>>=7;V.push(H)}function dt(V){var H={},K=void 0!==H.N&&H.N;this.o={v:void 0!==H.v&&H.v},this.N=K,H=this.o,_e.length?(K=_e.pop(),H&&(K.v=H.v),V&&xe(K,V),V=K):V=new be(V,H),this.g=V,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function tn(V){var H=V.g;if((H=H.g==H.j)||(H=V.j)||(H=(H=V.g).m||0>H.g||H.g>H.j),H)return!1;V.m=V.g.g;var K=7&(H=V.g.i());return 0!=K&&5!=K&&1!=K&&2!=K&&3!=K&&4!=K?(V.j=!0,!1):(V.i=H,V.l=H>>>3,V.h=K,!0)}function mt(V){switch(V.h){case 0:if(0!=V.h)mt(V);else{for(V=V.g;128&V.h[V.g];)V.g++;V.g++}break;case 1:1!=V.h?mt(V):(V=V.g).g+=8;break;case 2:if(2!=V.h)mt(V);else{var H=V.g.i();(V=V.g).g+=H}break;case 5:5!=V.h?mt(V):(V=V.g).g+=4;break;case 3:for(H=V.l;;){if(!tn(V)){V.j=!0;break}if(4==V.h){V.l!=H&&(V.j=!0);break}mt(V)}break;default:V.j=!0}}function Gt(V,H,K){var Ne=V.g.j,$e=V.g.i(),bt=V.g.g+$e;if(V.g.j=bt,K(H,V),0!=(K=bt-V.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+$e+" bytes, instead read "+($e-K)+" bytes, either the data ended unexpectedly or the message misreported its own length");return V.g.g=bt,V.g.j=Ne,H}function hn(V){return V.g.o()}function Pt(V){var Ne,H=V.g.i(),K=(V=V.g).g;if(V.g+=H,V=V.h,Ci)(Ne=hi)||(Ne=hi=new TextDecoder("utf-8",{fatal:!1})),Ne=Ne.decode(V.subarray(K,K+H));else{H=K+H;for(var et,xt,_t,$e=[],bt=null;K<H;)128>(et=V[K++])?$e.push(et):224>et?K>=H?$e.push(65533):(xt=V[K++],194>et||128!=(192&xt)?(K--,$e.push(65533)):$e.push((31&et)<<6|63&xt)):240>et?K>=H-1?$e.push(65533):128!=(192&(xt=V[K++]))||224===et&&160>xt||237===et&&160<=xt||128!=(192&(Ne=V[K++]))?(K--,$e.push(65533)):$e.push((15&et)<<12|(63&xt)<<6|63&Ne):244>=et?K>=H-2?$e.push(65533):128!=(192&(xt=V[K++]))||xt-144+(et<<28)>>30!=0||128!=(192&(Ne=V[K++]))||128!=(192&(_t=V[K++]))?(K--,$e.push(65533)):(et=(7&et)<<18|(63&xt)<<12|(63&Ne)<<6|63&_t,$e.push(55296+((et-=65536)>>10&1023),56320+(1023&et))):$e.push(65533),8192<=$e.length&&(bt=Yn(bt,$e),$e.length=0);Ne=Yn(bt,$e)}return Ne}function Ee(V,H,K){var Ne=V.g.i();for(Ne=V.g.g+Ne;V.g.g<Ne;)K.push(H.call(V.g))}function Ve(V,H){2==V.h?Ee(V,be.prototype.o,H):H.push(hn(V))}function ze(){this.h=[],this.i=0,this.g=new ot}function Ze(V,H){0!==H.length&&(V.h.push(H),V.i+=H.length)}function Lt(V){var H=V.i+V.g.length();if(0===H)return new Uint8Array(0);H=new Uint8Array(H);for(var K=V.h,Ne=K.length,$e=0,bt=0;bt<Ne;bt++){var et=K[bt];0!==et.length&&(H.set(et,$e),$e+=et.length)}return 0!==(Ne=(K=V.g).h)&&(H.set(K.g.subarray(0,Ne),$e),K.h=0),V.h=[H],H}function Dt(V,H,K){if(null!=K){It(V.g,8*H+5),V=V.g;var Ne=K;0===(Ne=(K=0>Ne?1:0)?-Ne:Ne)?ni=0<1/Ne?0:2147483648:isNaN(Ne)?ni=2147483647:34028234663852886e22<Ne?ni=(K<<31|2139095040)>>>0:11754943508222875e-54>Ne?(Ne=Math.round(Ne/Math.pow(2,-149)),ni=(K<<31|Ne)>>>0):(H=Math.floor(Math.log(Ne)/Math.LN2),Ne*=Math.pow(2,-H),16777216<=(Ne=Math.round(8388608*Ne))&&++H,ni=(K<<31|H+127<<23|8388607&Ne)>>>0),V.push((K=ni)>>>0&255),V.push(K>>>8&255),V.push(K>>>16&255),V.push(K>>>24&255)}}ot.prototype.push=function(V){if(!(this.h+1<this.g.length)){var H=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(H)}this.g[this.h++]=V},ot.prototype.length=function(){return this.h},ot.prototype.end=function(){var V=this.g,H=this.h;return this.h=0,eo(V,0,H)},dt.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var Qt="function"==typeof Uint8Array;function hr(V,H,K){if(null!=V)return"object"==typeof V?Qt&&V instanceof Uint8Array?K(V):Hr(V,H,K):H(V)}function Hr(V,H,K){if(Array.isArray(V)){for(var Ne=Array(V.length),$e=0;$e<V.length;$e++)Ne[$e]=hr(V[$e],H,K);return Array.isArray(V)&&V.W&&sr(Ne),Ne}for($e in Ne={},V)Ne[$e]=hr(V[$e],H,K);return Ne}function ur(V){return"number"==typeof V?isFinite(V)?V:String(V):V}var di,ri={W:{value:!0,configurable:!0}};function sr(V){return Array.isArray(V)&&!Object.isFrozen(V)&&Object.defineProperties(V,ri),V}function pr(V,H,K){var Ne=di;if(di=null,V||(V=Ne),Ne=this.constructor.ca,V||(V=Ne?[Ne]:[]),this.j=Ne?0:-1,this.m=this.g=null,this.h=V,V=(Ne=this.h.length)-1,!Ne||null===(Ne=this.h[V])||"object"!=typeof Ne||Array.isArray(Ne)||Qt&&Ne instanceof Uint8Array?void 0!==H&&-1<H?(this.l=Math.max(H,V+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=V-this.j,this.i=Ne),K)for(H=0;H<K.length;H++)(V=K[H])<this.l?(Ne=this.h[V+=this.j])?sr(Ne):this.h[V]=ar:(Ai(this),(Ne=this.i[V])?sr(Ne):this.i[V]=ar)}var ar=Object.freeze(sr([]));function Ai(V){var H=V.l+V.j;V.h[H]||(V.i=V.h[H]={})}function gr(V,H,K){return-1===H?null:void 0!==K&&K||H>=V.l?V.i?V.i[H]:void 0:V.h[H+V.j]}function Sr(V,H){var K=void 0!==K&&K,Ne=gr(V,H,K);return null==Ne&&(Ne=ar),Ne===ar&&Un(V,H,Ne=sr([]),K),Ne}function ho(V){var H=Sr(V,3);if(V.m||(V.m={}),!V.m[3]){for(var K=0;K<H.length;K++)H[K]=+H[K];V.m[3]=!0}return H}function Qr(V,H,K){return null==(V=gr(V,H))?K:V}function qn(V,H,K){return null==(V=null==(V=gr(V,H))?V:+V)?void 0===K?0:K:V}function Un(V,H,K,Ne){void 0!==Ne&&Ne||H>=V.l?(Ai(V),V.i[H]=K):V.h[H+V.j]=K}function Dr(V,H,K){if(-1===K)return null;if(V.g||(V.g={}),!V.g[K]){var Ne=gr(V,K,!1);Ne&&(V.g[K]=new H(Ne))}return V.g[K]}function Mi(V,H){V.g||(V.g={});var K=V.g[1];if(!K){var Ne=Sr(V,1);K=[];for(var $e=0;$e<Ne.length;$e++)K[$e]=new H(Ne[$e]);V.g[1]=K}return K}function wr(V,H,K){var Ne=void 0!==Ne&&Ne;V.g||(V.g={});var $e=K&&Vi(K);V.g[H]=K,Un(V,H,$e,Ne)}function kr(V,H,K,Ne){var $e=Mi(V,K);H=H||new K,V=Sr(V,1),null!=Ne?($e.splice(Ne,0,H),V.splice(Ne,0,Vi(H))):($e.push(H),V.push(Vi(H)))}function Vi(V,H){if(V.g)for(var K in V.g){var Ne=V.g[K];if(Array.isArray(Ne))for(var $e=0;$e<Ne.length;$e++)Ne[$e]&&Vi(Ne[$e]);else Ne&&Vi(Ne)}return V.h}function xr(V,H){if(V=V.o){Ze(H,H.g.end());for(var K=0;K<V.length;K++)Ze(H,V[K])}}function zn(V,H){if(4==H.h)return!1;var K=H.m;return mt(H),H.N||(H=eo(H.g.h,K,H.g.g),(K=V.o)?K.push(H):V.o=[H]),!0}function zi(V){pr.call(this,V,-1,j)}function Ji(V,H){for(;tn(H);)switch(H.i){case 8:var K=H.g.i();Un(V,1,K);break;case 16:Un(V,2,K=H.g.i());break;case 29:case 26:Ve(H,V.getPackedDataList());break;case 32:Un(V,4,K=Fe(H.g));break;default:if(!zn(V,H))return V}return V}pr.prototype.toJSON=function(){return Hr(Vi(this),ur,Yi)},pr.prototype.toString=function(){return Vi(this).toString()},$n(zi,pr),zi.prototype.getRows=function(){return gr(this,1)},zi.prototype.getCols=function(){return gr(this,2)},zi.prototype.getPackedDataList=function(){return ho(this)},zi.prototype.getLayout=function(){return Qr(this,4,0)};var j=[3];function U(V,H){var K=void 0;return new(K||(K=n))(function(Ne,$e){function bt(_t){try{xt(H.next(_t))}catch(x){$e(x)}}function et(_t){try{xt(H.throw(_t))}catch(x){$e(x)}}function xt(_t){_t.done?Ne(_t.value):new K(function(x){x(_t.value)}).then(bt,et)}xt((H=H.apply(V,void 0)).next())})}function m(V){pr.call(this,V)}function M(V,H){for(;tn(H);)switch(H.i){case 8:var K=H.g.i();Un(V,1,K);break;case 21:Un(V,2,K=hn(H));break;case 26:Un(V,3,K=Pt(H));break;case 34:Un(V,4,K=Pt(H));break;default:if(!zn(V,H))return V}return V}function q(V){pr.call(this,V,-1,Ie)}$n(m,pr),$n(q,pr),q.prototype.addClassification=function(V,H){return kr(this,V,m,H),this};var Ie=[1];function qe(V){pr.call(this,V)}function Xt(V,H){for(;tn(H);)switch(H.i){case 13:var K=hn(H);Un(V,1,K);break;case 21:Un(V,2,K=hn(H));break;case 29:Un(V,3,K=hn(H));break;case 37:Un(V,4,K=hn(H));break;case 45:Un(V,5,K=hn(H));break;default:if(!zn(V,H))return V}return V}function rn(V){pr.call(this,V,-1,Or)}function Ln(V){e:{var H=new rn;for(V=new dt(V);tn(V);)if(10===V.i)kr(H,Gt(V,new qe,Xt),qe,void 0);else if(!zn(H,V))break e}return H}$n(qe,pr),$n(rn,pr);var Or=[1];function Vn(V){pr.call(this,V)}function mn(V){pr.call(this,V,-1,Nr)}function ir(V,H){for(;tn(H);)switch(H.i){case 8:var K=Fe(H.g);Un(V,1,K);break;case 16:Un(V,2,K=Fe(H.g));break;case 29:case 26:Ve(H,V.getVertexBufferList());break;case 32:case 34:K=H;var Ne=V.getIndexBufferList();2==K.h?Ee(K,be.prototype.i,Ne):Ne.push(K.g.i());break;default:if(!zn(V,H))return V}return V}$n(Vn,pr),$n(mn,pr),mn.prototype.getVertexType=function(){return Qr(this,1,0)},mn.prototype.getPrimitiveType=function(){return Qr(this,2,0)},mn.prototype.getVertexBufferList=function(){return ho(this)},mn.prototype.getIndexBufferList=function(){return Sr(this,4)};var Nr=[3,4];function oi(V){pr.call(this,V)}function Vr(V,H,K){if(K=V.createShader(0===K?V.VERTEX_SHADER:V.FRAGMENT_SHADER),V.shaderSource(K,H),V.compileShader(K),!V.getShaderParameter(K,V.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+V.getShaderInfoLog(K));return K}function no(V){return Mi(V,m).map(function(H){return{index:Qr(H,1,0),Y:qn(H,2),label:null!=gr(H,3)?Qr(H,3,""):void 0,displayName:null!=gr(H,4)?Qr(H,4,""):void 0}})}function po(V){return{x:qn(V,1),y:qn(V,2),z:qn(V,3),visibility:null!=gr(V,4)?qn(V,4):void 0}}function Do(V,H){this.h=V,this.g=H,this.l=0}function ji(V,H,K){return function Ki(V,H){var K=V.g;if(void 0===V.m){var Ne=Vr(K,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),$e=Vr(K,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),bt=K.createProgram();if(K.attachShader(bt,Ne),K.attachShader(bt,$e),K.linkProgram(bt),!K.getProgramParameter(bt,K.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+K.getProgramInfoLog(bt));Ne=V.m=bt,K.useProgram(Ne),$e=K.getUniformLocation(Ne,"sampler0"),V.j={I:K.getAttribLocation(Ne,"aVertex"),H:K.getAttribLocation(Ne,"aTex"),da:$e},V.s=K.createBuffer(),K.bindBuffer(K.ARRAY_BUFFER,V.s),K.enableVertexAttribArray(V.j.I),K.vertexAttribPointer(V.j.I,2,K.FLOAT,!1,0,0),K.bufferData(K.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),K.STATIC_DRAW),K.bindBuffer(K.ARRAY_BUFFER,null),V.o=K.createBuffer(),K.bindBuffer(K.ARRAY_BUFFER,V.o),K.enableVertexAttribArray(V.j.H),K.vertexAttribPointer(V.j.H,2,K.FLOAT,!1,0,0),K.bufferData(K.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),K.STATIC_DRAW),K.bindBuffer(K.ARRAY_BUFFER,null),K.uniform1i($e,0)}Ne=V.j,K.useProgram(V.m),K.canvas.width=H.width,K.canvas.height=H.height,K.viewport(0,0,H.width,H.height),K.activeTexture(K.TEXTURE0),V.h.bindTexture2d(H.glName),K.enableVertexAttribArray(Ne.I),K.bindBuffer(K.ARRAY_BUFFER,V.s),K.vertexAttribPointer(Ne.I,2,K.FLOAT,!1,0,0),K.enableVertexAttribArray(Ne.H),K.bindBuffer(K.ARRAY_BUFFER,V.o),K.vertexAttribPointer(Ne.H,2,K.FLOAT,!1,0,0),K.bindFramebuffer(K.DRAW_FRAMEBUFFER?K.DRAW_FRAMEBUFFER:K.FRAMEBUFFER,null),K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT),K.colorMask(!0,!0,!0,!0),K.drawArrays(K.TRIANGLE_FAN,0,4),K.disableVertexAttribArray(Ne.I),K.disableVertexAttribArray(Ne.H),K.bindBuffer(K.ARRAY_BUFFER,null),V.h.bindTexture2d(0)}(V,H),"function"==typeof V.g.canvas.transferToImageBitmap?n.resolve(V.g.canvas.transferToImageBitmap()):K?n.resolve(V.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(V.g.canvas):(void 0===V.i&&(V.i=document.createElement("canvas")),new n(function(Ne){V.i.height=V.g.canvas.height,V.i.width=V.g.canvas.width,V.i.getContext("2d",{}).drawImage(V.g.canvas,0,0,V.g.canvas.width,V.g.canvas.height),Ne(V.i)}))}function is(V){this.g=V}$n(oi,pr),oi.prototype.getMesh=function(){return Dr(this,mn,1)},oi.prototype.getPoseTransformMatrix=function(){return Dr(this,zi,2)};var os=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ko(V,H){return H+V}function Wo(V,H){window[V]=H}function te(V){if(this.g=V,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=V&&V.locateFile||ko,"object"==typeof window)var H=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");H=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=H,V.options)for(var K=(H=Qe(Object.keys(V.options))).next();!K.done;K=H.next()){var Ne=V.options[K=K.value].default;void 0!==Ne&&(this.j[K]="function"==typeof Ne?Ne():Ne)}}function Ft(V,H){return U(V,function K(){var $e,bt,Ne=this;return Wr(K,function(et){return H in Ne.F?et.return(Ne.F[H]):($e=Ne.locateFile(H,""),bt=fetch($e).then(function(xt){return xt.arrayBuffer()}),Ne.F[H]=bt,et.return(bt))})})}function cr(V,H){for(var K=H.name||"$",Ne=[].concat(Bt(H.wants)),$e=new V.h.StringList,bt=Qe(H.wants),et=bt.next();!et.done;et=bt.next())$e.push_back(et.value);bt=V.h.PacketListener.implement({onResults:function(xt){for(var _t={},x=0;x<H.wants.length;++x)_t[Ne[x]]=xt.get(x);var $=V.listeners[K];$&&(V.C=function dn(V,H,K){return U(V,function Ne(){var $e,bt,et,xt,x,re,Se,je,tt,Ke,Tt,fn,$=this;return Wr(Ne,function(An){switch(An.g){case 1:if(!K)return An.return(H);for($e={},bt=0,et=Qe(Object.keys(K)),xt=et.next();!xt.done;xt=et.next())"string"!=typeof(x=K[xt.value])&&"texture"===x.type&&void 0!==H[x.stream]&&++bt;1<bt&&($.G=!1),re=Qe(Object.keys(K)),xt=re.next();case 2:if(xt.done){An.g=4;break}if("string"==typeof(je=K[Se=xt.value]))return Tt=$e,fn=Se,Et(An,function Dn(V,H,K){return U(V,function Ne(){var bt,$e=this;return Wr(Ne,function(et){return"number"==typeof K||K instanceof Uint8Array||K instanceof $e.h.Uint8BlobList?et.return(K):K instanceof $e.h.Texture2dDataOut?((bt=$e.s[H])||(bt=new Do($e.h,$e.D),$e.s[H]=bt),et.return(ji(bt,K,$e.G))):et.return(void 0)})})}($,Se,H[je]),14);if(tt=H[je.stream],"detection_list"===je.type){if(tt){for(var lr=tt.getRectList(),kn=tt.getLandmarksList(),sn=tt.getClassificationsList(),wn=[],jn=0;jn<lr.size();++jn){var Xn=lr.get(jn);e:{var Jn=new Vn;for(Xn=new dt(Xn);tn(Xn);)switch(Xn.i){case 13:var I=hn(Xn);Un(Jn,1,I);break;case 21:Un(Jn,2,I=hn(Xn));break;case 29:Un(Jn,3,I=hn(Xn));break;case 37:Un(Jn,4,I=hn(Xn));break;case 45:Un(Jn,5,I=hn(Xn));break;case 48:Un(Jn,6,I=Fe(Xn.g));break;default:if(!zn(Jn,Xn))break e}}Jn={Z:qn(Jn,1),$:qn(Jn,2),height:qn(Jn,3),width:qn(Jn,4),rotation:qn(Jn,5,0),X:Qr(Jn,6,0)},Xn=Mi(Ln(kn.get(jn)),qe).map(po);var z=sn.get(jn);e:for(I=new q,z=new dt(z);tn(z);)if(10===z.i)I.addClassification(Gt(z,new m,M));else if(!zn(I,z))break e;Jn={T:Jn,O:Xn,M:no(I)},wn.push(Jn)}lr=wn}else lr=[];$e[Se]=lr,An.g=7;break}if("proto_list"===je.type){if(tt){for(lr=Array(tt.size()),kn=0;kn<tt.size();kn++)lr[kn]=tt.get(kn);tt.delete()}else lr=[];$e[Se]=lr,An.g=7;break}if(void 0===tt){An.g=3;break}if("float_list"===je.type){$e[Se]=tt,An.g=7;break}if("proto"===je.type){$e[Se]=tt,An.g=7;break}if("texture"!==je.type)throw Error("Unknown output config type: '"+je.type+"'");return(Ke=$.s[Se])||(Ke=new Do($.h,$.D),$.s[Se]=Ke),Et(An,ji(Ke,tt,$.G),13);case 13:$e[Se]=An.h;case 7:je.transform&&$e[Se]&&($e[Se]=je.transform($e[Se])),An.g=3;break;case 14:Tt[fn]=An.h;case 3:xt=re.next(),An.g=2;break;case 4:return An.return($e)}})})}(V,_t,H.outs).then(function(re){re=$(re);for(var Se=0;Se<H.wants.length;++Se){var je=_t[Ne[Se]];"object"==typeof je&&je.hasOwnProperty&&je.hasOwnProperty("delete")&&je.delete()}re&&(V.C=re)}))}}),V.i.attachMultiListener($e,bt),$e.delete()}function er(V){V=function to(V){e:{var H=new oi;for(V=new dt(V);tn(V);)switch(V.i){case 10:var K=Gt(V,new mn,ir);wr(H,1,K);break;case 18:wr(H,2,K=Gt(V,new zi,Ji));break;default:if(!zn(H,V))break e}}return H}(V);var H=V.getMesh();if(!H)return V;var K=new Float32Array(H.getVertexBufferList());H.getVertexBufferList=function(){return K};var Ne=new Uint32Array(H.getIndexBufferList());return H.getIndexBufferList=function(){return Ne},V}(ue=te.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){return U(this,function V(){var H=this;return Wr(V,function(K){H.i&&(H.i.reset(),H.m={},H.s={}),K.g=0})})},ue.setOptions=function(V,H){var K=this;if(H=H||this.g.options){for(var Ne=[],$e=[],bt={},et=Qe(Object.keys(V)),xt=et.next();!xt.done;bt={K:bt.K,L:bt.L},xt=et.next()){var _t=xt.value;_t in this.j&&this.j[_t]===V[_t]||(this.j[_t]=V[_t],void 0!==(xt=H[_t])&&(xt.onChange&&(bt.K=xt.onChange,bt.L=V[_t],Ne.push(function(x){return function(){return U(K,function $(){var Se=this;return Wr($,function(je){if(1==je.g)return Et(je,x.K(x.L),2);!0===je.h&&(Se.o=!0),je.g=0})})}}(bt))),xt.graphOptionXref&&(_t={valueNumber:1===xt.type?V[_t]:0,valueBoolean:0===xt.type&&V[_t],valueString:2===xt.type?V[_t]:""},xt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),xt.graphOptionXref),_t),$e.push(xt))))}(0!==Ne.length||0!==$e.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat($e),this.u=(void 0===this.u?[]:this.u).concat(Ne))}},ue.initialize=function(){return U(this,function V(){var H=this;return Wr(V,function(K){return 1==K.g?Et(K,function vt(V){return U(V,function H(){var Ne,$e,bt,et,xt,_t,x,$,re,Se,je,K=this;return Wr(H,function(tt){switch(tt.g){case 1:return Ne=K,K.R?($e=function Be(V,H){return void 0===V.g.files?[]:"function"==typeof V.g.files?V.g.files(H):V.g.files}(K,K.j),Et(tt,function ee(){return U(this,function V(){return Wr(V,function(H){switch(H.g){case 1:return H.m=2,Et(H,WebAssembly.instantiate(os),4);case 4:H.g=3,H.m=0;break;case 2:return H.m=0,H.j=null,H.return(!1);case 3:return H.return(!0)}})})}(),2)):tt.return();case 2:if(bt=tt.h,"object"==typeof window)return Wo("createMediapipeSolutionsWasm",{locateFile:K.locateFile}),Wo("createMediapipeSolutionsPackedAssets",{locateFile:K.locateFile}),_t=$e.filter(function(Ke){return void 0!==Ke.data}),x=$e.filter(function(Ke){return void 0===Ke.data}),$=n.all(_t.map(function(Ke){var Mt=Ft(Ne,Ke.url);if(void 0!==Ke.path){var Tt=Ke.path;Mt=Mt.then(function(fn){return Ne.overrideFile(Tt,fn),n.resolve(fn)})}return Mt})),re=n.all(x.map(function(Ke){return void 0===Ke.simd||Ke.simd&&bt||!Ke.simd&&!bt?function B(V){var H=document.createElement("script");return H.setAttribute("src",V),H.setAttribute("crossorigin","anonymous"),new n(function(K){H.addEventListener("load",function(){K()},!1),H.addEventListener("error",function(){K()},!1),document.body.appendChild(H)})}(Ne.locateFile(Ke.url,Ne.S)):n.resolve()})).then(function(){return U(Ne,function Ke(){var Mt,Tt,fn=this;return Wr(Ke,function(An){if(1==An.g)return Mt=window.createMediapipeSolutionsWasm,Tt=window.createMediapipeSolutionsPackedAssets,Et(An,Mt(Tt),2);fn.h=An.h,An.g=0})})}),Se=U(Ne,function Ke(){var Mt=this;return Wr(Ke,function(Tt){return Mt.g.graph&&Mt.g.graph.url?Tt=Et(Tt,Ft(Mt,Mt.g.graph.url),0):(Tt.g=0,Tt=void 0),Tt})}),Et(tt,n.all([re,$,Se]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return et=$e.filter(function(Ke){return void 0===Ke.simd||Ke.simd&&bt||!Ke.simd&&!bt}).map(function(Ke){return Ne.locateFile(Ke.url,Ne.S)}),importScripts.apply(null,Bt(et)),Et(tt,createMediapipeSolutionsWasm(Module),6);case 6:K.h=tt.h,K.l=new OffscreenCanvas(1,1),K.h.canvas=K.l,xt=K.h.GL.createContext(K.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),K.h.GL.makeContextCurrent(xt),tt.g=4;break;case 7:if(K.l=document.createElement("canvas"),!(je=K.l.getContext("webgl2",{}))&&!(je=K.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),tt.return();K.D=je,K.h.canvas=K.l,K.h.createContext(K.l,!0,!0,{});case 4:K.i=new K.h.SolutionWasm,K.R=!1,tt.g=0}})})}(H),2):3!=K.g?Et(K,function zt(V){return U(V,function H(){var $e,bt,et,xt,_t,$,K=this;return Wr(H,function(re){if(1==re.g)return K.g.graph&&K.g.graph.url&&K.P===K.g.graph.url?re.return():(K.o=!0,K.g.graph&&K.g.graph.url?(K.P=K.g.graph.url,Et(re,Ft(K,K.g.graph.url),3)):void(re.g=2));for(2!=re.g&&K.i.loadGraph(re.h),$e=Qe(Object.keys(K.B)),bt=$e.next();!bt.done;bt=$e.next())K.i.overrideFile(et=bt.value,K.B[et]);if(K.B={},K.g.listeners)for(xt=Qe(K.g.listeners),_t=xt.next();!_t.done;_t=xt.next())cr(K,_t.value);$=K.j,K.j={},K.setOptions($),re.g=0})})}(H),3):Et(K,function gt(V){return U(V,function H(){var Ne,$e,et,xt,_t,K=this;return Wr(H,function($){switch($.g){case 1:if(!K.o)return $.return();if(!K.u){$.g=2;break}Ne=Qe(K.u),$e=Ne.next();case 3:if($e.done){$.g=5;break}return Et($,(0,$e.value)(),4);case 4:$e=Ne.next(),$.g=3;break;case 5:K.u=void 0;case 2:if(K.A){for(et=new K.h.GraphOptionChangeRequestList,xt=Qe(K.A),_t=xt.next();!_t.done;_t=xt.next())et.push_back(_t.value);K.i.changeOptions(et),et.delete(),K.A=void 0}K.o=!1,$.g=0}})})}(H),0)})})},ue.overrideFile=function(V,H){this.i?this.i.overrideFile(V,H):this.B[V]=H},ue.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(V,H){return U(this,function K(){var $e,bt,et,xt,_t,x,$,re,Se,Ne=this;return Wr(K,function(je){switch(je.g){case 1:return Ne.g.inputs?($e=1e3*(null==H?performance.now():H),Et(je,Ne.C,2)):je.return();case 2:return Et(je,Ne.initialize(),3);case 3:for(bt=new Ne.h.PacketDataList,et=Qe(Object.keys(V)),xt=et.next();!xt.done;xt=et.next())if(x=Ne.g.inputs[_t=xt.value]){e:{var tt=Ne,Ke=V[_t];switch(x.type){case"video":var Mt=tt.m[x.stream];if(Mt||(Mt=new Do(tt.h,tt.D),tt.m[x.stream]=Mt),0===(tt=Mt).l&&(tt.l=tt.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&Ke instanceof HTMLVideoElement){var Tt=Ke.videoWidth;Mt=Ke.videoHeight}else"undefined"!=typeof HTMLImageElement&&Ke instanceof HTMLImageElement?(Tt=Ke.naturalWidth,Mt=Ke.naturalHeight):(Tt=Ke.width,Mt=Ke.height);Mt={glName:tt.l,width:Tt,height:Mt},(Tt=tt.g).canvas.width=Mt.width,Tt.canvas.height=Mt.height,Tt.activeTexture(Tt.TEXTURE0),tt.h.bindTexture2d(tt.l),Tt.texImage2D(Tt.TEXTURE_2D,0,Tt.RGBA,Tt.RGBA,Tt.UNSIGNED_BYTE,Ke),tt.h.bindTexture2d(0),tt=Mt;break e;case"detections":for((Mt=tt.m[x.stream])||(Mt=new is(tt.h),tt.m[x.stream]=Mt),(tt=Mt).data||(tt.data=new tt.g.DetectionListData),tt.data.reset(Ke.length),Mt=0;Mt<Ke.length;++Mt){var fn=tt.data,An=fn.setBoundingBox,lr=Mt,kn=(Tt=Ke[Mt]).T,sn=new Vn;Un(sn,1,kn.Z),Un(sn,2,kn.$),Un(sn,3,kn.height),Un(sn,4,kn.width),Un(sn,5,kn.rotation),Un(sn,6,kn.X);var wn=kn=new ze;Dt(wn,1,gr(sn,1)),Dt(wn,2,gr(sn,2)),Dt(wn,3,gr(sn,3)),Dt(wn,4,gr(sn,4)),Dt(wn,5,gr(sn,5));var jn=gr(sn,6);if(null!=jn&&null!=jn){It(wn.g,48);var Xn=wn.g,Jn=jn;jn=0>Jn;var I=(Jn=Math.abs(Jn))>>>0;for(Jn=Math.floor((Jn-I)/4294967296),Jn>>>=0,jn&&(Jn=~Jn>>>0,4294967295<(I=1+(~I>>>0))&&(I=0,4294967295<++Jn&&(Jn=0))),jn=ni=I,I=Jn;0<I||127<jn;)Xn.push(127&jn|128),jn=(jn>>>7|I<<25)>>>0,I>>>=7;Xn.push(jn)}if(xr(sn,wn),kn=Lt(kn),An.call(fn,lr,kn),Tt.O)for(fn=0;fn<Tt.O.length;++fn)wn=!!(sn=Tt.O[fn]).visibility,lr=(An=tt.data).addNormalizedLandmark,kn=Mt,sn=Object.assign(Object.assign({},sn),{visibility:wn?sn.visibility:0}),Un(wn=new qe,1,sn.x),Un(wn,2,sn.y),Un(wn,3,sn.z),sn.visibility&&Un(wn,4,sn.visibility),Dt(Xn=sn=new ze,1,gr(wn,1)),Dt(Xn,2,gr(wn,2)),Dt(Xn,3,gr(wn,3)),Dt(Xn,4,gr(wn,4)),Dt(Xn,5,gr(wn,5)),xr(wn,Xn),sn=Lt(sn),lr.call(An,kn,sn);if(Tt.M)for(fn=0;fn<Tt.M.length;++fn){if(lr=(An=tt.data).addClassification,kn=Mt,sn=Tt.M[fn],Un(wn=new m,2,sn.Y),sn.index&&Un(wn,1,sn.index),sn.label&&Un(wn,3,sn.label),sn.displayName&&Un(wn,4,sn.displayName),Xn=sn=new ze,null!=(I=gr(wn,1))&&null!=I)if(It(Xn.g,8),jn=Xn.g,0<=I)It(jn,I);else{for(Jn=0;9>Jn;Jn++)jn.push(127&I|128),I>>=7;jn.push(1)}Dt(Xn,2,gr(wn,2)),null!=(jn=gr(wn,3))&&(jn=qi(jn),It(Xn.g,26),It(Xn.g,jn.length),Ze(Xn,Xn.g.end()),Ze(Xn,jn)),null!=(jn=gr(wn,4))&&(jn=qi(jn),It(Xn.g,34),It(Xn.g,jn.length),Ze(Xn,Xn.g.end()),Ze(Xn,jn)),xr(wn,Xn),sn=Lt(sn),lr.call(An,kn,sn)}}tt=tt.data;break e;default:tt={}}}switch($=tt,re=x.stream,x.type){case"video":bt.pushTexture2d(Object.assign(Object.assign({},$),{stream:re,timestamp:$e}));break;case"detections":(Se=$).stream=re,Se.timestamp=$e,bt.pushDetectionList(Se);break;default:throw Error("Unknown input config type: '"+x.type+"'")}}return Ne.i.send(bt),Et(je,Ne.C,4);case 4:bt.delete(),je.g=0}})})},ue.onResults=function(V,H){this.listeners[H||"$"]=V},ui("Solution",te),ui("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});var Rr={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(V){return V.map(er)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(V){return V.map(function(H){return Mi(Ln(H),qe).map(po)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},nr=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Bn=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],or=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Ar=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],jr=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],_r=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],si=[].concat(Bt(nr),Bt(Bn),Bt(or),Bt(Ar),Bt(jr),Bt(_r));function wi(V){V=V||{},V=Object.assign(Object.assign({},Rr),V),this.g=new te(V)}(ue=wi.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(V){this.g.onResults(V)},ue.initialize=function(){return U(this,function V(){var H=this;return Wr(V,function(K){return Et(K,H.g.initialize(),0)})})},ue.reset=function(){this.g.reset()},ue.send=function(V){return U(this,function H(){var K=this;return Wr(H,function(Ne){return Et(Ne,K.g.send(V),0)})})},ue.setOptions=function(V){this.g.setOptions(V)},ui("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),ui("FaceMesh",wi),ui("FACEMESH_LIPS",nr),ui("FACEMESH_LEFT_EYE",Bn),ui("FACEMESH_LEFT_EYEBROW",or),ui("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),ui("FACEMESH_RIGHT_EYE",Ar),ui("FACEMESH_RIGHT_EYEBROW",jr),ui("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),ui("FACEMESH_FACE_OVAL",_r),ui("FACEMESH_CONTOURS",si),ui("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),ui("matrixDataToMatrix",function(V){for(var H=V.getCols(),K=V.getRows(),Ne=V.getPackedDataList(),$e=[],bt=0;bt<K;bt++)$e.push(Array(H));for(bt=0;bt<K;bt++)for(var et=0;et<H;et++){var xt=1===V.getLayout()?bt*H+et:et*K+bt;$e[bt][et]=Ne[xt]}return $e}),ui("VERSION","0.4.1633559619")}).call(ke);const _={};(function(){var ue;function J(f){var A=0;return function(){return A<f.length?{done:!1,value:f[A++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(f,A,P){return f==Array.prototype||f==Object.prototype||(f[A]=P.value),f},Re=function we(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var A=0;A<f.length;++A){var P=f[A];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}(this);function rt(f,A){if(A)e:{var P=Re;f=f.split(".");for(var X=0;X<f.length-1;X++){var se=f[X];if(!(se in P))break e;P=P[se]}(A=A(X=P[f=f[f.length-1]]))!=X&&null!=A&&le(P,f,{configurable:!0,writable:!0,value:A})}}function yt(f){return(f={next:f})[Symbol.iterator]=function(){return this},f}function Qe(f){var A="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return A?A.call(f):{next:J(f)}}function Bt(f){if(!(f instanceof Array)){f=Qe(f);for(var A,P=[];!(A=f.next()).done;)P.push(A.value);f=P}return f}rt("Symbol",function(f){function P(Te,Me){this.g=Te,le(this,"description",{configurable:!0,writable:!0,value:Me})}if(f)return f;P.prototype.toString=function(){return this.g};var X="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",se=0;return function A(Te){if(this instanceof A)throw new TypeError("Symbol is not a constructor");return new P(X+(Te||"")+"_"+se++,Te)}}),rt("Symbol.iterator",function(f){if(f)return f;f=Symbol("Symbol.iterator");for(var A="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),P=0;P<A.length;P++){var X=Re[A[P]];"function"==typeof X&&"function"!=typeof X.prototype[f]&&le(X.prototype,f,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return f});var Ut,br="function"==typeof Object.create?Object.create:function(f){function A(){}return A.prototype=f,new A};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(f){}fr=!1}Ut=fr?function(f,A){if(f.__proto__=A,f.__proto__!==A)throw new TypeError(f+" is not extensible");return f}:null}var Ur=Ut;function $n(f,A){if(f.prototype=br(A.prototype),f.prototype.constructor=f,Ur)Ur(f,A);else for(var P in A)if("prototype"!=P)if(Object.defineProperties){var X=Object.getOwnPropertyDescriptor(A,P);X&&Object.defineProperty(f,P,X)}else f[P]=A[P];f.ka=A.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Kr(f){if(f.l)throw new TypeError("Generator is already running");f.l=!0}function ii(f,A){f.j={V:A,X:!0},f.g=f.m||f.s}function Et(f,A,P){return f.g=P,{value:A}}function fo(f){this.g=new Pr,this.h=f}function Ii(f,A,P,X){try{var se=A.call(f.g.i,P);if(!(se instanceof Object))throw new TypeError("Iterator result "+se+" is not an object");if(!se.done)return f.g.l=!1,se;var Te=se.value}catch(Me){return f.g.i=null,ii(f.g,Me),_n(f)}return f.g.i=null,X.call(f.g,Te),_n(f)}function _n(f){for(;f.g.g;)try{var A=f.h(f.g);if(A)return f.g.l=!1,{value:A.value,done:!1}}catch(P){f.g.h=void 0,ii(f.g,P)}if(f.g.l=!1,f.g.j){if(A=f.g.j,f.g.j=null,A.X)throw A.V;return{value:A.return,done:!0}}return{value:void 0,done:!0}}function Pi(f){this.next=function(A){return Kr(f.g),f.g.i?A=Ii(f,f.g.i.next,A,f.g.o):(f.g.o(A),A=_n(f)),A},this.throw=function(A){return Kr(f.g),f.g.i?A=Ii(f,f.g.i.throw,A,f.g.o):(ii(f.g,A),A=_n(f)),A},this.return=function(A){return function Go(f,A){Kr(f.g);var P=f.g.i;return P?Ii(f,"return"in P?P.return:function(X){return{value:X,done:!0}},A,f.g.return):(f.g.return(A),_n(f))}(f,A)},this[Symbol.iterator]=function(){return this}}function pn(f){return function Wr(f){function A(X){return f.next(X)}function P(X){return f.throw(X)}return new n(function(X,se){!function Te(Me){Me.done?X(Me.value):n.resolve(Me.value).then(A,P).then(Te,se)}(f.next())})}(new Pi(new fo(f)))}Pr.prototype.o=function(f){this.h=f},Pr.prototype.return=function(f){this.j={return:f},this.g=this.s},rt("Promise",function(f){function A(Me){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Je=this.j();try{Me(Je.resolve,Je.reject)}catch(st){Je.reject(st)}}function P(){this.g=null}function X(Me){return Me instanceof A?Me:new A(function(Je){Je(Me)})}if(f)return f;P.prototype.h=function(Me){if(null==this.g){this.g=[];var Je=this;this.i(function(){Je.l()})}this.g.push(Me)};var se=Re.setTimeout;P.prototype.i=function(Me){se(Me,0)},P.prototype.l=function(){for(;this.g&&this.g.length;){var Me=this.g;this.g=[];for(var Je=0;Je<Me.length;++Je){var st=Me[Je];Me[Je]=null;try{st()}catch(St){this.j(St)}}}this.g=null},P.prototype.j=function(Me){this.i(function(){throw Me})},A.prototype.j=function(){function Me(St){return function(Ct){st||(st=!0,St.call(Je,Ct))}}var Je=this,st=!1;return{resolve:Me(this.D),reject:Me(this.l)}},A.prototype.D=function(Me){if(Me===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Me instanceof A)this.G(Me);else{e:switch(typeof Me){case"object":var Je=null!=Me;break e;case"function":Je=!0;break e;default:Je=!1}Je?this.A(Me):this.m(Me)}},A.prototype.A=function(Me){var Je=void 0;try{Je=Me.then}catch(st){return void this.l(st)}"function"==typeof Je?this.H(Je,Me):this.m(Me)},A.prototype.l=function(Me){this.s(2,Me)},A.prototype.m=function(Me){this.s(1,Me)},A.prototype.s=function(Me,Je){if(0!=this.h)throw Error("Cannot settle("+Me+", "+Je+"): Promise already settled in state"+this.h);this.h=Me,this.i=Je,2===this.h&&this.F(),this.B()},A.prototype.F=function(){var Me=this;se(function(){if(Me.C()){var Je=Re.console;void 0!==Je&&Je.error(Me.i)}},1)},A.prototype.C=function(){if(this.o)return!1;var Me=Re.CustomEvent,Je=Re.Event,st=Re.dispatchEvent;return void 0===st||("function"==typeof Me?Me=new Me("unhandledrejection",{cancelable:!0}):"function"==typeof Je?Me=new Je("unhandledrejection",{cancelable:!0}):(Me=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,Me),Me.promise=this,Me.reason=this.i,st(Me))},A.prototype.B=function(){if(null!=this.g){for(var Me=0;Me<this.g.length;++Me)Te.h(this.g[Me]);this.g=null}};var Te=new P;return A.prototype.G=function(Me){var Je=this.j();Me.K(Je.resolve,Je.reject)},A.prototype.H=function(Me,Je){var st=this.j();try{Me.call(Je,st.resolve,st.reject)}catch(St){st.reject(St)}},A.prototype.then=function(Me,Je){function st(an,cn){return"function"==typeof an?function(Tn){try{St(an(Tn))}catch(Cn){Ct(Cn)}}:cn}var St,Ct,Kt=new A(function(an,cn){St=an,Ct=cn});return this.K(st(Me,St),st(Je,Ct)),Kt},A.prototype.catch=function(Me){return this.then(void 0,Me)},A.prototype.K=function(Me,Je){function st(){switch(St.h){case 1:Me(St.i);break;case 2:Je(St.i);break;default:throw Error("Unexpected state: "+St.h)}}var St=this;null==this.g?Te.h(st):this.g.push(st),this.o=!0},A.resolve=X,A.reject=function(Me){return new A(function(Je,st){st(Me)})},A.race=function(Me){return new A(function(Je,st){for(var St=Qe(Me),Ct=St.next();!Ct.done;Ct=St.next())X(Ct.value).K(Je,st)})},A.all=function(Me){var Je=Qe(Me),st=Je.next();return st.done?X([]):new A(function(St,Ct){function Kt(Tn){return function(Cn){an[Tn]=Cn,0==--cn&&St(an)}}var an=[],cn=0;do{an.push(void 0),cn++,X(st.value).K(Kt(an.length-1),Ct),st=Je.next()}while(!st.done)})},A});var vo="function"==typeof Object.assign?Object.assign:function(f,A){for(var P=1;P<arguments.length;P++){var X=arguments[P];if(X)for(var se in X)Object.prototype.hasOwnProperty.call(X,se)&&(f[se]=X[se])}return f};rt("Object.assign",function(f){return f||vo}),rt("Object.is",function(f){return f||function(A,P){return A===P?0!==A||1/A==1/P:A!=A&&P!=P}}),rt("Array.prototype.includes",function(f){return f||function(A,P){var X=this;X instanceof String&&(X=String(X));var se=X.length;for(0>(P=P||0)&&(P=Math.max(P+se,0));P<se;P++){var Te=X[P];if(Te===A||Object.is(Te,A))return!0}return!1}}),rt("String.prototype.includes",function(f){return f||function(A,P){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(A instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(A,P||0)}}),rt("Array.prototype.keys",function(f){return f||function(){return function wo(f,A){f instanceof String&&(f+="");var P=0,X=!1,se={next:function(){if(!X&&P<f.length){var Te=P++;return{value:A(Te,f[Te]),done:!1}}return X=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}(this,function(A){return A})}});var ui=this||self;function Yn(f,A){f=f.split(".");var X,P=ui;f[0]in P||void 0===P.execScript||P.execScript("var "+f[0]);for(;f.length&&(X=f.shift());)f.length||void 0===A?P=P[X]&&P[X]!==Object.prototype[X]?P[X]:P[X]={}:P[X]=A}function hi(f){throw f}function Ci(f,A){hi(Error("Invalid wire type: "+f+" (at position "+A+")"))}function _i(){hi(Error("Failed to read varint, encoding is invalid."))}function ro(f,A){return A=String.fromCharCode.apply(null,A),null==f?A:f+A}var qi,Ui,yo="undefined"!=typeof TextDecoder,Yi="undefined"!=typeof TextEncoder;function Ro(f){if(Yi)f=(Ui||(Ui=new TextEncoder)).encode(f);else{var A=void 0;A=void 0!==A&&A;for(var P=0,X=new Uint8Array(3*f.length),se=0;se<f.length;se++){var Te=f.charCodeAt(se);if(128>Te)X[P++]=Te;else{if(2048>Te)X[P++]=Te>>6|192;else{if(55296<=Te&&57343>=Te){if(56319>=Te&&se<f.length){var Me=f.charCodeAt(++se);if(56320<=Me&&57343>=Me){X[P++]=(Te=1024*(Te-55296)+Me-56320+65536)>>18|240,X[P++]=Te>>12&63|128,X[P++]=Te>>6&63|128,X[P++]=63&Te|128;continue}se--}if(A)throw Error("Found an unpaired surrogate");Te=65533}X[P++]=Te>>12|224,X[P++]=Te>>6&63|128}X[P++]=63&Te|128}}f=X.subarray(0,P)}return f}var io={},Xi=null;function Hi(f){var A;void 0===A&&(A=0),ni(),A=io[A];for(var P=Array(Math.floor(f.length/3)),X=A[64]||"",se=0,Te=0;se<f.length-2;se+=3){var Me=f[se],Je=f[se+1],st=f[se+2],St=A[Me>>2];P[Te++]=St+(Me=A[(3&Me)<<4|Je>>4])+(Je=A[(15&Je)<<2|st>>6])+(st=A[63&st])}switch(St=0,st=X,f.length-se){case 2:st=A[(15&(St=f[se+1]))<<2]||X;case 1:P[Te]=A[(f=f[se])>>2]+A[(3&f)<<4|St>>4]+st+X}return P.join("")}function oo(f){var A=f.length,P=3*A/4;P%3?P=Math.floor(P):-1!="=.".indexOf(f[A-1])&&(P=-1!="=.".indexOf(f[A-2])?P-2:P-1);var X=new Uint8Array(P),se=0;return function eo(f,A){function P(st){for(;X<f.length;){var St=f.charAt(X++),Ct=Xi[St];if(null!=Ct)return Ct;if(!/^[\s\xa0]*$/.test(St))throw Error("Unknown base64 encoding at char: "+St)}return st}ni();for(var X=0;;){var se=P(-1),Te=P(0),Me=P(64),Je=P(64);if(64===Je&&-1===se)break;A(se<<2|Te>>4),64!=Me&&(A(Te<<4&240|Me>>2),64!=Je&&A(Me<<6&192|Je))}}(f,function(Te){X[se++]=Te}),X.subarray(0,se)}function ni(){if(!Xi){Xi={};for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),A=["+/=","+/","-_=","-_.","-_"],P=0;5>P;P++){var X=f.concat(A[P].split(""));io[P]=X;for(var se=0;se<X.length;se++){var Te=X[se];void 0===Xi[Te]&&(Xi[Te]=se)}}}}var be,Ce="function"==typeof Uint8Array;function xe(f){if(this.g=f,null!==f&&0===f.length)throw Error("ByteString should be constructed with non-empty values")}var Fe="function"==typeof Uint8Array.prototype.slice;function _e(f,A,P){return A===P?be||(be=new Uint8Array(0)):Fe?f.slice(A,P):new Uint8Array(f.subarray(A,P))}var ot=0;function tn(f,A){A=void 0!==(A=void 0===A?{}:A).v&&A.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=A,f&&mt(this,f)}function mt(f,A){f.h=function dt(f){if(f.constructor===Uint8Array)return f;if(f.constructor===ArrayBuffer)return new Uint8Array(f);if(f.constructor===Array)return new Uint8Array(f);if(f.constructor===String)return oo(f);if(f.constructor===xe){if(null==f.g)var A=be||(be=new Uint8Array(0));else{A=Uint8Array;var P=f.g;P=null==P||Ce&&null!=P&&P instanceof Uint8Array?P:"string"==typeof P?oo(P):null,A=new A(f=f.g=P)}return A}if(f instanceof Uint8Array)return new Uint8Array(f.buffer,f.byteOffset,f.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(A),f.l=0,f.i=f.h.length,f.g=f.l}function Gt(f){for(var A=128,P=0,X=0,se=0;4>se&&128<=A;se++)P|=(127&(A=f.h[f.g++]))<<7*se;if(128<=A&&(P|=(127&(A=f.h[f.g++]))<<28,X|=(127&A)>>4),128<=A)for(se=0;5>se&&128<=A;se++)X|=(127&(A=f.h[f.g++]))<<7*se+3;if(128>A)return f=P>>>0,(X=2147483648&(A=X>>>0))&&(A=~A>>>0,0==(f=1+~f>>>0)&&(A=A+1>>>0)),f=4294967296*A+(f>>>0),X?-f:f;f.j=!0,_i()}function hn(f){f.g>f.i&&(f.j=!0,hi(Error("Tried to read past the end of the data "+f.g+" > "+f.i)))}function Pt(f){var A=f.h,P=A[f.g],X=127&P;return 128>P?(f.g+=1,hn(f),X):(X|=(127&(P=A[f.g+1]))<<7,128>P?(f.g+=2,hn(f),X):(X|=(127&(P=A[f.g+2]))<<14,128>P?(f.g+=3,hn(f),X):(X|=(127&(P=A[f.g+3]))<<21,128>P?(f.g+=4,hn(f),X):(X|=(15&(P=A[f.g+4]))<<28,128>P?(f.g+=5,hn(f),X>>>0):(f.g+=5,128<=A[f.g++]&&128<=A[f.g++]&&128<=A[f.g++]&&128<=A[f.g++]&&128<=A[f.g++]?(f.j=!0,_i(),X):(hn(f),X))))))}function Ee(f){var A=f.h[f.g],P=f.h[f.g+1],X=f.h[f.g+2],se=f.h[f.g+3];return f.g+=4,hn(f),(A<<0|P<<8|X<<16|se<<24)>>>0}tn.prototype.reset=function(){this.g=this.l},tn.prototype.m=function(){var f=Ee(this),A=2*(f>>31)+1,P=f>>>23&255;return f&=8388607,255==P?f?NaN:1/0*A:0==P?A*Math.pow(2,-149)*f:A*Math.pow(2,P-150)*(f+Math.pow(2,23))};var Ve=[];function ze(){this.g=new Uint8Array(64),this.h=0}function Ze(f,A){if(!(f.h+1<f.g.length)){var P=f.g;f.g=new Uint8Array(Math.ceil(1+2*f.g.length)),f.g.set(P)}f.g[f.h++]=A}function Lt(f,A){for(;127<A;)Ze(f,127&A|128),A>>>=7;Ze(f,A)}function Dt(f){var A={},P=void 0!==A.O&&A.O;this.m={v:void 0!==A.v&&A.v},this.O=P,A=this.m,Ve.length?(P=Ve.pop(),A&&(P.v=A.v),f&&mt(P,f),f=P):f=new tn(f,A),this.g=f,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function Qt(f){var A=f.g;if((A=A.g==A.i)||(A=f.j)||(A=(A=f.g).j||0>A.g||A.g>A.i),A)return!1;f.l=f.g.g;var P=Pt(f.g);return A=P>>>3,0<=(P&=7)&&5>=P?(f.i=A,f.h=P,!0):(f.j=!0,Ci(P,f.l),!1)}function hr(f){switch(f.h){case 0:if(0!=f.h)hr(f);else e:{for(var A=(f=f.g).g,P=0;10>P;P++){if(0==(128&f.h[A])){f.g=A+1,hn(f);break e}A++}f.j=!0,_i()}break;case 1:(f=f.g).g+=8,hn(f);break;case 2:2!=f.h?hr(f):(A=Pt(f.g),(f=f.g).g+=A,hn(f));break;case 5:(f=f.g).g+=4,hn(f);break;case 3:for(A=f.i;;){if(!Qt(f)){f.j=!0,hi(Error("Unmatched start-group tag: stream EOF"));break}if(4==f.h){f.i!=A&&(f.j=!0,hi(Error("Unmatched end-group tag")));break}hr(f)}break;default:f.j=!0,Ci(f.h,f.l)}}function Hr(f,A,P){var X=f.g.i,se=Pt(f.g),Te=f.g.g+se;if(f.g.i=Te,P(A,f),0!=(P=Te-f.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+se+" bytes, instead read "+(se-P)+" bytes, either the data ended unexpectedly or the message misreported its own length");return f.g.g=Te,f.g.i=X,A}ze.prototype.length=function(){return this.h},ze.prototype.end=function(){var f=this.g,A=this.h;return this.h=0,_e(f,0,A)},Dt.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ur=[];function ri(){this.h=[],this.i=0,this.g=new ze}function sr(f,A){0!==A.length&&(f.h.push(A),f.i+=A.length)}function di(f,A,P){Lt(f.g,8*A+2),Lt(f.g,P.length),sr(f,f.g.end()),sr(f,P)}var qn,pr="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ar(f){return Object.isFrozen(f)||(pr?f[pr]|=1:void 0!==f.g?f.g|=1:Object.defineProperties(f,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),f}function Ai(f){return null!==f&&"object"==typeof f&&f.constructor===Object}function Sr(f,A){if(null!=f)return Array.isArray(f)||Ai(f)?ho(f,A):A(f)}function ho(f,A){if(Array.isArray(f)){for(var P=Array(f.length),X=0;X<f.length;X++)P[X]=Sr(f[X],A);var se;return(A=Array.isArray(f))&&(A=1&(null==(se=pr?f[pr]:f.g)?0:se)),A&&ar(P),P}for(P in se={},f)se[P]=Sr(f[P],A);return se}function Qr(f){return f=function gr(f){switch(typeof f){case"number":return isFinite(f)?f:String(f);case"object":if(Ce&&null!=f&&f instanceof Uint8Array)return Hi(f);if(f instanceof xe){if(null==f.g)f="";else{var A=f.g;A=null==A||"string"==typeof A?A:Ce&&A instanceof Uint8Array?Hi(A):null,f=f.g=A}return f}}return f}(f),Array.isArray(f)?ho(f,Qr):f}function Un(f,A,P){var X=qn;if(qn=null,f||(f=X),X=this.constructor.ha,f||(f=X?[X]:[]),this.i=(X?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=f,f=(X=this.u.length)-1,X&&Ai(X=this.u[f])?(this.j=f-this.i,this.h=X):void 0!==A&&-1<A?(this.j=Math.max(A,f+1-this.i),this.h=null):this.j=Number.MAX_VALUE,P)for(A=0;A<P.length;A++)(f=P[A])<this.j?(X=this.u[f+=this.i])?Array.isArray(X)&&ar(X):this.u[f]=Dr:(Mi(this),(X=this.h[f])?Array.isArray(X)&&ar(X):this.h[f]=Dr)}var Dr=Object.freeze(ar([]));function Mi(f){var A=f.j+f.i;f.u[A]||(f.h=f.u[A]={})}function wr(f,A,P){return-1===A?null:void 0!==P&&P||A>=f.j?f.h?f.h[A]:void 0:f.u[A+f.i]}function kr(f,A,P){var X=wr(f,A,P=void 0!==P&&P);return null==X&&(X=Dr),X===Dr&&zn(f,A,X=ar(X.slice()),P),X}function Vi(f,A){var P=kr(f,A);if(f.l||(f.l={}),!f.l[A]){for(var X=0;X<P.length;X++)P[X]=+P[X];f.l[A]=!0}return P}function xr(f,A,P){return null==(f=null==(f=wr(f,A))?f:+f)?void 0===P?0:P:f}function zn(f,A,P,X){void 0!==X&&X||A>=f.j?(Mi(f),f.h[A]=P):f.u[A+f.i]=P}function zi(f,A,P,X){P!==X?zn(f,A,P):zn(f,A,void 0,!1)}function Ji(f,A,P){if(-1===P)return null;f.g||(f.g={});var X=f.g[P];if(X)return X;var se=wr(f,P,!1);return null==se?X:(A=new A(se),f.g[P]=A)}function j(f,A,P){f.g||(f.g={});var X=f.g[P];if(!X){var se=kr(f,P,!1);X=[];for(var Te=0;Te<se.length;Te++)X[Te]=new A(se[Te]);f.g[P]=X}return X}function U(f,A,P,X,se){var Te=j(f,X,A);P=P||new X,f=kr(f,A),null!=se?(Te.splice(se,0,P),f.splice(se,0,P.u)):(Te.push(P),f.push(P.u))}function m(f,A){return null==(f=wr(f,A))?0:f}function M(f,A){return null==(f=wr(f,A))?"":f}function q(f,A){if(f=f.m){sr(A,A.g.end());for(var P=0;P<f.length;P++)sr(A,f[P])}}Un.prototype.toJSON=function(){return ho(this.u,Qr)},Un.prototype.toString=function(){return this.u.toString()};var Ie=Symbol();function qe(f,A,P){return f[Ie]||(f[Ie]=function(X,se){return A(X,se,P)})}function Xt(f){var A=f[Ie];if(!A){var P=f[Vn]||(f[Vn]=f());f[Ie]=A=function(X,se){return mn(X,se,P)}}return A}function Ln(f){var A=function rn(f){var A=f.da;if(A)return Xt(A);if(A=f.ia){var P=f.Y;return delete f.Y,qe(f.W.g,A,P)}}(f),P=f.W,X=f.ea;return A?function(se,Te){return X(se,Te,P,A)}:function(se,Te){return X(se,Te,P)}}function Or(f){var A=f[0];switch(f.length){case 2:var P=f[1];return function(cn,Tn,Cn){return A(cn,Tn,Cn,P)};case 3:var X=f[1],se=Xt(f[2]);return function(cn,Tn,Cn){return A(cn,Tn,Cn,X,se)};case 4:var Te=f[1],Me=f[3],Je=Xt(f[2]);return function(cn,Tn,Cn){return A(cn,Tn,Cn,Te,Je,Me)};case 5:var st=f[1],St=qe(st,f[3],f[4]);return function(cn,Tn,Cn){return A(cn,Tn,Cn,st,St)};case 6:var Ct=f[1],Kt=f[5],an=qe(Ct,f[3],f[4]);return function(cn,Tn,Cn){return A(cn,Tn,Cn,Ct,an,Kt)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+f.length)}}var Vn=Symbol();function mn(f,A,P){for(;Qt(A)&&4!=A.h;){var X=A.i,se=P[X];if(se)Array.isArray(se)&&(se=P[X]=Or(se));else{var Te=P[0];Te&&(Te=Te[X])&&(se=P[X]=Ln(Te))}se&&se(A,f,X)||(X=f,Te=(se=A).l,hr(se),se.O||(se=_e(se.g.h,Te,se.g.g),(Te=X.m)?Te.push(se):X.m=[se]))}return f}function ir(f,A){var P=new ri;if(A(f,P),0===(f=P.i+P.g.length()))P=new Uint8Array(0);else{f=new Uint8Array(f);for(var X=P.h,se=X.length,Te=A=0;Te<se;Te++){var Me=X[Te];0!==Me.length&&(f.set(Me,A),A+=Me.length)}0!==(se=(X=P.g).h)&&(f.set(X.g.subarray(0,se),A),X.h=0),P.h=[f],P=f}return P}function Nr(f,A,P){if(ur.length){var X=ur.pop();f&&(mt(X.g,f),X.i=-1,X.h=-1),f=X}else f=new Dt(f);try{return mn(new A,f,P[Vn]||(P[Vn]=P()))}finally{(A=f.g).h=null,A.l=0,A.i=0,A.g=0,A.j=!1,A.v=!1,f.i=-1,f.h=-1,f.j=!1,100>ur.length&&ur.push(f)}}function oi(f,A,P){if(null!=(A=wr(A,P))){Lt(f.g,8*P+5),f=f.g;var X=A;0===(X=(P=0>X?1:0)?-X:X)?ot=0<1/X?0:2147483648:isNaN(X)?ot=2147483647:34028234663852886e22<X?ot=(P<<31|2139095040)>>>0:11754943508222875e-54>X?(X=Math.round(X/Math.pow(2,-149)),ot=(P<<31|X)>>>0):(A=Math.floor(Math.log(X)/Math.LN2),X*=Math.pow(2,-A),16777216<=(X=Math.round(8388608*X))&&++A,ot=(P<<31|A+127<<23|8388607&X)>>>0),Ze(f,(P=ot)>>>0&255),Ze(f,P>>>8&255),Ze(f,P>>>16&255),Ze(f,P>>>24&255)}}function to(f,A,P){if(1!==f.h)return!1;var X=f.g;f=Ee(X);var se=Ee(X);X=2*(se>>31)+1;var Te=se>>>20&2047;return f=4294967296*(1048575&se)+f,zi(A,P,2047==Te?f?NaN:1/0*X:0==Te?X*Math.pow(2,-1074)*f:X*Math.pow(2,Te-1075)*(f+4503599627370496),0),!0}function Vr(f,A,P){return 5===f.h&&(zn(A,P,f.g.m()),!0)}function no(f,A,P){if(5!==f.h&&2!==f.h)return!1;if(A=kr(A,P),2==f.h){P=tn.prototype.m;var X=Pt(f.g);for(X=f.g.g+X;f.g.g<X;)A.push(P.call(f.g))}else A.push(f.g.m());return!0}function po(f,A,P){return 5===f.h&&(zi(A,P,f=f.g.m(),0),!0)}function Do(f,A,P){return 0===f.h&&(zn(A,P,Gt(f.g)),!0)}function ji(f,A,P){return 0===f.h&&(zn(A,P,Pt(f.g)),!0)}function Ki(f,A,P){return 0===f.h&&(zi(A,P,f=Pt(f.g),0),!0)}function is(f,A,P){return 0===f.h&&(zi(A,P,f=!!Pt(f.g),!1),!0)}function os(f,A,P){if(2!==f.h)return!1;var Te,X=Pt(f.g),se=(f=f.g).g;if(f.g+=X,hn(f),f=f.h,yo)(Te=qi)||(Te=qi=new TextDecoder("utf-8",{fatal:!1})),Te=Te.decode(f.subarray(se,se+X));else{X=se+X;for(var st,St,Ct,Me=[],Je=null;se<X;)128>(st=f[se++])?Me.push(st):224>st?se>=X?Me.push(65533):(St=f[se++],194>st||128!=(192&St)?(se--,Me.push(65533)):Me.push((31&st)<<6|63&St)):240>st?se>=X-1?Me.push(65533):128!=(192&(St=f[se++]))||224===st&&160>St||237===st&&160<=St||128!=(192&(Te=f[se++]))?(se--,Me.push(65533)):Me.push((15&st)<<12|(63&St)<<6|63&Te):244>=st?se>=X-2?Me.push(65533):128!=(192&(St=f[se++]))||St-144+(st<<28)>>30!=0||128!=(192&(Te=f[se++]))||128!=(192&(Ct=f[se++]))?(se--,Me.push(65533)):(st=(7&st)<<18|(63&St)<<12|(63&Te)<<6|63&Ct,Me.push(55296+((st-=65536)>>10&1023),56320+(1023&st))):Me.push(65533),8192<=Me.length&&(Je=ro(Je,Me),Me.length=0);Te=ro(Je,Me)}return zn(A,P,Te),!0}function ko(f,A,P,X,se){return 2===f.h&&(f=Hr(f,new X,se),A.g||(A.g={}),X=f&&f.u,A.g[P]=f,zn(A,P,X,!1),!0)}function Wo(f,A,P,X,se){return 2===f.h&&(U(A,P,f=Hr(f,new X,se),X,void 0),!0)}function B(f,A,P){return 0===f.h&&(zn(A,P,Gt(f.g)),!0)}function ee(f){Un.call(this,f)}function te(){return{1:ji,2:Vr,3:os,4:os}}function Be(f,A){var P=wr(f,1);if(null!=P&&null!=P){Lt(A.g,8);var X=A.g;if(0<=P)Lt(X,P);else{for(var se=0;9>se;se++)Ze(X,127&P|128),P>>=7;Ze(X,1)}}oi(A,f,2),null!=(X=wr(f,3))&&di(A,3,Ro(X)),null!=(X=wr(f,4))&&di(A,4,Ro(X)),q(f,A)}function vt(f){Un.call(this,f,-1,gt)}function zt(){return{1:[Wo,ee,te]}}$n(ee,Un),$n(vt,Un),vt.prototype.addClassification=function(f,A){return U(this,1,f,ee,A),this};var gt=[1];function Ft(f){Un.call(this,f)}function dn(){return{1:Vr,2:Vr,3:Vr,4:Vr,5:Vr}}function Dn(f,A){oi(A,f,1),oi(A,f,2),oi(A,f,3),oi(A,f,4),oi(A,f,5),q(f,A)}function cr(f){Un.call(this,f,-1,Rr)}function er(){return{1:[Wo,Ft,dn]}}$n(Ft,Un),$n(cr,Un);var Rr=[1];function nr(f){Un.call(this,f)}function Bn(){return{1:Vr,2:Vr,3:Vr,4:Vr,5:Vr,6:Do}}function or(f,A){oi(A,f,1),oi(A,f,2),oi(A,f,3),oi(A,f,4),oi(A,f,5);var P=wr(f,6);if(null!=P&&null!=P){Lt(A.g,48);var X=A.g,se=P;P=0>se;var Te=(se=Math.abs(se))>>>0;for(se=Math.floor((se-Te)/4294967296),se>>>=0,P&&(se=~se>>>0,4294967295<(Te=1+(~Te>>>0))&&(Te=0,4294967295<++se&&(se=0))),P=ot=Te,Te=se;0<Te||127<P;)Ze(X,127&P|128),P=(P>>>7|Te<<25)>>>0,Te>>>=7;Ze(X,P)}q(f,A)}function Ar(f){Un.call(this,f,-1,wi)}function jr(){return{1:B,2:B,3:no,4:[ko,_r,si],5:ji,6:ji,7:no,8:no,9:no}}function _r(f){Un.call(this,f)}function si(){return{1:Vr,2:Vr,3:Vr}}$n(nr,Un),$n(Ar,Un),$n(_r,Un);var wi=[3,7,8,9];function V(f){Un.call(this,f)}function H(){return{1:po,2:po,3:po}}function K(f){Un.call(this,f)}function Ne(){return{1:po,2:po,3:po}}function $e(f){Un.call(this,f)}function bt(){return{1:Ki,2:[ko,K,Ne],3:[ko,V,H],4:is}}function et(f){Un.call(this,f,-1,_t)}function xt(){return{1:Ki,2:[Wo,$e,bt],3:po,4:no,5:no,6:no}}$n(V,Un),$n(K,Un),$n($e,Un),$n(et,Un);var _t=[2,4,5,6];function x(f){Un.call(this,f,-1,re)}function $(){return{1:Ki,2:[Wo,et,xt],3:[ko,Ar,jr],4:to,5:no,6:no}}$n(x,Un);var re=[2,5,6];function Se(f,A,P){if(P=f.createShader(0===P?f.VERTEX_SHADER:f.FRAGMENT_SHADER),f.shaderSource(P,A),f.compileShader(P),!f.getShaderParameter(P,f.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+f.getShaderInfoLog(P));return P}function je(f){return j(f,ee,1).map(function(A){return{index:m(A,1),$:xr(A,2),label:null!=wr(A,3)?M(A,3):void 0,displayName:null!=wr(A,4)?M(A,4):void 0}})}function tt(f){return{x:xr(f,1),y:xr(f,2),z:xr(f,3),visibility:null!=wr(f,4)?xr(f,4):void 0}}function Ke(f,A){this.h=f,this.g=A,this.l=0}function Mt(f,A,P){return function Tt(f,A){var P=f.g;if(void 0===f.m){var X=Se(P,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),se=Se(P,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),Te=P.createProgram();if(P.attachShader(Te,X),P.attachShader(Te,se),P.linkProgram(Te),!P.getProgramParameter(Te,P.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+P.getProgramInfoLog(Te));X=f.m=Te,P.useProgram(X),se=P.getUniformLocation(X,"sampler0"),f.j={J:P.getAttribLocation(X,"aVertex"),I:P.getAttribLocation(X,"aTex"),ja:se},f.s=P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,f.s),P.enableVertexAttribArray(f.j.J),P.vertexAttribPointer(f.j.J,2,P.FLOAT,!1,0,0),P.bufferData(P.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),P.STATIC_DRAW),P.bindBuffer(P.ARRAY_BUFFER,null),f.o=P.createBuffer(),P.bindBuffer(P.ARRAY_BUFFER,f.o),P.enableVertexAttribArray(f.j.I),P.vertexAttribPointer(f.j.I,2,P.FLOAT,!1,0,0),P.bufferData(P.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),P.STATIC_DRAW),P.bindBuffer(P.ARRAY_BUFFER,null),P.uniform1i(se,0)}X=f.j,P.useProgram(f.m),P.canvas.width=A.width,P.canvas.height=A.height,P.viewport(0,0,A.width,A.height),P.activeTexture(P.TEXTURE0),f.h.bindTexture2d(A.glName),P.enableVertexAttribArray(X.J),P.bindBuffer(P.ARRAY_BUFFER,f.s),P.vertexAttribPointer(X.J,2,P.FLOAT,!1,0,0),P.enableVertexAttribArray(X.I),P.bindBuffer(P.ARRAY_BUFFER,f.o),P.vertexAttribPointer(X.I,2,P.FLOAT,!1,0,0),P.bindFramebuffer(P.DRAW_FRAMEBUFFER?P.DRAW_FRAMEBUFFER:P.FRAMEBUFFER,null),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),P.colorMask(!0,!0,!0,!0),P.drawArrays(P.TRIANGLE_FAN,0,4),P.disableVertexAttribArray(X.J),P.disableVertexAttribArray(X.I),P.bindBuffer(P.ARRAY_BUFFER,null),f.h.bindTexture2d(0)}(f,A),"function"==typeof f.g.canvas.transferToImageBitmap?n.resolve(f.g.canvas.transferToImageBitmap()):P?n.resolve(f.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(f.g.canvas):(void 0===f.i&&(f.i=document.createElement("canvas")),new n(function(X){f.i.height=f.g.canvas.height,f.i.width=f.g.canvas.width,f.i.getContext("2d",{}).drawImage(f.g.canvas,0,0,f.g.canvas.width,f.g.canvas.height),X(f.i)}))}function fn(f){this.g=f}var An=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function lr(f,A){return A+f}function kn(f,A){window[f]=A}function jn(f){if(this.g=f,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=n.resolve(),this.R="",this.C={},this.locateFile=f&&f.locateFile||lr,"object"==typeof window)var A=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");A=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.T=A,f.options)for(var P=(A=Qe(Object.keys(f.options))).next();!P.done;P=A.next()){var X=f.options[P=P.value].default;void 0!==X&&(this.j[P]="function"==typeof X?X():X)}}function z(f,A){var P,X;return pn(function(se){return A in f.G?se.return(f.G[A]):(P=f.locateFile(A,""),X=fetch(P).then(function(Te){return Te.arrayBuffer()}),f.G[A]=X,se.return(X))})}function Ge(f,A){for(var P=A.name||"$",X=[].concat(Bt(A.wants)),se=new f.h.StringList,Te=Qe(A.wants),Me=Te.next();!Me.done;Me=Te.next())se.push_back(Me.value);Te=f.h.PacketListener.implement({onResults:function(Je){for(var st={},St=0;St<A.wants.length;++St)st[X[St]]=Je.get(St);var Ct=f.listeners[P];Ct&&(f.D=function ie(f,A,P){var X,se,Te,Me,st,St,Ct,Kt,an,cn,Cn,vr;return pn(function(Zr){switch(Zr.g){case 1:if(!P)return Zr.return(A);for(X={},se=0,Te=Qe(Object.keys(P)),Me=Te.next();!Me.done;Me=Te.next())"string"!=typeof(st=P[Me.value])&&"texture"===st.type&&void 0!==A[st.stream]&&++se;1<se&&(f.H=!1),St=Qe(Object.keys(P)),Me=St.next();case 2:if(Me.done){Zr.g=4;break}if("string"==typeof(Kt=P[Ct=Me.value]))return Cn=X,vr=Ct,Et(Zr,function fe(f,A,P){var X;return pn(function(se){return"number"==typeof P||P instanceof Uint8Array||P instanceof f.h.Uint8BlobList?se.return(P):P instanceof f.h.Texture2dDataOut?((X=f.s[A])||(X=new Ke(f.h,f.F),f.s[A]=X),se.return(Mt(X,P,f.H))):se.return(void 0)})}(f,Ct,A[Kt]),14);if(an=A[Kt.stream],"detection_list"===Kt.type){if(an){for(var Fr=an.getRectList(),Ni=an.getLandmarksList(),Oo=an.getClassificationsList(),Li=[],Ho=0;Ho<Fr.size();++Ho){var ls=Nr(Fr.get(Ho),nr,Bn);ls={U:{aa:xr(ls,1),ba:xr(ls,2),height:xr(ls,3),width:xr(ls,4),rotation:xr(ls,5,0),Z:m(ls,6)},P:j(Nr(Ni.get(Ho),cr,er),Ft,1).map(tt),N:je(Nr(Oo.get(Ho),vt,zt))},Li.push(ls)}Fr=Li}else Fr=[];X[Ct]=Fr,Zr.g=7;break}if("proto_list"===Kt.type){if(an){for(Fr=Array(an.size()),Ni=0;Ni<an.size();Ni++)Fr[Ni]=an.get(Ni);an.delete()}else Fr=[];X[Ct]=Fr,Zr.g=7;break}if(void 0===an){Zr.g=3;break}if("float_list"===Kt.type){X[Ct]=an,Zr.g=7;break}if("proto"===Kt.type){X[Ct]=an,Zr.g=7;break}if("texture"!==Kt.type)throw Error("Unknown output config type: '"+Kt.type+"'");return(cn=f.s[Ct])||(cn=new Ke(f.h,f.F),f.s[Ct]=cn),Et(Zr,Mt(cn,an,f.H),13);case 13:X[Ct]=Zr.h;case 7:Kt.transform&&X[Ct]&&(X[Ct]=Kt.transform(X[Ct])),Zr.g=3;break;case 14:Cn[vr]=Zr.h;case 3:Me=St.next(),Zr.g=2;break;case 4:return Zr.return(X)}})}(f,st,A.outs).then(function(Kt){Kt=Ct(Kt);for(var an=0;an<A.wants.length;++an){var cn=st[X[an]];"object"==typeof cn&&cn.hasOwnProperty&&cn.hasOwnProperty("delete")&&cn.delete()}Kt&&(f.D=Kt)}))}}),f.i.attachMultiListener(se,Te),se.delete()}function S(f){var A=m(f,1),P=Ji(f,V,3);return{id:A,point2d:P={x:xr(P,1),y:xr(P,2),depth:xr(P,3)},point3d:{x:xr(f=Ji(f,K,2),1),y:xr(f,2),z:xr(f,3)}}}function F(f){var A=Nr(f,x,$);f=[],A=j(A,et,2);for(var P=0;P<A.length;P++)f.push({id:m(A[P],1),keypoints:j(A[P],$e,2).map(S),visibility:xr(A[P],3),scale:Vi(A[P],6),translation:Vi(A[P],5),rotation:Vi(A[P],4)});return f}function g(f){switch(f){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}(ue=jn.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){var f=this;return pn(function(A){f.i&&(f.i.reset(),f.m={},f.s={}),A.g=0})},ue.setOptions=function(f,A){var P=this;if(A=A||this.g.options){for(var X=[],se=[],Te={},Me=Qe(Object.keys(f)),Je=Me.next();!Je.done;Te={L:Te.L,M:Te.M},Je=Me.next()){var st=Je.value;st in this.j&&this.j[st]===f[st]||(this.j[st]=f[st],void 0!==(Je=A[st])&&(Je.onChange&&(Te.L=Je.onChange,Te.M=f[st],X.push(function(St){return function(){return pn(function(Kt){if(1==Kt.g)return Et(Kt,St.L(St.M),2);!0===Kt.h&&(P.o=!0),Kt.g=0})}}(Te))),Je.graphOptionXref&&(st={valueNumber:1===Je.type?f[st]:0,valueBoolean:0===Je.type&&f[st],valueString:2===Je.type?f[st]:""},Je=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Je.graphOptionXref),st),se.push(Je))))}(0!==X.length||0!==se.length)&&(this.o=!0,this.B=(void 0===this.B?[]:this.B).concat(se),this.A=(void 0===this.A?[]:this.A).concat(X))}},ue.initialize=function(){var f=this;return pn(function(A){return 1==A.g?Et(A,function Xn(f){var A,P,X,se,Te,Me,Je,st,St,Ct,Kt;return pn(function(an){switch(an.g){case 1:return f.S?(A=void 0===f.g.files?[]:"function"==typeof f.g.files?f.g.files(f.j):f.g.files,Et(an,function wn(){return pn(function(f){switch(f.g){case 1:return f.m=2,Et(f,WebAssembly.instantiate(An),4);case 4:f.g=3,f.m=0;break;case 2:return f.m=0,f.j=null,f.return(!1);case 3:return f.return(!0)}})}(),2)):an.return();case 2:if(P=an.h,"object"==typeof window)return kn("createMediapipeSolutionsWasm",{locateFile:f.locateFile}),kn("createMediapipeSolutionsPackedAssets",{locateFile:f.locateFile}),Me=A.filter(function(cn){return void 0!==cn.data}),Je=A.filter(function(cn){return void 0===cn.data}),st=n.all(Me.map(function(cn){var Tn=z(f,cn.url);if(void 0!==cn.path){var Cn=cn.path;Tn=Tn.then(function(vr){return f.overrideFile(Cn,vr),n.resolve(vr)})}return Tn})),St=n.all(Je.map(function(cn){return void 0===cn.simd||cn.simd&&P||!cn.simd&&!P?function sn(f){var A=document.createElement("script");return A.setAttribute("src",f),A.setAttribute("crossorigin","anonymous"),new n(function(P){A.addEventListener("load",function(){P()},!1),A.addEventListener("error",function(){P()},!1),document.body.appendChild(A)})}(f.locateFile(cn.url,f.T)):n.resolve()})).then(function(){var cn,Tn,Cn;return pn(function(vr){if(1==vr.g)return cn=window.createMediapipeSolutionsWasm,Tn=window.createMediapipeSolutionsPackedAssets,Cn=f,Et(vr,cn(Tn),2);Cn.h=vr.h,vr.g=0})}),Ct=pn(function(cn){return f.g.graph&&f.g.graph.url?cn=Et(cn,z(f,f.g.graph.url),0):(cn.g=0,cn=void 0),cn}),Et(an,n.all([St,st,Ct]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return X=A.filter(function(cn){return void 0===cn.simd||cn.simd&&P||!cn.simd&&!P}).map(function(cn){return f.locateFile(cn.url,f.T)}),importScripts.apply(null,Bt(X)),se=f,Et(an,createMediapipeSolutionsWasm(Module),6);case 6:se.h=an.h,f.l=new OffscreenCanvas(1,1),f.h.canvas=f.l,Te=f.h.GL.createContext(f.l,{antialias:!1,alpha:!1,ga:"undefined"!=typeof WebGL2RenderingContext?2:1}),f.h.GL.makeContextCurrent(Te),an.g=4;break;case 7:if(f.l=document.createElement("canvas"),!(Kt=f.l.getContext("webgl2",{}))&&!(Kt=f.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),an.return();f.F=Kt,f.h.canvas=f.l,f.h.createContext(f.l,!0,!0,{});case 4:f.i=new f.h.SolutionWasm,f.S=!1,an.g=0}})}(f),2):3!=A.g?Et(A,function Jn(f){var P,X,se,Te,Me,st;return pn(function(St){if(1==St.g)return f.g.graph&&f.g.graph.url&&f.R===f.g.graph.url?St.return():(f.o=!0,f.g.graph&&f.g.graph.url?(f.R=f.g.graph.url,Et(St,z(f,f.g.graph.url),3)):void(St.g=2));for(2!=St.g&&f.i.loadGraph(St.h),P=Qe(Object.keys(f.C)),X=P.next();!X.done;X=P.next())f.i.overrideFile(se=X.value,f.C[se]);if(f.C={},f.g.listeners)for(Te=Qe(f.g.listeners),Me=Te.next();!Me.done;Me=Te.next())Ge(f,Me.value);st=f.j,f.j={},f.setOptions(st),St.g=0})}(f),3):Et(A,function I(f){var A,P,se,Te,Me;return pn(function(st){switch(st.g){case 1:if(!f.o)return st.return();if(!f.A){st.g=2;break}A=Qe(f.A),P=A.next();case 3:if(P.done){st.g=5;break}return Et(st,(0,P.value)(),4);case 4:P=A.next(),st.g=3;break;case 5:f.A=void 0;case 2:if(f.B){for(se=new f.h.GraphOptionChangeRequestList,Te=Qe(f.B),Me=Te.next();!Me.done;Me=Te.next())se.push_back(Me.value);f.i.changeOptions(se),se.delete(),f.B=void 0}f.o=!1,st.g=0}})}(f),0)})},ue.overrideFile=function(f,A){this.i?this.i.overrideFile(f,A):this.C[f]=A},ue.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(f,A){var X,se,Te,Me,Je,st,St,Ct,Kt,P=this;return pn(function(an){switch(an.g){case 1:return P.g.inputs?(X=1e3*(null==A?performance.now():A),Et(an,P.D,2)):an.return();case 2:return Et(an,P.initialize(),3);case 3:for(se=new P.h.PacketDataList,Te=Qe(Object.keys(f)),Me=Te.next();!Me.done;Me=Te.next())if(st=P.g.inputs[Je=Me.value]){e:{var cn=f[Je];switch(st.type){case"video":var Tn=P.m[st.stream];if(Tn||(Tn=new Ke(P.h,P.F),P.m[st.stream]=Tn),0===Tn.l&&(Tn.l=Tn.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&cn instanceof HTMLVideoElement)var Cn=cn.videoWidth,vr=cn.videoHeight;else"undefined"!=typeof HTMLImageElement&&cn instanceof HTMLImageElement?(Cn=cn.naturalWidth,vr=cn.naturalHeight):(Cn=cn.width,vr=cn.height);vr={glName:Tn.l,width:Cn,height:vr},(Cn=Tn.g).canvas.width=vr.width,Cn.canvas.height=vr.height,Cn.activeTexture(Cn.TEXTURE0),Tn.h.bindTexture2d(Tn.l),Cn.texImage2D(Cn.TEXTURE_2D,0,Cn.RGBA,Cn.RGBA,Cn.UNSIGNED_BYTE,cn),Tn.h.bindTexture2d(0),Tn=vr;break e;case"detections":for((Tn=P.m[st.stream])||(Tn=new fn(P.h),P.m[st.stream]=Tn),Tn.data||(Tn.data=new Tn.g.DetectionListData),Tn.data.reset(cn.length),vr=0;vr<cn.length;++vr){var Zr=Tn.data,Fr=Zr.setBoundingBox,Ni=vr,Oo=(Cn=cn[vr]).U,Li=new nr;if(zn(Li,1,Oo.aa),zn(Li,2,Oo.ba),zn(Li,3,Oo.height),zn(Li,4,Oo.width),zn(Li,5,Oo.rotation),zn(Li,6,Oo.Z),Oo=ir(Li,or),Fr.call(Zr,Ni,Oo),Cn.P)for(Zr=0;Zr<Cn.P.length;++Zr){var Ho=!!(Li=Cn.P[Zr]).visibility;Ni=(Fr=Tn.data).addNormalizedLandmark,Oo=vr,Li=Object.assign(Object.assign({},Li),{visibility:Ho?Li.visibility:0}),zn(Ho=new Ft,1,Li.x),zn(Ho,2,Li.y),zn(Ho,3,Li.z),Li.visibility&&zn(Ho,4,Li.visibility),Li=ir(Ho,Dn),Ni.call(Fr,Oo,Li)}if(Cn.N)for(Zr=0;Zr<Cn.N.length;++Zr)Ni=(Fr=Tn.data).addClassification,Oo=vr,Li=Cn.N[Zr],zn(Ho=new ee,2,Li.$),Li.index&&zn(Ho,1,Li.index),Li.label&&zn(Ho,3,Li.label),Li.displayName&&zn(Ho,4,Li.displayName),Li=ir(Ho,Be),Ni.call(Fr,Oo,Li)}Tn=Tn.data;break e;default:Tn={}}}switch(St=Tn,Ct=st.stream,st.type){case"video":se.pushTexture2d(Object.assign(Object.assign({},St),{stream:Ct,timestamp:X}));break;case"detections":(Kt=St).stream=Ct,Kt.timestamp=X,se.pushDetectionList(Kt);break;default:throw Error("Unknown input config type: '"+st.type+"'")}}return P.i.send(se),Et(an,P.D,4);case 4:se.delete(),an.g=0}})},ue.onResults=function(f,A){this.listeners[A||"$"]=f},Yn("Solution",jn),Yn("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});var R={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function G(f){var A=this;this.g=new jn({locateFile:(f=f||{}).locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:F}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"==typeof window&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(P){var X,se,Te;return pn(function(Je){return 1==Je.g?(A.g.setOptions({allowedLabels:g(X=P)},R),se=function Y(f){switch(f){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}(X),Te="object_detection_3d.tflite",Et(Je,z(A.g,se),2)):(A.g.overrideFile(Te,Je.h),Je.return(!0))})}},focalLength:{default:[1,1],onChange:function(P){var X;return pn(function(se){return A.h=X=P,A.g.setOptions({focalX:X[0],focalY:X[1]},R),se.return(!0)})}},principalPoint:{default:[0,0],onChange:function(P){var X;return pn(function(se){return A.i=X=P,A.g.setOptions({principalX:X[0],principalY:X[1]},R),se.return(!0)})}},imageSize:{onChange:function(P){var X,se;return pn(function(Je){if(void 0===A.h||void 0===A.i)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),Je.return();A.setOptions({focalLength:[A.h[0]/(se=[(X=P)[0]/2,X[1]/2])[0],A.h[1]/se[1]],principalPoint:[A.i[0]/se[0],A.i[1]/se[1]]}),Je.g=0})}}}})}(ue=G.prototype).close=function(){return this.g.close(),n.resolve()},ue.onResults=function(f){this.g.onResults(f)},ue.initialize=function(){var f=this;return pn(function(A){return Et(A,f.g.initialize(),0)})},ue.reset=function(){this.g.reset()},ue.send=function(f){var A=this;return pn(function(P){return Et(P,A.g.send(f),0)})},ue.setOptions=function(f){this.g.setOptions(f)},Yn("Objectron",G),Yn("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),Yn("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),Yn("VERSION","0.4.1636596145")}).call(_);const Pe={};(function(){var ue;function J(x){var $=0;return function(){return $<x.length?{done:!1,value:x[$++]}:{done:!0}}}var le="function"==typeof Object.defineProperties?Object.defineProperty:function(x,$,re){return x==Array.prototype||x==Object.prototype||(x[$]=re.value),x},Re=function we(x){x=["object"==typeof globalThis&&globalThis,x,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global)];for(var $=0;$<x.length;++$){var re=x[$];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}(this);function rt(x,$){if($)e:{var re=Re;x=x.split(".");for(var Se=0;Se<x.length-1;Se++){var je=x[Se];if(!(je in re))break e;re=re[je]}($=$(Se=re[x=x[x.length-1]]))!=Se&&null!=$&&le(re,x,{configurable:!0,writable:!0,value:$})}}function yt(x){return(x={next:x})[Symbol.iterator]=function(){return this},x}function Qe(x){var $="undefined"!=typeof Symbol&&Symbol.iterator&&x[Symbol.iterator];return $?$.call(x):{next:J(x)}}function Bt(x){if(!(x instanceof Array)){x=Qe(x);for(var $,re=[];!($=x.next()).done;)re.push($.value);x=re}return x}rt("Symbol",function(x){function re(tt,Ke){this.g=tt,le(this,"description",{configurable:!0,writable:!0,value:Ke})}if(x)return x;re.prototype.toString=function(){return this.g};var Se="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",je=0;return function $(tt){if(this instanceof $)throw new TypeError("Symbol is not a constructor");return new re(Se+(tt||"")+"_"+je++,tt)}}),rt("Symbol.iterator",function(x){if(x)return x;x=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),re=0;re<$.length;re++){var Se=Re[$[re]];"function"==typeof Se&&"function"!=typeof Se.prototype[x]&&le(Se.prototype,x,{configurable:!0,writable:!0,value:function(){return yt(J(this))}})}return x});var Ut,br="function"==typeof Object.create?Object.create:function(x){function $(){}return $.prototype=x,new $};if("function"==typeof Object.setPrototypeOf)Ut=Object.setPrototypeOf;else{var fr;e:{var ci={};try{ci.__proto__={a:!0},fr=ci.a;break e}catch(x){}fr=!1}Ut=fr?function(x,$){if(x.__proto__=$,x.__proto__!==$)throw new TypeError(x+" is not extensible");return x}:null}var Ur=Ut;function $n(x,$){if(x.prototype=br($.prototype),x.prototype.constructor=x,Ur)Ur(x,$);else for(var re in $)if("prototype"!=re)if(Object.defineProperties){var Se=Object.getOwnPropertyDescriptor($,re);Se&&Object.defineProperty(x,re,Se)}else x[re]=$[re];x.ea=$.prototype}function Pr(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Kr(x){if(x.l)throw new TypeError("Generator is already running");x.l=!0}function ii(x,$){x.j={U:$,V:!0},x.g=x.m||x.s}function Et(x,$,re){return x.g=re,{value:$}}function fo(x){this.g=new Pr,this.h=x}function Ii(x,$,re,Se){try{var je=$.call(x.g.i,re);if(!(je instanceof Object))throw new TypeError("Iterator result "+je+" is not an object");if(!je.done)return x.g.l=!1,je;var tt=je.value}catch(Ke){return x.g.i=null,ii(x.g,Ke),_n(x)}return x.g.i=null,Se.call(x.g,tt),_n(x)}function _n(x){for(;x.g.g;)try{var $=x.h(x.g);if($)return x.g.l=!1,{value:$.value,done:!1}}catch(re){x.g.h=void 0,ii(x.g,re)}if(x.g.l=!1,x.g.j){if($=x.g.j,x.g.j=null,$.V)throw $.U;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function Pi(x){this.next=function($){return Kr(x.g),x.g.i?$=Ii(x,x.g.i.next,$,x.g.o):(x.g.o($),$=_n(x)),$},this.throw=function($){return Kr(x.g),x.g.i?$=Ii(x,x.g.i.throw,$,x.g.o):(ii(x.g,$),$=_n(x)),$},this.return=function($){return function Go(x,$){Kr(x.g);var re=x.g.i;return re?Ii(x,"return"in re?re.return:function(Se){return{value:Se,done:!0}},$,x.g.return):(x.g.return($),_n(x))}(x,$)},this[Symbol.iterator]=function(){return this}}function pn(x){return function Wr(x){function $(Se){return x.next(Se)}function re(Se){return x.throw(Se)}return new n(function(Se,je){!function tt(Ke){Ke.done?Se(Ke.value):n.resolve(Ke.value).then($,re).then(tt,je)}(x.next())})}(new Pi(new fo(x)))}Pr.prototype.o=function(x){this.h=x},Pr.prototype.return=function(x){this.j={return:x},this.g=this.s},rt("Promise",function(x){function $(Ke){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Mt=this.j();try{Ke(Mt.resolve,Mt.reject)}catch(Tt){Mt.reject(Tt)}}function re(){this.g=null}function Se(Ke){return Ke instanceof $?Ke:new $(function(Mt){Mt(Ke)})}if(x)return x;re.prototype.h=function(Ke){if(null==this.g){this.g=[];var Mt=this;this.i(function(){Mt.l()})}this.g.push(Ke)};var je=Re.setTimeout;re.prototype.i=function(Ke){je(Ke,0)},re.prototype.l=function(){for(;this.g&&this.g.length;){var Ke=this.g;this.g=[];for(var Mt=0;Mt<Ke.length;++Mt){var Tt=Ke[Mt];Ke[Mt]=null;try{Tt()}catch(fn){this.j(fn)}}}this.g=null},re.prototype.j=function(Ke){this.i(function(){throw Ke})},$.prototype.j=function(){function Ke(fn){return function(An){Tt||(Tt=!0,fn.call(Mt,An))}}var Mt=this,Tt=!1;return{resolve:Ke(this.C),reject:Ke(this.l)}},$.prototype.C=function(Ke){if(Ke===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ke instanceof $)this.F(Ke);else{e:switch(typeof Ke){case"object":var Mt=null!=Ke;break e;case"function":Mt=!0;break e;default:Mt=!1}Mt?this.v(Ke):this.m(Ke)}},$.prototype.v=function(Ke){var Mt=void 0;try{Mt=Ke.then}catch(Tt){return void this.l(Tt)}"function"==typeof Mt?this.G(Mt,Ke):this.m(Ke)},$.prototype.l=function(Ke){this.s(2,Ke)},$.prototype.m=function(Ke){this.s(1,Ke)},$.prototype.s=function(Ke,Mt){if(0!=this.h)throw Error("Cannot settle("+Ke+", "+Mt+"): Promise already settled in state"+this.h);this.h=Ke,this.i=Mt,2===this.h&&this.D(),this.A()},$.prototype.D=function(){var Ke=this;je(function(){if(Ke.B()){var Mt=Re.console;void 0!==Mt&&Mt.error(Ke.i)}},1)},$.prototype.B=function(){if(this.o)return!1;var Ke=Re.CustomEvent,Mt=Re.Event,Tt=Re.dispatchEvent;return void 0===Tt||("function"==typeof Ke?Ke=new Ke("unhandledrejection",{cancelable:!0}):"function"==typeof Mt?Ke=new Mt("unhandledrejection",{cancelable:!0}):(Ke=Re.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,Ke),Ke.promise=this,Ke.reason=this.i,Tt(Ke))},$.prototype.A=function(){if(null!=this.g){for(var Ke=0;Ke<this.g.length;++Ke)tt.h(this.g[Ke]);this.g=null}};var tt=new re;return $.prototype.F=function(Ke){var Mt=this.j();Ke.J(Mt.resolve,Mt.reject)},$.prototype.G=function(Ke,Mt){var Tt=this.j();try{Ke.call(Mt,Tt.resolve,Tt.reject)}catch(fn){Tt.reject(fn)}},$.prototype.then=function(Ke,Mt){function Tt(kn,sn){return"function"==typeof kn?function(wn){try{fn(kn(wn))}catch(jn){An(jn)}}:sn}var fn,An,lr=new $(function(kn,sn){fn=kn,An=sn});return this.J(Tt(Ke,fn),Tt(Mt,An)),lr},$.prototype.catch=function(Ke){return this.then(void 0,Ke)},$.prototype.J=function(Ke,Mt){function Tt(){switch(fn.h){case 1:Ke(fn.i);break;case 2:Mt(fn.i);break;default:throw Error("Unexpected state: "+fn.h)}}var fn=this;null==this.g?tt.h(Tt):this.g.push(Tt),this.o=!0},$.resolve=Se,$.reject=function(Ke){return new $(function(Mt,Tt){Tt(Ke)})},$.race=function(Ke){return new $(function(Mt,Tt){for(var fn=Qe(Ke),An=fn.next();!An.done;An=fn.next())Se(An.value).J(Mt,Tt)})},$.all=function(Ke){var Mt=Qe(Ke),Tt=Mt.next();return Tt.done?Se([]):new $(function(fn,An){function lr(wn){return function(jn){kn[wn]=jn,0==--sn&&fn(kn)}}var kn=[],sn=0;do{kn.push(void 0),sn++,Se(Tt.value).J(lr(kn.length-1),An),Tt=Mt.next()}while(!Tt.done)})},$});var vo="function"==typeof Object.assign?Object.assign:function(x,$){for(var re=1;re<arguments.length;re++){var Se=arguments[re];if(Se)for(var je in Se)Object.prototype.hasOwnProperty.call(Se,je)&&(x[je]=Se[je])}return x};rt("Object.assign",function(x){return x||vo}),rt("Object.is",function(x){return x||function($,re){return $===re?0!==$||1/$==1/re:$!=$&&re!=re}}),rt("Array.prototype.includes",function(x){return x||function($,re){var Se=this;Se instanceof String&&(Se=String(Se));var je=Se.length;for(0>(re=re||0)&&(re=Math.max(re+je,0));re<je;re++){var tt=Se[re];if(tt===$||Object.is(tt,$))return!0}return!1}}),rt("String.prototype.includes",function(x){return x||function($,re){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf($,re||0)}}),rt("Array.prototype.keys",function(x){return x||function(){return function wo(x,$){x instanceof String&&(x+="");var re=0,Se=!1,je={next:function(){if(!Se&&re<x.length){var tt=re++;return{value:$(tt,x[tt]),done:!1}}return Se=!0,{done:!0,value:void 0}}};return je[Symbol.iterator]=function(){return je},je}(this,function($){return $})}});var ui=this||self;function Yn(x,$){x=x.split(".");var Se,re=ui;x[0]in re||void 0===re.execScript||re.execScript("var "+x[0]);for(;x.length&&(Se=x.shift());)x.length||void 0===$?re=re[Se]&&re[Se]!==Object.prototype[Se]?re[Se]:re[Se]={}:re[Se]=$}function Ci(x){!function hi(x){ui.setTimeout(function(){throw x},0)}(x)}function _i(x,$){Ci(Error("Invalid wire type: "+x+" (at position "+$+")"))}function ro(){Ci(Error("Failed to read varint, encoding is invalid."))}function qi(x,$){return $=String.fromCharCode.apply(null,$),null==x?$:x+$}var yo,Yi,Ui="undefined"!=typeof TextDecoder,Ro="undefined"!=typeof TextEncoder;function io(x){if(Ro)x=(Yi||(Yi=new TextEncoder)).encode(x);else{var $=void 0;$=void 0!==$&&$;for(var re=0,Se=new Uint8Array(3*x.length),je=0;je<x.length;je++){var tt=x.charCodeAt(je);if(128>tt)Se[re++]=tt;else{if(2048>tt)Se[re++]=tt>>6|192;else{if(55296<=tt&&57343>=tt){if(56319>=tt&&je<x.length){var Ke=x.charCodeAt(++je);if(56320<=Ke&&57343>=Ke){Se[re++]=(tt=1024*(tt-55296)+Ke-56320+65536)>>18|240,Se[re++]=tt>>12&63|128,Se[re++]=tt>>6&63|128,Se[re++]=63&tt|128;continue}je--}if($)throw Error("Found an unpaired surrogate");tt=65533}Se[re++]=tt>>12|224,Se[re++]=tt>>6&63|128}Se[re++]=63&tt|128}}x=Se.subarray(0,re)}return x}var Xi={},Hi=null;function oo(x){var $;void 0===$&&($=0),Ce(),$=Xi[$];for(var re=Array(Math.floor(x.length/3)),Se=$[64]||"",je=0,tt=0;je<x.length-2;je+=3){var Ke=x[je],Mt=x[je+1],Tt=x[je+2],fn=$[Ke>>2];re[tt++]=fn+(Ke=$[(3&Ke)<<4|Mt>>4])+(Mt=$[(15&Mt)<<2|Tt>>6])+(Tt=$[63&Tt])}switch(fn=0,Tt=Se,x.length-je){case 2:Tt=$[(15&(fn=x[je+1]))<<2]||Se;case 1:re[tt]=$[(x=x[je])>>2]+$[(3&x)<<4|fn>>4]+Tt+Se}return re.join("")}function eo(x){var $=x.length,re=3*$/4;re%3?re=Math.floor(re):-1!="=.".indexOf(x[$-1])&&(re=-1!="=.".indexOf(x[$-2])?re-2:re-1);var Se=new Uint8Array(re),je=0;return function ni(x,$){function re(Tt){for(;Se<x.length;){var fn=x.charAt(Se++),An=Hi[fn];if(null!=An)return An;if(!/^[\s\xa0]*$/.test(fn))throw Error("Unknown base64 encoding at char: "+fn)}return Tt}Ce();for(var Se=0;;){var je=re(-1),tt=re(0),Ke=re(64),Mt=re(64);if(64===Mt&&-1===je)break;$(je<<2|tt>>4),64!=Ke&&($(tt<<4&240|Ke>>2),64!=Mt&&$(Ke<<6&192|Mt))}}(x,function(tt){Se[je++]=tt}),Se.subarray(0,je)}function Ce(){if(!Hi){Hi={};for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],re=0;5>re;re++){var Se=x.concat($[re].split(""));Xi[re]=Se;for(var je=0;je<Se.length;je++){var tt=Se[je];void 0===Hi[tt]&&(Hi[tt]=je)}}}}var xe,be="function"==typeof Uint8Array;function Fe(x){if(this.g=x,null!==x&&0===x.length)throw Error("ByteString should be constructed with non-empty values")}Fe.prototype.toJSON=function(){if(null==this.g)var x="";else x=this.g=null==(x=this.g)||"string"==typeof x?x:be&&x instanceof Uint8Array?oo(x):null;return x};var _e="function"==typeof Uint8Array.prototype.slice;function ot(x,$,re){return $===re?xe||(xe=new Uint8Array(0)):_e?x.slice($,re):new Uint8Array(x.subarray($,re))}var It=0;function mt(x,$){$=void 0!==($=void 0===$?{}:$).u&&$.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=$,x&&Gt(this,x)}function Gt(x,$){x.h=function tn(x){if(x.constructor===Uint8Array)return x;if(x.constructor===ArrayBuffer)return new Uint8Array(x);if(x.constructor===Array)return new Uint8Array(x);if(x.constructor===String)return eo(x);if(x.constructor===Fe){if(null==x.g)var $=xe||(xe=new Uint8Array(0));else{$=Uint8Array;var re=x.g;re=null==re||be&&null!=re&&re instanceof Uint8Array?re:"string"==typeof re?eo(re):null,$=new $(x=x.g=re)}return $}if(x instanceof Uint8Array)return new Uint8Array(x.buffer,x.byteOffset,x.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}($),x.l=0,x.i=x.h.length,x.g=x.l}function hn(x){x.g>x.i&&(x.j=!0,Ci(Error("Tried to read past the end of the data "+x.g+" > "+x.i)))}function Pt(x){var $=x.h,re=$[x.g],Se=127&re;return 128>re?(x.g+=1,hn(x),Se):(Se|=(127&(re=$[x.g+1]))<<7,128>re?(x.g+=2,hn(x),Se):(Se|=(127&(re=$[x.g+2]))<<14,128>re?(x.g+=3,hn(x),Se):(Se|=(127&(re=$[x.g+3]))<<21,128>re?(x.g+=4,hn(x),Se):(Se|=(15&(re=$[x.g+4]))<<28,128>re?(x.g+=5,hn(x),Se>>>0):(x.g+=5,128<=$[x.g++]&&128<=$[x.g++]&&128<=$[x.g++]&&128<=$[x.g++]&&128<=$[x.g++]?(x.j=!0,ro(),Se):(hn(x),Se))))))}mt.prototype.reset=function(){this.g=this.l};var Ee=[];function Ve(){this.g=new Uint8Array(64),this.h=0}function ze(x,$){if(!(x.h+1<x.g.length)){var re=x.g;x.g=new Uint8Array(Math.ceil(1+2*x.g.length)),x.g.set(re)}x.g[x.h++]=$}function Ze(x,$){for(;127<$;)ze(x,127&$|128),$>>>=7;ze(x,$)}function Lt(x){var $={},re=void 0!==$.N&&$.N;this.m={u:void 0!==$.u&&$.u},this.N=re,$=this.m,Ee.length?(re=Ee.pop(),$&&(re.u=$.u),x&&Gt(re,x),x=re):x=new mt(x,$),this.g=x,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function Dt(x){var $=x.g;if(($=$.g==$.i)||($=x.j)||($=($=x.g).j||0>$.g||$.g>$.i),$)return!1;x.l=x.g.g;var re=Pt(x.g);return $=re>>>3,0<=(re&=7)&&5>=re?(x.i=$,x.h=re,!0):(x.j=!0,_i(re,x.l),!1)}function Qt(x){switch(x.h){case 0:if(0!=x.h)Qt(x);else e:{for(var $=(x=x.g).g,re=0;10>re;re++){if(0==(128&x.h[$])){x.g=$+1,hn(x);break e}$++}x.j=!0,ro()}break;case 1:(x=x.g).g+=8,hn(x);break;case 2:2!=x.h?Qt(x):($=Pt(x.g),(x=x.g).g+=$,hn(x));break;case 5:(x=x.g).g+=4,hn(x);break;case 3:for($=x.i;;){if(!Dt(x)){x.j=!0,Ci(Error("Unmatched start-group tag: stream EOF"));break}if(4==x.h){x.i!=$&&(x.j=!0,Ci(Error("Unmatched end-group tag")));break}Qt(x)}break;default:x.j=!0,_i(x.h,x.l)}}function hr(x,$,re){x.N||(x=ot(x.g.h,re,x.g.g),(re=$.m)?re.push(x):$.m=[x])}Ve.prototype.length=function(){return this.h},Ve.prototype.end=function(){var x=this.g,$=this.h;return this.h=0,ot(x,0,$)},Lt.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var Hr=[];function ur(){this.h=[],this.i=0,this.g=new Ve}function ri(x,$){0!==$.length&&(x.h.push($),x.i+=$.length)}function sr(x,$,re){Ze(x.g,8*$+2),Ze(x.g,re.length),ri(x,x.g.end()),ri(x,re)}var Un,di="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function pr(x,$){Object.isFrozen(x)||(di?x[di]|=$:void 0!==x.g?x.g|=$:Object.defineProperties(x,{g:{value:$,configurable:!0,writable:!0,enumerable:!1}}))}function ar(x){return x?null==($=di?x[di]:x.g)?0:$:0;var $}function Ai(x){return Array.isArray(x)&&pr(x,1),x}function gr(x){if(!Array.isArray(x))throw Error("cannot mark non-array as immutable");pr(x,2)}function Sr(x){return null!==x&&"object"==typeof x&&x.constructor===Object}function ho(x){switch(typeof x){case"number":return isFinite(x)?x:String(x);case"object":return be&&null!=x&&x instanceof Uint8Array?oo(x):x;default:return x}}function Qr(x,$){if(null!=x)return Array.isArray(x)||Sr(x)?qn(x,$):$(x)}function qn(x,$){if(Array.isArray(x)){for(var re=Array(x.length),Se=0;Se<x.length;Se++)re[Se]=Qr(x[Se],$);return 1&ar(x)&&Ai(re),re}for(Se in re={},x)re[Se]=Qr(x[Se],$);return re}function Dr(x,$,re){var Se=Un;if(Un=null,x||(x=Se),Se=this.constructor.ca,x||(x=Se?[Se]:[]),this.j=(Se?0:-1)-(this.constructor.aa||0),this.i=null,this.g=x,x=(Se=this.g.length)-1,Se&&Sr(Se=this.g[x])?(this.l=x-this.j,this.h=Se):void 0!==$&&-1<$?(this.l=Math.max($,x+1-this.j),this.h=null):this.l=Number.MAX_VALUE,re)for($=0;$<re.length;$++)(x=re[$])<this.l?(Se=this.g[x+=this.j])?Ai(Se):this.g[x]=Mi:(wr(this),(Se=this.h[x])?Ai(Se):this.h[x]=Mi)}var oi,po,Mi=Object.freeze(Ai([]));function wr(x){var $=x.l+x.j;x.g[$]||(x.h=x.g[$]={})}function kr(x,$,re){return-1===$?null:void 0!==re&&re||$>=x.l?x.h?x.h[$]:void 0:x.g[$+x.j]}function Vi(x,$,re){re=void 0===re||re;var Se=void 0!==Se&&Se,je=kr(x,$,Se);return null==je&&(je=Mi),je===Mi?zn(x,$,je=Ai([]),Se):re&&Array.isArray(je)&&2&ar(je)&&zn(x,$,je=je.slice(),Se),je}function xr(x,$,re){return null==(x=null==(x=kr(x,$))?x:+x)?void 0===re?0:re:x}function zn(x,$,re,Se){void 0!==Se&&Se||$>=x.l?(wr(x),x.h[$]=re):x.g[$+x.j]=re}function zi(x,$,re){x.i||(x.i={});var Se=x.i[re];if(!Se){var je=Vi(x,re,!1);Se=[];for(var tt=!!Array.isArray(je)&&!!(2&ar(je)),Ke=0;Ke<je.length;Ke++)Se[Ke]=new $(je[Ke]),tt&&gr(Se[Ke].g);tt&&(gr(Se),Object.freeze(Se)),x.i[re]=Se}return Se}function Ji(x,$,re,Se,je){var tt=zi(x,Se,$);re=re||new Se,x=Vi(x,$),null!=je?(tt.splice(je,0,re),x.splice(je,0,j(re))):(tt.push(re),x.push(j(re)))}function j(x){if(x.i)for(var $ in x.i){var re=x.i[$];if(Array.isArray(re))for(var Se=0;Se<re.length;Se++)re[Se]&&j(re[Se]);else re&&j(re)}return x.g}function U(x,$){return null==(x=kr(x,$))?0:x}function m(x,$){return null==(x=kr(x,$))?"":x}function M(x,$){if(x=x.m){ri($,$.g.end());for(var re=0;re<x.length;re++)ri($,x[re])}}function q(x){var $=x[0];switch(x.length){case 2:var re=x[1];return function(Tt,fn,An){return $(Tt,fn,An,re)};case 3:var Se=x[1],je=x[2];return function(Tt,fn,An){return $(Tt,fn,An,Se,je)};case 4:var tt=x[1],Ke=x[2],Mt=x[3];return function(Tt,fn,An){return $(Tt,fn,An,tt,Ke,Mt)};default:throw Error("unsupported number of parameters, expected [2-4], got "+x.length)}}function Ie(x,$,re){for(;Dt($)&&4!=$.h;){var Se=$.i,je=re[Se];if(je){if(Array.isArray(je)&&(je=re[Se]=q(je)),!je($,x,Se)){je=x;var tt=(Se=$).l;Qt(Se),hr(Se,je,tt)}}else je=x,tt=(Se=$).l,Qt(Se),hr(Se,je,tt)}return x}function qe(x,$){var re=new ur;if($(x,re),0===(x=re.i+re.g.length()))re=new Uint8Array(0);else{x=new Uint8Array(x);for(var Se=re.h,je=Se.length,tt=$=0;tt<je;tt++){var Ke=Se[tt];0!==Ke.length&&(x.set(Ke,$),$+=Ke.length)}0!==(je=(Se=re.g).h)&&(x.set(Se.g.subarray(0,je),$),Se.h=0),re.h=[x],re=x}return re}function Xt(x,$,re){if(Hr.length){var Se=Hr.pop();x&&(Gt(Se.g,x),Se.i=-1,Se.h=-1),x=Se}else x=new Lt(x);try{return re(new $,x)}finally{($=x.g).h=null,$.l=0,$.i=0,$.g=0,$.j=!1,$.u=!1,x.i=-1,x.h=-1,x.j=!1,100>Hr.length&&Hr.push(x)}}function rn(x,$,re){if(null!=($=kr($,re))){Ze(x.g,8*re+5),x=x.g;var Se=$;0===(Se=(re=0>Se?1:0)?-Se:Se)?It=0<1/Se?0:2147483648:isNaN(Se)?It=2147483647:34028234663852886e22<Se?It=(re<<31|2139095040)>>>0:11754943508222875e-54>Se?(Se=Math.round(Se/Math.pow(2,-149)),It=(re<<31|Se)>>>0):($=Math.floor(Math.log(Se)/Math.LN2),Se*=Math.pow(2,-$),16777216<=(Se=Math.round(8388608*Se))&&++$,It=(re<<31|$+127<<23|8388607&Se)>>>0),ze(x,(re=It)>>>0&255),ze(x,re>>>8&255),ze(x,re>>>16&255),ze(x,re>>>24&255)}}function Ln(x,$,re){if(5!==x.h)return!1;var Se=(x=x.g).h[x.g],je=x.h[x.g+1],tt=x.h[x.g+2],Ke=x.h[x.g+3];return x.g+=4,hn(x),x=2*((je=(Se<<0|je<<8|tt<<16|Ke<<24)>>>0)>>31)+1,Se=je>>>23&255,je&=8388607,zn($,re,255==Se?je?NaN:1/0*x:0==Se?x*Math.pow(2,-149)*je:x*Math.pow(2,Se-150)*(je+Math.pow(2,23))),!0}function Or(x,$,re){if(0!==x.h)return!1;for(var Se=x.g,je=128,tt=0,Ke=x=0;4>Ke&&128<=je;Ke++)tt|=(127&(je=Se.h[Se.g++]))<<7*Ke;if(128<=je&&(tt|=(127&(je=Se.h[Se.g++]))<<28,x|=(127&je)>>4),128<=je)for(Ke=0;5>Ke&&128<=je;Ke++)x|=(127&(je=Se.h[Se.g++]))<<7*Ke+3;return 128>je?(Se=tt>>>0,(x=2147483648&(je=x>>>0))&&(je=~je>>>0,0==(Se=1+~Se>>>0)&&(je=je+1>>>0)),Se=4294967296*je+(Se>>>0),x=x?-Se:Se):(Se.j=!0,ro(),x=void 0),zn($,re,x),!0}function Vn(x,$,re){return 0===x.h&&(zn($,re,Pt(x.g)),!0)}function mn(x,$,re){if(2!==x.h)return!1;var tt,Se=Pt(x.g),je=(x=x.g).g;if(x.g+=Se,hn(x),x=x.h,Ui)(tt=yo)||(tt=yo=new TextDecoder("utf-8",{fatal:!1})),tt=tt.decode(x.subarray(je,je+Se));else{Se=je+Se;for(var Tt,fn,An,Ke=[],Mt=null;je<Se;)128>(Tt=x[je++])?Ke.push(Tt):224>Tt?je>=Se?Ke.push(65533):(fn=x[je++],194>Tt||128!=(192&fn)?(je--,Ke.push(65533)):Ke.push((31&Tt)<<6|63&fn)):240>Tt?je>=Se-1?Ke.push(65533):128!=(192&(fn=x[je++]))||224===Tt&&160>fn||237===Tt&&160<=fn||128!=(192&(tt=x[je++]))?(je--,Ke.push(65533)):Ke.push((15&Tt)<<12|(63&fn)<<6|63&tt):244>=Tt?je>=Se-2?Ke.push(65533):128!=(192&(fn=x[je++]))||fn-144+(Tt<<28)>>30!=0||128!=(192&(tt=x[je++]))||128!=(192&(An=x[je++]))?(je--,Ke.push(65533)):(Tt=(7&Tt)<<18|(63&fn)<<12|(63&tt)<<6|63&An,Ke.push(55296+((Tt-=65536)>>10&1023),56320+(1023&Tt))):Ke.push(65533),8192<=Ke.length&&(Mt=qi(Mt,Ke),Ke.length=0);tt=qi(Mt,Ke)}return zn($,re,tt),!0}function ir(x,$,re,Se,je){if(2!==x.h)return!1;var tt=new Se,Ke=x.g.i,Mt=Pt(x.g),Tt=x.g.g+Mt;if(x.g.i=Tt,je(tt,x),0!=(je=Tt-x.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+Mt+" bytes, instead read "+(Mt-je)+" bytes, either the data ended unexpectedly or the message misreported its own length");return x.g.g=Tt,x.g.i=Ke,Ji($,re,tt,Se,void 0),!0}function Nr(x){Dr.call(this,x)}function to(x,$){var re=kr(x,1);if(null!=re&&null!=re){Ze($.g,8);var Se=$.g;if(0<=re)Ze(Se,re);else{for(var je=0;9>je;je++)ze(Se,127&re|128),re>>=7;ze(Se,1)}}rn($,x,2),null!=(Se=kr(x,3))&&sr($,3,io(Se)),null!=(Se=kr(x,4))&&sr($,4,io(Se)),M(x,$)}function Vr(x,$){return Ie(x,$,oi||(oi={1:Vn,2:Ln,3:mn,4:mn}))}function no(x){Dr.call(this,x,-1,ji)}function Do(x,$){return Ie(x,$,po||(po={1:[ir,Nr,Vr]}))}Dr.prototype.toJSON=function(){return qn(j(this),ho)},Dr.prototype.toString=function(){return j(this).toString()},$n(Nr,Dr),$n(no,Dr),no.prototype.addClassification=function(x,$){return Ji(this,1,x,Nr,$),this};var is,B,ji=[1];function Ki(x){Dr.call(this,x)}function os(x,$){rn($,x,1),rn($,x,2),rn($,x,3),rn($,x,4),rn($,x,5),M(x,$)}function ko(x,$){return Ie(x,$,is||(is={1:Ln,2:Ln,3:Ln,4:Ln,5:Ln}))}function Wo(x){Dr.call(this,x,-1,te)}function ee(x,$){return Ie(x,$,B||(B={1:[ir,Ki,ko]}))}$n(Ki,Dr),$n(Wo,Dr);var vt,te=[1];function Be(x){Dr.call(this,x)}function zt(x,$){rn($,x,1),rn($,x,2),rn($,x,3),rn($,x,4),rn($,x,5);var re=kr(x,6);if(null!=re&&null!=re){Ze($.g,48);var Se=$.g,je=re;re=0>je;var tt=(je=Math.abs(je))>>>0;for(je=Math.floor((je-tt)/4294967296),je>>>=0,re&&(je=~je>>>0,4294967295<(tt=1+(~tt>>>0))&&(tt=0,4294967295<++je&&(je=0))),re=It=tt,tt=je;0<tt||127<re;)ze(Se,127&re|128),re=(re>>>7|tt<<25)>>>0,tt>>>=7;ze(Se,re)}M(x,$)}function gt(x,$){return Ie(x,$,vt||(vt={1:Ln,2:Ln,3:Ln,4:Ln,5:Ln,6:Or}))}function Ft(x,$,re){if(re=x.createShader(0===re?x.VERTEX_SHADER:x.FRAGMENT_SHADER),x.shaderSource(re,$),x.compileShader(re),!x.getShaderParameter(re,x.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+x.getShaderInfoLog(re));return re}function dn(x){return zi(x,Nr,1).map(function($){return{index:U($,1),X:xr($,2),label:null!=kr($,3)?m($,3):void 0,displayName:null!=kr($,4)?m($,4):void 0}})}function Dn(x){return{x:xr(x,1),y:xr(x,2),z:xr(x,3),visibility:null!=kr(x,4)?xr(x,4):void 0}}function cr(x){return zi(Xt(x,Wo,ee),Ki,1).map(Dn)}function er(x,$){this.h=x,this.g=$,this.l=0}function Rr(x,$,re){return function nr(x,$){var re=x.g;if(void 0===x.m){var Se=Ft(re,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),je=Ft(re,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),tt=re.createProgram();if(re.attachShader(tt,Se),re.attachShader(tt,je),re.linkProgram(tt),!re.getProgramParameter(tt,re.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+re.getProgramInfoLog(tt));Se=x.m=tt,re.useProgram(Se),je=re.getUniformLocation(Se,"sampler0"),x.j={I:re.getAttribLocation(Se,"aVertex"),H:re.getAttribLocation(Se,"aTex"),da:je},x.s=re.createBuffer(),re.bindBuffer(re.ARRAY_BUFFER,x.s),re.enableVertexAttribArray(x.j.I),re.vertexAttribPointer(x.j.I,2,re.FLOAT,!1,0,0),re.bufferData(re.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),re.STATIC_DRAW),re.bindBuffer(re.ARRAY_BUFFER,null),x.o=re.createBuffer(),re.bindBuffer(re.ARRAY_BUFFER,x.o),re.enableVertexAttribArray(x.j.H),re.vertexAttribPointer(x.j.H,2,re.FLOAT,!1,0,0),re.bufferData(re.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),re.STATIC_DRAW),re.bindBuffer(re.ARRAY_BUFFER,null),re.uniform1i(je,0)}Se=x.j,re.useProgram(x.m),re.canvas.width=$.width,re.canvas.height=$.height,re.viewport(0,0,$.width,$.height),re.activeTexture(re.TEXTURE0),x.h.bindTexture2d($.glName),re.enableVertexAttribArray(Se.I),re.bindBuffer(re.ARRAY_BUFFER,x.s),re.vertexAttribPointer(Se.I,2,re.FLOAT,!1,0,0),re.enableVertexAttribArray(Se.H),re.bindBuffer(re.ARRAY_BUFFER,x.o),re.vertexAttribPointer(Se.H,2,re.FLOAT,!1,0,0),re.bindFramebuffer(re.DRAW_FRAMEBUFFER?re.DRAW_FRAMEBUFFER:re.FRAMEBUFFER,null),re.clearColor(0,0,0,0),re.clear(re.COLOR_BUFFER_BIT),re.colorMask(!0,!0,!0,!0),re.drawArrays(re.TRIANGLE_FAN,0,4),re.disableVertexAttribArray(Se.I),re.disableVertexAttribArray(Se.H),re.bindBuffer(re.ARRAY_BUFFER,null),x.h.bindTexture2d(0)}(x,$),"function"==typeof x.g.canvas.transferToImageBitmap?n.resolve(x.g.canvas.transferToImageBitmap()):re?n.resolve(x.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(x.g.canvas):(void 0===x.i&&(x.i=document.createElement("canvas")),new n(function(Se){x.i.height=x.g.canvas.height,x.i.width=x.g.canvas.width,x.i.getContext("2d",{}).drawImage(x.g.canvas,0,0,x.g.canvas.width,x.g.canvas.height),Se(x.i)}))}function Bn(x){this.g=x}$n(Be,Dr);var or=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ar(x,$){return $+x}function jr(x,$){window[x]=$}function wi(x){if(this.g=x,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=x&&x.locateFile||Ar,"object"==typeof window)var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=$,x.options)for(var re=($=Qe(Object.keys(x.options))).next();!re.done;re=$.next()){var Se=x.options[re=re.value].default;void 0!==Se&&(this.j[re]="function"==typeof Se?Se():Se)}}function Ne(x,$){var re,Se;return pn(function(je){return $ in x.F?je.return(x.F[$]):(re=x.locateFile($,""),Se=fetch(re).then(function(tt){return tt.arrayBuffer()}),x.F[$]=Se,je.return(Se))})}function et(x,$){for(var re=$.name||"$",Se=[].concat(Bt($.wants)),je=new x.h.StringList,tt=Qe($.wants),Ke=tt.next();!Ke.done;Ke=tt.next())je.push_back(Ke.value);tt=x.h.PacketListener.implement({onResults:function(Mt){for(var Tt={},fn=0;fn<$.wants.length;++fn)Tt[Se[fn]]=Mt.get(fn);var An=x.listeners[re];An&&(x.C=function $e(x,$,re){var Se,je,tt,Ke,Tt,fn,An,lr,kn,sn,jn,Xn;return pn(function(Jn){switch(Jn.g){case 1:if(!re)return Jn.return($);for(Se={},je=0,tt=Qe(Object.keys(re)),Ke=tt.next();!Ke.done;Ke=tt.next())"string"!=typeof(Tt=re[Ke.value])&&"texture"===Tt.type&&void 0!==$[Tt.stream]&&++je;1<je&&(x.G=!1),fn=Qe(Object.keys(re)),Ke=fn.next();case 2:if(Ke.done){Jn.g=4;break}if("string"==typeof(lr=re[An=Ke.value]))return jn=Se,Xn=An,Et(Jn,function bt(x,$,re){var Se;return pn(function(je){return"number"==typeof re||re instanceof Uint8Array||re instanceof x.h.Uint8BlobList?je.return(re):re instanceof x.h.Texture2dDataOut?((Se=x.s[$])||(Se=new er(x.h,x.D),x.s[$]=Se),je.return(Rr(Se,re,x.G))):je.return(void 0)})}(x,An,$[lr]),14);if(kn=$[lr.stream],"detection_list"===lr.type){if(kn){for(var I=kn.getRectList(),z=kn.getLandmarksList(),ie=kn.getClassificationsList(),fe=[],Ge=0;Ge<I.size();++Ge){var S=Xt(I.get(Ge),Be,gt);S={T:{Y:xr(S,1),Z:xr(S,2),height:xr(S,3),width:xr(S,4),rotation:xr(S,5,0),W:U(S,6)},O:cr(z.get(Ge)),M:dn(Xt(ie.get(Ge),no,Do))},fe.push(S)}I=fe}else I=[];Se[An]=I,Jn.g=7;break}if("proto_list"===lr.type){if(kn){for(I=Array(kn.size()),z=0;z<kn.size();z++)I[z]=kn.get(z);kn.delete()}else I=[];Se[An]=I,Jn.g=7;break}if(void 0===kn){Jn.g=3;break}if("float_list"===lr.type){Se[An]=kn,Jn.g=7;break}if("proto"===lr.type){Se[An]=kn,Jn.g=7;break}if("texture"!==lr.type)throw Error("Unknown output config type: '"+lr.type+"'");return(sn=x.s[An])||(sn=new er(x.h,x.D),x.s[An]=sn),Et(Jn,Rr(sn,kn,x.G),13);case 13:Se[An]=Jn.h;case 7:lr.transform&&Se[An]&&(Se[An]=lr.transform(Se[An])),Jn.g=3;break;case 14:jn[Xn]=Jn.h;case 3:Ke=fn.next(),Jn.g=2;break;case 4:return Jn.return(Se)}})}(x,Tt,$.outs).then(function(lr){lr=An(lr);for(var kn=0;kn<$.wants.length;++kn){var sn=Tt[Se[kn]];"object"==typeof sn&&sn.hasOwnProperty&&sn.hasOwnProperty("delete")&&sn.delete()}lr&&(x.C=lr)}))}}),x.i.attachMultiListener(je,tt),je.delete()}function xt(x){switch(void 0===x&&(x=0),x){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function _t(x){var $=this;this.g=new wi({locateFile:(x=x||{}).locateFile,files:function(re){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:xt(re.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:cr},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:cr},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(re){var Se,je;return pn(function(Ke){return 1==Ke.g?(Se=xt(re),je="third_party/mediapipe/modules/pose_landmark/"+Se,Et(Ke,Ne($.g,Se),2)):($.g.overrideFile(je,Ke.h),Ke.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(ue=wi.prototype).close=function(){return this.i&&this.i.delete(),n.resolve()},ue.reset=function(){var x=this;return pn(function($){x.i&&(x.i.reset(),x.m={},x.s={}),$.g=0})},ue.setOptions=function(x,$){var re=this;if($=$||this.g.options){for(var Se=[],je=[],tt={},Ke=Qe(Object.keys(x)),Mt=Ke.next();!Mt.done;tt={K:tt.K,L:tt.L},Mt=Ke.next()){var Tt=Mt.value;Tt in this.j&&this.j[Tt]===x[Tt]||(this.j[Tt]=x[Tt],void 0!==(Mt=$[Tt])&&(Mt.onChange&&(tt.K=Mt.onChange,tt.L=x[Tt],Se.push(function(fn){return function(){return pn(function(lr){if(1==lr.g)return Et(lr,fn.K(fn.L),2);!0===lr.h&&(re.o=!0),lr.g=0})}}(tt))),Mt.graphOptionXref&&(Tt={valueNumber:1===Mt.type?x[Tt]:0,valueBoolean:0===Mt.type&&x[Tt],valueString:2===Mt.type?x[Tt]:""},Mt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Mt.graphOptionXref),Tt),je.push(Mt))))}(0!==Se.length||0!==je.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(je),this.v=(void 0===this.v?[]:this.v).concat(Se))}},ue.initialize=function(){var x=this;return pn(function($){return 1==$.g?Et($,function V(x){var $,re,Se,je,tt,Ke,Mt,Tt,fn,An,lr;return pn(function(kn){switch(kn.g){case 1:return x.R?($=void 0===x.g.files?[]:"function"==typeof x.g.files?x.g.files(x.j):x.g.files,Et(kn,function si(){return pn(function(x){switch(x.g){case 1:return x.m=2,Et(x,WebAssembly.instantiate(or),4);case 4:x.g=3,x.m=0;break;case 2:return x.m=0,x.j=null,x.return(!1);case 3:return x.return(!0)}})}(),2)):kn.return();case 2:if(re=kn.h,"object"==typeof window)return jr("createMediapipeSolutionsWasm",{locateFile:x.locateFile}),jr("createMediapipeSolutionsPackedAssets",{locateFile:x.locateFile}),Ke=$.filter(function(sn){return void 0!==sn.data}),Mt=$.filter(function(sn){return void 0===sn.data}),Tt=n.all(Ke.map(function(sn){var wn=Ne(x,sn.url);if(void 0!==sn.path){var jn=sn.path;wn=wn.then(function(Xn){return x.overrideFile(jn,Xn),n.resolve(Xn)})}return wn})),fn=n.all(Mt.map(function(sn){return void 0===sn.simd||sn.simd&&re||!sn.simd&&!re?function _r(x){var $=document.createElement("script");return $.setAttribute("src",x),$.setAttribute("crossorigin","anonymous"),new n(function(re){$.addEventListener("load",function(){re()},!1),$.addEventListener("error",function(){re()},!1),document.body.appendChild($)})}(x.locateFile(sn.url,x.S)):n.resolve()})).then(function(){var sn,wn,jn;return pn(function(Xn){if(1==Xn.g)return sn=window.createMediapipeSolutionsWasm,wn=window.createMediapipeSolutionsPackedAssets,jn=x,Et(Xn,sn(wn),2);jn.h=Xn.h,Xn.g=0})}),An=pn(function(sn){return x.g.graph&&x.g.graph.url?sn=Et(sn,Ne(x,x.g.graph.url),0):(sn.g=0,sn=void 0),sn}),Et(kn,n.all([fn,Tt,An]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return Se=$.filter(function(sn){return void 0===sn.simd||sn.simd&&re||!sn.simd&&!re}).map(function(sn){return x.locateFile(sn.url,x.S)}),importScripts.apply(null,Bt(Se)),je=x,Et(kn,createMediapipeSolutionsWasm(Module),6);case 6:je.h=kn.h,x.l=new OffscreenCanvas(1,1),x.h.canvas=x.l,tt=x.h.GL.createContext(x.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),x.h.GL.makeContextCurrent(tt),kn.g=4;break;case 7:if(x.l=document.createElement("canvas"),!(lr=x.l.getContext("webgl2",{}))&&!(lr=x.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),kn.return();x.D=lr,x.h.canvas=x.l,x.h.createContext(x.l,!0,!0,{});case 4:x.i=new x.h.SolutionWasm,x.R=!1,kn.g=0}})}(x),2):3!=$.g?Et($,function H(x){var re,Se,je,tt,Ke,Tt;return pn(function(fn){if(1==fn.g)return x.g.graph&&x.g.graph.url&&x.P===x.g.graph.url?fn.return():(x.o=!0,x.g.graph&&x.g.graph.url?(x.P=x.g.graph.url,Et(fn,Ne(x,x.g.graph.url),3)):void(fn.g=2));for(2!=fn.g&&x.i.loadGraph(fn.h),re=Qe(Object.keys(x.B)),Se=re.next();!Se.done;Se=re.next())x.i.overrideFile(je=Se.value,x.B[je]);if(x.B={},x.g.listeners)for(tt=Qe(x.g.listeners),Ke=tt.next();!Ke.done;Ke=tt.next())et(x,Ke.value);Tt=x.j,x.j={},x.setOptions(Tt),fn.g=0})}(x),3):Et($,function K(x){var $,re,je,tt,Ke;return pn(function(Tt){switch(Tt.g){case 1:if(!x.o)return Tt.return();if(!x.v){Tt.g=2;break}$=Qe(x.v),re=$.next();case 3:if(re.done){Tt.g=5;break}return Et(Tt,(0,re.value)(),4);case 4:re=$.next(),Tt.g=3;break;case 5:x.v=void 0;case 2:if(x.A){for(je=new x.h.GraphOptionChangeRequestList,tt=Qe(x.A),Ke=tt.next();!Ke.done;Ke=tt.next())je.push_back(Ke.value);x.i.changeOptions(je),je.delete(),x.A=void 0}x.o=!1,Tt.g=0}})}(x),0)})},ue.overrideFile=function(x,$){this.i?this.i.overrideFile(x,$):this.B[x]=$},ue.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},ue.send=function(x,$){var Se,je,tt,Ke,Mt,Tt,fn,An,lr,re=this;return pn(function(kn){switch(kn.g){case 1:return re.g.inputs?(Se=1e3*(null==$?performance.now():$),Et(kn,re.C,2)):kn.return();case 2:return Et(kn,re.initialize(),3);case 3:for(je=new re.h.PacketDataList,tt=Qe(Object.keys(x)),Ke=tt.next();!Ke.done;Ke=tt.next())if(Tt=re.g.inputs[Mt=Ke.value]){e:{var sn=x[Mt];switch(Tt.type){case"video":var wn=re.m[Tt.stream];if(wn||(wn=new er(re.h,re.D),re.m[Tt.stream]=wn),0===wn.l&&(wn.l=wn.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&sn instanceof HTMLVideoElement)var jn=sn.videoWidth,Xn=sn.videoHeight;else"undefined"!=typeof HTMLImageElement&&sn instanceof HTMLImageElement?(jn=sn.naturalWidth,Xn=sn.naturalHeight):(jn=sn.width,Xn=sn.height);Xn={glName:wn.l,width:jn,height:Xn},(jn=wn.g).canvas.width=Xn.width,jn.canvas.height=Xn.height,jn.activeTexture(jn.TEXTURE0),wn.h.bindTexture2d(wn.l),jn.texImage2D(jn.TEXTURE_2D,0,jn.RGBA,jn.RGBA,jn.UNSIGNED_BYTE,sn),wn.h.bindTexture2d(0),wn=Xn;break e;case"detections":for((wn=re.m[Tt.stream])||(wn=new Bn(re.h),re.m[Tt.stream]=wn),wn.data||(wn.data=new wn.g.DetectionListData),wn.data.reset(sn.length),Xn=0;Xn<sn.length;++Xn){var Jn=wn.data,I=Jn.setBoundingBox,z=Xn,ie=(jn=sn[Xn]).T,fe=new Be;if(zn(fe,1,ie.Y),zn(fe,2,ie.Z),zn(fe,3,ie.height),zn(fe,4,ie.width),zn(fe,5,ie.rotation),zn(fe,6,ie.W),ie=qe(fe,zt),I.call(Jn,z,ie),jn.O)for(Jn=0;Jn<jn.O.length;++Jn){var Ge=!!(fe=jn.O[Jn]).visibility;z=(I=wn.data).addNormalizedLandmark,ie=Xn,fe=Object.assign(Object.assign({},fe),{visibility:Ge?fe.visibility:0}),zn(Ge=new Ki,1,fe.x),zn(Ge,2,fe.y),zn(Ge,3,fe.z),fe.visibility&&zn(Ge,4,fe.visibility),fe=qe(Ge,os),z.call(I,ie,fe)}if(jn.M)for(Jn=0;Jn<jn.M.length;++Jn)z=(I=wn.data).addClassification,ie=Xn,fe=jn.M[Jn],zn(Ge=new Nr,2,fe.X),fe.index&&zn(Ge,1,fe.index),fe.label&&zn(Ge,3,fe.label),fe.displayName&&zn(Ge,4,fe.displayName),fe=qe(Ge,to),z.call(I,ie,fe)}wn=wn.data;break e;default:wn={}}}switch(fn=wn,An=Tt.stream,Tt.type){case"video":je.pushTexture2d(Object.assign(Object.assign({},fn),{stream:An,timestamp:Se}));break;case"detections":(lr=fn).stream=An,lr.timestamp=Se,je.pushDetectionList(lr);break;default:throw Error("Unknown input config type: '"+Tt.type+"'")}}return re.i.send(je),Et(kn,re.C,4);case 4:je.delete(),kn.g=0}})},ue.onResults=function(x,$){this.listeners[$||"$"]=x},Yn("Solution",wi),Yn("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(ue=_t.prototype).reset=function(){this.g.reset()},ue.close=function(){return this.g.close(),n.resolve()},ue.onResults=function(x){this.g.onResults(x)},ue.initialize=function(){var x=this;return pn(function($){return Et($,x.g.initialize(),0)})},ue.send=function(x,$){var re=this;return pn(function(Se){return Et(Se,re.g.send(x,$),0)})},ue.setOptions=function(x){this.g.setOptions(x)},Yn("Pose",_t),Yn("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),Yn("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),Yn("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),Yn("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),Yn("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),Yn("VERSION","0.5.1635988162")}).call(Pe);const He=class{constructor(){this.mediapipeMap_=new Map}getVersion(ue){switch(ue){case"face_detection":return To.VERSION;case"face_mesh":return ke.VERSION;case"hands":return us.VERSION;case"holistic":return as.VERSION;case"objectron":return _.VERSION;case"selfie_segmentation":return ss.VERSION;case"pose":return Pe.VERSION;default:return""}}initialize(ue){var J=this;return new n(function(){var le=_asyncToGenerator3(function*(we,Re){if(0!=ue.mediaPipeModelConfigArray.length){for(let rt=0;rt<ue.mediaPipeModelConfigArray.length;rt++){const yt=ue.mediaPipeModelConfigArray[rt];if(J.mediapipeMap_.has(yt.modelType))return void Re("setting same type is not supported");if("function"!=typeof yt.listener)return void Re(`[${yt.modelType}] ResultsListener must be provided`);let Qe;switch(yt.modelType){case"face_mesh":Qe=new ke.FaceMesh({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"face_mesh/"+J.getVersion("face_mesh"))+"/"+Bt});break;case"face_detection":Qe=new To.FaceDetection({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"face_detection/"+J.getVersion("face_detection"))+"/"+Bt});break;case"hands":Qe=new us.Hands({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"hands/"+J.getVersion("hands"))+"/"+Bt});break;case"holistic":Qe=new as.Holistic({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"holistic/"+J.getVersion("holistic"))+"/"+Bt});break;case"objectron":Qe=new _.Objectron({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"objectron/"+J.getVersion("objectron"))+"/"+Bt});break;case"selfie_segmentation":Qe=new ss.SelfieSegmentation({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"selfie_segmentation/"+J.getVersion("selfie_segmentation"))+"/"+Bt});break;case"pose":Qe=new Pe.Pose({locateFile:(Bt,br)=>(yt.assetsUri||He.defaultAssetsBaseUrl+"pose/"+J.getVersion("pose"))+"/"+Bt});break;default:return void Re("unknown model type")}Qe.onResults(yt.listener),yt.options&&Qe.setOptions(yt.options);try{yield Qe.initialize(),J.mediapipeMap_.set(yt.modelType,Qe)}catch(Bt){return void Re(Bt)}}we()}else Re("no model was selected")});return function(we,Re){return le.apply(this,arguments)}}())}close(ue){return new n((J,le)=>{let we=[];if(ue){let Re=this.mediapipeMap_.get(ue);if(!Re)return void le("model not exit");this.mediapipeMap_.delete(ue),we.push(Re.close())}else{for(const[Re,rt]of this.mediapipeMap_.entries())we.push(rt.close());this.mediapipeMap_.clear()}n.all(we).then(()=>{J()}).catch(Re=>{le(Re)})})}send(ue,J){return new n((le,we)=>{let Re=[];if(J){let rt=this.mediapipeMap_.get(J);if(!rt)return void we("model not exit");Re.push(rt.send({image:ue}))}else for(const[rt,yt]of this.mediapipeMap_.entries())Re.push(yt.send({image:ue}));n.all(Re).then(()=>{le()}).catch(rt=>{we(rt)})})}reset(ue){if(ue){let J=this.mediapipeMap_.get(ue);J&&"function"==typeof J.reset&&J.reset()}else for(const[J,le]of this.mediapipeMap_.entries())le&&"function"==typeof le.reset&&le.reset()}};let it=He;it.defaultAssetsBaseUrl="https://d3opqjmqzxf057.cloudfront.net/ml/mediapipe/";class on{static createVideoReadable(J){return new n((le,we)=>{const Re=document.createElement("video");let rt=new AbortController,yt=new AbortController;Re.addEventListener("canplay",()=>{rt.abort(),Re.muted=!0,Re.loop=!0,Re.play().then(()=>{try{const Qe=Re.captureStream(),Bt=new MediaStreamTrackProcessor(Qe.getVideoTracks()[0]);le(Bt.readable)}catch(Qe){we(Qe)}})},{once:!0,signal:yt.signal}),Re.addEventListener("error",Qe=>{yt.abort(),we("loading error:"+Qe)},{once:!0,signal:rt.signal}),Re.crossOrigin="anonymous",Re.src=J})}static createImageCanvas(J){return new n((le,we)=>{var Re=new Image;Re.onload=function(){createImageBitmap(Re).then(rt=>{Re.remove(),le(rt)}).catch(rt=>{we(rt)})},Re.onerror=function(rt){we(rt)},Re.crossOrigin="anonymous",Re.src=J})}}class ln extends Wn{constructor(){super(),this.worker_=new Yo,this.trackExpectedRate_=-1,this.workerInited_=!1,this.mediapipeHelper_=new it,this.innerEmitty_=new Wn,this.worker_.addEventListener("message",J=>{if(J.data instanceof ImageBitmap)this.mediapipeHelper_.send(J.data).then(()=>{J.data.close()}).catch(le=>{this.emit("error",{error:le,eventMetaData:{transformerIndex:-1},function:"transform"})});else{let le=JSON.parse(J.data);if("success"===le.callbackType||"error"===le.callbackType)"init"===le.message?this.innerEmitty_.emit("initResults",J.data):"transform"===le.message?this.innerEmitty_.emit("transformResults",J.data):"destroy"===le.message?this.innerEmitty_.emit("destroyResults",J.data):"setBackgroundOptions"===le.message?this.innerEmitty_.emit("setBackgroundOptionsResults",J.data):"setVideoBGReadable"===le.message?this.innerEmitty_.emit("setVideoBGReadableResults",J.data):"setVirtualBGImage"===le.message&&this.innerEmitty_.emit("setVirtualBGImageResults",J.data);else if("media_processor_error_event"===le.callbackType)this.emit("error",le.message);else if("media_processor_warn_event"===le.callbackType)this.emit("warn",le.message);else if("media_processor_pipeline_event"===le.callbackType){this.emit("pipelineInfo",le.message);let we=le.message;("pipeline_ended"===we.message||"pipeline_ended_with_error"===we.message)&&this.mediapipeHelper_.close().finally(()=>{this.worker_&&(this.cleanInnerEmitty(),this.worker_.terminate(),this.workerInited_=!1,this.worker_=void 0)})}}})}cleanInnerEmitty(){let J="Worker ended";this.innerEmitty_.listenerCount("initResults")&&this.innerEmitty_.emit("initResults",JSON.stringify({error:J})),this.innerEmitty_.listenerCount("destroyResults")&&this.innerEmitty_.emit("destroyResults",JSON.stringify({error:J})),this.innerEmitty_.listenerCount("setBackgroundOptionsResults")&&this.innerEmitty_.emit("setBackgroundOptionsResults",JSON.stringify({error:J})),this.innerEmitty_.listenerCount("setVideoBGReadableResults")&&this.innerEmitty_.emit("setVideoBGReadableResults",JSON.stringify({error:J})),this.innerEmitty_.listenerCount("setVirtualBGImageResults")&&this.innerEmitty_.emit("setVirtualBGImageResults",JSON.stringify({error:J})),this.innerEmitty_.listenerCount("transformResults")&&this.innerEmitty_.emit("transformResults",JSON.stringify({error:J}))}init(J){return new n((le,we)=>{this.worker_?this.mediapipeHelper_.initialize({mediaPipeModelConfigArray:[{assetsUri:J.mediapipeBaseAssetsUri,modelType:"selfie_segmentation",options:{modelSelection:1,selfieMode:!1},listener:rt=>{this.worker_&&this.worker_.postMessage(rt.segmentationMask,[rt.segmentationMask])}}]}).then(()=>{let rt=JSON.stringify(function Sn(){return globalThis._vonageMediaProcessorMetadata}());"string"!=typeof rt&&(rt=JSON.stringify({})),this.worker_?(this.worker_.postMessage({operation:"init",metaData:rt}),this.innerEmitty_.once("initResults").then(yt=>{let Qe=JSON.parse(yt);"success"===Qe.callbackType?(this.workerInited_=!0,-1!=this.trackExpectedRate_&&this.postTrackExpectedRate(),this.setBackgroundOptions(J).then(()=>{le()}).catch(Bt=>{we(Bt)})):we(Qe.error)}).catch(yt=>{we(yt)})):we("worker is off")}).catch(rt=>{we(rt)}):we("worker is off")})}transform(J,le){var we=this;return new n(function(){var Re=_asyncToGenerator3(function*(rt,yt){we.worker_?(we.worker_.postMessage({operation:"transform",readable:J,writable:le},[J,le]),we.innerEmitty_.once("transformResults").then(Qe=>{let Bt=JSON.parse(Qe);"success"===Bt.callbackType?rt():yt(Bt.error)}).catch(Qe=>{yt(Qe)})):yt("worker is off")});return function(rt,yt){return Re.apply(this,arguments)}}())}destroy(){var J=this;return new n(function(){var le=_asyncToGenerator3(function*(we,Re){J.worker_?(J.worker_.postMessage({operation:"destroy"}),J.innerEmitty_.once("destroyResults").then(rt=>{let yt=JSON.parse(rt);"success"===yt.callbackType?J.mediapipeHelper_.close().then(()=>{we()}).catch(Qe=>{Re(Qe)}):Re(yt.error)}).catch(rt=>{Re(rt)})):we()});return function(we,Re){return le.apply(this,arguments)}}())}setTrackExpectedRate(J){this.trackExpectedRate_=J,this.postTrackExpectedRate()}postTrackExpectedRate(){this.workerInited_&&this.worker_.postMessage({operation:"setTrackExpectedRate",rate:this.trackExpectedRate_})}setBackgroundOptions(J){return new n((le,we)=>{this.worker_?(this.worker_.postMessage({operation:"setBackgroundOptions",backgroundOptions:JSON.stringify(J)}),this.innerEmitty_.once("setBackgroundOptionsResults").then(Re=>{let rt=JSON.parse(Re);"success"===rt.callbackType?"VideoBackground"===J.transformerType?on.createVideoReadable(J.backgroundAssetUri).then(yt=>{this.worker_?(this.worker_.postMessage({operation:"setVideoBGReadable",readable:yt},[yt]),this.innerEmitty_.once("setVideoBGReadableResults").then(Qe=>{let Bt=JSON.parse(Qe);"success"===Bt.callbackType?le():we(Bt.error)}).catch(Qe=>{we(Qe)})):we("worker is off")}).catch(yt=>{we(yt)}):"VirtualBackground"===J.transformerType?on.createImageCanvas(J.backgroundAssetUri).then(yt=>{this.worker_?(this.worker_.postMessage({operation:"setVirtualBGImage",image:yt},[yt]),this.innerEmitty_.once("setVirtualBGImageResults").then(Qe=>{let Bt=JSON.parse(Qe);"success"===Bt.callbackType?le():we(Bt.error)}).catch(Qe=>{we(Qe)})):we("worker is off")}).catch(yt=>{we(yt)}):le():we(rt.error)}).catch(Re=>{we(Re)})):we("worker is off")})}}var xn=(ue=>(ue.Low="Low",ue.High="High",ue))(xn||{});const tr=function(){var ue=_asyncToGenerator3(function*(){return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))});return function(){return ue.apply(this,arguments)}}();function Fn(){return new n(function(){var ue=_asyncToGenerator3(function*(J,le){try{yield function r(){return new n((ue,J)=>{"undefined"==typeof MediaStreamTrackProcessor||"undefined"==typeof MediaStreamTrackGenerator?J("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):ue()})}()}catch(we){return void le(we)}tr().then(we=>{!1!==we?J():le("Your browser does not support WebAssembly features.")}).catch(we=>{le(we)})});return function(J,le){return ue.apply(this,arguments)}}())}let yn,Si=-1;function Eo(){return yn}function mo(ue){Si=ue,void 0!==yn&&yn.setTrackExpectedRate(Si)}function Bi(ue){return new n(function(){var J=_asyncToGenerator3(function*(le,we){yn=new ln,-1!=Si&&yn.setTrackExpectedRate(Si),yn.init(ue).then(()=>{const Re=new Mn(yn);le(Re)}).catch(Re=>{we(Re)})});return function(le,we){return J.apply(this,arguments)}}())}function Xo(ue){return new n((J,le)=>{yn?yn.setBackgroundOptions(ue).then(()=>{J()}).catch(we=>{le(we)}):le("media processor is not set")})}}.call(this,t(0),t(43))},function(d,E,t){"use strict";const n=t(35)().onlyLocal();d.exports={getConfig:function(o){void 0===o&&(o={});const a=o.staticConfig;return{mediapipeBaseAssetsUri:(e=void 0===a?n:a,(e.apiUrl.includes("anvil.opentok.com")?"https://static.opentok.com":"https://www.dev.tokbox.com")+"/ml-transformers/v3.0.0")};var e}}},function(d,E,t){"use strict";const n=t(17),i=t(11),r=t(703),e=t(704),o=t(705);d.exports=function(a){void 0===a&&(a={});const c=a.Errors||t(6),u=a.ExceptionCodes||t(10),l=a.logging||t(2)("publisherInit"),h=a.otError||t(13)(),p=a.OTHelpers||t(8),y=a.Publisher||t(168)(),O=a.sessionObjects||t(21);return function(b,T,C){let w;l.debug(`OT.initPublisher(${b})`),"string"==typeof b&&!document.getElementById(b)&&(b=T,T=C,C=arguments[3]),"function"==typeof b?(C=b,T=void 0,b=void 0):i(b)&&!p.isElementNode(b)&&(C=T,T=b,b=void 0),"function"==typeof T&&(C=T,T=void 0),T&&(i(T)?!1===T.insertDefaultUI&&b?w="You cannot specify a target element if insertDefaultUI is false":r(T.audioSource)&&r(T.videoSource)&&(w="You cannot specify both audioSource and videoSource as null or false"):(w="properties argument to Publisher constructor, if provided, should be an object",T=void 0)),e(T),o(T);const N=new y(T||{});O.publishers.add(N);const k=function(){C&&n(C)&&(C(...arguments),C=void 0)};void 0!==w&&(l.error(w),k(h(c.INVALID_PARAMETER,new Error(w),u.INVALID_PARAMETER)));const L=function(Z){N.off("publishComplete",D),k(Z)};let D=function(Z){N.off("initSuccess",L),Z&&k(Z)};return N.once("initSuccess",L),N.once("publishComplete",D),N.publish(b),N}}},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5)),o=i(t(19));const s=t(31),a=t(706),c=t(11),u=t(17),l=t(9),h=t(27),p=t(7),y=t(26),O=t(35)(),v=t(75),b=t(310),T=t(708),C=t(709),w=t(710),k=t(138).prependProxyToUrlIfNeeded,D=t(139).getProxyUrl,W=t(711);d.exports=function(oe){void 0===oe&&(oe={});const Q=oe.adaptIceServers||t(101).adaptIceServers,ne=oe.AnalyticsHelper||y,he=oe.APIKEY||t(72),ae=oe.Capabilities||t(169),ye=oe.convertAnvilErrorCode||t(712),Le=oe.convertRumorError||t(316),me=oe.Errors||t(6),Oe=oe.Events||t(23)(),ge=oe.Stream||t(171),ce=oe.ExceptionCodes||t(10),pe=oe.hasIceRestartsCapability||t(317),Ue=oe.hasE2eeCapability||t(170),de=oe.logging||t(2)("Session"),ve=oe.otError||t(13)(),Ae=oe.OTErrorClass||t(22),Xe=oe.OTHelpers||t(8),Ye=t(713),We=oe.StaticConfig||O,at=oe.staticConfig||We.onlyLocal(),At=oe.Publisher||t(168)(),ht=oe.RaptorSocket||t(714).default(),Wt=oe.SessionDispatcher||t(324),$t=oe.sessionObjects||t(21),un=oe.sessionTag||t(323),En=oe.socketCloseCodes||t(77),nt=oe.Subscriber||t(303)(),ct=oe.systemRequirements||t(152),De=oe.uuid||t(16),lt=C({otError:ve}),wt=oe.global||(void 0!==typeof window?window:global),In=oe.getSessionInfo||t(738)(),Gn=t(141),ft=oe.KeyStore||t(741),ut=oe.SFrameClientStore||t(743),Vt=oe.SinglePeerConnectionController||t(745),nn=oe.initPublisher||t(314)({Publisher:At});return function(Jt,Mr,bn){var Zn=this;let Ht=void 0===bn?{}:bn,rr=Ht.iceConfig,Ti=Ht.connectionEventsSuppressed,bo=Ht.ipWhitelist,Gr=void 0!==bo&&bo,pi=Ht.encryptionSecret,uo=Ht._enableSinglePeerConnection;const gi=D(),qr=new ne,Di=pt=>"string"==typeof pt?this.streams.get(pt)||{id:pt}:pt;p(this),this._tag=un,ct.check()||ct.upgrade(),null==Mr&&(Mr=Jt,Jt=null),lt(rr),this.id=Mr,this.sessionId=Mr,this.keyStore=new ft,this.sFrameClientStore=new ut;let Ir,go,$i,Zo,On,Lr,Yr,So,mi=!0,Zt=!1,yr=Jt;const Cr=this;let ki=Mr,Ko=De(),Gi=De(),zr=de,Hn=!1;const so=[];let lo,dr,Uo,Wi,Nt=null,Po=!1,Fo=!1;const Ei=Xe.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");let Ri;this.connection=null,this.connections=new Xe.Collection,this.streams=new Xe.Collection,this.archives=new Xe.Collection;const xo=function(Ot){Ei("disconnected"),Ot.code||(Ot.code=ce.CONNECT_FAILED),zr.error(`${Ot.name||"Unknown Error"}: ${Ot.message}`),Ae.handleJsException({error:Ot,target:this,analytics:qr}),this.trigger("sessionConnectFailed",Ot)},Mo=function(Ot){Zt=!1;const Rt=Ot.reason;this.logEvent("Connect","Disconnected",{reason:Ot.reason});const jt=new Oe.SessionDisconnectEvent("sessionDisconnected",Rt.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),dr(),lo.call(this,Rt),setTimeout(()=>{this.dispatchEvent(jt),Uo.call(this,jt.reason),jt.isDefaultPrevented()||Wi.call(this,jt.reason)})},Vo=function(Ot){Ti||Ot.id.match(/^symphony\./)||this.dispatchEvent(new Oe.ConnectionEvent(h.CONNECTION_CREATED,Ot))},es=function(Ot,Rt){Ot.id.match(/^symphony\./)||Ir&&Ot.id===Ir.id()||this.dispatchEvent(new Oe.ConnectionEvent(h.CONNECTION_DESTROYED,Ot,Rt))},Io=function(Ot){Ot&&Ot.connection&&(!this.connection||Ot.connection.id!==this.connection.id)&&this.dispatchEvent(new Oe.StreamEvent(h.STREAM_CREATED,Ot,null,!1))},ts=function(Ot){const jt=Ot.changedProperty;let qt=Ot.newValue;"videoDisableWarning"===jt||"audioDisableWarning"===jt||("videoDimensions"===jt&&(qt={width:qt.width,height:qt.height}),this.dispatchEvent(new Oe.StreamPropertyChangedEvent(h.STREAM_PROPERTY_CHANGED,Ot.target,jt,Ot.oldValue,qt)))},$o=function(Ot,Rt){void 0===Rt&&(Rt="clientDisconnected");const jt=new Oe.StreamEvent("streamDestroyed",Ot,Rt,!0);Ot.connection.id===this.connection.id?$t.publishers.where({streamId:Ot.id}).forEach(function(gn){gn._.unpublishStreamFromSession(Ot,this,Rt)},this):this.dispatchEvent(jt),(()=>{$t.subscribers.where({streamId:Ot.id}).filter(gn=>gn.session.id===this.id&&gn.stream).forEach(gn=>{gn._disconnect({reason:Rt}),jt.isDefaultPrevented()||gn._destroy({reason:Rt,noStateTransition:!0})})})()},fi=function(Ot){this.dispatchEvent(new Oe.ArchiveEvent("archiveStarted",Ot))},Oi=function(Ot){this.dispatchEvent(new Oe.ArchiveEvent("archiveDestroyed",Ot))},Qo=function(Ot){this.dispatchEvent(new Oe.ArchiveEvent("status"===Ot.changedProperty&&"stopped"===Ot.newValue?"archiveStopped":"archiveUpdated",Ot.target))},No=()=>$t.subscribers.forEach(pt=>pt._.pauseAndPlayVideoElement()),Yt=function(){Cr.token=null,$i=null,Ei("disconnected"),Ir=null,go&&(go.stop(),go=null),Cr.connection=null,Cr.capabilities=new ae([],{hasE2eeCapability:Ue}),Cr.connections.destroy(),Cr.streams.destroy(),Cr.archives.destroy()};dr=function(){Gi=De(),Yt()},lo=function(Ot){$t.publishers.where({session:this}).forEach(Rt=>{Rt.disconnect(Ot)}),$t.subscribers.where({session:this}).forEach(Rt=>{Rt._disconnect()})},Uo=function(Ot){$t.publishers.where({session:this}).forEach(Rt=>{Rt._.streamDestroyed(Ot)})},Wi=function(Ot){$t.subscribers.where({session:this}).forEach(Rt=>{Rt._destroy({reason:Ot})})};const en=function(){zr.debug("OT.Session: connecting to Raptor");const Ot=k(this.sessionInfo.messagingURL,gi),Rt=["forceMute","adaptive"];Fo&&Rt.push("spc"),Ir=new ht(Gi,Ko,Ot,this.sessionInfo.symphonyAddress,Wt(this,{connectionEventsSuppressed:Ti}),qr,Rt),Ir.connect($i,this.sessionInfo,{connectionEventsSuppressed:Ti},(qt,gn)=>{if(qt){const li={};let mr;if("ConnectToSession"===qt.reason||"GetSessionState"===qt.reason){const Br=Le(qt);l(li,{originalMessage:qt.message,originalCode:qt.code}),qt.code=Br.code,qt.message=Br.message}(qt.code||qt.message||qt.reason)&&(mr={failureCode:qt.code,failureMessage:qt.message,failureReason:qt.reason,socketId:Ir.socketId}),Ir=null,this.logConnectivityEvent("Failure",li,mr);const yi=function jt(qt,gn){let Nn;switch(qt){case"WebSocketConnection":if(Nn=a(En.codes,li=>li===gn),Nn)return me[`SOCKET_${Nn}`];break;case"ConnectToSession":case"GetSessionState":switch(gn){case ce.CONNECT_FAILED:return me.CONNECT_FAILED;case ce.UNEXPECTED_SERVER_RESPONSE:return me.UNEXPECTED_SERVER_RESPONSE;case ce.CONNECTION_LIMIT_EXCEEDED:return me.CONNECTION_LIMIT_EXCEEDED}}}(qt.reason,qt.code);return yi&&(qt=ve(yi,new Error(qt.message),qt.code)),void xo.call(this,qt)}zr.debug("OT.Session: Received session state from Raptor",gn),this.connection=this.connections.get(Ir.id()),this.connection&&(this.capabilities=this.connection.permissions),Ei("connected"),this.logConnectivityEvent("Success",{connectionId:this.connection.id}),this.connection.on("destroyed",Mo,this),this.dispatchEvent(new Oe.SessionConnectEvent(h.SESSION_CONNECTED)),this.connections.on({add:Vo,remove:es},this),this.streams.on({add:Io,remove:$o,update:ts},this),this.archives.on({add:fi,remove:Oi,update:Qo},this),this.connections._triggerAddEvents(),this.streams._triggerAddEvents(),this.archives._triggerAddEvents(),Xe.env.isiOS&&Xe.env.iOSVersion>=13.3&&this.on("gsmCallEnded",No)})},Sn=pt=>this.capabilities.permittedTo(pt),Kn=(pt,Ot)=>{de.error(`${pt.name}: ${pt.message}`),"function"==typeof Ot&&Ot(pt),Ae.handleJsException({error:pt,target:this,analytics:qr})},vn=pt=>{const Ot=ve(pt.code,new Error(pt.message),pt.exceptionCode);return Kn(Ot),Ot},Tr=()=>this.isNot("connected")?vn(Ye.NOT_CONNECTED):Sn("forceMute")?null:vn(Ye.PERMISSION_DENIED),$r=pt=>vn("404"===pt.code?Ye.NOT_FOUND:"403"===pt.code?Ye.PERMISSION_DENIED:Ye.UNEXPECTED_SERVER_RESPONSE);this.reportIssue=pt=>{let Ot=pt.id;return b(qr.logEvent.bind(qr))({action:"ReportIssue",variation:"Event",connectionId:Gi,payload:{reportIssueId:Ot}},null)},this.logEvent=function(pt,Ot,Rt,jt){let qt={action:pt,variation:Ot,payload:Rt,sessionId:ki,messagingServer:On,p2p:Zo,partnerId:yr,connectionId:Gi};jt&&(qt=l(jt,qt)),qr.logEvent(qt)},this.logConfigurationFileEvent=function(pt,Ot,Rt){if(void 0===Ot&&(Ot=null),void 0===Rt&&(Rt={}),"Attempt"===pt)Yr=(new Date).getTime();else if("Failure"===pt||"Success"===pt){const jt=(new Date).getTime()-Yr;l(Rt,{attemptDuration:jt})}gi&&(Rt.proxyUrl=gi),this.logEvent("ConfigurationFile",pt,Ot,(0,o.default)({},Rt))},this.logConnectivityEvent=function(pt,Ot,Rt){if(void 0===Ot&&(Ot=null),void 0===Rt&&(Rt={}),gi&&(Rt.proxyUrl=gi),"Attempt"===pt&&(go&&(go.stop(),de.error("_connectivityAttemptPinger should have been cleaned up")),Lr=(new Date).getTime(),go=new v(()=>{this.logEvent("Connect","Attempting",Ot,(0,o.default)({},Rt))},.2,6),go.start()),"Failure"===pt||"Success"===pt||"Cancel"===pt){const jt=qt=>{go&&(go.stop(),go=void 0),this.logEvent("Connect",pt,Ot,(0,o.default)({},Rt,{attemptDuration:(new Date).getTime()-Lr,iceConfig:qt,ipWhitelist:Gr}))};"Success"===pt?this._.getIceConfig().then(qt=>{const gn={includeServers:rr&&rr.includeServers||"all",transportPolicy:qt.transportPolicy};gn.servers=qt.servers?qt.servers.map(Nn=>({url:Nn.urls})):[],jt(gn)}):jt()}else this.logEvent("Connect",pt,Ot,Rt)},this.connect=function(){let pt;for(var Ot=arguments.length,Rt=new Array(Ot),jt=0;jt<Ot;jt++)Rt[jt]=arguments[jt];Rt.length>1&&("string"==typeof Rt[0]||"number"==typeof Rt[0])&&"string"==typeof Rt[1]?(null==Jt&&(yr=Rt[0].toString()),pt=Rt[1]):pt=Rt[0];const qt=Rt[Rt.length-1];if(Zn.is("connecting","connected"))return zr.warn(`OT.Session: Cannot connect, the session is already ${Zn.state}`),Zn;qr.sessionInfo=new Gn,Yt(),Ei("connecting");const gn=Gi;function Nn(){const Br=Gi!==gn;return Br&&de.debug("Connection was interrupted"),Br}if(Zn.token=!u(pt)&&pt,$i=!u(pt)&&pt,mi?mi=!1:Ko=De(),qt&&u(qt)){let Br;const ei=function(){Br();for(var Qn=arguments.length,Zi=new Array(Qn),ai=0;ai<Qn;ai++)Zi[ai]=arguments[ai];qt(void 0,...Zi)},vi=function(){Br(),qt(...arguments)};Br=()=>{Zn.off("sessionConnected",ei),Zn.off("sessionConnectFailed",vi)},Zn.once("sessionConnected",ei),Zn.once("sessionConnectFailed",vi)}if(null==yr||u(yr))return setTimeout(xo.bind(Zn,ve(me.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),ce.AUTHENTICATION_ERROR))),Zn;if(!ki||c(ki)||Array.isArray(ki)){let Br;return ki?(Br="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",ki=ki.toString()):Br="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(xo.bind(Zn,ve(me.INVALID_SESSION_ID,new Error(Br),ce.INVALID_SESSION_ID))),Zn.logConnectivityEvent("Attempt"),Zn.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:ce.INVALID_SESSION_ID,failureMessage:Br}),Zn}if(Zn.apiKey=yr.toString(),yr=yr.toString(),pi){if(!Ue())return setTimeout(xo.bind(Zn,ve(me.UNSUPPORTED_BROWSER,new Error("E2E Encryption is not supported in your browser.")))),Zn;try{W(pi),Zn.keyStore.set(Mr,pi),Po=!0}catch(Br){return setTimeout(xo.bind(Zn,ve(me.INVALID_ENCRYPTION_SECRET,new Error(`Invalid encryptionSecret: ${Br.message}`)))),Zn}}0===he.value.length&&(he.value=yr);const li=Boolean(We.onlyLocal().configUrl),mr=!0===Gr&&Boolean(We.onlyLocal().ipWhitelistConfigUrl);return li||mr?Zn.logConfigurationFileEvent("Attempt"):Zn.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"}),(li||mr?We.get({partnerId:yr,token:pt,useIpWhitelistConfigUrl:mr,proxyUrl:gi}):n.resolve(We.onlyLocal())).then(Br=>((li||mr)&&Zn.logConfigurationFileEvent("Success"),Br),Br=>((li||mr)&&Zn.logConfigurationFileEvent("Failure",{failureMessage:Br.message,failureStack:Br.stack}),We.onlyLocal())).then(Br=>{if(Zn.staticConfig=Br,qr.staticConfig=Br,!1===Br.apiEnabled)throw ve(me.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(Nn())return;Zn.logConnectivityEvent("Attempt"),gi?Zn.logEvent("SessionInfo","Attempt",null,{proxyUrl:gi}):Zn.logEvent("SessionInfo","Attempt");const ei=Qn=>{Qn.code=ye(Qn.code),Zn.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:Qn.code||"No code",failureMessage:Qn.message,failureName:Qn.name}),Qn.name&&(Qn=ve(Qn.name,new Error(`${Qn.message}${Qn.code?` (${Qn.code})`:""}`),Qn.code)),xo.call(Zn,Qn)},ti=k(Br.apiUrl,gi);return In({anvilUrl:ti,sessionId:Mr,token:$i,connectionId:Gi,clientVersion:Br.clientVersion}).then(Qn=>{if(Nn())return;if(Qn.partnerId&&Qn.partnerId!==yr)return void ei(ve(me.AUTHENTICATION_ERROR,new Error("Authentication Error: The API key does not match the token or session."),ce.AUTHENTICATION_ERROR));Fo=w(Qn,uo),Fo&&(Ri=new Vt(Zn)),qr.sessionInfo=Qn;const Zi={features:{reconnection:Qn.reconnection,renegotiation:pe()&&Qn.renegotiation,simulcast:void 0!==Qn.simulcast&&Qn.simulcast&&"Chrome"===Xe.env.name}};if(gi&&(Zi.proxyUrl=gi),Zn.is("connecting")){Zn.sessionInfo=Qn,Zn._.setIceServers(Zn.sessionInfo.iceServers),Zo=Qn.p2pEnabled,On=Qn.messagingServer,Zn.logEvent("SessionInfo","Success",null,Zi,{messagingServer:Qn.messagingServer});const ai=Br.sessionInfoOverrides;null!=ai&&"object"==typeof ai&&Object.keys(ai).forEach(Qi=>{Object.defineProperty(Zn.sessionInfo,Qi,{value:ai[Qi]})}),en.call(Zn)}},ei)}).catch(Br=>{xo.call(Zn,Br)}),Zn},this.disconnect=function(){Ri&&(Ri.destroy(),Ri=null),Ir&&Ir.isNot("disconnected")?Ir.isNot("disconnecting")&&(Ir.isNot("connecting")||this.logConnectivityEvent("Cancel"),Ei("disconnecting"),Ir.disconnect(),this.off("gsmCallEnded",No)):dr()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(pt,Ot,Rt){if("function"==typeof pt&&(Rt=pt,pt=void 0),"function"==typeof Ot&&(Rt=Ot,Ot=void 0),Rt=Rt||function(){},this.isNot("connected"))return qr.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:ce.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:ki,streamId:pt&&pt.stream?pt.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:yr}),Kn(ve(me.NOT_CONNECTED,new Error("We need to be connected before you can publish"),ce.NOT_CONNECTED),Rt),null;if(!Sn("publish")){const jt="This token does not allow publishing. The role must be at least `publisher` to enable this functionality";return this.logEvent("Publish","Failure",null,{failureReason:"Permission",failureCode:ce.UNABLE_TO_PUBLISH,failureMessage:jt}),Kn(ve(me.PERMISSION_DENIED,new Error(jt),ce.UNABLE_TO_PUBLISH),Rt),null}if(!pt||"string"==typeof pt||Xe.isElementNode(pt))pt=nn(pt,Ot);else{if(!(pt instanceof At))return void Kn(ve(me.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),ce.UNABLE_TO_PUBLISH),Rt);"session"in pt&&pt.session&&"sessionId"in pt.session&&zr.warn(pt.session.sessionId===this.sessionId?`Cannot publish ${pt.guid()} again to ${this.sessionId}. Please call session.unpublish(publisher) first.`:`Cannot publish ${pt.guid()} publisher already attached to ${pt.session.sessionId}. Please call session.unpublish(publisher) first.`)}return Hn&&pt._.forceMuteAudio(),pt._.publishToSession(this,qr).catch(jt=>{throw jt.message=`Session.publish :: ${jt.message}`,zr.error(jt.code,jt.message),jt}).then(()=>pt).then(function(){for(var jt=arguments.length,qt=new Array(jt),gn=0;gn<jt;gn++)qt[gn]=arguments[gn];return Rt(null,...qt)},jt=>Rt(jt)),pt},this.unpublish=function(pt){pt?pt._.unpublishFromSession(this,"unpublished"):zr.error("OT.Session.unpublish: publisher parameter missing.")},this.setIceConfig=function(){var pt=(0,e.default)(r.default.mark(function Ot(Rt){var qt;return r.default.wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return lt(Rt),qr.logEvent({action:"setIceConfig",variation:"Attempt",payload:{newIceConfig:Rt}}),rr=Rt,qt={iceServers:(li=Rt).customServers,iceTransportPolicy:li.transportPolicy},Nn.prev=5,Nn.next=8,n.all($t.publishers.map(li=>li._.setIceConfig(qt)).concat($t.subscribers.map(li=>li._.setIceConfig(qt))));case 8:Nn.next=14;break;case 10:throw Nn.prev=10,Nn.t0=Nn.catch(5),qr.logEvent({action:"setIceConfig",variation:"Failure",payload:{newIceConfig:Rt}}),Nn.t0;case 14:qr.logEvent({action:"setIceConfig",variation:"Success",payload:{newIceConfig:Rt}});case 15:case"end":return Nn.stop()}var li},Ot,null,[[5,10]])}));return function(Ot){return pt.apply(this,arguments)}}(),this.subscribe=function(pt,Ot,Rt,jt){if("function"==typeof Ot&&(jt=Ot,Ot=void 0,Rt=void 0),"function"==typeof Rt&&(jt=Rt,Rt=void 0),jt=jt||function(){},!this.connection||!this.connection.connectionId)return void Kn(ve(me.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),ce.UNABLE_TO_SUBSCRIBE),jt);if(!pt)return void Kn(ve(me.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),ce.UNABLE_TO_SUBSCRIBE),jt);if(!Object.prototype.hasOwnProperty.call(pt,"streamId"))return void Kn(ve(me.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),ce.UNABLE_TO_SUBSCRIBE),jt);if(Rt&&!1===Rt.insertDefaultUI&&Ot)return void Kn(ve(me.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),ce.INVALID_PARAMETER),jt);Ot&&!1===Ot.insertDefaultUI&&(Rt=Ot,Ot=void 0);const qt=new nt(Ot,l(Rt||{},{stream:pt,session:this,analytics:qr,_singlePeerConnectionController:Ri}),gn=>{gn?Kn(gn,jt):jt(null,qt)});return $t.subscribers.add(qt),qt},this.unsubscribe=function(pt){if(!pt){const Ot="OT.Session.unsubscribe: subscriber cannot be null";throw zr.error(Ot),new Error(Ot)}return pt.stream?(zr.debug(`OT.Session.unsubscribe: subscriber ${pt.id}`),pt._destroy({reason:"Unsubscribe"}),!0):(zr.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(pt){return $t.subscribers.where({streamId:pt.id})},this.getPublisherForStream=function(pt){let Ot,Rt;if("string"==typeof pt)Ot=pt;else{if("object"!=typeof pt||!pt||!Object.hasOwnProperty.call(pt,"id"))throw Rt="Session.getPublisherForStream :: Invalid stream type",zr.error(Rt),new Error(Rt);Ot=pt.id}return $t.publishers.where({streamId:Ot})[0]},this._={getProxyUrl:()=>gi,isE2ee:()=>Cr.sessionInfo.e2ee&&Po&&!!Cr.capabilities.supportsE2ee,isSocketReconnecting:()=>Zt,getSocket:()=>Ir,reconnecting:function(){Zt=!0,this.dispatchEvent(new Oe.SessionReconnectingEvent)}.bind(this),reconnected:function(){Zt=!1,this.dispatchEvent(new Oe.SessionReconnectedEvent),this.sessionInfo.reconnection&&($t.publishers.where({session:this}).forEach(pt=>{pt._.iceRestart()}),this.sessionInfo.p2pEnabled||$t.subscribers.where({session:this}).forEach(pt=>{pt._.iceRestart("socket reconnected")}))}.bind(this),dispatchSignal:function(pt,Ot,Rt){const jt=new Oe.SignalEvent(Ot,Rt,pt);jt.target=this,this.trigger(h.SIGNAL,jt),Ot&&this.dispatchEvent(jt)}.bind(this),dispatchCaption:function(pt,Ot){let Rt,jt;try{const gn=JSON.parse(Ot.data);Rt=gn.caption.text,jt=gn.streamId}catch(gn){return void zr.error(`Caption parsing failed: ${gn.message}`)}const qt=new Oe.CaptionReceivedEvent(Rt,jt);qt.target=this,this.trigger(h.SUBSCRIBER_CAPTION_RECEIVED,qt),this.dispatchEvent(qt)}.bind(this),subscriberChannelUpdate:(pt,Ot,Rt,jt)=>Ir?Ir.subscriberChannelUpdate(pt.id,Ot.widgetId,Rt.id,jt):(zr.warn("You are disconnected, cannot update subscriber properties ",jt),null),streamCreate(pt,Ot,Rt,jt,qt,gn,Nn,li){Ir?Ir.streamCreate(pt,Ot,Rt,jt,qt,void 0,gn,Nn,li):zr.warn("You are disconnected, cannot create stream ",Ot)},streamDestroy(pt,Ot){Ir?Ir.streamDestroy(pt,Ot):zr.warn("You are disconnected, cannot destroy stream ",pt)},streamChannelUpdate(pt,Ot,Rt){Ir?Ir.streamChannelUpdate(pt.id,Ot.id,Rt):zr.warn("You are disconnected, cannot update stream properties ",Rt)},setSocket(pt){Ir=pt},setLogging(pt){zr=pt},setState:Ei,setIceServers(pt){!pt||(So={iceServers:Q(pt),timestamp:Date.now()})},getOtIceServerInfo(){return 864e5-(So?Date.now()-So.timestamp:1/0)>3e5?n.resolve({transportPolicy:Cr&&Cr.sessionInfo&&Cr.sessionInfo.clientCandidates,servers:So&&So.iceServers}):$i?In({anvilUrl:(this.staticConfig||at).apiUrl,sessionId:Mr,token:$i,connectionId:Gi,clientVersion:at.clientVersion}).then(gn=>(Cr._.setIceServers(gn.iceServers),So?{transportPolicy:Cr&&Cr.sessionInfo&&Cr.sessionInfo.clientCandidates,servers:So&&So.iceServers}:{transportPolicy:Cr.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0})):n.resolve({transportPolicy:Cr&&Cr.sessionInfo&&Cr.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0})},getCodecFlags:()=>({h264:Cr.sessionInfo.h264,vp9:Cr.sessionInfo.vp9,vp8:Cr.sessionInfo.vp8}),getVideoCodecsCompatible:pt=>T({RTCPeerConnection:wt.RTCPeerConnection,env:Xe.env,stream:pt,codecFlags:Cr._.getCodecFlags()}),getIceConfig:()=>{if(!rr)return Cr._.getOtIceServerInfo();const pt=rr&&"relay"===rr.transportPolicy?"relay":Cr.sessionInfo.clientCandidates;return("custom"===rr.includeServers?n.resolve({servers:[]}):Cr._.getOtIceServerInfo()).then(Rt=>l(Rt,{transportPolicy:pt,servers:[...Rt.servers,...rr.customServers]}))},forceMute:function(pt){this.dispatchEvent(new Oe.MuteForcedEvent(pt))}.bind(this),enableMuteOnEntry:()=>{Hn=!0},addSubscriberToPeerConnectionsQueue:(pt,Ot)=>{so.push({pc:pt,message:Ot}),Nt||(Nt=setInterval(()=>{const Rt=so.pop();Rt?Rt.pc.processMessage("offer",Rt.message):(clearInterval(Nt),Nt=null)},100))},disableMuteOnEntry:()=>{Hn=!1},privateEvents:new s},this.signal=function(pt,Ot){let Rt=pt,jt=Ot||function(){};function qt(gn){switch(gn){case 400:case 413:return me.INVALID_PARAMETER;case 429:return me.RATE_LIMIT_EXCEEDED;case 404:return me.NOT_FOUND;case 500:return me.NOT_CONNECTED;case 403:return me.PERMISSION_DENIED;case 2001:return me.UNEXPECTED_SERVER_RESPONSE;default:return}}u(Rt)&&(jt=Rt,Rt=null),this.isNot("connected")?Kn(ve(me.NOT_CONNECTED,new Error("Unable to send signal - you are not connected to the session."),500),jt):(Ir.signal(Rt,function(gn){if(gn){const yi=qt(gn.code);return yi&&(gn=ve(yi,new Error(gn.message),gn.code)),void jt(gn)}for(var Nn=arguments.length,li=new Array(Nn>1?Nn-1:0),mr=1;mr<Nn;mr++)li[mr-1]=arguments[mr];jt(gn,...li)},this.logEvent),pt&&pt.data&&"string"!=typeof pt.data&&zr.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string."))},this.forceDisconnect=function(pt,Ot){if(this.isNot("connected"))return void Kn(ve(me.NOT_CONNECTED,new Error("Cannot call forceDisconnect(). You are not connected to the session."),ce.NOT_CONNECTED),Ot);const Rt="string"==typeof pt?pt:pt.id,jt="Invalid Parameter. Check that you have passed valid parameter values into the method call.";Rt?Sn("forceDisconnect")?Ir.forceDisconnect(Rt,function(gn){if(gn)Kn(ve(me.INVALID_PARAMETER,new Error(jt),ce.INVALID_PARAMETER),Ot);else if(Ot&&u(Ot)){for(var Nn=arguments.length,li=new Array(Nn>1?Nn-1:0),mr=1;mr<Nn;mr++)li[mr-1]=arguments[mr];Ot(gn,...li)}}):Kn(ve(me.PERMISSION_DENIED,new Error("This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality"),ce.UNABLE_TO_FORCE_DISCONNECT),Ot):Kn(ve(me.INVALID_PARAMETER,new Error(jt),ce.INVALID_PARAMETER),Ot)},this.forceUnpublish=function(pt,Ot){void 0===Ot&&(Ot=()=>{});const Rt=yi=>Kn(ve(yi.name,new Error(yi.msg),yi.code),Ot),qt={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:ce.NOT_CONNECTED,name:me.NOT_CONNECTED},gn={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:ce.UNABLE_TO_FORCE_UNPUBLISH,name:me.PERMISSION_DENIED},Nn={msg:"The stream does not exist.",name:me.NOT_FOUND},li={msg:"An unexpected error occurred.",name:me.UNEXPECTED_SERVER_RESPONSE,code:ce.UNEXPECTED_SERVER_RESPONSE};if(!pt)return void Rt({msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:ce.INVALID_PARAMETER,name:me.INVALID_PARAMETER});if(Zn.isNot("connected"))return void Rt(qt);const mr=Di(pt);Sn("forceUnpublish")?Ir.forceUnpublish(mr.id,yi=>{yi?Rt("404"===yi.code?Nn:"403"===yi.code?gn:li):Ot(null)}):Rt(gn)},this.forceMuteStream=pt=>new n((Ot,Rt)=>{const jt=Tr();jt?Rt(jt):pt&&pt.id?Ir.forceMuteStream(pt.id,qt=>{qt?Rt($r(qt)):Ot()}):Rt(vn(Ye.INVALID_PARAMETER))}),this.forceMuteAll=pt=>new n((Ot,Rt)=>{const jt=Tr();if(jt)return void Rt(jt);if(Array.isArray(pt)&&!pt.every(gn=>gn instanceof ge)||pt&&!Array.isArray(pt))return void Rt(vn(Ye.INVALID_PARAMETER));const qt=(pt||[]).map(gn=>gn.id);Ir.forceMuteAll(qt,!0,gn=>{gn?Rt($r(gn)):Ot()})}),this.disableForceMute=()=>new n((pt,Ot)=>{const Rt=Tr();Rt?Ot(Rt):Ir.forceMuteAll([],!1,jt=>{jt?Ot($r(jt)):pt()})}),this.setEncryptionSecret=function(){var pt=(0,e.default)(r.default.mark(function Ot(Rt){return r.default.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(pi){qt.next=3;break}return de.error("Encryption secret must first be set in initSession."),qt.abrupt("return");case 3:qt.prev=3,W(Rt),qt.next=10;break;case 7:throw qt.prev=7,qt.t0=qt.catch(3),ve(me.INVALID_ENCRYPTION_SECRET,new Error(`setEncryptionSecret: ${qt.t0.message}`));case 10:return qt.prev=10,qt.next=13,Zn.keyStore.set(Mr,Rt);case 13:qt.next=18;break;case 15:qt.prev=15,qt.t1=qt.catch(10),zr.error(`Error in setEncryptionSecret}: ${qt.t1.message}`);case 18:case"end":return qt.stop()}},Ot,null,[[3,7],[10,15]])}));return function(Ot){return pt.apply(this,arguments)}}(),this.isConnected=()=>this.is("connected"),this.capabilities=new ae([],{hasE2eeCapability:Ue})}}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(10),i=t(22),r=[400,403,409,n.CONNECTION_LIMIT_EXCEEDED];d.exports=function(s){let a,c;if("ConnectToSession"===s.reason&&s.code===n.CONNECT_FAILED)a=s.code,c=i.getTitleByCode(s.code);else if(s.code&&r.indexOf(Number(s.code))>-1)switch(a=n.CONNECT_FAILED,s.reason){case"ConnectToSession":s.code===n.CONNECTION_LIMIT_EXCEEDED?(a=s.code,c="Cannot connect -- the limit for concurrent connections to the session has been reached"):c="Received error response to connection create message.";break;case"GetSessionState":c="Received error response to session read";break;default:c=""}else a=n.UNEXPECTED_SERVER_RESPONSE,c="Unexpected server response. Try this operation again later.";return{code:a,message:c}}},function(d,E,t){"use strict";const n=t(3),i=t(52).once;d.exports=()=>i()&&(n.isChromiumEdge||["Chrome","Safari","Firefox","Opera"].includes(n.name))},function(d,E,t){"use strict";d.exports=function(i){return JSON.stringify(i)}},function(d,E,t){"use strict";E.__esModule=!0,E.default=void 0,E.default=i=>{let r=i.logger,e=i.obj;i.eventNames.forEach(s=>{e.on(s,function(){for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return r.spam("emitted",s,c)})})}},function(d,E,t){"use strict";const n=t(17),i=t(22),r=t(7),e=t(2)("Dispatcher"),o=t(172),s=t(729),a=function(){r(this),this.callbacks={}};d.exports=a,a.prototype.registerCallback=function(c,u){this.callbacks[c]=u},a.prototype.triggerCallback=function(c){if(!c)return;const u=this.callbacks[c];if(u&&n(u)){const l=Array.prototype.slice.call(arguments);l.shift(),u(...l)}delete this.callbacks[c]},a.prototype.onClose=function(c){this.emit("close",c)},a.prototype.onReconnected=function(){this.emit("reconnected")},a.prototype.onReconnecting=function(){this.emit("reconnecting")},a.prototype.dispatch=function(c){if(c.type===o.STATUS){var u;let h;if(e.debug(c),c.isError){let y;if("string"==typeof c.data)try{const O=JSON.parse(c.data);O&&"object"==typeof O&&(y=O.reason)}catch(O){e.warn("Failed to parse rumorMessage.data",O)}h=new i(c.status,y)}const p=c.data?JSON.parse(c.data):"";return!(null==p||null==(u=p.mute))&&u.active&&this.dispatchMuteOnEntry(),void this.triggerCallback(c.transactionId,h,c)}const l=s(c);switch(e.debug(`${l.signature}:`,l),l.resource){case"session":this.dispatchSession(l);break;case"connection":this.dispatchConnection(l);break;case"stream":this.dispatchStream(l);break;case"stream_channel":this.dispatchStreamChannel(l);break;case"subscriber":this.dispatchSubscriber(l);break;case"subscriber_channel":this.dispatchSubscriberChannel(l);break;case"signal":this.dispatchSignal(l);break;case"data":this.dispatchCaption(l);break;case"archive":this.dispatchArchive(l);break;case"source":this.dispatchSource(l);break;default:e.debug(`Type ${l.resource} is not currently implemented`)}},a.prototype.dispatchSession=function(c){switch(c.method){case"read":this.emit("session#read",c.content,c.transactionId);break;case"update":this.emit("session#update",c.content);break;default:e.debug(`${c.signature} is not currently implemented`)}},a.prototype.dispatchMuteOnEntry=function(){this.emit("session#muted")},a.prototype.dispatchConnection=function(c){switch(c.method){case"created":this.emit("connection#created",c.content);break;case"deleted":this.emit("connection#deleted",c.params.connection,c.reason);break;default:e.debug(`${c.signature} is not currently implemented`)}},a.prototype.dispatchStream=function(c){switch(c.method){case"created":this.emit("stream#created",c.content,c.transactionId);break;case"deleted":this.emit("stream#deleted",c.params.stream,c.reason,c.content);break;case"updated":this.emit("stream#updated",c.params.stream,c.content);break;case"update":this.emit("stream#update",c.params.stream,c.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(c.method,c);break;default:e.debug(`${c.signature} is not currently implemented`)}},a.prototype.dispatchStreamChannel=function(c){"updated"===c.method?this.emit("streamChannel#updated",c.params.stream,c.params.channel,c.content):e.debug(`${c.signature} is not currently implemented`)},a.prototype.dispatchJsep=function(c,u){this.emit(`jsep#${c}`,u.params.stream,u.fromAddress,u)},a.prototype.dispatchSubscriberChannel=function(c){switch(c.method){case"updated":this.emit("subscriberChannel#updated",c.params.stream,c.params.channel,c.content);break;case"update":this.emit("subscriberChannel#update",c.params.subscriber,c.params.stream,c.content);break;default:e.debug(`${c.signature} is not currently implemented`)}},a.prototype.dispatchSubscriber=function(c){switch(c.method){case"created":this.emit("subscriber#created",c.params.stream,c.fromAddress,c.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",c),this.emit("subscriber#deleted",c.params.stream,c.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(c.method,c);break;default:e.debug(`${c.signature} is not currently implemented`)}},a.prototype.dispatchSignal=function(c){"signal"===c.method?this.emit("signal",c.fromAddress,c.content):e.debug(`${c.signature} is not currently implemented`)},a.prototype.dispatchCaption=function(c){this.emit("caption",c.fromAddress,c.content)},a.prototype.dispatchArchive=function(c){switch(c.method){case"created":this.emit("archive#created",c.content);break;case"updated":this.emit("archive#updated",c.params.archive,c.content)}},a.prototype.dispatchSource=function(c){switch(c.method){case"create":this.emit("source#create",c.params.source,c.params.stream,c.reason);break;case"delete":this.emit("source#delete",c.params.source,c.params.stream,c.reason);break;default:e.debug(`${c.signature} is not currently implemented`)}}},function(d,E,t){"use strict";const n=t(16),i=t(8),r=t(732),e=t(733),o=t(318),s=t(734),a=t(35)().onlyLocal(),c={};d.exports=c,c.connections={},c.connections.create=function(u){return o({method:"create",uri:`/v2/partner/${u.apiKey}/session/${u.sessionId}/connection/${u.connectionId}`,content:{userAgent:i.env.userAgent,clientVersion:a.clientVersion,capabilities:u.capabilities||[],connectionEventsSuppressed:u.connectionEventsSuppressed}})},c.connections.destroy=function(u){return o({method:"delete",uri:`/v2/partner/${u.apiKey}/session/${u.sessionId}/connection/${u.connectionId}`,content:{}})},c.sessions={},c.sessions.get=function(u,l){return o({method:"read",uri:`/v2/partner/${u}/session/${l}`,content:{}})},c.streams={},c.streams.get=function(u,l,h){return o({method:"read",uri:`/v2/partner/${u}/session/${l}/stream/${h}`,content:{}})},c.streams.channelFromOTChannel=function(u){const l={id:u.id,type:u.type,active:u.active};return"video"===u.type&&(l.width=u.width,l.height=u.height,l.orientation=u.orientation,l.frameRate=u.frameRate,"default"!==u.source&&(l.source=u.source),l.fitMode=u.fitMode),l},c.streams.create=function(u){void 0===u&&(u={});const h=u.apiKey,p=u.sessionId,y=u.streamId,T=u.minBitrate,C=u.maxBitrate,w=u.sourceStreamId,N=u.e2ee,k={id:y,name:u.name,audioFallbackEnabled:u.audioFallbackEnabled,channel:u.channels.map(L=>c.streams.channelFromOTChannel(L)),e2ee:N};return T&&(k.minBitrate=Math.round(T)),C&&(k.maxBitrate=Math.round(C)),w&&(k.sourceStreamId=w),"boolean"==typeof N&&(k.e2ee=N),o({method:"create",uri:`/v2/partner/${h}/session/${p}/stream/${y}`,content:k})},c.streams.destroy=function(u,l,h,p){const y={};return p&&(y.sourceStreamId=p),o({method:"delete",uri:`/v2/partner/${u}/session/${l}/stream/${h}`,content:y})},c.streamChannels={},c.streamChannels.update=function(u,l,h,p,y){return o({method:"update",uri:`/v2/partner/${u}/session/${l}/stream/${h}/channel/${p}`,content:y})},c.subscribers={},c.subscribers.create=function(u){void 0===u&&(u={});const h=u.apiKey,p=u.sessionId,y=u.streamId,O=u.subscriberId,b=u.channelsToSubscribeTo,T=u.sourceStreamId,C=u.e2ee,w={id:O,connection:u.connectionId,keyManagementMethod:s,bundleSupport:r(),rtcpMuxSupport:e(),e2ee:C};return b&&(w.channel=b),T&&(w.sourceStreamId=T),o({method:"create",uri:`/v2/partner/${h}/session/${p}/stream/${y}/subscriber/${O}`,content:w})},c.subscribers.destroy=function(u,l,h,p){return o({method:"delete",uri:`/v2/partner/${u}/session/${l}/stream/${h}/subscriber/${p}`,content:{}})},c.subscribers.update=function(u,l,h,p,y){return o({method:"update",uri:`/v2/partner/${u}/session/${l}/stream/${h}/subscriber/${p}`,content:y})},c.subscriberChannels={},c.subscriberChannels.update=function(u,l,h,p,y,O){return o({method:"update",uri:`/v2/partner/${u}/session/${l}/stream/${h}/subscriber/${p}/channel/${y}`,content:O})},c.signals={},c.signals.create=function(u,l,h,p,y){const O={};return void 0!==p&&(O.type=p),void 0!==y&&(O.data=y),o({method:"signal",uri:`/v2/partner/${u}/session/${l}${void 0!==h?`/connection/${h}`:""}/signal/${n()}`,content:O})},c.forceMute={},c.forceMute.update=u=>{const l=u.apiKey,h=u.sessionId,p=u.streamId,O=u.excludedStreamIds,v={reason:"mute",channels:["audio"],active:u.active,locked:!1};return O&&(v.exclusion=O),o({method:"update",uri:`/v2/partner/${l}/session/${h}${p?`/stream/${p}`:""}`,content:v})}},function(d,E,t){"use strict";const n=t(38),i=t(72),r=t(173),e=t(321),o=t(323);d.exports=function(u,l,h){var C;this.toRaptorMessage=function(){let T=this.to;return T&&"string"!=typeof T&&(T=T.id),e.signals.create(i.value,u,T,this.type,this.data)},this.toHash=function(){return h},this.error=null,this.retryAfterReconnect=!0,h&&(h.hasOwnProperty("data")&&(this.data=n(h.data),this.error=function(C){let w=null;if(null==C)w={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(C).length>8192&&(w={code:413,reason:"The data field was too long, the maximum size of it is 8192 characters"})}catch(N){w={code:400,reason:"The data field was not valid JSON"}}return w}(this.data)),h.hasOwnProperty("to")&&(this.to=h.to,this.error||(this.error=(C=this.to)?C instanceof r||C._tag===o?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"})),h.hasOwnProperty("type")&&(this.error||(this.error=function(C){let w=null;return null==C?w={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:C.length>128?w={code:413,reason:"The signal type was too long, the maximum length of it is 128 characters"}:function(C){return!/^[a-zA-Z0-9\-\._~]+$/.exec(C)}(C)&&(w={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),w}(h.type)),this.type=h.type),h.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=function(C){let w=null;return!0===C||!1===C||(w={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),w}(h.retryAfterReconnect)),this.retryAfterReconnect=h.retryAfterReconnect)),this.valid=null===this.error}},function(d,E,t){"use strict";d.exports={}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=t(325),o=t(50),s=t(173),a=t(737),c=t(320),u=t(2)("SessionDispatcher"),l=t(21),h=t(171),p=t(149),y=t(167);function b(k,L){if(L.streams.has(k.id))return;const D=function v(k,L){const D=k.channel.map(Z=>new p(Z));return new h(k.id,k.name,k.creationTime,L.connections.get(k.connectionId?k.connectionId:k.connection.id),L,D)}(k,L);return L.streams.add(D),D}function C(k,L){if(L.archives.has(k.id))return;const D=function T(k){return new e(k.id,k.name,k.status)}(k);return L.archives.add(D),D}const w=function(L){const D={};this.enqueue=function(){const Z=arguments[0],oe=Array.prototype.slice.call(arguments,1);D[Z]||(D[Z]=new a(L)),D[Z].enqueue.apply(D[Z],oe)},this.triggerConnectionCreated=function(Z){D[`connectionCreated${Z.id}`]&&D[`connectionCreated${Z.id}`].triggerAll()},this.triggerSessionConnected=function(Z){D.sessionConnected&&D.sessionConnected.triggerAll(),Z.forEach(function(oe){this.triggerConnectionCreated(oe)},this)}},N={};d.exports=function(L,D){let Z=(void 0===D?{}:D).connectionEventsSuppressed;const oe=new c;let Q=!1;const ne=new w(oe);oe.on("reconnecting",()=>{L._.reconnecting()}),oe.on("reconnected",()=>{L._.reconnected()}),oe.on("close",ye=>{const Le=L.connection;if(Le){if(Le.destroyedReason())return void u.debug(`Socket was closed but the connection had already been destroyed. Reason: ${Le.destroyedReason()}`);Le.destroy(ye)}});const he=function(Le,me){return L.connections.has(Le.id)?L.connections.get(Le.id):(Le=s.fromHash(Le),(me||L.connection&&Le.id!==L.connection.id)&&(L.connections.add(Le),ne.triggerConnectionCreated(Le)),Object.keys(N).forEach(Oe=>{const ge=N[Oe];ge&&Le.id===ge.connection.id&&(b(ge,L),delete N[ge.id],L.logEvent("streamCreated","warning",{debug:me?"connection came in session#read":"connection came in connection#created",streamId:ge.id,connectionId:Le.id}))}),Le)};oe.on("session#read",(ye,Le)=>{let me;const Oe={streams:[],connections:[],archives:[]};ye.connection.forEach(ge=>{me=he(ge,!0),Oe.connections.push(me)}),ye.stream.forEach(ge=>{Oe.streams.push(b(ge,L))}),(ye.archive||ye.archives).forEach(ge=>{Oe.archives.push(C(ge,L))}),oe.triggerCallback(Le,null,Oe),Q=!0,ne.triggerSessionConnected(L.connections)}),oe.on("session#update",ye=>{if("mute"!==ye.reason)return void u.debug("session#update that handle this reason is not currently implemented");const Le=!0===ye.active;L._.forceMute({active:Le}),Le?L._.enableMuteOnEntry():L._.disableMuteOnEntry()}),oe.on("session#muted",()=>{L._.enableMuteOnEntry(),L._.forceMute({active:!0})}),oe.on("connection#created",ye=>{he(ye)}),oe.on("connection#deleted",(ye,Le)=>{(ye=L.connections.get(ye))?ye.destroy(Le):u.warn("A connection was deleted that we do not know about")}),oe.on("stream#created",(ye,Le)=>{const me=ye.id,Oe=ye.sourceStreamId,ge=ye.connection;let ce;if(Z){if(null==ge||null==ge.id)return void L.logEvent("SessionDispatcher:stream#created","Event",{connection:ge,info:"Stream did not contain a connection object. Event ignored"});he(ge)}if(L.connections.has(ye.connectionId||ge.id))ce=b(ye,L);else{N[me]=ye;const Ue={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:me,sourceStreamId:y(Oe)};L.logEvent("streamCreated","warning",Ue)}ce?(ce.publisher&&ce.publisher.setStream(ce),oe.triggerCallback(Le,null,ce)):L.sessionInfo.isAdaptiveEnabled&&"P2P"===Oe&&l.subscribers.where({streamId:me}).forEach(Ue=>{Ue._.startRoutedToRelayedTransition()})}),oe.on("stream#deleted",(ye,Le,me)=>{const Oe=L.streams.get(ye),Ue=L.sessionInfo.isAdaptiveEnabled&&"P2P"===me.sourceStreamId;!Oe&&!Ue||(Ue?l.subscribers.where({streamId:ye}).forEach(de=>{de._.startRelayedToRoutedTransition()}):Oe.destroy(Le))}),oe.on("stream#updated",(ye,Le)=>{const me=L.streams.get(ye);me?me._.update(Le):u.error(`A stream does not exist with the id of ${ye}, for stream#updated message!`)}),oe.on("stream#update",(ye,Le)=>{const me=L.streams.get(ye);me?"mute"===Le.reason?Le.active&&me._.forceMute(Le):u.debug("stream#update that handle this reason is not currently implemented"):u.error(`A stream does not exist with the id of ${ye}, for stream#updated message!`)}),oe.on("streamChannel#updated",(ye,Le,me)=>{let Oe;ye&&(Oe=L.streams.get(ye))?Oe._.updateChannel(Le,me):u.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!")});const ae=(ye,Le,me,Oe)=>{let ge,ce;const pe={streamId:Le},Ue=l.subscribers,de=l.publishers;switch(ge=Oe.params.subscriber?{widgetId:Oe.params.subscriber}:pe,ye){case"offer":ce=[].concat(Ue.where(ge),de.where(pe)).slice(0,1);break;case"answer":case"pranswer":ce=[].concat(de.where(pe),Ue.where(ge)).slice(0,1);break;case"generateoffer":case"unsubscribe":ce=de.where(pe);break;case"candidate":ce=[].concat(Ue.where(ge),de.where(pe));break;default:return void u.debug(`jsep#${ye} is not currently implemented`)}if(0===ce.length)return;let ve=L.connections.get(me);!ve&&me.match(/^symphony\./)&&(ve=s.fromHash({id:me,creationTime:Math.floor(o())}),L.connections.add(ve)),ce.forEach(function(){var Ae=(0,r.default)(i.default.mark(function Xe(Ye){return i.default.wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.prev=0,at.next=3,Ye.processMessage(ye,me,Oe);case 3:at.next=8;break;case 5:at.prev=5,at.t0=at.catch(0),u.error("Error occurred during processMessage",at.t0);case 8:case"end":return at.stop()}},Xe,null,[[0,5]])}));return function(Xe){return Ae.apply(this,arguments)}}())};return oe.on("jsep#offer",ae.bind(null,"offer")),oe.on("jsep#answer",ae.bind(null,"answer")),oe.on("jsep#pranswer",ae.bind(null,"pranswer")),oe.on("jsep#generateoffer",ae.bind(null,"generateoffer")),oe.on("jsep#unsubscribe",ae.bind(null,"unsubscribe")),oe.on("jsep#candidate",ae.bind(null,"candidate")),oe.on("subscriberChannel#updated",(ye,Le,me)=>{ye&&L.streams.has(ye)?L.streams.get(ye)._.updateChannel(Le,me):u.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!")}),oe.on("subscriberChannel#update",(ye,Le,me)=>{Le&&L.streams.has(Le)?l.subscribers.has(ye)?l.subscribers.get(ye).disableVideo(me.active):u.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!"):u.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!")}),oe.on("signal",(ye,Le)=>{if(Z){let ce=Le.connection||Le.fromConnection;(null==ce||null==ce.id)&&(ce=function O(k){return{id:k,creationTime:(new Date).getTime(),data:{},capablities:{},permissions:[]}}(ye),L.logEvent("SessionDispatcher:Signal","Event",{fromAddress:ye,connection:Le.connection,fromConnection:Le.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:ce})),he(ce)}const me=Le.type,Oe=Le.data,ge=L.connections.get(ye);L.connection&&ye===L.connection.connectionId?Q?L._.dispatchSignal(ge,me,Oe):ne.enqueue("sessionConnected","signal",ye,me,Oe):L.connections.get(ye)?L._.dispatchSignal(ge,me,Oe):""===ye?L._.dispatchSignal(null,me,Oe):ne.enqueue(`connectionCreated${ye}`,"signal",ye,me,Oe)}),oe.on("caption",(ye,Le)=>{L._.dispatchCaption(ye,Le)}),oe.on("archive#created",ye=>{C(ye,L)}),oe.on("archive#updated",(ye,Le)=>{const me=L.archives.get(ye);me?me._.update(Le):u.error(`An archive does not exist with the id of ${ye}, for archive#updated message!`)}),oe.on("source#create",(ye,Le,me)=>{const Oe=y(ye);L.logEvent("SessionDispatcher:source#create","Event",{sourceStreamId:Oe,streamId:Le,reason:me}),u.debug(`Received a request from RUMOR to start a transition to ${ye} for the stream ID ${Le} with the reason: ${me}`),l.publishers.where({streamId:Le}).forEach(ge=>{ge._.startRoutedToRelayedTransition()})}),oe.on("source#delete",(ye,Le,me)=>{L.logEvent("SessionDispatcher:source#delete","Event",{sourceStreamId:y(ye),streamId:Le,reason:me}),u.debug(`Received a request from RUMOR to start a transition from P2P to MANTIS for the stream ID ${Le} with the reason: ${me}`),l.publishers.where({streamId:Le}).forEach(Oe=>{Oe._.startRelayedToRoutedTransition()})}),oe}},function(d,E,t){"use strict";const n=t(23)(),i=t(7);d.exports=function(e,o,s){this.id=e,this.name=o,this.status=s,this._={},i(this),this._.update=a=>{Object.keys(a).forEach(c=>{const u=this[c];this[c]=a[c];const l=new n.ArchiveUpdatedEvent(this,c,u,this[c]);this.dispatchEvent(l)})},this.destroy=()=>{}}},function(d,E,t){"use strict";const i=t(24)().getAudioOutputMediaDevices;d.exports=()=>i()},function(d,E,t){"use strict";const i=t(24)().getActiveAudioOutputDevice;d.exports=()=>i()},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5));const o=t(21),a=t(105).setCurrentAudioOutputDeviceId,c=t(327),u=t(24)(),l=u.getDefaultAudioOutputDeviceId,h=u.getAudioOutputMediaDevices,p=t(295),O=new(t(26)),v=(N,k)=>{O.logEvent({action:"updateSubscribersSinkId",variation:N,payload:k})},b=N=>{const k=o.subscribers.map(L=>L._.setSinkId(N));return n.all(k)},T=function(){var N=(0,e.default)(r.default.mark(function k(L){return r.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,p();case 2:return W.prev=2,v("Attempt",{deviceId:L}),W.next=6,b(L);case 6:v("Success",{deviceId:L}),W.next=13;break;case 9:throw W.prev=9,W.t0=W.catch(2),v("Failure",{deviceId:L,error:null==W.t0?void 0:W.t0.message}),W.t0;case 13:case"end":return W.stop()}},k,null,[[2,9]])}));return function(L){return N.apply(this,arguments)}}(),C=function(){var N=(0,e.default)(r.default.mark(function k(){var D;return r.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,h();case 2:return D=l(Z.sent),Z.prev=4,Z.next=7,T(D);case 7:a(D),Z.next=12;break;case 10:Z.prev=10,Z.t0=Z.catch(4);case 12:case"end":return Z.stop()}},k,null,[[4,10]])}));return function(){return N.apply(this,arguments)}}(),w=function(){var N=(0,e.default)(r.default.mark(function k(){var L;return r.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,c();case 2:return L=W.sent,W.prev=3,W.next=6,T(L.deviceId);case 6:W.next=12;break;case 8:return W.prev=8,W.t0=W.catch(3),W.next=12,C();case 12:case"end":return W.stop()}},k,null,[[3,8]])}));return function(){return N.apply(this,arguments)}}();d.exports=function(){var N=(0,e.default)(r.default.mark(function k(L){return r.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.prev=0,v("Attempt",{deviceId:L}),W.next=4,b(L);case 4:v("Success",{deviceId:L}),a(L),W.next=14;break;case 8:return W.prev=8,W.t0=W.catch(0),v("Failure",{deviceId:L,error:null==W.t0?void 0:W.t0.message}),W.next=13,w();case 13:throw W.t0;case 14:case"end":return W.stop()}},k,null,[[0,8]])}));return function(k){return N.apply(this,arguments)}}()}).call(this,t(0))},function(d,E,t){"use strict";t(330);const n=t(38),i=t(27),r=t(7),e=t(126),o=t(35)(),s=t(26),a=t(249),c=t(556),u=t(557),l=o.onlyLocal(),h={};h.noConflict=t(558)(),(void 0!==typeof window?window:global).OT=h,d.exports=h,(()=>{let Gr=h;Object.defineProperty(void 0!==typeof window?window:global,"TB",{get:()=>(Gr===h&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),Gr),set:pi=>{Gr=pi},configurable:!0})})();const p=t(142)(void 0!==typeof window?window:global),y=t(8),O=t(72),v=t(143),b=t(252),T=t(144),C=t(145),w=t(253),N=t(146),k=t(6),L=t(10),D=t(254),W=t(241),Z=t(2)("OT"),oe=t(119),Q=t(585),ne=t(22),ae=t(101).parseIceServers,ye=t(267),Le=t(21),me=t(149),Oe=t(151),ge=t(152),ce=t(73)({global:p}),pe=t(13)({}),Ue=t(158)(),de=t(281)({otError:pe}),ve=t(282)(),Ae=t(287)({global:p}),Xe=t(24)({getNativeEnumerateDevices:Ae}),Ye=t(23)(),We=t(160)(),at=t(638)({otError:pe,global:p}),At=t(161)({chromeExtensionHelper:de,otError:pe}),ht=t(643)({deviceHelpers:Xe,generateConstraintInfo:D,getUserMediaHelper:at,global:p,OTHelpers:y,screenSharing:At}),Wt=t(646)({otError:pe,processPubOptions:ht}),$t=t(162)({otError:pe}),un=t(75),En=t(292)(),nt=t(293)({otError:pe}),ct=t(294)({global:p,videoElementErrorMap:nt}),De=t(163)({global:p}),lt=t(296)({PeerConnection:ce,setCertificates:De}),wt=t(299)({PeerConnection:ce,setCertificates:De}),In=t(300)(),Gn=t(658)({otError:pe}),ft=t(107)({NativeVideoElementWrapper:ct}),ut=t(150)(),Vt=t(164)({VideoElementFacade:ft}),nn=t(303)({interpretPeerConnectionError:$t,otError:pe,SubscriberPeerConnection:wt,WidgetView:Vt}),Rn=t(168)({APIKEY:O,createChromeMixin:ve,deviceHelpers:Xe,EnvironmentLoader:N,Errors:k,Events:Ye,ExceptionCodes:L,calculateCapableSimulcastStreams:b,global:p,interpretPeerConnectionError:$t,IntervalRunner:un,Microphone:En,otError:pe,OTErrorClass:ne,OTHelpers:y,parseIceServers:ae,processPubOptions:ht,PUBLISH_MAX_DELAY:ye,PublisherPeerConnection:lt,PublishingState:In,StreamChannel:me,systemRequirements:ge,VideoOrientation:ut,WidgetView:Vt}),Pn=t(314)({otError:pe,Publisher:Rn}),Jt=t(315)({global:p,initPublisher:Pn,otError:pe,Publisher:Rn,Subscriber:nn}),Mr=t(746)({Session:Jt});r(h);const bn=t(747),Zn=t(750);a(h,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:y}),h.APIKEY=O.value,h.AnalyserAudioLevelSampler=C,h.Archive=t(325),h.ArchiveEvent=Ye.ArchiveEvent,h.ArchiveUpdatedEvent=Ye.ArchiveUpdatedEvent,h.AudioLevelTransformer=v,h.AudioLevelUpdatedEvent=Ye.AudioLevelUpdatedEvent,h.Capabilities=t(169),h.Chrome=T,h.Connection=t(173),h.ConnectionCapabilities=h.Connection.Capabilities,h.ConnectionEvent=Ye.ConnectionEvent,Object.keys(oe).forEach(Gr=>{h[Gr.toUpperCase()]=oe[Gr].priority}),h.NONE=0,h.debug=Z.debug,h.error=Z.error,h.info=Z.info,h.log=Z.log,h.warn=Z.warn,h.DestroyedEvent=Ye.DestroyedEvent,h.EnvLoadedEvent=Ye.EnvLoadedEvent,h.Error=ne,h.Error.on(i.EXCEPTION,Gr=>{if(Gr.target===h.Error){const pi=n(Gr);pi.target=h,h.dispatchEvent(pi)}else h.dispatchEvent(Gr)}),h.Event=e,h.ExceptionCodes=L,h.ExceptionEvent=Ye.ExceptionEvent,h.getDevices=t(751),h.getAudioOutputDevices=t(326),h.getActiveAudioOutputDevice=t(327),h.setAudioOutputDevice=t(752)(),h.GetAudioLevelSampler=w,h.HAS_REQUIREMENTS=1,h.IntervalRunner=un,h.IssueReportedEvent=Ye.IssueReportedEvent,h.MediaStoppedEvent=Ye.MediaStoppedEvent,h.Microphone=En,h.NOT_HAS_REQUIREMENTS=0,h.PeerConnection=ce,h.PeerConnection.QOS=t(279).default,h.Publisher=Rn,h.PublisherPeerConnection=lt,h.PublishingState=In,h.MuteForcedEvent=Ye.MuteForcedEvent,h.Session=Jt,h.SessionConnectEvent=Ye.SessionConnectEvent,h.SessionDisconnectEvent=Ye.SessionDisconnectEvent,h.SessionDispatcher=t(324),h.Signal=t(322),h.SignalEvent=Ye.SignalEvent,h.Stream=t(171),h.StreamChannel=me,h.StreamEvent=Ye.StreamEvent,h.StreamPropertyChangedEvent=Ye.StreamPropertyChangedEvent,h.StreamUpdatedEvent=Ye.StreamUpdatedEvent,h.StylableComponent=Oe,h.Subscriber=nn,h.SubscriberPeerConnection=wt,h.SubscribingState=t(306),h.VideoDimensionsChangedEvent=Ye.VideoDimensionsChangedEvent,h.VideoDisableWarningEvent=Ye.VideoDisableWarningEvent,h.VideoElement=ft,h.VideoEnabledChangedEvent=Ye.VideoEnabledChangedEvent,h.VideoOrientation=ut,h.WidgetView=Vt,h.getSupportedCodecs=bn,h.hasMediaProcessorSupport=Zn,h._={AnalyticsHelper:s,getClientGuid:W.get,StaticConfig:o},Object.defineProperty(h,"version",{value:l.version});const Ht={};a(Ht,"version",{value:l.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),c.forEach(Gr=>{let pi,uo;if(Array.isArray(Gr)){const Di=Gr[1];uo=Gr[0],pi=l[Di]||Di}else pi=l[Gr],uo=Gr;const gi=(Gr=>u.includes(Gr))(uo);a(Ht,uo,{value:pi,name:`OT.properties.${uo}`,warnOnSet:!0,canSet:gi,setWarning:gi?`Mutating ${uo} can cause side effects`:`Mutating ${uo} has no effect`})}),h.properties=Ht,h.audioContext=Ue,h.checkScreenSharingCapability=At.checkCapability,h.checkSystemRequirements=ge.check,h.components={},h.generateSimpleStateMachine=We,h.getErrorTitleByCode=ne.getTitleByCode,h.getLogs=Z.getLogs,h.getStatsAdpater=t(275),h.getStatsHelpers=t(76),h.getUserMedia=Wt,h.handleJsException=ne.handleJsException,h.initPublisher=Pn,h.setProxyUrl=t(139).setProxyUrl,h.initSession=function(Gr,pi,uo){return null==pi&&(pi=Gr,Gr=null),0===O.value.length&&Gr&&(O.value=Gr,h.APIKEY=Gr),Mr(Gr,pi,uo)};const bo=(Gr,pi)=>()=>(console.warn((Gr=>`${Gr} is deprecated and will be removed in a future version of OpenTok`)(Gr)),pi);Object.defineProperties(h,{isUnloaded:{get:bo("OT.isUnloaded",N.isUnloaded)},onLoad:{get:bo("OT.onLoad",N.onLoad)},onUnload:{get:bo("OT.onUnload",N.onUnload)},overrideGuidStorage:{get:bo("OT.overrideGuidStorage",W.override)}}),h.pickScreenSharingHelper=At.pickHelper,h.publishers=Le.publishers,h.registerScreenSharingExtension=At.registerExtension,h.registerScreenSharingExtensionHelper=At.registerExtensionHelper,h.reportIssue=Gn,h.sessions=Le.sessions,h.setLogLevel=Q,h.shouldLog=Z.shouldLog,h.subscribers=Le.subscribers,h.unblockAudio=t(166),h.upgradeSystemRequirements=ge.upgrade,N.onUnload(()=>{Le.publishers.destroy(),Le.subscribers.destroy(),Le.sessions.destroy("unloaded")}),t(753)()},function(d,E,t){var n=t(331);"string"==typeof n&&(n=[[d.i,n,""]]);t(345)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(d.exports=n.locals)},function(d,E,t){E=d.exports=t(332)(!1);var n=t(333),i=n(t(334)),r=n(t(335)),e=n(t(336)),o=n(t(337)),s=n(t(338)),a=n(t(339)),c=n(t(340)),u=n(t(341)),l=n(t(342)),h=n(t(343)),p=n(t(344));E.push([d.i,"/*!\n * Copyright (c) 2017 TokBox, Inc.\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n */\n\n/**\n * OT Base styles\n */\n\n/* Root OT object, this is where our CSS reset happens */\n.OT_root,\n.OT_root * {\n  color: #ffffff;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font-family: Arial, Helvetica, sans-serif;\n  vertical-align: baseline;\n}\n\n/**\n * Specific Element Reset\n */\n\n.OT_root h1,\n.OT_root h2,\n.OT_root h3,\n.OT_root h4,\n.OT_root h5,\n.OT_root h6 {\n  color: #ffffff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 100%;\n  font-weight: bold;\n}\n\n.OT_root header {\n\n}\n\n.OT_root footer {\n\n}\n\n.OT_root div {\n\n}\n\n.OT_root section {\n\n}\n\n.OT_root video {\n\n}\n\n.OT_root button {\n\n}\n\n.OT_root strong {\n  font-weight: bold;\n}\n\n.OT_root em {\n  font-style: italic;\n}\n\n.OT_root a,\n.OT_root a:link,\n.OT_root a:visited,\n.OT_root a:hover,\n.OT_root a:active {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.OT_root ul, .OT_root ol {\n  margin: 1em 1em 1em 2em;\n}\n\n.OT_root ol {\n  list-style: decimal outside;\n}\n\n.OT_root ul {\n  list-style: disc outside;\n}\n\n.OT_root dl {\n  margin: 4px;\n}\n\n.OT_root dl dt,\n.OT_root dl dd {\n  float: left;\n  margin: 0;\n  padding: 0;\n}\n\n.OT_root dl dt {\n  clear: left;\n  text-align: right;\n  width: 50px;\n}\n\n.OT_root dl dd {\n  margin-left: 10px;\n}\n\n.OT_root img {\n  border: 0 none;\n}\n\n/* Modal dialog styles */\n\n/* Modal dialog styles */\n\n.OT_dialog-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_dialog-centering-child {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_dialog {\n  position: relative;\n\n  box-sizing: border-box;\n  max-width: 576px;\n  margin-right: auto;\n  margin-left: auto;\n  padding: 36px;\n  text-align: center; /* centers all the inline content */\n\n  background-color: #363636;\n  color: #fff;\n  box-shadow: 2px 4px 6px #999;\n  font-family: 'Didact Gothic', sans-serif;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.OT_dialog * {\n  font-family: inherit;\n  box-sizing: inherit;\n}\n\n.OT_closeButton {\n  color: #999999;\n  cursor: pointer;\n  font-size: 32px;\n  line-height: 36px;\n  position: absolute;\n  right: 18px;\n  top: 0;\n}\n\n.OT_dialog-messages {\n  text-align: center;\n}\n\n.OT_dialog-messages-main {\n  margin-bottom: 36px;\n  line-height: 36px;\n\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.OT_dialog-messages-minor {\n  margin-bottom: 18px;\n\n  font-size: 13px;\n  line-height: 18px;\n  color: #A4A4A4;\n}\n\n.OT_dialog-messages-minor strong {\n  color: #ffffff;\n}\n\n.OT_dialog-actions-card {\n  display: inline-block;\n}\n\n.OT_dialog-button-title {\n  margin-bottom: 18px;\n  line-height: 18px;\n\n  font-weight: 300;\n  text-align: center;\n  font-size: 14px;\n  color: #999999;\n}\n.OT_dialog-button-title label {\n  color: #999999;\n}\n\n.OT_dialog-button-title a,\n.OT_dialog-button-title a:link,\n.OT_dialog-button-title a:active {\n  color: #02A1DE;\n}\n\n.OT_dialog-button-title strong {\n  color: #ffffff;\n  font-weight: 100;\n  display: block;\n}\n\n.OT_dialog-button {\n  display: inline-block;\n\n  margin-bottom: 18px;\n  padding: 0 1em;\n\n  background-color: #1CA3DC;\n  text-align: center;\n  cursor: pointer;\n}\n\n.OT_dialog-button:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n.OT_dialog-button-large {\n  line-height: 36px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  font-weight: 100;\n  font-size: 24px;\n}\n\n.OT_dialog-button-small {\n  line-height: 18px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  background-color: #444444;\n  color: #999999;\n  font-size: 16px;\n}\n\n.OT_dialog-progress-bar {\n  display: inline-block; /* prevents margin collapse */\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 41px;\n\n  border: 1px solid #4E4E4E;\n  height: 8px;\n}\n\n.OT_dialog-progress-bar-fill {\n  height: 100%;\n\n  background-color: #29A4DA;\n}\n\n/* Helpers */\n\n.OT_centered {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  margin: 0;\n}\n\n.OT_dialog-hidden {\n  display: none;\n}\n\n.OT_dialog-button-block {\n  display: block;\n}\n\n.OT_dialog-no-natural-margin {\n  margin-bottom: 0;\n}\n\n/* Publisher and Subscriber styles */\n\n.OT_publisher, .OT_subscriber {\n  position: relative;\n  min-width: 48px;\n  min-height: 48px;\n}\n\n.OT_publisher .OT_video-element,\n.OT_subscriber .OT_video-element {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  transform-origin: 0 0;\n}\n\n/* Styles that are applied when the video element should be mirrored */\n.OT_publisher.OT_mirrored .OT_video-element {\n  transform: scale(-1, 1);\n  transform-origin: 50% 50%;\n}\n\n.OT_subscriber_error {\n  background-color: #000;\n  color: #fff;\n  text-align: center;\n}\n\n.OT_subscriber_error > p {\n  padding: 20px;\n}\n\n/* The publisher/subscriber name/mute background */\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar,\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name,\n.OT_publisher .OT_archiving,\n.OT_subscriber .OT_archiving,\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status,\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  -ms-box-sizing: border-box;\n  box-sizing: border-box;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: block;\n  height: 34px;\n  position: absolute;\n}\n\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar {\n  background: rgba(0, 0, 0, 0.4);\n}\n\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  z-index: 1; /* required to get audio level meter underneath */\n}\n\n/* The publisher/subscriber name panel/archiving status bar */\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n  background-color: transparent;\n  color: #ffffff;\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n  padding: 0 4px 0 36px;\n  letter-spacing: normal;\n}\n\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  left: 34px;\n  padding: 0 4px;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n  letter-spacing: normal;\n}\n\n.OT_micro .OT_archiving-status,\n.OT_micro:hover .OT_archiving-status,\n.OT_mini .OT_archiving-status,\n.OT_mini:hover .OT_archiving-status {\n  display: none;\n}\n\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  right: auto;\n  width: 34px;\n  height: 34px;\n}\n\n.OT_archiving-light {\n  width: 7px;\n  height: 7px;\n  border-radius: 30px;\n  position: absolute;\n  top: 14px;\n  left: 14px;\n  background-color: #575757;\n  box-shadow: 0 0 5px 1px #575757;\n}\n\n.OT_archiving-light.OT_active {\n  background-color: #970d13;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -moz-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation-iteration-count: infinite;\n  -moz-animation-iteration-count: infinite;\n  -webkit-animation-iteration-count: infinite;\n}\n\n.OT_mini .OT_bar,\n.OT_bar.OT_mode-mini,\n.OT_bar.OT_mode-mini-auto {\n  bottom: 0;\n  height: auto;\n}\n\n.OT_mini .OT_name.OT_mode-off,\n.OT_mini .OT_name.OT_mode-on,\n.OT_mini .OT_name.OT_mode-auto,\n.OT_mini:hover .OT_name.OT_mode-auto {\n  display: none;\n}\n\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n    left: 10px;\n    right: 37px;\n    height: 34px;\n    padding-left: 0;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n    border: none;\n    cursor: pointer;\n    display: block;\n    position: absolute;\n    text-align: center;\n    text-indent: -9999em;\n    background-color: transparent;\n    background-repeat: no-repeat;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n  right: 0;\n  top: 0;\n  border-left: 1px solid rgba(255, 255, 255, 0.2);\n  height: 36px;\n  width: 37px;\n}\n\n.OT_mini .OT_mute,\n.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {\n  top: 50%;\n  left: 50%;\n  right: auto;\n  margin-top: -18px;\n  margin-left: -18.5px;\n  border-left: none;\n}\n\n.OT_publisher .OT_mute {\n  background-image: url("+i+");\n  background-position: 9px 5px;\n}\n\n.OT_publisher .OT_mute.OT_active {\n  background-image: url("+r+");\n  background-position: 9px 4px;\n}\n\n.OT_subscriber .OT_mute {\n  background-image: url("+e+");\n  background-position: 8px 7px;\n}\n\n.OT_subscriber .OT_mute.OT_active {\n  background-image: url("+o+");\n  background-position: 7px 7px;\n}\n\n/**\n * Styles for display modes\n *\n * Note: It's important that these completely control the display and opacity\n * attributes, no other selectors should atempt to change them.\n */\n\n/* Default display mode transitions for various chrome elements */\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  transition-property: top, bottom, opacity;\n  transition-duration: 0.5s;\n  transition-timing-function: ease-in;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {\n  top: -25px;\n  opacity: 0;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off {\n  display: none;\n}\n\n.OT_mini .OT_mute.OT_mode-auto,\n.OT_publisher .OT_mute.OT_mode-mini-auto,\n.OT_subscriber .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {\n  top: auto;\n  bottom: -25px;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_mode-on,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {\n  top: 0;\n  opacity: 1;\n}\n\n.OT_mini .OT_mute.OT_mode-on,\n.OT_mini:hover .OT_mute.OT_mode-auto,\n.OT_mute.OT_mode-mini,\n.OT_root:hover .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {\n  top: auto;\n  bottom: 0;\n  opacity: 1;\n}\n\n\n/* Contains the video element, used to fix video letter-boxing */\n.OT_widget-container {\n  position: absolute;\n  background-color: #000000;\n  overflow: hidden;\n}\n\n.OT_hidden-audio {\n  position: absolute !important;\n  height: 1px !important;\n  width: 1px !important;\n}\n\n/* Load animation */\n.OT_root .OT_video-loading {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  background-color: rgba(0, 0, 0, .75);\n}\n\n.OT_root .OT_video-loading .OT_video-loading-spinner {\n  background: url("+s+") no-repeat;\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  left: 50%;\n  top: 50%;\n  margin-left: -16px;\n  margin-top: -16px;\n  animation: OT_spin 2s linear infinite;\n}\n@keyframes OT_spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.OT_publisher.OT_loading .OT_video-loading,\n.OT_subscriber.OT_loading .OT_video-loading {\n  display: block;\n}\n\n.OT_publisher.OT_loading .OT_video-element,\n.OT_subscriber.OT_loading .OT_video-element {\n  /*display: none;*/\n}\n\n.OT_video-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_video-container {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_video-poster {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  opacity: .25;\n\n  background-repeat: no-repeat;\n  background-image: url("+a+");\n  background-size: auto 76%;\n}\n\n.OT_fit-mode-cover .OT_video-element {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n\n/* Workaround for iOS freezing issue when cropping videos */\n/* https://bugs.webkit.org/show_bug.cgi?id=176439 */\n@media only screen\n  and (orientation: portrait) {\n  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {\n    -o-object-fit: contain !important;\n       object-fit: contain !important;\n  }\n}\n\n.OT_fit-mode-contain .OT_video-element {\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n\n.OT_fit-mode-cover .OT_video-poster {\n  background-position: center bottom;\n}\n\n.OT_fit-mode-contain .OT_video-poster {\n  background-position: center;\n}\n\n.OT_audio-level-meter {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  right: 0;\n  overflow: hidden;\n}\n\n.OT_audio-level-meter:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__audio-only-img {\n  position: absolute;\n  top: 22%;\n  right: 15%;\n  width: 40%;\n\n  opacity: .7;\n\n  background: url("+c+") no-repeat center;\n}\n\n.OT_audio-level-meter__audio-only-img:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__value {\n  will-change: transform;\n  position: absolute;\n  top: -100%;\n  right: -100%;\n  width: 200%;\n  height: 200%;\n  transform: scale(0);\n  border-radius: 50%;\n  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);\n}\n\n.OT_audio-level-meter.OT_mode-off {\n    display: none;\n}\n\n.OT_audio-level-meter.OT_mode-on,\n.OT_audio-only .OT_audio-level-meter.OT_mode-auto {\n  display: block;\n}\n\n.OT_audio-only.OT_publisher .OT_video-element,\n.OT_audio-only.OT_subscriber .OT_video-element {\n  display: none;\n}\n\n\n.OT_video-disabled-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: bottom right;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 3px;\n  right: 3px;\n}\n\n.OT_video-disabled {\n  background-image: url("+u+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-warning {\n  background-image: url("+l+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-indicator.OT_active {\n  display: block;\n}\n\n.OT_audio-blocked-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.OT_audio-blocked {\n  background-image: url("+h+");\n  background-size: 90px auto;\n}\n\n.OT_container-audio-blocked {\n  cursor: pointer;\n}\n\n.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {\n  display: none;\n}\n\n.OT_container-audio-blocked .OT_mute {\n  display: none;\n}\n\n.OT_audio-blocked-indicator.OT_active {\n  display: block;\n}\n\n.OT_video-unsupported {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url("+p+");\n  background-size: 58px auto;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin-top: -30px;\n}\n\n.OT_video-unsupported-bar {\n  display: none;\n  position: absolute;\n  width: 192%; /* copy the size of the audio meter bar for symmetry */\n  height: 192%;\n  top: -96% /* half of the size */;\n  left: -96%;\n  border-radius: 50%;\n\n  background-color: rgba(0, 0, 0, .8);\n}\n\n.OT_video-unsupported-img {\n  display: none;\n  position: absolute;\n  top: 11%;\n  left: 15%;\n  width: 70%;\n  opacity: .7;\n  background-image: url("+p+");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 100% auto;\n}\n\n.OT_video-unsupported-img:before {\n  /* makes the height of the container 93% of its width (90/97 px) */\n  content: '';\n  display: block;\n  padding-top: 93%;\n}\n\n.OT_video-unsupported-text {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n  margin-top: 40px;\n}\n\n.OT_video-unsupported.OT_active {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported,\n.OT_micro .OT_video-unsupported {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  background: none;\n  bottom: auto;\n  right: auto;\n  margin: auto;\n}\n\n.OT_mini .OT_video-unsupported:before,\n.OT_micro .OT_video-unsupported:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_mini .OT_video-unsupported-bar,\n.OT_micro .OT_video-unsupported-bar,\n.OT_mini .OT_video-unsupported-img,\n.OT_micro .OT_video-unsupported-img {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported-text,\n.OT_micro .OT_video-unsupported-text {\n  display: none;\n}\n\n.OT_hide-forced {\n  display: none;\n}\n\n.OT_ModalDialog {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n#tb_alert {\n  position: fixed;\n  width: 570px;\n  font-family: \"Lucida Grande\", Arial;\n  top: 50%;\n  left: 50%;\n  margin-top: -75px;\n  margin-left: -285px;\n}\n\n#tb_alert * {\n  box-sizing: border-box;\n}\n\n#tb_alert .OT_alert {\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  background-color: #333;\n  position: relative;\n  padding: 30px;\n  overflow: visible;\n  margin-left: 70px;\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n  border-left-color: rgba(255, 255, 255, 0.1);\n\n  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-size: 4px 4px;\n  background-position: 0 0, 2px 2px;\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n#tb_alert .OT_alert-exclamation {\n  background-color: #9c1408;\n  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n\n  margin: -1px 0;\n\n  font-family: MS Trebuchet;\n  font-weight: bold;\n  font-size: 60px;\n  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);\n\n  color: white;\n  width: 65px;\n  position: absolute;\n  padding: 42px 0;\n  text-align: center;\n  left: -70px;\n  top: 0;\n  bottom: 0;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n\n  border-bottom-color: transparent;\n  border-left: none;\n  border-right: none;\n}\n\n#tb_alert .OT_alert-exclamation:after,\n#tb_alert .OT_alert-exclamation:before {\n  content: \" \";\n  position: absolute;\n  right: -24px;\n  top: 40%;\n  border: 12px solid transparent;\n  border-left-color: #9c1408;\n}\n\n#tb_alert .OT_alert-exclamation:before {\n  border-left-color: #bc3428;\n  top: 39%;\n}\n\n#tb_alert .OT_alert-body {\n  color: #c8c5c5;\n  margin: 0;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  font-size: 14px;\n  line-height: 1.3em;\n}\n\n#tb_alert .continue-text {\n  margin-top: 12px\n}\n\n#tb_alert > * a {\n  color: #a7d8df;\n  text-decoration: none;\n}\n\n#tb_alert .OT_alert-header {\n  font-size: 24px;\n  padding-bottom: 5px;\n  color: #aaa;\n  font-weight: bold;\n  position: relative;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  margin: 0;\n}\n\n#tb_alert .OT_alert-header::before {\n  content: attr(data-text);\n  position: absolute;\n  left: 0;\n  color: white;\n  -webkit-mask-image: -webkit-gradient(\n    linear,\n    left top, left bottom,\n    from(rgba(0, 0, 0, 1)),\n    color-stop(60%, rgba(0, 0, 0, 0)),\n    to(rgba(0, 0, 0, 0))\n  );\n}\n\n#tb_alert .OT_alert-close-button {\n  position: absolute;\n  right: 8px;\n  top: 5px;\n  background-color: #000;\n  color: #666;\n  border: none;\n  font-size: 20px;\n  /** Hack to bring it up to the proper line top */\n  line-height: 14px;\n  padding: 0;\n  padding-bottom: 3px;\n  cursor: pointer;\n}\n\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  width: 200px;\n  top: 0px;\n  left: 25%;\n  margin-top: 0;\n  margin-left: 0;\n}\n\n@media all and (max-height: 300px) {\n  #tb_alert {\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    margin-left: 0;\n    margin-top: 0;\n  }\n  #tb_alert #section-mobile-browser,\n  #tb_alert #section-supported-mobile-browser {\n    margin-left: 0;\n    margin-top: 10px;\n    left: 0;\n  }\n}\n\n#tb_alert #section-normal-install,\n#tb_alert #section-upgrade-install,\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  display: none;\n}\n",""])},function(d,E,t){"use strict";d.exports=function(r){var e=[];return e.toString=function(){return this.map(function(s){var a=function n(r,e){var o=r[1]||"",s=r[3];if(!s)return o;if(e&&"function"==typeof btoa){var a=function i(r){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"}(s),c=s.sources.map(function(u){return"/*# sourceURL="+s.sourceRoot+u+" */"});return[o].concat(c).concat([a]).join("\n")}return[o].join("\n")}(s,r);return s[2]?"@media "+s[2]+"{"+a+"}":a}).join("")},e.i=function(o,s){"string"==typeof o&&(o=[[null,o,""]]);for(var a={},c=0;c<this.length;c++){var u=this[c][0];null!=u&&(a[u]=!0)}for(c=0;c<o.length;c++){var l=o[c];(null==l[0]||!a[l[0]])&&(s&&!l[2]?l[2]=s:s&&(l[2]="("+l[2]+") and ("+s+")"),e.push(l))}},e}},function(d,E,t){"use strict";d.exports=function(i,r){return"string"!=typeof i?i:(/^['"].*['"]$/.test(i)&&(i=i.slice(1,-1)),/["'() \t\n]/.test(i)||r?'"'+i.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':i)}},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII="},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg=="},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII="},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg=="},function(d,E){d.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwMTAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNiKSIgZD0iTTg2LjYgNTBBMTAwIDEwMCAwIDAxMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2MpIiBkPSJNMCAxMDBhMTAwIDEwMCAwIDAxLTg2LjYtNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2QpIiBkPSJNLTg2LjYgNTBhMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2UpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAxODYuNiA1MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48L2c+PC9tYXNrPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSItMjAiIHk9Ii0yMCIgbWFzaz0idXJsKCNnKSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="},function(d,E){d.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjY2LjY2JSIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJNNzkgMzA4YzE0LjI1LTYuNSA1NC4yNS0xOS43NSA3MS0yOSA5LTMuMjUgMjUtMjEgMjUtMjFzMy43NS0xMyAzLTIyYy0xLjc1LTYuNzUtMTUtNDMtMTUtNDMtMi41IDMtNC43NDEgMy4yNTktNyAxLTMuMjUtNy41LTIwLjUtNDQuNS0xNi01NyAxLjI1LTcuNSAxMC02IDEwLTYtMTEuMjUtMzMuNzUtOC02Ny04LTY3cy4wNzMtNy4zNDYgNi0xNWMtMy40OC42MzctOSA0LTkgNCAyLjU2My0xMS43MjcgMTUtMjEgMTUtMjEgLjE0OC0uMzEyLTEuMzIxLTEuNDU0LTEwIDEgMS41LTIuNzggMTYuNjc1LTguNjU0IDMwLTExIDMuNzg3LTkuMzYxIDEyLjc4Mi0xNy4zOTggMjItMjItMi4zNjUgMy4xMzMtMyA2LTMgNnMxNS42NDctOC4wODggNDEtNmMtMTkuNzUgMi0yNCA2LTI0IDZzNzQuNS0xMC43NSAxMDQgMzdjNy41IDkuNSAyNC43NSA1NS43NSAxMCA4OSAzLjc1LTEuNSA0LjUtNC41IDkgMSAuMjUgMTQuNzUtMTEuNSA2My0xOSA2Mi0yLjc1IDEtNC0zLTQtMy0xMC43NSAyOS41LTE0IDM4LTE0IDM4LTIgNC4yNS0zLjc1IDE4LjUtMSAyMiAxLjI1IDQuNSAyMyAyMyAyMyAyM2wxMjcgNTNjMzcgMzUgMjMgMTM1IDIzIDEzNUwwIDQ2NHMtMy05Ni43NSAxNC0xMjBjNS4yNS02LjI1IDIxLjc1LTE5Ljc1IDY1LTM2eiIvPjwvc3ZnPg=="},function(d,E){d.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+"},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(d,E){d.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(d,E){d.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwMTQzIDQ0YTguOTg4IDguOTg4IDAgMDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAxMTAuMzc0LS40MkM1MS43MDIgMTkuMTE0IDU0IDI5LjIwOCA1NCA0NS4yMDhjMCAxNC41MjctMi4zNDMgMjMuODgtNy4wMyAyOC4wNThhNy4yOCA3LjI4IDAgMDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwMS01LTV2LTEzYTUgNSAwIDAxNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(d,E){d.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMDE1IDVWNTguMThhNSA1IDAgMDEtNSA1SDkuMTFhNSA1IDAgMDEtNS01VjI1Ljk3YTUgNSAwIDAxNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwMTQuMzA0IDIuNzAydjI2LjgzNWEzIDMgMCAwMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(d,E,t){var D,W,n={},r=(D=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===W&&(W=D.apply(this,arguments)),W}),e=function(D,W){return W?W.querySelector(D):document.querySelector(D)},o=function(D){var W={};return function(Z,oe){if("function"==typeof Z)return Z();if(void 0===W[Z]){var Q=e.call(this,Z,oe);if(window.HTMLIFrameElement&&Q instanceof window.HTMLIFrameElement)try{Q=Q.contentDocument.head}catch(ne){Q=null}W[Z]=Q}return W[Z]}}(),s=null,a=0,c=[],u=t(346);function l(D,W){for(var Z=0;Z<D.length;Z++){var oe=D[Z],Q=n[oe.id];if(Q){Q.refs++;for(var ne=0;ne<Q.parts.length;ne++)Q.parts[ne](oe.parts[ne]);for(;ne<oe.parts.length;ne++)Q.parts.push(C(oe.parts[ne],W))}else{var he=[];for(ne=0;ne<oe.parts.length;ne++)he.push(C(oe.parts[ne],W));n[oe.id]={id:oe.id,refs:1,parts:he}}}}function h(D,W){for(var Z=[],oe={},Q=0;Q<D.length;Q++){var ne=D[Q],he=W.base?ne[0]+W.base:ne[0],me={css:ne[1],media:ne[2],sourceMap:ne[3]};oe[he]?oe[he].parts.push(me):Z.push(oe[he]={id:he,parts:[me]})}return Z}function p(D,W){var Z=o(D.insertInto);if(!Z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var oe=c[c.length-1];if("top"===D.insertAt)oe?oe.nextSibling?Z.insertBefore(W,oe.nextSibling):Z.appendChild(W):Z.insertBefore(W,Z.firstChild),c.push(W);else if("bottom"===D.insertAt)Z.appendChild(W);else{if("object"!=typeof D.insertAt||!D.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var Q=o(D.insertAt.before,Z);Z.insertBefore(W,Q)}}function y(D){if(null===D.parentNode)return!1;D.parentNode.removeChild(D);var W=c.indexOf(D);W>=0&&c.splice(W,1)}function O(D){var W=document.createElement("style");if(void 0===D.attrs.type&&(D.attrs.type="text/css"),void 0===D.attrs.nonce){var Z=function T(){return t.nc}();Z&&(D.attrs.nonce=Z)}return b(W,D.attrs),p(D,W),W}function b(D,W){Object.keys(W).forEach(function(Z){D.setAttribute(Z,W[Z])})}function C(D,W){var Z,oe,Q,ne;if(W.transform&&D.css){if(!(ne="function"==typeof W.transform?W.transform(D.css):W.transform.default(D.css)))return function(){};D.css=ne}if(W.singleton){var he=a++;Z=s||(s=O(W)),oe=N.bind(null,Z,he,!1),Q=N.bind(null,Z,he,!0)}else D.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(Z=function v(D){var W=document.createElement("link");return void 0===D.attrs.type&&(D.attrs.type="text/css"),D.attrs.rel="stylesheet",b(W,D.attrs),p(D,W),W}(W),oe=L.bind(null,Z,W),Q=function(){y(Z),Z.href&&URL.revokeObjectURL(Z.href)}):(Z=O(W),oe=k.bind(null,Z),Q=function(){y(Z)});return oe(D),function(ye){if(ye){if(ye.css===D.css&&ye.media===D.media&&ye.sourceMap===D.sourceMap)return;oe(D=ye)}else Q()}}d.exports=function(D,W){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(W=W||{}).attrs="object"==typeof W.attrs?W.attrs:{},!W.singleton&&"boolean"!=typeof W.singleton&&(W.singleton=r()),W.insertInto||(W.insertInto="head"),W.insertAt||(W.insertAt="bottom");var Z=h(D,W);return l(Z,W),function(Q){for(var ne=[],he=0;he<Z.length;he++)(ye=n[Z[he].id]).refs--,ne.push(ye);for(Q&&l(h(Q,W),W),he=0;he<ne.length;he++){var ye;if(0===(ye=ne[he]).refs){for(var me=0;me<ye.parts.length;me++)ye.parts[me]();delete n[ye.id]}}}};var w=function(){var D=[];return function(W,Z){return D[W]=Z,D.filter(Boolean).join("\n")}}();function N(D,W,Z,oe){var Q=Z?"":oe.css;if(D.styleSheet)D.styleSheet.cssText=w(W,Q);else{var ne=document.createTextNode(Q),he=D.childNodes;he[W]&&D.removeChild(he[W]),he.length?D.insertBefore(ne,he[W]):D.appendChild(ne)}}function k(D,W){var Z=W.css,oe=W.media;if(oe&&D.setAttribute("media",oe),D.styleSheet)D.styleSheet.cssText=Z;else{for(;D.firstChild;)D.removeChild(D.firstChild);D.appendChild(document.createTextNode(Z))}}function L(D,W,Z){var oe=Z.css,Q=Z.sourceMap;(W.convertToAbsoluteUrls||void 0===W.convertToAbsoluteUrls&&Q)&&(oe=u(oe)),Q&&(oe+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(Q))))+" */");var he=new Blob([oe],{type:"text/css"}),ae=D.href;D.href=URL.createObjectURL(he),ae&&URL.revokeObjectURL(ae)}},function(d,E){d.exports=function(t){var n="undefined"!=typeof window&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=n.protocol+"//"+n.host,r=i+n.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(o,s){var c,a=s.trim().replace(/^"(.*)"$/,function(u,l){return l}).replace(/^'(.*)'$/,function(u,l){return l});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?o:(c=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(c)+")")})}},function(d,E){d.exports=function t(){this.__data__=[],this.size=0}},function(d,E,t){var n=t(81),r=Array.prototype.splice;d.exports=function e(o){var s=this.__data__,a=n(s,o);return!(a<0||(a==s.length-1?s.pop():r.call(s,a,1),--this.size,0))}},function(d,E,t){var n=t(81);d.exports=function i(r){var e=this.__data__,o=n(e,r);return o<0?void 0:e[o][1]}},function(d,E,t){var n=t(81);d.exports=function i(r){return n(this.__data__,r)>-1}},function(d,E,t){var n=t(81);d.exports=function i(r,e){var o=this.__data__,s=n(o,r);return s<0?(++this.size,o.push([r,e])):o[s][1]=e,this}},function(d,E,t){var n=t(80);d.exports=function i(){this.__data__=new n,this.size=0}},function(d,E){d.exports=function t(n){var i=this.__data__,r=i.delete(n);return this.size=i.size,r}},function(d,E){d.exports=function t(n){return this.__data__.get(n)}},function(d,E){d.exports=function t(n){return this.__data__.has(n)}},function(d,E,t){var n=t(80),i=t(109),r=t(110);d.exports=function o(s,a){var c=this.__data__;if(c instanceof n){var u=c.__data__;if(!i||u.length<199)return u.push([s,a]),this.size=++c.size,this;c=this.__data__=new r(u)}return c.set(s,a),this.size=c.size,this}},function(d,E,t){var n=t(17),i=t(360),r=t(11),e=t(175),s=/^\[object .+?Constructor\]$/,h=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");d.exports=function p(y){return!(!r(y)||i(y))&&(n(y)?h:s).test(e(y))}},function(d,E,t){var n=t(40),i=Object.prototype,r=i.hasOwnProperty,e=i.toString,o=n?n.toStringTag:void 0;d.exports=function s(a){var c=r.call(a,o),u=a[o];try{a[o]=void 0;var l=!0}catch(p){}var h=e.call(a);return l&&(c?a[o]=u:delete a[o]),h}},function(d,E){var n=Object.prototype.toString;d.exports=function i(r){return n.call(r)}},function(d,E,t){var e,n=t(361),i=(e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";d.exports=function r(e){return!!i&&i in e}},function(d,E,t){var n=t(14);d.exports=n["__core-js_shared__"]},function(d,E){d.exports=function t(n,i){return null==n?void 0:n[i]}},function(d,E,t){var n=t(364),i=t(80),r=t(109);d.exports=function e(){this.size=0,this.__data__={hash:new n,map:new(r||i),string:new n}}},function(d,E,t){var n=t(365),i=t(366),r=t(367),e=t(368),o=t(369);function s(a){var c=-1,u=null==a?0:a.length;for(this.clear();++c<u;){var l=a[c];this.set(l[0],l[1])}}s.prototype.clear=n,s.prototype.delete=i,s.prototype.get=r,s.prototype.has=e,s.prototype.set=o,d.exports=s},function(d,E,t){var n=t(82);d.exports=function i(){this.__data__=n?n(null):{},this.size=0}},function(d,E){d.exports=function t(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}},function(d,E,t){var n=t(82),e=Object.prototype.hasOwnProperty;d.exports=function o(s){var a=this.__data__;if(n){var c=a[s];return"__lodash_hash_undefined__"===c?void 0:c}return e.call(a,s)?a[s]:void 0}},function(d,E,t){var n=t(82),r=Object.prototype.hasOwnProperty;d.exports=function e(o){var s=this.__data__;return n?void 0!==s[o]:r.call(s,o)}},function(d,E,t){var n=t(82);d.exports=function r(e,o){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=n&&void 0===o?"__lodash_hash_undefined__":o,this}},function(d,E,t){var n=t(83);d.exports=function i(r){var e=n(this,r).delete(r);return this.size-=e?1:0,e}},function(d,E){d.exports=function t(n){var i=typeof n;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n}},function(d,E,t){var n=t(83);d.exports=function i(r){return n(this,r).get(r)}},function(d,E,t){var n=t(83);d.exports=function i(r){return n(this,r).has(r)}},function(d,E,t){var n=t(83);d.exports=function i(r,e){var o=n(this,r),s=o.size;return o.set(r,e),this.size+=o.size==s?0:1,this}},function(d,E){d.exports=function t(n,i){for(var r=-1,e=Array(n);++r<n;)e[r]=i(r);return e}},function(d,E,t){var n=t(29),i=t(18);d.exports=function e(o){return i(o)&&"[object Arguments]"==n(o)}},function(d,E){d.exports=function t(){return!1}},function(d,E,t){var n=t(29),i=t(112),r=t(18),ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1,d.exports=function he(ae){return r(ae)&&i(ae.length)&&!!ne[n(ae)]}},function(d,E,t){var i=t(179)(Object.keys,Object);d.exports=i},function(d,E,t){var n=t(41),i=t(55);d.exports=function r(e,o){return e&&n(o,i(o),e)}},function(d,E,t){var n=t(11),i=t(69),r=t(382),o=Object.prototype.hasOwnProperty;d.exports=function s(a){if(!n(a))return r(a);var c=i(a),u=[];for(var l in a)"constructor"==l&&(c||!o.call(a,l))||u.push(l);return u}},function(d,E){d.exports=function t(n){var i=[];if(null!=n)for(var r in Object(n))i.push(r);return i}},function(d,E,t){var n=t(41),i=t(115);d.exports=function r(e,o){return n(e,i(e),o)}},function(d,E){d.exports=function t(n,i){for(var r=-1,e=null==n?0:n.length,o=0,s=[];++r<e;){var a=n[r];i(a,r,n)&&(s[o++]=a)}return s}},function(d,E,t){var n=t(41),i=t(182);d.exports=function r(e,o){return n(e,i(e),o)}},function(d,E,t){var r=t(39)(t(14),"DataView");d.exports=r},function(d,E,t){var r=t(39)(t(14),"Promise");d.exports=r},function(d,E){var n=Object.prototype.hasOwnProperty;d.exports=function i(r){var e=r.length,o=new r.constructor(e);return e&&"string"==typeof r[0]&&n.call(r,"index")&&(o.index=r.index,o.input=r.input),o}},function(d,E,t){var n=t(118),i=t(390),r=t(391),e=t(392),o=t(189);d.exports=function Z(oe,Q,ne){var he=oe.constructor;switch(Q){case"[object ArrayBuffer]":return n(oe);case"[object Boolean]":case"[object Date]":return new he(+oe);case"[object DataView]":return i(oe,ne);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(oe,ne);case"[object Map]":case"[object Set]":return new he;case"[object Number]":case"[object String]":return new he(oe);case"[object RegExp]":return r(oe);case"[object Symbol]":return e(oe)}}},function(d,E,t){var n=t(118);d.exports=function i(r,e){var o=e?n(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}},function(d,E){var t=/\w*$/;d.exports=function n(i){var r=new i.constructor(i.source,t.exec(i));return r.lastIndex=i.lastIndex,r}},function(d,E,t){var n=t(40),i=n?n.prototype:void 0,r=i?i.valueOf:void 0;d.exports=function e(o){return r?Object(r.call(o)):{}}},function(d,E,t){var n=t(394),i=t(68),r=t(113),e=r&&r.isMap,o=e?i(e):n;d.exports=o},function(d,E,t){var n=t(42),i=t(18);d.exports=function e(o){return i(o)&&"[object Map]"==n(o)}},function(d,E,t){var n=t(396),i=t(68),r=t(113),e=r&&r.isSet,o=e?i(e):n;d.exports=o},function(d,E,t){var n=t(42),i=t(18);d.exports=function e(o){return i(o)&&"[object Set]"==n(o)}},function(d,E,t){(function(n){E.log=function e(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},E.formatArgs=function r(l){var h=this.useColors;if(l[0]=(h?"%c":"")+this.namespace+(h?" %c":" ")+l[0]+(h?"%c ":" ")+"+"+d.exports.humanize(this.diff),h){var p="color: "+this.color;l.splice(1,0,p,"color: inherit");var y=0,O=0;l[0].replace(/%[a-zA-Z%]/g,function(v){"%%"!==v&&(y++,"%c"===v&&(O=y))}),l.splice(O,0,p)}},E.save=function o(l){try{null==l?E.storage.removeItem("debug"):E.storage.setItem("debug",l)}catch(h){}},E.load=function s(){var l;try{l=E.storage.getItem("debug")}catch(h){}return!l&&void 0!==n&&"env"in n&&(l=n.env.DEBUG),l},E.useColors=function i(){var l=function a(l){var h="debug_"+l.toLowerCase();try{return E.storage.getItem(h)}catch(p){return void 0!==n&&"env"in n?n.env[h.toUpperCase()]:void 0}}("colors");return!/^(no|off|false|disabled)$/i.test(l)&&(!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&Boolean("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)))},E.storage=function c(){try{return localStorage}catch(l){}}(),E.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],d.exports=t(398)(E),d.exports.formatters.j=function(l){try{return JSON.stringify(l)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}).call(this,t(43))},function(d,E,t){d.exports=function(i){function r(l){var p,h=0;for(p in l)h=(h<<5)-h+l.charCodeAt(p),h|=0;return e.colors[Math.abs(h)%e.colors.length]}function e(l){var h;function p(){if(p.enabled){var y=p,O=+new Date,v=O-(h||O);y.diff=v,y.prev=h,y.curr=O,h=O;for(var b=new Array(arguments.length),T=0;T<b.length;T++)b[T]=arguments[T];b[0]=e.coerce(b[0]),"string"!=typeof b[0]&&b.unshift("%O");var C=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(N,k){if("%%"===N)return N;C++;var L=e.formatters[k];return"function"==typeof L&&(N=L.call(y,b[C]),b.splice(C,1),C--),N}),e.formatArgs.call(y,b);var w=y.log||e.log;w.apply(y,b)}}return p.namespace=l,p.enabled=e.enabled(l),p.useColors=e.useColors(),p.color=r(l),p.destroy=o,"function"==typeof e.init&&e.init(p),e.instances.push(p),p}function o(){var l=e.instances.indexOf(this);return-1!==l&&(e.instances.splice(l,1),!0)}return e.debug=e.default=e,e.coerce=function u(l){return l instanceof Error?l.stack||l.message:l},e.disable=function a(){e.enable("")},e.enable=function s(l){e.save(l),e.names=[],e.skips=[];var h,p=("string"==typeof l?l:"").split(/[\s,]+/),y=p.length;for(h=0;h<y;h++)!p[h]||("-"===(l=p[h].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+l.substr(1)+"$")):e.names.push(new RegExp("^"+l+"$")));for(h=0;h<e.instances.length;h++){var O=e.instances[h];O.enabled=e.enabled(O.namespace)}},e.enabled=function c(l){if("*"===l[l.length-1])return!0;var h,p;for(h=0,p=e.skips.length;h<p;h++)if(e.skips[h].test(l))return!1;for(h=0,p=e.names.length;h<p;h++)if(e.names[h].test(l))return!0;return!1},e.humanize=t(399),Object.keys(i).forEach(function(l){e[l]=i[l]}),e.instances=[],e.names=[],e.skips=[],e.formatters={},e.selectColor=r,e.enable(e.load()),e}},function(d,E){var t=1e3,n=60*t,i=60*n,r=24*i;function u(l,h,p,y){var O=h>=1.5*p;return Math.round(l/p)+" "+y+(O?"s":"")}d.exports=function(l,h){h=h||{};var p=typeof l;if("string"===p&&l.length>0)return function s(l){if(!((l=String(l)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var p=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*p;case"weeks":case"week":case"w":return 6048e5*p;case"days":case"day":case"d":return p*r;case"hours":case"hour":case"hrs":case"hr":case"h":return p*i;case"minutes":case"minute":case"mins":case"min":case"m":return p*n;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}(l);if("number"===p&&isFinite(l))return h.long?function c(l){var h=Math.abs(l);return h>=r?u(l,h,r,"day"):h>=i?u(l,h,i,"hour"):h>=n?u(l,h,n,"minute"):h>=t?u(l,h,t,"second"):l+" ms"}(l):function a(l){var h=Math.abs(l);return h>=r?Math.round(l/r)+"d":h>=i?Math.round(l/i)+"h":h>=n?Math.round(l/n)+"m":h>=t?Math.round(l/t)+"s":l+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}},function(d,E,t){var n=t(401),i=t(176),r=t(89);d.exports=i?function(o,s){return i(o,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:r},function(d,E){d.exports=function t(n){return function(){return n}}},function(d,E,t){"use strict";const n=t(195),i=new n;d.exports=function r(e,o){if(void 0===o)return e;i.has(o)||i.set(o,new n);const s=i.get(o);return s.has(e)||s.set(e,e.bind(o)),s.get(e)}},function(d,E,t){"use strict";d.exports=function(){var n,i;if("function"!=typeof WeakMap)return!1;try{n=new WeakMap([[i={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return!("[object WeakMap]"!==String(n)||"function"!=typeof n.set||n.set({},1)!==n||"function"!=typeof n.delete||"function"!=typeof n.has||"one"!==n.get(i))}},function(d,E,t){"use strict";var v,n=t(44),i=t(123),r=t(407),e=t(32),o=t(408),s=t(33),a=t(202),c=t(450),u=t(45).toStringTag,l=t(451),h=Array.isArray,p=Object.defineProperty,y=Object.prototype.hasOwnProperty,O=Object.getPrototypeOf;d.exports=v=function(){var T,b=arguments[0];if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");return T=l&&i&&WeakMap!==v?i(new WeakMap,O(this)):this,n(b)&&(h(b)||(b=a(b))),p(T,"__weakMapData__",s("c","$weakMap$"+o())),b&&c(b,function(C){e(C),T.set(C[0],C[1])}),T},l&&(i&&i(v,WeakMap),v.prototype=Object.create(WeakMap.prototype,{constructor:s(v)})),Object.defineProperties(v.prototype,{delete:s(function(b){return!!y.call(r(b),this.__weakMapData__)&&(delete b[this.__weakMapData__],!0)}),get:s(function(b){if(y.call(r(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:s(function(b){return y.call(r(b),this.__weakMapData__)}),set:s(function(b,T){return p(r(b),this.__weakMapData__,s("c",T)),this}),toString:s(function(){return"[object WeakMap]"})}),p(v.prototype,u,s("c","WeakMap"))},function(d,E,t){"use strict";d.exports=function(){}},function(d,E,t){"use strict";var i,r,e,o,n=Object.create;t(196)()||(i=t(197)),d.exports=i&&1===i.level?(r={},e={},o={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(s){e[s]="__proto__"!==s?o:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(r,e),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(s,a){return n(null===s?r:s,a)}):n},function(d,E,t){"use strict";var n=t(198);d.exports=function(i){if(!n(i))throw new TypeError(i+" is not an Object");return i}},function(d,E,t){"use strict";var n=Object.create(null),i=Math.random;d.exports=function(){var r;do{r=i().toString(36).slice(2)}while(n[r]);return r}},function(d,E,t){"use strict";var n=t(410);d.exports=function(i){if("function"!=typeof i||!hasOwnProperty.call(i,"length"))return!1;try{if("number"!=typeof i.length||"function"!=typeof i.call||"function"!=typeof i.apply)return!1}catch(r){return!1}return!n(i)}},function(d,E,t){"use strict";var n=t(124);d.exports=function(i){if(!n(i))return!1;try{return!!i.constructor&&i.constructor.prototype===i}catch(r){return!1}}},function(d,E,t){"use strict";d.exports=function(){var i,n=Object.assign;return"function"==typeof n&&(n(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")}},function(d,E,t){"use strict";var n=t(413),i=t(32),r=Math.max;d.exports=function(e,o){var s,a,u,c=r(arguments.length,2);for(e=Object(i(e)),u=function(l){try{e[l]=o[l]}catch(h){s||(s=h)}},a=1;a<c;++a)n(o=arguments[a]).forEach(u);if(void 0!==s)throw s;return e}},function(d,E,t){"use strict";d.exports=t(414)()?Object.keys:t(415)},function(d,E,t){"use strict";d.exports=function(){try{return Object.keys("primitive"),!0}catch(n){return!1}}},function(d,E,t){"use strict";var n=t(44),i=Object.keys;d.exports=function(r){return i(n(r)?Object(r):r)}},function(d,E,t){"use strict";var n="razdwatrzy";d.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(d,E,t){"use strict";var n=String.prototype.indexOf;d.exports=function(i){return n.call(this,i,arguments[1])>-1}},function(d,E,t){"use strict";var a,n=t(123),i=t(201),r=t(33),e=t(45),o=t(204),s=Object.defineProperty;a=d.exports=function(c,u){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");o.call(this,c),u=u?i.call(u,"key+value")?"key+value":i.call(u,"key")?"key":"value":"value",s(this,"__kind__",r("",u))},n&&n(a,o),delete a.prototype.constructor,a.prototype=Object.create(o.prototype,{_resolve:r(function(c){return"value"===this.__kind__?this.__list__[c]:"key+value"===this.__kind__?[c,this.__list__[c]]:c})}),s(a.prototype,e.toStringTag,r("c","Array Iterator"))},function(d,E,t){"use strict";var n=t(92),i={object:!0,symbol:!0};d.exports=function(){var e,r=n.Symbol;if("function"!=typeof r)return!1;e=r("test symbol");try{String(e)}catch(o){return!1}return!(!i[typeof r.iterator]||!i[typeof r.toPrimitive]||!i[typeof r.toStringTag])}},function(d,E,t){"use strict";d.exports=function(){return!("object"!=typeof globalThis||!globalThis)&&globalThis.Array===Array}},function(d,E){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};d.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},function(d,E,t){"use strict";var l,h,p,n=t(33),i=t(203),r=t(92).Symbol,e=t(424),o=t(425),s=t(426),a=Object.create,c=Object.defineProperties,u=Object.defineProperty;if("function"==typeof r)try{String(r()),p=!0}catch(y){}else r=null;h=function(O){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return l(O)},d.exports=l=function y(O){var v;if(this instanceof y)throw new TypeError("Symbol is not a constructor");return p?r(O):(v=a(h.prototype),O=void 0===O?"":String(O),c(v,{__description__:n("",O),__name__:n("",e(O))}))},o(l),s(l),c(h.prototype,{constructor:n(l),toString:n("",function(){return this.__name__})}),c(l.prototype,{toString:n(function(){return"Symbol ("+i(this).__description__+")"}),valueOf:n(function(){return i(this)})}),u(l.prototype,l.toPrimitive,n("",function(){var y=i(this);return"symbol"==typeof y?y:y.toString()})),u(l.prototype,l.toStringTag,n("c","Symbol")),u(h.prototype,l.toStringTag,n("c",l.prototype[l.toStringTag])),u(h.prototype,l.toPrimitive,n("c",l.prototype[l.toPrimitive]))},function(d,E,t){"use strict";d.exports=function(n){return!(!n||"symbol"!=typeof n&&(!n.constructor||"Symbol"!==n.constructor.name||"Symbol"!==n[n.constructor.toStringTag]))}},function(d,E,t){"use strict";var n=t(33),r=Object.defineProperty,e=Object.prototype,o=(0,Object.create)(null);d.exports=function(s){for(var c,u,a=0;o[s+(a||"")];)++a;return o[s+=a||""]=!0,r(e,c="@@"+s,n.gs(null,function(l){u||(u=!0,r(this,c,n(l)),u=!1)})),c}},function(d,E,t){"use strict";var n=t(33),i=t(92).Symbol;d.exports=function(r){return Object.defineProperties(r,{hasInstance:n("",i&&i.hasInstance||r("hasInstance")),isConcatSpreadable:n("",i&&i.isConcatSpreadable||r("isConcatSpreadable")),iterator:n("",i&&i.iterator||r("iterator")),match:n("",i&&i.match||r("match")),replace:n("",i&&i.replace||r("replace")),search:n("",i&&i.search||r("search")),species:n("",i&&i.species||r("species")),split:n("",i&&i.split||r("split")),toPrimitive:n("",i&&i.toPrimitive||r("toPrimitive")),toStringTag:n("",i&&i.toStringTag||r("toStringTag")),unscopables:n("",i&&i.unscopables||r("unscopables"))})}},function(d,E,t){"use strict";var n=t(33),i=t(203),r=Object.create(null);d.exports=function(e){return Object.defineProperties(e,{for:n(function(o){return r[o]?r[o]:r[o]=e(String(o))}),keyFor:n(function(o){var s;for(s in i(o),r)if(r[s]===o)return s})})}},function(d,E,t){"use strict";var n=t(32);d.exports=function(){return n(this).length=0,this}},function(d,E,t){"use strict";var l,n=t(57),i=t(429),r=t(433),e=t(434),o=t(200),s=t(444),a=Function.prototype.bind,c=Object.defineProperty,u=Object.prototype.hasOwnProperty;l=function(h,p,y){var v,O=i(p)&&r(p.value);return delete(v=e(p)).writable,delete v.value,v.get=function(){return!y.overwriteDefinition&&u.call(this,h)?O:(p.value=a.call(O,y.resolveContext?y.resolveContext(this):this),c(this,h,p),this[h])},v},d.exports=function(h){var p=o(arguments[1]);return n(p.resolveContext)&&r(p.resolveContext),s(h,function(y,O){return l(O,y,p)})}},function(d,E,t){"use strict";var n=t(205),i=t(57);d.exports=function(r){return i(r)?r:n(r,"Cannot use %v",arguments[1])}},function(d,E,t){"use strict";var n=t(57),i=t(124),r=Object.prototype.toString;d.exports=function(e){if(!n(e))return null;if(i(e)){var o=e.toString;if("function"!=typeof o||o===r)return null}try{return""+e}catch(s){return null}}},function(d,E,t){"use strict";var n=t(432),i=/[\n\r\u2028\u2029]/g;d.exports=function(r){var e=n(r);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+"\u2026"),e=e.replace(i,function(o){switch(o){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},function(d,E,t){"use strict";d.exports=function(n){try{return n.toString()}catch(i){try{return String(n)}catch(r){return null}}}},function(d,E,t){"use strict";var n=t(205),i=t(199);d.exports=function(r){return i(r)?r:n(r,"%v is not a plain function",arguments[1])}},function(d,E,t){"use strict";var n=t(435),i=t(125),r=t(32);d.exports=function(e){var o=Object(r(e)),s=arguments[1],a=Object(arguments[2]);if(o!==e&&!s)return o;var c={};return s?n(s,function(u){(a.ensure||u in e)&&(c[u]=e[u])}):i(c,e),c}},function(d,E,t){"use strict";d.exports=t(436)()?Array.from:t(437)},function(d,E,t){"use strict";d.exports=function(){var i,r,n=Array.from;return"function"==typeof n&&(r=n(i=["raz","dwa"]),Boolean(r&&r!==i&&"dwa"===r[1]))}},function(d,E,t){"use strict";var n=t(45).iterator,i=t(90),r=t(438),e=t(439),o=t(70),s=t(32),a=t(44),c=t(91),u=Array.isArray,l=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},p=Object.defineProperty;d.exports=function(y){var b,T,C,w,N,k,L,D,W,Z,O=arguments[1],v=arguments[2];if(y=Object(s(y)),a(O)&&o(O),this&&this!==Array&&r(this))b=this;else{if(!O){if(i(y))return 1!==(N=y.length)?Array.apply(null,y):((w=new Array(1))[0]=y[0],w);if(u(y)){for(w=new Array(N=y.length),T=0;T<N;++T)w[T]=y[T];return w}}w=[]}if(!u(y))if(void 0!==(W=y[n])){for(L=o(W).call(y),b&&(w=new b),D=L.next(),T=0;!D.done;)Z=O?l.call(O,v,D.value,T):D.value,b?(h.value=Z,p(w,T,h)):w[T]=Z,D=L.next(),++T;N=T}else if(c(y)){for(N=y.length,b&&(w=new b),T=0,C=0;T<N;++T)Z=y[T],T+1<N&&(k=Z.charCodeAt(0))>=55296&&k<=56319&&(Z+=y[++T]),Z=O?l.call(O,v,Z,C):Z,b?(h.value=Z,p(w,C,h)):w[C]=Z,++C;N=C}if(void 0===N)for(N=e(y.length),b&&(w=new b(N)),T=0;T<N;++T)Z=O?l.call(O,v,y[T],T):y[T],b?(h.value=Z,p(w,T,h)):w[T]=Z;return b&&(h.value=null,w.length=N),w}},function(d,E,t){"use strict";var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);d.exports=function(r){return"function"==typeof r&&i(n.call(r))}},function(d,E,t){"use strict";var n=t(440),i=Math.max;d.exports=function(r){return i(0,n(r))}},function(d,E,t){"use strict";var n=t(441),i=Math.abs,r=Math.floor;d.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*r(i(e)):e}},function(d,E,t){"use strict";d.exports=t(442)()?Math.sign:t(443)},function(d,E,t){"use strict";d.exports=function(){var n=Math.sign;return"function"==typeof n&&1===n(10)&&-1===n(-20)}},function(d,E,t){"use strict";d.exports=function(n){return n=Number(n),isNaN(n)||0===n?n:n>0?1:-1}},function(d,E,t){"use strict";var n=t(70),i=t(445),r=Function.prototype.call;d.exports=function(e,o){var s={},a=arguments[2];return n(o),i(e,function(c,u,l,h){s[u]=r.call(o,a,c,u,l,h)}),s}},function(d,E,t){"use strict";d.exports=t(446)("forEach")},function(d,E,t){"use strict";var n=t(70),i=t(32),r=Function.prototype.bind,e=Function.prototype.call,o=Object.keys,s=Object.prototype.propertyIsEnumerable;d.exports=function(a,c){return function(u,l){var h,p=arguments[2],y=arguments[3];return u=Object(i(u)),n(l),h=o(u),y&&h.sort("function"==typeof y?r.call(y,u):void 0),"function"!=typeof a&&(a=h[a]),e.call(a,h,function(O,v){return s.call(u,O)?e.call(l,p,u[O],O,u,v):c})}}},function(d,E,t){"use strict";var s,n=t(123),i=t(33),r=t(45),e=t(204),o=Object.defineProperty;s=d.exports=function(a){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");a=String(a),e.call(this,a),o(this,"__length__",i("",a.length))},n&&n(s,e),delete s.prototype.constructor,s.prototype=Object.create(e.prototype,{_next:i(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:i(function(a){var u,c=this.__list__[a];return this.__nextIndex__===this.__length__?c:(u=c.charCodeAt(0))>=55296&&u<=56319?c+this.__list__[this.__nextIndex__++]:c})}),o(s.prototype,r.toStringTag,i("c","String Iterator"))},function(d,E,t){"use strict";var n=t(449);d.exports=function(i){if(!n(i))throw new TypeError(i+" is not iterable");return i}},function(d,E,t){"use strict";var n=t(90),i=t(44),r=t(91),e=t(45).iterator,o=Array.isArray;d.exports=function(s){return!(!i(s)||!(o(s)||r(s)||n(s))&&"function"!=typeof s[e])}},function(d,E,t){"use strict";var n=t(90),i=t(70),r=t(91),e=t(202),o=Array.isArray,s=Function.prototype.call,a=Array.prototype.some;d.exports=function(c,u){var l,p,y,O,v,b,T,C,h=arguments[2];if(o(c)||n(c)?l="array":r(c)?l="string":c=e(c),i(u),y=function(){O=!0},"array"!==l)if("string"!==l)for(p=c.next();!p.done;){if(s.call(u,h,p.value,y),O)return;p=c.next()}else for(b=c.length,v=0;v<b&&(T=c[v],v+1<b&&(C=T.charCodeAt(0))>=55296&&C<=56319&&(T+=c[++v]),s.call(u,h,T,y),!O);++v);else a.call(c,function(w){return s.call(u,h,w,y),O})}},function(d,E,t){"use strict";d.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(d,E,t){var n=t(93),i=t(94),r=t(128),e=t(34),o=t(68),s=t(95),a=Math.min;d.exports=function c(u,l,h){for(var p=h?r:i,y=u[0].length,O=u.length,v=O,b=Array(O),T=1/0,C=[];v--;){var w=u[v];v&&l&&(w=e(w,o(l))),T=a(w.length,T),b[v]=!h&&(l||y>=120&&w.length>=120)?new n(v&&w):void 0}w=u[0];var N=-1,k=b[0];e:for(;++N<y&&C.length<T;){var L=w[N],D=l?l(L):L;if(L=h||0!==L?L:0,!(k?s(k,D):p(C,D,h))){for(v=O;--v;){var W=b[v];if(!(W?s(W,D):p(u[v],D,h)))continue e}k&&k.push(D),C.push(L)}}return C}},function(d,E){d.exports=function n(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this}},function(d,E){d.exports=function t(n){return this.__data__.has(n)}},function(d,E,t){var n=t(206),i=t(456),r=t(457);d.exports=function e(o,s,a){return s==s?r(o,s,a):n(o,i,a)}},function(d,E){d.exports=function t(n){return n!=n}},function(d,E){d.exports=function t(n,i,r){for(var e=r-1,o=n.length;++e<o;)if(n[e]===i)return e;return-1}},function(d,E,t){var n=t(129);d.exports=function i(r){return n(r)?r:[]}},function(d,E,t){"use strict";(function(n){var i=t(20),r=t(208),e=t(460),o=t(214);function a(u){var l=new e(u),h=r(e.prototype.request,l);return i.extend(h,e.prototype,l),i.extend(h,l),h}var c=a(t(211));c.Axios=e,c.create=function(l){return a(o(c.defaults,l))},c.Cancel=t(215),c.CancelToken=t(473),c.isCancel=t(210),c.all=function(l){return n.all(l)},c.spread=t(474),c.isAxiosError=t(475),d.exports=c,d.exports.default=c}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(20),r=t(209),e=t(461),o=t(462),s=t(214);function a(c){this.defaults=c,this.interceptors={request:new e,response:new e}}a.prototype.request=function(u){"string"==typeof u?(u=arguments[1]||{}).url=arguments[0]:u=u||{},(u=s(this.defaults,u)).method=u.method?u.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var l=[o,void 0],h=n.resolve(u);for(this.interceptors.request.forEach(function(y){l.unshift(y.fulfilled,y.rejected)}),this.interceptors.response.forEach(function(y){l.push(y.fulfilled,y.rejected)});l.length;)h=h.then(l.shift(),l.shift());return h},a.prototype.getUri=function(u){return u=s(this.defaults,u),r(u.url,u.params,u.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(u){a.prototype[u]=function(l,h){return this.request(s(h||{},{method:u,url:l,data:(h||{}).data}))}}),i.forEach(["post","put","patch"],function(u){a.prototype[u]=function(l,h,p){return this.request(s(p||{},{method:u,url:l,data:h}))}}),d.exports=a}).call(this,t(0))},function(d,E,t){"use strict";var n=t(20);function i(){this.handlers=[]}i.prototype.use=function(e,o){return this.handlers.push({fulfilled:e,rejected:o}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(s){null!==s&&e(s)})},d.exports=i},function(d,E,t){"use strict";(function(n){var i=t(20),r=t(463),e=t(210),o=t(211);function s(a){a.cancelToken&&a.cancelToken.throwIfRequested()}d.exports=function(c){return s(c),c.headers=c.headers||{},c.data=r(c.data,c.headers,c.transformRequest),c.headers=i.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(h){delete c.headers[h]}),(c.adapter||o.adapter)(c).then(function(h){return s(c),h.data=r(h.data,h.headers,c.transformResponse),h},function(h){return e(h)||(s(c),h&&h.response&&(h.response.data=r(h.response.data,h.response.headers,c.transformResponse))),n.reject(h)})}}).call(this,t(0))},function(d,E,t){"use strict";var n=t(20);d.exports=function(r,e,o){return n.forEach(o,function(a){r=a(r,e)}),r}},function(d,E,t){"use strict";var n=t(20);d.exports=function(r,e){n.forEach(r,function(s,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(r[e]=s,delete r[a])})}},function(d,E,t){"use strict";var n=t(213);d.exports=function(r,e,o){var s=o.config.validateStatus;o.status&&s&&!s(o.status)?e(n("Request failed with status code "+o.status,o.config,null,o.request,o)):r(o)}},function(d,E,t){"use strict";d.exports=function(i,r,e,o,s){return i.config=r,e&&(i.code=e),i.request=o,i.response=s,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},i}},function(d,E,t){"use strict";var n=t(20);d.exports=n.isStandardBrowserEnv()?{write:function(e,o,s,a,c,u){var l=[];l.push(e+"="+encodeURIComponent(o)),n.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),n.isString(a)&&l.push("path="+a),n.isString(c)&&l.push("domain="+c),!0===u&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var o=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(d,E,t){"use strict";var n=t(469),i=t(470);d.exports=function(e,o){return e&&!n(o)?i(e,o):o}},function(d,E,t){"use strict";d.exports=function(i){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(i)}},function(d,E,t){"use strict";d.exports=function(i,r){return r?i.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):i}},function(d,E,t){"use strict";var n=t(20),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];d.exports=function(e){var s,a,c,o={};return e&&n.forEach(e.split("\n"),function(l){if(c=l.indexOf(":"),s=n.trim(l.substr(0,c)).toLowerCase(),a=n.trim(l.substr(c+1)),s){if(o[s]&&i.indexOf(s)>=0)return;o[s]="set-cookie"===s?(o[s]?o[s]:[]).concat([a]):o[s]?o[s]+", "+a:a}}),o}},function(d,E,t){"use strict";var n=t(20);d.exports=n.isStandardBrowserEnv()?function(){var o,r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function s(a){var c=a;return r&&(e.setAttribute("href",c),c=e.href),e.setAttribute("href",c),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return o=s(window.location.href),function(c){var u=n.isString(c)?s(c):c;return u.protocol===o.protocol&&u.host===o.host}}():function(){return!0}},function(d,E,t){"use strict";(function(n){var i=t(215);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var o;this.promise=new n(function(c){o=c});var s=this;e(function(c){s.reason||(s.reason=new i(c),o(s.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var o;return{token:new r(function(c){o=c}),cancel:o}},d.exports=r}).call(this,t(0))},function(d,E,t){"use strict";d.exports=function(i){return function(e){return i.apply(null,e)}}},function(d,E,t){"use strict";d.exports=function(i){return"object"==typeof i&&!0===i.isAxiosError}},function(d,E,t){var i=t(216)("pick",t(48));i.placeholder=t(130),d.exports=i},function(d,E,t){var n=t(478),i=t(130),r=Array.prototype.push;function o(h,p){return 2==p?function(y,O){return h(y,O)}:function(y){return h(y)}}function s(h){for(var p=h?h.length:0,y=Array(p);p--;)y[p]=h[p];return y}function u(h,p){return function(){var y=arguments.length;if(y){for(var O=Array(y);y--;)O[y]=arguments[y];var v=O[0]=p.apply(void 0,O);return h.apply(void 0,O),v}}}d.exports=function l(h,p,y,O){var v="function"==typeof p,b=p===Object(p);if(b&&(O=y,y=p,p=void 0),null==y)throw new TypeError;O||(O={});var T_cap=!("cap"in O)||O.cap,T_curry=!("curry"in O)||O.curry,T_fixed=!("fixed"in O)||O.fixed,T_immutable=!("immutable"in O)||O.immutable,T_rearg=!("rearg"in O)||O.rearg,C=v?y:i,w="curry"in O&&O.curry,N="fixed"in O&&O.fixed,k="rearg"in O&&O.rearg,L=v?y.runInContext():void 0,D=v?y:{ary:h.ary,assign:h.assign,clone:h.clone,curry:h.curry,forEach:h.forEach,isArray:h.isArray,isError:h.isError,isFunction:h.isFunction,isWeakMap:h.isWeakMap,iteratee:h.iteratee,keys:h.keys,rearg:h.rearg,toInteger:h.toInteger,toPath:h.toPath},W=D.ary,Z=D.assign,oe=D.clone,Q=D.curry,ne=D.forEach,he=D.isArray,ae=D.isError,ye=D.isFunction,Le=D.isWeakMap,me=D.keys,Oe=D.rearg,ge=D.toInteger,ce=D.toPath,pe=me(n.aryMethod),Ue={castArray:function(nt){return function(){var ct=arguments[0];return he(ct)?nt(s(ct)):nt.apply(void 0,arguments)}},iteratee:function(nt){return function(){var ct=arguments[0],De=arguments[1],lt=nt(ct,De),wt=lt.length;return T_cap&&"number"==typeof De?(De=De>2?De-2:1,wt&&wt<=De?lt:o(lt,De)):lt}},mixin:function(nt){return function(ct){var De=this;if(!ye(De))return nt(De,Object(ct));var lt=[];return ne(me(ct),function(wt){ye(ct[wt])&&lt.push([wt,De.prototype[wt]])}),nt(De,Object(ct)),ne(lt,function(wt){var In=wt[1];ye(In)?De.prototype[wt[0]]=In:delete De.prototype[wt[0]]}),De}},nthArg:function(nt){return function(ct){var De=ct<0?1:ge(ct)+1;return Q(nt(ct),De)}},rearg:function(nt){return function(ct,De){var lt=De?De.length:0;return Q(nt(ct,De),lt)}},runInContext:function(nt){return function(ct){return l(h,nt(ct),O)}}};function Ae(nt,ct,De){if(T_fixed&&(N||!n.skipFixed[nt])){var lt=n.methodSpread[nt],wt=lt&&lt.start;return void 0===wt?W(ct,De):function c(h,p){return function(){for(var y=arguments.length,O=y-1,v=Array(y);y--;)v[y]=arguments[y];var b=v[p],T=v.slice(0,p);return b&&r.apply(T,b),p!=O&&r.apply(T,v.slice(p+1)),h.apply(this,T)}}(ct,wt)}return ct}function Xe(nt,ct,De){return T_rearg&&De>1&&(k||!n.skipRearg[nt])?Oe(ct,n.methodRearg[nt]||n.aryRearg[De]):ct}function Ye(nt,ct){for(var De=-1,lt=(ct=ce(ct)).length,wt=lt-1,In=oe(Object(nt)),Gn=In;null!=Gn&&++De<lt;){var ft=ct[De],ut=Gn[ft];null!=ut&&!(ye(ut)||ae(ut)||Le(ut))&&(Gn[ft]=oe(De==wt?ut:Object(ut))),Gn=Gn[ft]}return In}function at(nt,ct){var De=n.aliasToReal[nt]||nt,lt=n.remap[De]||De,wt=O;return function(In){var Gn=v?L:D,ft=v?L[lt]:ct,ut=Z(Z({},wt),In);return l(Gn,De,ft,ut)}}function Wt(nt,ct){return function(){var De=arguments.length;if(!De)return nt();for(var lt=Array(De);De--;)lt[De]=arguments[De];var wt=T_rearg?0:De-1;return lt[wt]=ct(lt[wt]),nt.apply(void 0,lt)}}function $t(nt,ct,De){var lt,wt=n.aliasToReal[nt]||nt,In=ct,Gn=Ue[wt];return Gn?In=Gn(ct):T_immutable&&(n.mutate.array[wt]?In=u(ct,s):n.mutate.object[wt]?In=u(ct,function a(h){return function(p){return h({},p)}}(ct)):n.mutate.set[wt]&&(In=u(ct,Ye))),ne(pe,function(ft){return ne(n.aryMethod[ft],function(ut){if(wt==ut){var Vt=n.methodSpread[wt];return lt=Vt&&Vt.afterRearg?Ae(wt,Xe(wt,In,ft),ft):Xe(wt,Ae(wt,In,ft),ft),lt=function ve(nt,ct,De){return w||T_curry&&De>1?Q(ct,De):ct}(0,lt=function de(nt,ct){if(T_cap){var De=n.iterateeRearg[nt];if(De)return function ht(nt,ct){return Wt(nt,function(De){var lt=ct.length;return function e(h,p){return 2==p?function(y,O){return h.apply(void 0,arguments)}:function(y){return h.apply(void 0,arguments)}}(Oe(o(De,lt),ct),lt)})}(ct,De);var lt=!v&&n.iterateeAry[nt];if(lt)return function At(nt,ct){return Wt(nt,function(De){return"function"==typeof De?o(De,ct):De})}(ct,lt)}return ct}(wt,lt),ft),!1}}),!lt}),lt||(lt=In),lt==ct&&(lt=w?Q(lt,1):function(){return ct.apply(this,arguments)}),lt.convert=at(wt,ct),lt.placeholder=ct.placeholder=De,lt}if(!b)return $t(p,y,C);var un=y,En=[];return ne(pe,function(nt){ne(n.aryMethod[nt],function(ct){var De=un[n.remap[ct]||ct];De&&En.push([ct,$t(ct,De,un)])})}),ne(me(un),function(nt){var ct=un[nt];if("function"==typeof ct){for(var De=En.length;De--;)if(En[De][0]==nt)return;ct.convert=at(nt,ct),En.push([nt,ct])}}),ne(En,function(nt){un[nt[0]]=nt[1]}),un.convert=function We(nt){return un.runInContext.convert(nt)(void 0)},un.placeholder=un,ne(me(un),function(nt){ne(n.realToAlias[nt]||[],function(ct){un[ct]=un[nt]})}),un}},function(d,E){E.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},E.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},E.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},E.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},E.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},E.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},E.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},E.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},E.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=E.aliasToReal,i={};for(var r in n){var e=n[r];t.call(i,e)?i[e].push(r):i[e]=[r]}return i}(),E.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},E.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},E.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(d,E,t){d.exports={ary:t(480),assign:t(177),clone:t(38),curry:t(498),forEach:t(111),isArray:t(12),isError:t(499),isFunction:t(17),isWeakMap:t(500),iteratee:t(501),keys:t(114),rearg:t(516),toInteger:t(97),toPath:t(519)}},function(d,E,t){var n=t(131);d.exports=function r(e,o,s){return o=s?void 0:o,n(e,128,void 0,void 0,void 0,void 0,o=e&&null==o?e.length:o)}},function(d,E,t){var n=t(96),i=t(14);d.exports=function e(o,s,a){var c=1&s,u=n(o);return function l(){var h=this&&this!==i&&this instanceof l?u:o;return h.apply(c?a:this,arguments)}}},function(d,E,t){var n=t(120),i=t(96),r=t(219),e=t(222),o=t(228),s=t(134),a=t(14);d.exports=function c(u,l,h){var p=i(u);return function y(){for(var O=arguments.length,v=Array(O),b=O,T=o(y);b--;)v[b]=arguments[b];var C=O<3&&v[0]!==T&&v[O-1]!==T?[]:s(v,T);if((O-=C.length)<h)return e(u,l,r,y.placeholder,void 0,v,C,void 0,void 0,h-O);var w=this&&this!==a&&this instanceof y?p:u;return n(w,this,v)}}},function(d,E){d.exports=function t(n,i){for(var r=n.length,e=0;r--;)n[r]===i&&++e;return e}},function(d,E,t){var n=t(132),i=t(223),r=t(485),e=t(487);d.exports=function o(s){var a=r(s),c=e[a];if("function"!=typeof c||!(a in n.prototype))return!1;if(s===c)return!0;var u=i(c);return!!u&&s===u[0]}},function(d,E,t){var n=t(486),r=Object.prototype.hasOwnProperty;d.exports=function e(o){for(var s=o.name+"",a=n[s],c=r.call(n,s)?a.length:0;c--;){var u=a[c],l=u.func;if(null==l||l==o)return u.name}return s}},function(d,E){d.exports={}},function(d,E,t){var n=t(132),i=t(225),r=t(133),e=t(12),o=t(18),s=t(488),c=Object.prototype.hasOwnProperty;function u(l){if(o(l)&&!e(l)&&!(l instanceof n)){if(l instanceof i)return l;if(c.call(l,"__wrapped__"))return s(l)}return new i(l)}(u.prototype=r.prototype).constructor=u,d.exports=u},function(d,E,t){var n=t(132),i=t(225),r=t(56);d.exports=function e(o){if(o instanceof n)return o.clone();var s=new i(o.__wrapped__,o.__chain__);return s.__actions__=r(o.__actions__),s.__index__=o.__index__,s.__values__=o.__values__,s}},function(d,E){var t=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;d.exports=function i(r){var e=r.match(t);return e?e[1].split(n):[]}},function(d,E){var t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;d.exports=function n(i,r){var e=r.length;if(!e)return i;var o=e-1;return r[o]=(e>1?"& ":"")+r[o],r=r.join(e>2?", ":" "),i.replace(t,"{\n/* [wrapped with "+r+"] */\n")}},function(d,E,t){var n=t(111),i=t(94),p=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];d.exports=function y(O,v){return n(p,function(b){var T="_."+b[0];v&b[1]&&!i(O,T)&&O.push(T)}),O.sort()}},function(d,E,t){var n=t(56),i=t(67),r=Math.min;d.exports=function e(o,s){for(var a=o.length,c=r(s.length,a),u=n(o);c--;){var l=s[c];o[c]=i(l,a)?u[l]:void 0}return o}},function(d,E,t){var n=t(120),i=t(96),r=t(14);d.exports=function o(s,a,c,u){var l=1&a,h=i(s);return function p(){for(var y=-1,O=arguments.length,v=-1,b=u.length,T=Array(b+O),C=this&&this!==r&&this instanceof p?h:s;++v<b;)T[v]=u[v];for(;O--;)T[v++]=arguments[++y];return n(C,l?c:this,T)}}},function(d,E,t){var n=t(220),i=t(221),r=t(134),e="__lodash_placeholder__",h=Math.min;d.exports=function p(y,O){var v=y[1],b=O[1],T=v|b;if(!(T<131||128==b&&8==v||128==b&&256==v&&y[7].length<=O[8]||384==b&&O[7].length<=O[8]&&8==v))return y;1&b&&(y[2]=O[2],T|=1&v?0:4);var N=O[3];if(N){var k=y[3];y[3]=k?n(k,N,O[4]):N,y[4]=k?r(y[3],e):O[4]}return(N=O[5])&&(y[5]=(k=y[5])?i(k,N,O[6]):N,y[6]=k?r(y[5],e):O[6]),(N=O[7])&&(y[7]=N),128&b&&(y[8]=null==y[8]?O[8]:h(y[8],O[8])),null==y[9]&&(y[9]=O[9]),y[0]=O[0],y[1]=T,y}},function(d,E,t){var n=t(229),i=1/0;d.exports=function e(o){return o?(o=n(o))===i||o===-i?17976931348623157e292*(o<0?-1:1):o==o?o:0:0===o?o:0}},function(d,E,t){var n=t(497),i=/^\s+/;d.exports=function r(e){return e&&e.slice(0,n(e)+1).replace(i,"")}},function(d,E){var t=/\s/;d.exports=function n(i){for(var r=i.length;r--&&t.test(i.charAt(r)););return r}},function(d,E,t){var n=t(131);function r(e,o,s){var a=n(e,8,void 0,void 0,void 0,void 0,void 0,o=s?void 0:o);return a.placeholder=r.placeholder,a}r.placeholder={},d.exports=r},function(d,E,t){var n=t(29),i=t(18),r=t(135);d.exports=function s(a){if(!i(a))return!1;var c=n(a);return"[object Error]"==c||"[object DOMException]"==c||"string"==typeof a.message&&"string"==typeof a.name&&!r(a)}},function(d,E,t){var n=t(42),i=t(18);d.exports=function e(o){return i(o)&&"[object WeakMap]"==n(o)}},function(d,E,t){var n=t(78),i=t(36);d.exports=function e(o){return i("function"==typeof o?o:n(o,1))}},function(d,E,t){var n=t(503),i=t(507),r=t(235);d.exports=function e(o){var s=i(o);return 1==s.length&&s[0][2]?r(s[0][0],s[0][1]):function(a){return a===o||n(a,o,s)}}},function(d,E,t){var n=t(79),i=t(230);d.exports=function o(s,a,c,u){var l=c.length,h=l,p=!u;if(null==s)return!h;for(s=Object(s);l--;){var y=c[l];if(p&&y[2]?y[1]!==s[y[0]]:!(y[0]in s))return!1}for(;++l<h;){var O=(y=c[l])[0],v=s[O],b=y[1];if(p&&y[2]){if(void 0===v&&!(O in s))return!1}else{var T=new n;if(u)var C=u(v,b,O,s,a,T);if(!(void 0===C?i(b,v,3,u,T):C))return!1}}return!0}},function(d,E,t){var n=t(79),i=t(231),r=t(505),e=t(506),o=t(42),s=t(12),a=t(66),c=t(86),l="[object Arguments]",h="[object Array]",p="[object Object]",O=Object.prototype.hasOwnProperty;d.exports=function v(b,T,C,w,N,k){var L=s(b),D=s(T),W=L?h:o(b),Z=D?h:o(T),oe=(W=W==l?p:W)==p,Q=(Z=Z==l?p:Z)==p,ne=W==Z;if(ne&&a(b)){if(!a(T))return!1;L=!0,oe=!1}if(ne&&!oe)return k||(k=new n),L||c(b)?i(b,T,C,w,N,k):r(b,T,W,C,w,N,k);if(!(1&C)){var he=oe&&O.call(b,"__wrapped__"),ae=Q&&O.call(T,"__wrapped__");if(he||ae){var ye=he?b.value():b,Le=ae?T.value():T;return k||(k=new n),N(ye,Le,C,w,k)}}return!!ne&&(k||(k=new n),e(b,T,C,w,N,k))}},function(d,E,t){var n=t(40),i=t(188),r=t(54),e=t(231),o=t(233),s=t(98),N=n?n.prototype:void 0,k=N?N.valueOf:void 0;d.exports=function L(D,W,Z,oe,Q,ne,he){switch(Z){case"[object DataView]":if(D.byteLength!=W.byteLength||D.byteOffset!=W.byteOffset)return!1;D=D.buffer,W=W.buffer;case"[object ArrayBuffer]":return!(D.byteLength!=W.byteLength||!ne(new i(D),new i(W)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+D,+W);case"[object Error]":return D.name==W.name&&D.message==W.message;case"[object RegExp]":case"[object String]":return D==W+"";case"[object Map]":var ae=o;case"[object Set]":if(ae||(ae=s),D.size!=W.size&&!(1&oe))return!1;var Le=he.get(D);if(Le)return Le==W;oe|=2,he.set(D,W);var me=e(ae(D),ae(W),oe,Q,ne,he);return he.delete(D),me;case"[object Symbol]":if(k)return k.call(D)==k.call(W)}return!1}},function(d,E,t){var n=t(183),e=Object.prototype.hasOwnProperty;d.exports=function o(s,a,c,u,l,h){var p=1&c,y=n(s),O=y.length;if(O!=n(a).length&&!p)return!1;for(var T=O;T--;){var C=y[T];if(!(p?C in a:e.call(a,C)))return!1}var w=h.get(s),N=h.get(a);if(w&&N)return w==a&&N==s;var k=!0;h.set(s,a),h.set(a,s);for(var L=p;++T<O;){var D=s[C=y[T]],W=a[C];if(u)var Z=p?u(W,D,C,a,s,h):u(D,W,C,s,a,h);if(!(void 0===Z?D===W||l(D,W,c,u,h):Z)){k=!1;break}L||(L="constructor"==C)}if(k&&!L){var oe=s.constructor,Q=a.constructor;oe!=Q&&"constructor"in s&&"constructor"in a&&!("function"==typeof oe&&oe instanceof oe&&"function"==typeof Q&&Q instanceof Q)&&(k=!1)}return h.delete(s),h.delete(a),k}},function(d,E,t){var n=t(234),i=t(30);d.exports=function r(e){for(var o=i(e),s=o.length;s--;){var a=o[s],c=e[a];o[s]=[a,c,n(c)]}return o}},function(d,E,t){var n=t(230),i=t(59),r=t(237),e=t(136),o=t(234),s=t(235),a=t(47);d.exports=function l(h,p){return e(h)&&o(p)?s(a(h),p):function(y){var O=i(y,h);return void 0===O&&O===p?r(y,h):n(p,O,3)}}},function(d,E,t){var n=t(191);d.exports=function r(e){var o=n(e,function(a){return 500===s.size&&s.clear(),a}),s=o.cache;return o}},function(d,E,t){var n=t(40),i=t(34),r=t(12),e=t(71),s=n?n.prototype:void 0,a=s?s.toString:void 0;d.exports=function c(u){if("string"==typeof u)return u;if(r(u))return i(u,c)+"";if(e(u))return a?a.call(u):"";var l=u+"";return"0"==l&&1/u==-1/0?"-0":l}},function(d,E){d.exports=function t(n,i){return null!=n&&i in Object(n)}},function(d,E,t){var n=t(60),i=t(65),r=t(12),e=t(67),o=t(112),s=t(47);d.exports=function a(c,u,l){for(var h=-1,p=(u=n(u,c)).length,y=!1;++h<p;){var O=s(u[h]);if(!(y=null!=c&&l(c,O)))break;c=c[O]}return y||++h!=p?y:!!(p=null==c?0:c.length)&&o(p)&&e(O,p)&&(r(c)||i(c))}},function(d,E,t){var n=t(514),i=t(515),r=t(136),e=t(47);d.exports=function o(s){return r(s)?n(e(s)):i(s)}},function(d,E){d.exports=function t(n){return function(i){return null==i?void 0:i[n]}}},function(d,E,t){var n=t(99);d.exports=function i(r){return function(e){return n(e,r)}}},function(d,E,t){var n=t(131),e=t(137)(function(o,s){return n(o,256,void 0,void 0,void 0,s)});d.exports=e},function(d,E,t){var n=t(238);d.exports=function i(r){return null!=r&&r.length?n(r,1):[]}},function(d,E,t){var n=t(40),i=t(65),r=t(12),e=n?n.isConcatSpreadable:void 0;d.exports=function o(s){return r(s)||i(s)||!!(e&&s&&s[e])}},function(d,E,t){var n=t(34),i=t(56),r=t(12),e=t(71),o=t(236),s=t(47),a=t(61);d.exports=function c(u){return r(u)?n(u,s):e(u)?[u]:i(o(a(u)))}},function(d,E,t){var n=t(521),i=t(237);d.exports=function r(e,o){return n(e,o,function(s,a){return i(e,a)})}},function(d,E,t){var n=t(99),i=t(522),r=t(60);d.exports=function e(o,s,a){for(var c=-1,u=s.length,l={};++c<u;){var h=s[c],p=n(o,h);a(p,h)&&i(l,r(h,o),p)}return l}},function(d,E,t){var n=t(84),i=t(60),r=t(67),e=t(11),o=t(47);d.exports=function s(a,c,u,l){if(!e(a))return a;for(var h=-1,p=(c=i(c,a)).length,y=p-1,O=a;null!=O&&++h<p;){var v=o(c[h]),b=u;if("__proto__"===v||"constructor"===v||"prototype"===v)return a;if(h!=y){var T=O[v];void 0===(b=l?l(T,v,O):void 0)&&(b=e(T)?T:r(c[h+1])?[]:{})}n(O,v,b),O=O[v]}return a}},function(d,E,t){var i=t(216)("mapKeys",t(524));i.placeholder=t(130),d.exports=i},function(d,E,t){var n=t(64),i=t(100),r=t(36);d.exports=function e(o,s){var a={};return s=r(s,3),i(o,function(c,u,l){n(a,s(c,u,l),c)}),a}},function(d,E){d.exports=function t(n){return function(i,r,e){for(var o=-1,s=Object(i),a=e(i),c=a.length;c--;){var u=a[n?c:++o];if(!1===r(s[u],u,s))break}return i}}},function(d,E,t){(function(n){var i;!function(r){"object"==typeof(void 0!==typeof window?window:global)&&(void 0!==typeof window?window:global);var a,c=2147483647,u=36,T=/^xn--/,C=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=Math.floor,D=String.fromCharCode;function Z(pe){throw new RangeError(N[pe])}function oe(pe,Ue){for(var de=pe.length,ve=[];de--;)ve[de]=Ue(pe[de]);return ve}function Q(pe,Ue){var de=pe.split("@"),ve="";return de.length>1&&(ve=de[0]+"@",pe=de[1]),ve+oe((pe=pe.replace(w,".")).split("."),Ue).join(".")}function ne(pe){for(var Ae,Xe,Ue=[],de=0,ve=pe.length;de<ve;)(Ae=pe.charCodeAt(de++))>=55296&&Ae<=56319&&de<ve?56320==(64512&(Xe=pe.charCodeAt(de++)))?Ue.push(((1023&Ae)<<10)+(1023&Xe)+65536):(Ue.push(Ae),de--):Ue.push(Ae);return Ue}function he(pe){return oe(pe,function(Ue){var de="";return Ue>65535&&(de+=D((Ue-=65536)>>>10&1023|55296),Ue=56320|1023&Ue),de+D(Ue)}).join("")}function ae(pe){return pe-48<10?pe-22:pe-65<26?pe-65:pe-97<26?pe-97:u}function ye(pe,Ue){return pe+22+75*(pe<26)-((0!=Ue)<<5)}function Le(pe,Ue,de){var ve=0;for(pe=de?L(pe/700):pe>>1,pe+=L(pe/Ue);pe>455;ve+=u)pe=L(pe/35);return L(ve+36*pe/(pe+38))}function me(pe){var ve,We,at,At,ht,Wt,$t,un,En,nt,Ue=[],de=pe.length,Ae=0,Xe=128,Ye=72;for((We=pe.lastIndexOf("-"))<0&&(We=0),at=0;at<We;++at)pe.charCodeAt(at)>=128&&Z("not-basic"),Ue.push(pe.charCodeAt(at));for(At=We>0?We+1:0;At<de;){for(ht=Ae,Wt=1,$t=u;At>=de&&Z("invalid-input"),((un=ae(pe.charCodeAt(At++)))>=u||un>L((c-Ae)/Wt))&&Z("overflow"),Ae+=un*Wt,!(un<(En=$t<=Ye?1:$t>=Ye+26?26:$t-Ye));$t+=u)Wt>L(c/(nt=u-En))&&Z("overflow"),Wt*=nt;Ye=Le(Ae-ht,ve=Ue.length+1,0==ht),L(Ae/ve)>c-Xe&&Z("overflow"),Xe+=L(Ae/ve),Ae%=ve,Ue.splice(Ae++,0,Xe)}return he(Ue)}function Oe(pe){var Ue,de,ve,Ae,Xe,Ye,We,at,At,ht,Wt,un,En,nt,ct,$t=[];for(un=(pe=ne(pe)).length,Ue=128,de=0,Xe=72,Ye=0;Ye<un;++Ye)(Wt=pe[Ye])<128&&$t.push(D(Wt));for(ve=Ae=$t.length,Ae&&$t.push("-");ve<un;){for(We=c,Ye=0;Ye<un;++Ye)(Wt=pe[Ye])>=Ue&&Wt<We&&(We=Wt);for(We-Ue>L((c-de)/(En=ve+1))&&Z("overflow"),de+=(We-Ue)*En,Ue=We,Ye=0;Ye<un;++Ye)if((Wt=pe[Ye])<Ue&&++de>c&&Z("overflow"),Wt==Ue){for(at=de,At=u;!(at<(ht=At<=Xe?1:At>=Xe+26?26:At-Xe));At+=u)$t.push(D(ye(ht+(ct=at-ht)%(nt=u-ht),0))),at=L(ct/nt);$t.push(D(ye(at,0))),Xe=Le(de,En,ve==Ae),de=0,++ve}++de,++Ue}return $t.join("")}a={version:"1.4.1",ucs2:{decode:ne,encode:he},decode:me,encode:Oe,toASCII:function ce(pe){return Q(pe,function(Ue){return C.test(Ue)?"xn--"+Oe(Ue):Ue})},toUnicode:function ge(pe){return Q(pe,function(Ue){return T.test(Ue)?me(Ue.slice(4).toLowerCase()):Ue})}},void 0!==(i=function(){return a}.call(E,t,E,n))&&(n.exports=i)}()}).call(this,t(85)(d))},function(d,E,t){"use strict";d.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}}},function(d,E,t){"use strict";E.decode=E.parse=t(529),E.encode=E.stringify=t(530)},function(d,E,t){"use strict";function n(r,e){return Object.prototype.hasOwnProperty.call(r,e)}d.exports=function(r,e,o,s){o=o||"=";var a={};if("string"!=typeof r||0===r.length)return a;var c=/\+/g;r=r.split(e=e||"&");var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var l=r.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var O,v,b,T,p=r[h].replace(c,"%20"),y=p.indexOf(o);y>=0?(O=p.substr(0,y),v=p.substr(y+1)):(O=p,v=""),b=decodeURIComponent(O),T=decodeURIComponent(v),n(a,b)?i(a[b])?a[b].push(T):a[b]=[a[b],T]:a[b]=T}return a};var i=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)}},function(d,E,t){"use strict";var n=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}};d.exports=function(o,s,a,c){return s=s||"&",a=a||"=",null===o&&(o=void 0),"object"==typeof o?r(e(o),function(u){var l=encodeURIComponent(n(u))+a;return i(o[u])?r(o[u],function(h){return l+encodeURIComponent(n(h))}).join(s):l+encodeURIComponent(n(o[u]))}).join(s):c?encodeURIComponent(n(c))+a+encodeURIComponent(n(o)):""};var i=Array.isArray||function(o){return"[object Array]"===Object.prototype.toString.call(o)};function r(o,s){if(o.map)return o.map(s);for(var a=[],c=0;c<o.length;c++)a.push(s(o[c],c));return a}var e=Object.keys||function(o){var s=[];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&s.push(a);return s}},function(d,E,t){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,r=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,d.exports=t(532),i)n.regeneratorRuntime=r;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(d,E,t){(function(n){!function(i){"use strict";var o,r=Object.prototype,e=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag",l="object"==typeof d,h=i.regeneratorRuntime;if(h)l&&(d.exports=h);else{(h=i.regeneratorRuntime=l?d.exports:{}).wrap=p;var O="suspendedStart",v="suspendedYield",b="executing",T="completed",C={},L={};L[a]=function(){return this};var D=Object.getPrototypeOf,W=D&&D(D(me([])));W&&W!==r&&e.call(W,a)&&(L=W);var Z=k.prototype=w.prototype=Object.create(L);N.prototype=Z.constructor=k,k.constructor=N,k[u]=N.displayName="GeneratorFunction",h.isGeneratorFunction=function(ge){var ce="function"==typeof ge&&ge.constructor;return!!ce&&(ce===N||"GeneratorFunction"===(ce.displayName||ce.name))},h.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,k):(ge.__proto__=k,u in ge||(ge[u]="GeneratorFunction")),ge.prototype=Object.create(Z),ge},h.awrap=function(ge){return{__await:ge}},oe(Q.prototype),Q.prototype[c]=function(){return this},h.AsyncIterator=Q,h.async=function(ge,ce,pe,Ue){var de=new Q(p(ge,ce,pe,Ue));return h.isGeneratorFunction(ce)?de:de.next().then(function(ve){return ve.done?ve.value:de.next()})},oe(Z),Z[u]="Generator",Z[a]=function(){return this},Z.toString=function(){return"[object Generator]"},h.keys=function(ge){var ce=[];for(var pe in ge)ce.push(pe);return ce.reverse(),function Ue(){for(;ce.length;){var de=ce.pop();if(de in ge)return Ue.value=de,Ue.done=!1,Ue}return Ue.done=!0,Ue}},h.values=me,Le.prototype={constructor:Le,reset:function(ge){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ye),!ge)for(var ce in this)"t"===ce.charAt(0)&&e.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=o)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if("throw"===ce.type)throw ce.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var ce=this;function pe(Ye,We){return ve.type="throw",ve.arg=ge,ce.next=Ye,We&&(ce.method="next",ce.arg=o),!!We}for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var de=this.tryEntries[Ue],ve=de.completion;if("root"===de.tryLoc)return pe("end");if(de.tryLoc<=this.prev){var Ae=e.call(de,"catchLoc"),Xe=e.call(de,"finallyLoc");if(Ae&&Xe){if(this.prev<de.catchLoc)return pe(de.catchLoc,!0);if(this.prev<de.finallyLoc)return pe(de.finallyLoc)}else if(Ae){if(this.prev<de.catchLoc)return pe(de.catchLoc,!0)}else{if(!Xe)throw new Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return pe(de.finallyLoc)}}}},abrupt:function(ge,ce){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Ue=this.tryEntries[pe];if(Ue.tryLoc<=this.prev&&e.call(Ue,"finallyLoc")&&this.prev<Ue.finallyLoc){var de=Ue;break}}de&&("break"===ge||"continue"===ge)&&de.tryLoc<=ce&&ce<=de.finallyLoc&&(de=null);var ve=de?de.completion:{};return ve.type=ge,ve.arg=ce,de?(this.method="next",this.next=de.finallyLoc,C):this.complete(ve)},complete:function(ge,ce){if("throw"===ge.type)throw ge.arg;return"break"===ge.type||"continue"===ge.type?this.next=ge.arg:"return"===ge.type?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):"normal"===ge.type&&ce&&(this.next=ce),C},finish:function(ge){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var pe=this.tryEntries[ce];if(pe.finallyLoc===ge)return this.complete(pe.completion,pe.afterLoc),ye(pe),C}},catch:function(ge){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var pe=this.tryEntries[ce];if(pe.tryLoc===ge){var Ue=pe.completion;if("throw"===Ue.type){var de=Ue.arg;ye(pe)}return de}}throw new Error("illegal catch attempt")},delegateYield:function(ge,ce,pe){return this.delegate={iterator:me(ge),resultName:ce,nextLoc:pe},"next"===this.method&&(this.arg=o),C}}}function p(ge,ce,pe,Ue){var ve=Object.create((ce&&ce.prototype instanceof w?ce:w).prototype),Ae=new Le(Ue||[]);return ve._invoke=function ne(ge,ce,pe){var Ue=O;return function(ve,Ae){if(Ue===b)throw new Error("Generator is already running");if(Ue===T){if("throw"===ve)throw Ae;return Oe()}for(pe.method=ve,pe.arg=Ae;;){var Xe=pe.delegate;if(Xe){var Ye=he(Xe,pe);if(Ye){if(Ye===C)continue;return Ye}}if("next"===pe.method)pe.sent=pe._sent=pe.arg;else if("throw"===pe.method){if(Ue===O)throw Ue=T,pe.arg;pe.dispatchException(pe.arg)}else"return"===pe.method&&pe.abrupt("return",pe.arg);Ue=b;var We=y(ge,ce,pe);if("normal"===We.type){if(Ue=pe.done?T:v,We.arg===C)continue;return{value:We.arg,done:pe.done}}"throw"===We.type&&(Ue=T,pe.method="throw",pe.arg=We.arg)}}}(ge,pe,Ae),ve}function y(ge,ce,pe){try{return{type:"normal",arg:ge.call(ce,pe)}}catch(Ue){return{type:"throw",arg:Ue}}}function w(){}function N(){}function k(){}function oe(ge){["next","throw","return"].forEach(function(ce){ge[ce]=function(pe){return this._invoke(ce,pe)}})}function Q(ge){function ce(de,ve,Ae,Xe){var Ye=y(ge[de],ge,ve);if("throw"!==Ye.type){var We=Ye.arg,at=We.value;return at&&"object"==typeof at&&e.call(at,"__await")?n.resolve(at.__await).then(function(At){ce("next",At,Ae,Xe)},function(At){ce("throw",At,Ae,Xe)}):n.resolve(at).then(function(At){We.value=At,Ae(We)},function(At){return ce("throw",At,Ae,Xe)})}Xe(Ye.arg)}var pe;this._invoke=function Ue(de,ve){function Ae(){return new n(function(Xe,Ye){ce(de,ve,Xe,Ye)})}return pe=pe?pe.then(Ae,Ae):Ae()}}function he(ge,ce){var pe=ge.iterator[ce.method];if(pe===o){if(ce.delegate=null,"throw"===ce.method){if(ge.iterator.return&&(ce.method="return",ce.arg=o,he(ge,ce),"throw"===ce.method))return C;ce.method="throw",ce.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var Ue=y(pe,ge.iterator,ce.arg);if("throw"===Ue.type)return ce.method="throw",ce.arg=Ue.arg,ce.delegate=null,C;var de=Ue.arg;return de?de.done?(ce[ge.resultName]=de.value,ce.next=ge.nextLoc,"return"!==ce.method&&(ce.method="next",ce.arg=o),ce.delegate=null,C):de:(ce.method="throw",ce.arg=new TypeError("iterator result is not an object"),ce.delegate=null,C)}function ae(ge){var ce={tryLoc:ge[0]};1 in ge&&(ce.catchLoc=ge[1]),2 in ge&&(ce.finallyLoc=ge[2],ce.afterLoc=ge[3]),this.tryEntries.push(ce)}function ye(ge){var ce=ge.completion||{};ce.type="normal",delete ce.arg,ge.completion=ce}function Le(ge){this.tryEntries=[{tryLoc:"root"}],ge.forEach(ae,this),this.reset(!0)}function me(ge){if(ge){var ce=ge[a];if(ce)return ce.call(ge);if("function"==typeof ge.next)return ge;if(!isNaN(ge.length)){var pe=-1,Ue=function de(){for(;++pe<ge.length;)if(e.call(ge,pe))return de.value=ge[pe],de.done=!1,de;return de.value=o,de.done=!0,de};return Ue.next=Ue}}return{next:Oe}}function Oe(){return{value:o,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}).call(this,t(0))},function(d,E,t){var r,e,n=t(242),i=t(243),o=0,s=0;d.exports=function a(c,u,l){var h=u&&l||0,p=u||[],y=(c=c||{}).node||r,O=void 0!==c.clockseq?c.clockseq:e;if(null==y||null==O){var v=n();null==y&&(y=r=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==O&&(O=e=16383&(v[6]<<8|v[7]))}var b=void 0!==c.msecs?c.msecs:(new Date).getTime(),T=void 0!==c.nsecs?c.nsecs:s+1,C=b-o+(T-s)/1e4;if(C<0&&void 0===c.clockseq&&(O=O+1&16383),(C<0||b>o)&&void 0===c.nsecs&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=b,s=T,e=O;var w=(1e4*(268435455&(b+=122192928e5))+T)%4294967296;p[h++]=w>>>24&255,p[h++]=w>>>16&255,p[h++]=w>>>8&255,p[h++]=255&w;var N=b/4294967296*1e4&268435455;p[h++]=N>>>8&255,p[h++]=255&N,p[h++]=N>>>24&15|16,p[h++]=N>>>16&255,p[h++]=O>>>8|128,p[h++]=255&O;for(var k=0;k<6;++k)p[h+k]=y[k];return u||i(p)}},function(d,E,t){var n=t(242),i=t(243);d.exports=function r(e,o,s){var a=o&&s||0;"string"==typeof e&&(o="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,o)for(var u=0;u<16;++u)o[a+u]=c[u];return o||i(c)}},function(d,E,t){"use strict";var i=t(1)(t(19));const r=t(9),e=t(2)("analytics"),o=t(536),s=t(16),a=t(244),u=t(138).prependProxyToUrlIfNeeded,h=t(139).getProxyUrl,p=s(),y=new o;d.exports=function(v){var b=this;let C=v.queue,w=void 0===C?y:C,N=v.ajax,k=void 0===N?a:N;this.loggingUrl=v.loggingUrl,this.updateEndPoints=()=>{if(!this.proxyUrl){this.proxyUrl=h();const Z=u(this.loggingUrl,this.proxyUrl);this.loggingUrl=Z}this.endPoint=`${this.loggingUrl}/logging/ClientEvent`,this.endPointQos=`${this.loggingUrl}/logging/ClientQos`},this.updateEndPoints();const L={};this.logError=function(Z,oe,Q,ne,he){void 0===ne&&(ne=null),void 0===he&&(he={});const ye=he.partnerId;if(((Z,oe,Q)=>{if(!Q)return!1;const ne=[Q,oe,Z].join("_");return(L[ne]||0)>=100})(Z,oe,ye))return;const Le=[ye,oe,Z].join("_"),me=ne;L[Le]=void 0!==L[Le]?L[Le]+1:1,b.logEvent(r(he,{action:`${oe}.${Z}`,payload:me}),!1)},this.logEvent=function(Z,oe,Q,ne){void 0===oe&&(oe=!1),void 0===ne&&(ne=()=>{}),b.updateEndPoints();const he=(0,i.default)({},Z,{clientInstanceId:p});if(Q&&!isNaN(Q)&&Math.random()>Q)return void e.debug("skipping sending analytics due to throttle:",he);let ae;e.debug("queueing analytics:",b.loggingUrl,he);try{ae=JSON.stringify(he)}catch(ye){return void ne(ye)}!function(oe,Q,ne){void 0===Q&&(Q=()=>{}),w.add(he=>{e.debug("sending analytics:",b.loggingUrl,oe),k.post(ne?b.endPointQos:b.endPoint,{body:oe,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},ae=>{ae&&e.debug("Failed to send ClientEvent, moving on to the next item."),Q(ae||void 0),he()})})}(ae,ne,oe)},this.logQOS=Z=>this.logEvent(Z,!0)}},function(d,E,t){"use strict";var i=t(1)(t(15));d.exports=function(){function e(s){let c=(void 0===s?{}:s).waitTime,u=void 0===c?50:c;(0,i.default)(this,"queue",[]),(0,i.default)(this,"running",!1),this.waitTime=u}var o=e.prototype;return o.add=function(a){this.queue.push(a),this.run()},o.run=function(){if(this.running)return;this.running=!0;const a=()=>{0!==this.queue.length?this.queue.shift()(()=>{setTimeout(a,this.waitTime)}):this.running=!1};a()},e}()},function(d,E,t){"use strict";const n=t(11),i={for:"htmlFor",class:"className"};d.exports=function(r){r.prototype.attr=function(s,a){if(n(s)){let c;Object.keys(s).forEach(u=>{c=i[u]||u,this.first.setAttribute(c,s[u])})}else{if(void 0===a)return this.first.getAttribute(i[s]||s);this.first.setAttribute(i[s]||s,a)}return this},r.prototype.removeAttr=function(s){const a=i[s]||s;return this.forEach(c=>{c.removeAttribute(a)}),this},r.prototype.html=function(s){return void 0!==s&&(this.first.innerHTML=s),this.first.innerHTML},r.prototype.center=function(s,a){let c;return this.forEach(u=>{c=new r(u),s=s||parseInt(c.width(),10),a=a||parseInt(c.height(),10),c.css("margin",`${-.5*a+"px"} 0 0 ${-.5*s+"px"}`).addClass("OT_centered")}),this},r._attachToOTHelpers.centerElement=function(s,a,c){return new r(s).center(a,c)};const e=function(a){return a.offsetWidth>0?`${a.offsetWidth}px`:new r(a).css("width")},o=function(a){return a.offsetHeight>0?`${a.offsetHeight}px`:new r(a).css("height")};r.prototype.width=function(s){return s?(this.css("width",s),this):this.isDisplayNone()?this.makeVisibleAndYield(a=>e(a))[0]:e(this.get(0))},r._attachToOTHelpers.width=function(s,a){const c=new r(s).width(a);return a?r._attachToOTHelpers:c},r.prototype.height=function(s){return s?(this.css("height",s),this):this.isDisplayNone()?this.makeVisibleAndYield(a=>o(a))[0]:o(this.get(0))},r._attachToOTHelpers.height=function(s,a){const c=new r(s).height(a);return a?r._attachToOTHelpers:c}}},function(d,E,t){"use strict";const n=t(3),i=(void 0!==typeof window?window:global).getComputedStyle,r={Firefox:"moz",Opera:"O",Chrome:"Webkit",Safari:"Webkit"};d.exports=function(o,s){const a={},c={},h=function(T,C){if(C in T.style)return C;const N=function e(){return r[n.name]}()+C[0].toUpperCase()+C.slice(1);return N in T.style?N:C};o.prototype.show=function(){return this.forEach(b=>{const T=b.style.display;(""===T||"none"===T)&&(b.style.display=a[b]||"",delete a[b]),function(T){return"none"===i(T).getPropertyValue("display")}(b)&&(a[b]="none",b.style.display=function(T){if(c[T.ownerDocument]&&c[T.ownerDocument][T.nodeName])return c[T.ownerDocument][T.nodeName];c[T.ownerDocument]||(c[T.ownerDocument]={});let w,C=T.ownerDocument.createElement(T.nodeName);return T.ownerDocument.body.appendChild(C),w=new o(C).css("display"),c[T.ownerDocument][T.nodeName]=w,new o(C).remove(),C=null,w}(b))})},o.prototype.hide=function(){return this.forEach(b=>{"none"!==b.style.display&&(a[b]=b.style.display,b.style.display="none")})},o.prototype.css=function(b,T){if(0!==this.length)return"string"!=typeof b?this.forEach(C=>{!function(T,C){const w=T.style;for(const N in C)C.hasOwnProperty(N)&&(w[h(T,N)]=C[N])}(C,b)}):void 0!==T?this.forEach(C=>{!function(T,C,w){T.style[h(T,C)]=w}(C,b,T)}):function(T,C){const w=h(T,C);let k=i(T).getPropertyValue(w);return""===k&&(k=T.style[w]),k}(this.first,b)},o.prototype.makeVisibleAndYield=function(b){const T={display:"block",visibility:"hidden"},C=[];return this.forEach(w=>{const N=s(w);C.push(N?function(T,C,w){const N=new o(T),k={};let L,D;for(L in C)C.hasOwnProperty(L)&&(k[L]=T.style[L],N.css(L,C[L]));for(L in D=w(T),C)C.hasOwnProperty(L)&&N.css(L,k[L]||"");return D}(N,T,b):void 0)}),C}}},function(d,E,t){"use strict";(function(n){const i=t(540),r=i.isiPhone,e=i.isiPad,o=i.isiOS,s=t(541),a=t(542),c=v=>{var b,T;return(null==(T=v=v||(null==(b=void 0!==typeof window?window:global)?void 0:b.navigator))?void 0:T.userAgent.toLowerCase().indexOf("electron"))>=0},u=()=>{var v,b,T;return"string"==typeof(null==(v=void 0!==typeof window?window:global)||null==(b=v.process)||null==(T=b.versions)?void 0:T.node)&&!c()};let l;d.exports={parse:v=>(l={version:-1,name:"unknown"},u()?(l.name="Node",l.isNode=!0,l.version=parseInt(n.versions.node,10),l.userAgent=`${l.name} ${l.version}`):(v=>{if(v=v||(void 0!==typeof window?window:global).navigator,l.userAgent=v.userAgent.toLowerCase(),l.name="unknown",l.userAgent.indexOf("opera")>-1||l.userAgent.indexOf("opr/")>-1)l.name="Opera",l.isOpera=!0,null!==/opr\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent)&&(l.version=parseFloat(RegExp.$1));else if(l.userAgent.indexOf("firefox")>-1)l.name="Firefox",l.isFirefox=!0,null!==/firefox\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent)&&(l.version=parseFloat(RegExp.$1));else if(l.userAgent.match(/edge?\/(\d+)(?:\.\d+)+$/)){l.name="Edge",l.isEdge=!0;const b=RegExp.$1;l.version=parseInt(b,10)}else l.userAgent.indexOf("chrome")>-1?(l.name="Chrome",l.isElectron=c(v),l.isElectron?l.electronVersion=a(v.userAgent):l.isChrome=!0,null!==/chrome\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent)&&(l.version=parseFloat(RegExp.$1))):v.vendor&&v.vendor.toLowerCase().indexOf("apple")>-1?(l.name="Safari",l.isSafari=!0,l.isiPhone=r(v.userAgent),l.isiPad=e(v.userAgent),l.isiOS=o(v.userAgent),l.isiOS&&(l.iOSVersion=s(v.userAgent)),(null!==/version\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent)||null!==/fxios\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent)||null!==/crios\/([0-9]{1,}[.0-9]{0,})/.exec(l.userAgent))&&(l.version=parseFloat(RegExp.$1))):l.userAgent.indexOf("applewebkit")>-1&&-1===l.userAgent.indexOf("version")&&(l.isIosWebView=!0);l.isChromiumEdge="Edge"===l.name&&l.version>=79,l.isLegacyEdge="Edge"===l.name&&l.version<79,l.isLegacyElectron=l.isElectron&&l.electronVersion<7,l.isLegacyChrome=l.isChrome&&l.version<87,l.isChromium=!!(l.isChrome||l.isChromiumEdge||l.isElectron||l.isOpera),l.isAndroid=l.userAgent.indexOf("android")>-1,l.userAgent=v.userAgent,l.protocol=location.protocol,l.hostName=location.hostName,(-1===l.version||"unknown"===l.name||l.isiOS&&!l.iOSVersion)&&(l.error=!0)})(v),l),isNode:u}}).call(this,t(43))},function(d,E,t){"use strict";const n=o=>/iPhone/.test(o),r=o=>/iPad/.test(o)||(o=>{try{return o.includes("Mac")&&"ontouchend"in document}catch(s){return!1}})(o);d.exports={isiPhone:n,isiPad:r,isiOS:o=>n(o)||r(o)}},function(d,E,t){"use strict";d.exports=function(i){const r=i.match(/OS (\d+_\d+).* like Mac/);if(null!==r&&r[1])return parseFloat(r[1].replace("_","."))}},function(d,E,t){"use strict";const n=/(Electron)\/([0-9]{1,}[.0-9]{0,})/;d.exports=i=>{const r=i.match(n);return r&&parseFloat(r[2])}},function(d,E,t){"use strict";const n=t(544);function i(s,a){return!!a&&(n()?s.classList.contains(a):s.className.indexOf(a)>-1)}d.exports=function(s){s.prototype.addClass=function(a){if(a){const c=a.trim().split(/\s+/);this.forEach(u=>{!function e(s,a){if(!a||0===a.length||1!==s.nodeType)return;const c=a.length;let u=0;if(n())for(;u<c;++u)s.classList.add(a[u]);else if(s.className||1!==a.length){let l=` ${s.className} `;for(;u<c;++u)~l.indexOf(` ${a[u]} `)||(l+=`${a[u]} `);s.className=l.trim()}else s.className=a.join(" ")}(u,c)})}return this},s.prototype.removeClass=function(a){if(a){const c=a.trim().split(/\s+/);this.forEach(u=>{!function o(s,a){if(!a||0===a.length||1!==s.nodeType)return;const c=a.length;let u=0;if(n()){for(;u<c;++u)s.classList.remove(a[u]);return}let l=` ${s.className} `.replace(/[\s+]/," ");for(;u<c;++u)l=l.replace(` ${a[u]} `," ");s.className=l.trim()}(u,c)})}return this},s.prototype.toggleClass=function(a){if(a){const c=a.trim().split(/\s+/);this.forEach(u=>{!function r(s,a){if(!a||0===a.length||1!==s.nodeType)return;const c=a.length;let u=0;if(n()){for(;u<c;++u)s.classList.toggle(a[u]);return}let l=` ${s.className} `.replace(/[\s+]/," ");for(;u<c;++u)i(s,a[u])?l=l.replace(` ${a[u]} `," "):l+=`${a[u]} `;s.className=l.trim()}(u,c)})}return this},s.prototype.hasClass=function(a){return this.some(c=>i(c,a))}}},function(d,E,t){"use strict";d.exports=()=>"undefined"!=typeof document&&"classList"in document.createElement("a")},function(d,E,t){"use strict";const n=t(546);d.exports=function(i){let r=0,e=0;i.prototype.observeStyleChanges=function(c,u){const l=[];return this.forEach(h=>{l.push(function(u,l,h){const p={},y=function(b){switch(b){case"width":return new i(u).width();case"height":return new i(u).height();default:return new i(u).css(b)}};l.forEach(v=>{p[v]=y(v)});const O=new(void 0!==typeof window?window:global).MutationObserver(v=>{const b={};v.forEach(T=>{if("style"!==T.attributeName)return;const C=new i(u).isDisplayNone();l.forEach(w=>{if(C&&("width"===w||"height"===w))return;const N=y(w);N!==p[w]&&(b[w]=[p[w],N],p[w]=N)})}),n(b)||setTimeout(()=>{h.call(null,b)})});return O.observe(u,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),O}(h,c,u))}),l},i.prototype.observeNodeOrChildNodeRemoval=function(c){const u=[];return this.forEach(l=>{u.push(function(u,l){const h=new(void 0!==typeof window?window:global).MutationObserver(y=>{let O=[];y.forEach(v=>{v.removedNodes.length&&(O=O.concat(Array.prototype.slice.call(v.removedNodes)))}),O.length&&setTimeout(()=>{l(new i(O))})});h.observe(u,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),e++;const p=h.disconnect;return h.disconnect=function(){p.apply(h,arguments),e--},h}(l,c))}),u},i.prototype.observeSize=function(c){const u=[];return this.forEach(l=>{u.push(function(u,l){let h={width:0,height:0};const p=setInterval(()=>{const y=u.getBoundingClientRect();(h.width!==y.width||h.height!==y.height)&&(l(y,h),h={width:y.width,height:y.height})},200);return r++,{disconnect(){clearInterval(p),r--}}}(l,c))}),u},i._attachToOTHelpers.observeStyleChanges=function(c,u,l){return new i(c).observeStyleChanges(u,l)[0]},i._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(c,u){return new i(c).observeNodeOrChildNodeRemoval(u)[0]},i.__testOnly||(i.__testOnly={}),i.__testOnly.sizeObserverCount=function(){return r},i.__testOnly.nodeRemovalObserverCount=function(){return e}}},function(d,E,t){var n=t(114),i=t(42),r=t(65),e=t(12),o=t(25),s=t(66),a=t(69),c=t(86),p=Object.prototype.hasOwnProperty;d.exports=function y(O){if(null==O)return!0;if(o(O)&&(e(O)||"string"==typeof O||"function"==typeof O.splice||s(O)||c(O)||r(O)))return!O.length;var v=i(O);if("[object Map]"==v||"[object Set]"==v)return!O.size;if(a(O))return!n(O).length;for(var b in O)if(p.call(O,b))return!1;return!0}},function(d,E,t){"use strict";d.exports={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1040:"Set Video Source Failure",1041:"Invalid Video Source",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1540:"Unable to Force Mute",1553:"Publisher ICEWorkflow failed",1554:"Subscriber ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",2021:"Proxy URL Timing Error",2022:"Proxy URL Already Set Error",2031:"getRtcStatsReport is not supported in this browser",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"}},function(d,E,t){"use strict";const n=t(17);d.exports=function(r,e,o,s,a){let c,u=o;return r.currentState=o,r.is=function(){return-1!==Array.prototype.indexOf.call(arguments,u)},r.isNot=function(){return-1===Array.prototype.indexOf.call(arguments,u)},function(p){if(u!==p){if(-1===e.indexOf(p))return void(a&&n(a)&&a("invalidState",p));r.previousState=u,c=u,r.currentState=p,u=p,s&&n(s)&&s(p,c)}}}},function(d,E,t){"use strict";const n=t(247),i={};d.exports=i,i.isElementNode=function(r){return r&&"object"==typeof r&&1===r.nodeType},i.createElement=function(r,e,o,s){const a=(s||document).createElement(r);e=e||{},Object.keys(e).forEach(u=>{if("object"==typeof e[u]){a[u]||(a[u]={});const l=e[u];Object.keys(l).forEach(h=>{a[u][h]=l[h]})}else"className"===u?a.className=e[u]:a.setAttribute(u,e[u])});const c=function(l){"string"==typeof l?a.innerHTML+=l:a.appendChild(l)};return Array.isArray(o)?o.forEach(c):o&&c(o),a},n(i)},function(d,E,t){"use strict";const n=t(551);d.exports=(i,r)=>{if("string"==typeof i&&"string"==typeof r){const e=n(i),o=r.match(/(\w+:\/\/)(.*)/);return`${o[1]}${e}/${o[2]}`}return r}},function(d,E,t){"use strict";d.exports=n=>n.replace(/\/+$/,"").replace(/^.*:\/+/,"")},function(d,E,t){"use strict";const n=t(553);d.exports=function(i){void 0===i&&(i={}),!(i.isSessionProxied||t(554))(i.sessionId)||n.forEach(s=>{s in i&&(i[s]="")})}},function(d,E,t){"use strict";d.exports=["audioLocalAddress","audioRemoteAddress","videoLocalAddress","videoRemoteAddress"]},function(d,E,t){"use strict";const i=t(21).sessions;d.exports=r=>{const e=i.get(r);return!!e&&!!e._.getProxyUrl()}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e={architecture:"event_ua_arch",bitness:"event_ua_bitness",model:"event_ua_model",platformVersion:"event_ua_platform_version"},o=function(){var s=(0,r.default)(i.default.mark(function a(c){var u,l;return i.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(u={},null==c||!c.getHighEntropyValues){p.next=6;break}return p.next=4,c.getHighEntropyValues(Object.keys(e));case 4:(l=p.sent)&&Object.entries(e).forEach(y=>{let O=y[0];void 0!==l[O]&&(u[y[1]]=l[O])});case 6:return p.abrupt("return",u);case 7:case"end":return p.stop()}},a)}));return function(c){return s.apply(this,arguments)}}();d.exports=o},function(d,E,t){"use strict";d.exports=["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],["assetURL","assetUrl"]]},function(d,E,t){"use strict";d.exports=["apiUrl","apiURL","apiURLSSL"]},function(d,E,t){"use strict";d.exports=function(){const i=(void 0!==typeof window?window:global).OT,r=(void 0!==typeof window?window:global).TB;return()=>{const e=(void 0!==typeof window?window:global).OT;return(void 0!==typeof window?window:global).OT=i,(void 0!==typeof window?window:global).TB=r,e}}},function(d,E,t){"use strict";d.exports=function(r){function e(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const c=new r(...s);return Object.setPrototypeOf(c,e.prototype),c}return e.prototype=Object.create(r.prototype),Object.defineProperties(e.prototype,(i=>{const r={};return Object.getOwnPropertyNames(i).forEach(e=>{r[e]=Object.getOwnPropertyDescriptor(i,e)}),r})(r.prototype)),Object.keys(r).forEach(o=>{e[o]=r[o]}),e}},function(d,E,t){"use strict";var n=t(28);d.exports=function(i,r){var e=i&&i.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in r)hasOwnProperty.call(r,s)&&(o[s]=r[s]);var a=n.log,c=n.detectBrowser(e),u=t(561)||null,l=t(563)||null,h=t(567)||null,p=t(569)||null,y=t(570)||null,O={browserDetails:c,commonShim:y,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(c.browser){case"chrome":if(!u||!u.shimPeerConnection||!o.shimChrome)return a("Chrome shim is not included in this adapter release."),O;a("adapter.js shimming chrome."),O.browserShim=u,y.shimCreateObjectURL(e),u.shimGetUserMedia(e),u.shimMediaStream(e),u.shimSourceObject(e),u.shimPeerConnection(e),u.shimOnTrack(e),u.shimAddTrackRemoveTrack(e),u.shimGetSendersWithDtmf(e),u.shimSenderReceiverGetStats(e),u.fixNegotiationNeeded(e),y.shimRTCIceCandidate(e),y.shimMaxMessageSize(e),y.shimSendThrowTypeError(e);break;case"firefox":if(!h||!h.shimPeerConnection||!o.shimFirefox)return a("Firefox shim is not included in this adapter release."),O;a("adapter.js shimming firefox."),O.browserShim=h,y.shimCreateObjectURL(e),h.shimGetUserMedia(e),h.shimSourceObject(e),h.shimPeerConnection(e),h.shimOnTrack(e),h.shimRemoveStream(e),h.shimSenderGetStats(e),h.shimReceiverGetStats(e),h.shimRTCDataChannel(e),y.shimRTCIceCandidate(e),y.shimMaxMessageSize(e),y.shimSendThrowTypeError(e);break;case"edge":if(!l||!l.shimPeerConnection||!o.shimEdge)return a("MS edge shim is not included in this adapter release."),O;a("adapter.js shimming edge."),O.browserShim=l,y.shimCreateObjectURL(e),l.shimGetUserMedia(e),l.shimPeerConnection(e),l.shimReplaceTrack(e),l.shimGetDisplayMedia(e),y.shimMaxMessageSize(e),y.shimSendThrowTypeError(e);break;case"safari":if(!p||!o.shimSafari)return a("Safari shim is not included in this adapter release."),O;a("adapter.js shimming safari."),O.browserShim=p,y.shimCreateObjectURL(e),p.shimRTCIceServerUrls(e),p.shimCreateOfferLegacy(e),p.shimCallbacksAPI(e),p.shimLocalStreamsAPI(e),p.shimRemoteStreamsAPI(e),p.shimTrackEventTransceiver(e),p.shimGetUserMedia(e),y.shimRTCIceCandidate(e),y.shimMaxMessageSize(e),y.shimSendThrowTypeError(e);break;default:a("Unsupported browser!")}return O}},function(d,E,t){"use strict";(function(n){var i=t(28),r=i.log;function e(s,a,c){!a||c.has(a.id)||(c.set(a.id,a),Object.keys(a).forEach(function(u){u.endsWith("Id")?e(s,s.get(a[u]),c):u.endsWith("Ids")&&a[u].forEach(function(l){e(s,s.get(l),c)})}))}function o(s,a,c){var u=c?"outbound-rtp":"inbound-rtp",l=new Map;if(null===a)return l;var h=[];return s.forEach(function(p){"track"===p.type&&p.trackIdentifier===a.id&&h.push(p)}),h.forEach(function(p){s.forEach(function(y){y.type===u&&y.trackId===p.id&&e(s,y,l)})}),l}d.exports={shimGetUserMedia:t(562),shimMediaStream:function(s){s.MediaStream=s.MediaStream||s.webkitMediaStream},shimOnTrack:function(s){if("object"==typeof s&&s.RTCPeerConnection&&!("ontrack"in s.RTCPeerConnection.prototype)){Object.defineProperty(s.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(c){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=c)},enumerable:!0,configurable:!0});var a=s.RTCPeerConnection.prototype.setRemoteDescription;s.RTCPeerConnection.prototype.setRemoteDescription=function(){var c=this;return c._ontrackpoly||(c._ontrackpoly=function(u){u.stream.addEventListener("addtrack",function(l){var h;h=s.RTCPeerConnection.prototype.getReceivers?c.getReceivers().find(function(y){return y.track&&y.track.id===l.track.id}):{track:l.track};var p=new Event("track");p.track=l.track,p.receiver=h,p.transceiver={receiver:h},p.streams=[u.stream],c.dispatchEvent(p)}),u.stream.getTracks().forEach(function(l){var h;h=s.RTCPeerConnection.prototype.getReceivers?c.getReceivers().find(function(y){return y.track&&y.track.id===l.id}):{track:l};var p=new Event("track");p.track=l,p.receiver=h,p.transceiver={receiver:h},p.streams=[u.stream],c.dispatchEvent(p)})},c.addEventListener("addstream",c._ontrackpoly)),a.apply(c,arguments)}}else i.wrapPeerConnectionEvent(s,"track",function(c){return c.transceiver||Object.defineProperty(c,"transceiver",{value:{receiver:c.receiver}}),c})},shimGetSendersWithDtmf:function(s){if("object"==typeof s&&s.RTCPeerConnection&&!("getSenders"in s.RTCPeerConnection.prototype)&&"createDTMFSender"in s.RTCPeerConnection.prototype){var a=function(y,O){return{track:O,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===O.kind?y.createDTMFSender(O):null),this._dtmf},_pc:y}};if(!s.RTCPeerConnection.prototype.getSenders){s.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var c=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(y,O){var v=this,b=c.apply(v,arguments);return b||(b=a(v,y),v._senders.push(b)),b};var u=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(y){var O=this;u.apply(O,arguments);var v=O._senders.indexOf(y);-1!==v&&O._senders.splice(v,1)}}var l=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(y){var O=this;O._senders=O._senders||[],l.apply(O,[y]),y.getTracks().forEach(function(v){O._senders.push(a(O,v))})};var h=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(y){var O=this;O._senders=O._senders||[],h.apply(O,[y]),y.getTracks().forEach(function(v){var b=O._senders.find(function(T){return T.track===v});b&&O._senders.splice(O._senders.indexOf(b),1)})}}else if("object"==typeof s&&s.RTCPeerConnection&&"getSenders"in s.RTCPeerConnection.prototype&&"createDTMFSender"in s.RTCPeerConnection.prototype&&s.RTCRtpSender&&!("dtmf"in s.RTCRtpSender.prototype)){var p=s.RTCPeerConnection.prototype.getSenders;s.RTCPeerConnection.prototype.getSenders=function(){var y=this,O=p.apply(y,[]);return O.forEach(function(v){v._pc=y}),O},Object.defineProperty(s.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},shimSenderReceiverGetStats:function(s){if("object"==typeof s&&s.RTCPeerConnection&&s.RTCRtpSender&&s.RTCRtpReceiver){if(!("getStats"in s.RTCRtpSender.prototype)){var a=s.RTCPeerConnection.prototype.getSenders;a&&(s.RTCPeerConnection.prototype.getSenders=function(){var h=this,p=a.apply(h,[]);return p.forEach(function(y){y._pc=h}),p});var c=s.RTCPeerConnection.prototype.addTrack;c&&(s.RTCPeerConnection.prototype.addTrack=function(){var h=c.apply(this,arguments);return h._pc=this,h}),s.RTCRtpSender.prototype.getStats=function(){var h=this;return this._pc.getStats().then(function(p){return o(p,h.track,!0)})}}if(!("getStats"in s.RTCRtpReceiver.prototype)){var u=s.RTCPeerConnection.prototype.getReceivers;u&&(s.RTCPeerConnection.prototype.getReceivers=function(){var h=this,p=u.apply(h,[]);return p.forEach(function(y){y._pc=h}),p}),i.wrapPeerConnectionEvent(s,"track",function(h){return h.receiver._pc=h.srcElement,h}),s.RTCRtpReceiver.prototype.getStats=function(){var h=this;return this._pc.getStats().then(function(p){return o(p,h.track,!1)})}}if("getStats"in s.RTCRtpSender.prototype&&"getStats"in s.RTCRtpReceiver.prototype){var l=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(){var h=this;if(arguments.length>0&&arguments[0]instanceof s.MediaStreamTrack){var y,O,v,p=arguments[0];return h.getSenders().forEach(function(b){b.track===p&&(y?v=!0:y=b)}),h.getReceivers().forEach(function(b){return b.track===p&&(O?v=!0:O=b),b.track===p}),v||y&&O?n.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):y?y.getStats():O?O.getStats():n.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return l.apply(h,arguments)}}}},shimSourceObject:function(s){var a=s&&s.URL;"object"==typeof s&&s.HTMLMediaElement&&!("srcObject"in s.HTMLMediaElement.prototype)&&Object.defineProperty(s.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(c){var u=this;this._srcObject=c,this.src&&a.revokeObjectURL(this.src),c?(this.src=a.createObjectURL(c),c.addEventListener("addtrack",function(){u.src&&a.revokeObjectURL(u.src),u.src=a.createObjectURL(c)}),c.addEventListener("removetrack",function(){u.src&&a.revokeObjectURL(u.src),u.src=a.createObjectURL(c)})):this.src=""}})},shimAddTrackRemoveTrackWithNative:function(s){s.RTCPeerConnection.prototype.getLocalStreams=function(){var h=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(p){return h._shimmedLocalStreams[p][0]})};var a=s.RTCPeerConnection.prototype.addTrack;s.RTCPeerConnection.prototype.addTrack=function(h,p){if(!p)return a.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var y=a.apply(this,arguments);return this._shimmedLocalStreams[p.id]?-1===this._shimmedLocalStreams[p.id].indexOf(y)&&this._shimmedLocalStreams[p.id].push(y):this._shimmedLocalStreams[p.id]=[p,y],y};var c=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(h){var p=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(function(v){if(p.getSenders().find(function(T){return T.track===v}))throw new DOMException("Track already exists.","InvalidAccessError")});var y=p.getSenders();c.apply(this,arguments);var O=p.getSenders().filter(function(v){return-1===y.indexOf(v)});this._shimmedLocalStreams[h.id]=[h].concat(O)};var u=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],u.apply(this,arguments)};var l=s.RTCPeerConnection.prototype.removeTrack;s.RTCPeerConnection.prototype.removeTrack=function(h){var p=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(function(y){var O=p._shimmedLocalStreams[y].indexOf(h);-1!==O&&p._shimmedLocalStreams[y].splice(O,1),1===p._shimmedLocalStreams[y].length&&delete p._shimmedLocalStreams[y]}),l.apply(this,arguments)}},shimAddTrackRemoveTrack:function(s){if(s.RTCPeerConnection){var a=i.detectBrowser(s);if(s.RTCPeerConnection.prototype.addTrack&&a.version>=65)return this.shimAddTrackRemoveTrackWithNative(s);var c=s.RTCPeerConnection.prototype.getLocalStreams;s.RTCPeerConnection.prototype.getLocalStreams=function(){var v=this,b=c.apply(this);return v._reverseStreams=v._reverseStreams||{},b.map(function(T){return v._reverseStreams[T.id]})};var u=s.RTCPeerConnection.prototype.addStream;s.RTCPeerConnection.prototype.addStream=function(v){var b=this;if(b._streams=b._streams||{},b._reverseStreams=b._reverseStreams||{},v.getTracks().forEach(function(C){if(b.getSenders().find(function(N){return N.track===C}))throw new DOMException("Track already exists.","InvalidAccessError")}),!b._reverseStreams[v.id]){var T=new s.MediaStream(v.getTracks());b._streams[v.id]=T,b._reverseStreams[T.id]=v,v=T}u.apply(b,[v])};var l=s.RTCPeerConnection.prototype.removeStream;s.RTCPeerConnection.prototype.removeStream=function(v){var b=this;b._streams=b._streams||{},b._reverseStreams=b._reverseStreams||{},l.apply(b,[b._streams[v.id]||v]),delete b._reverseStreams[b._streams[v.id]?b._streams[v.id].id:v.id],delete b._streams[v.id]},s.RTCPeerConnection.prototype.addTrack=function(v,b){var T=this;if("closed"===T.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var C=[].slice.call(arguments,1);if(1!==C.length||!C[0].getTracks().find(function(L){return L===v}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var w=T.getSenders().find(function(L){return L.track===v});if(w)throw new DOMException("Track already exists.","InvalidAccessError");T._streams=T._streams||{},T._reverseStreams=T._reverseStreams||{};var N=T._streams[b.id];if(N)N.addTrack(v),n.resolve().then(function(){T.dispatchEvent(new Event("negotiationneeded"))});else{var k=new s.MediaStream([v]);T._streams[b.id]=k,T._reverseStreams[k.id]=b,T.addStream(k)}return T.getSenders().find(function(L){return L.track===v})},["createOffer","createAnswer"].forEach(function(v){var b=s.RTCPeerConnection.prototype[v];s.RTCPeerConnection.prototype[v]=function(){var T=this,C=arguments,w=arguments.length&&"function"==typeof arguments[0];return w?b.apply(T,[function(N){var k=h(T,N);C[0].apply(null,[k])},function(N){C[1]&&C[1].apply(null,N)},arguments[2]]):b.apply(T,arguments).then(function(N){return h(T,N)})}});var y=s.RTCPeerConnection.prototype.setLocalDescription;s.RTCPeerConnection.prototype.setLocalDescription=function(){var v=this;return!arguments.length||!arguments[0].type||(arguments[0]=p(v,arguments[0])),y.apply(v,arguments)};var O=Object.getOwnPropertyDescriptor(s.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(s.RTCPeerConnection.prototype,"localDescription",{get:function(){var b=O.get.apply(this);return""===b.type?b:h(this,b)}}),s.RTCPeerConnection.prototype.removeTrack=function(v){var C,b=this;if("closed"===b.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(v._pc!==b)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");b._streams=b._streams||{},Object.keys(b._streams).forEach(function(w){b._streams[w].getTracks().find(function(k){return v.track===k})&&(C=b._streams[w])}),C&&(1===C.getTracks().length?b.removeStream(b._reverseStreams[C.id]):C.removeTrack(v.track),b.dispatchEvent(new Event("negotiationneeded")))}}function h(v,b){var T=b.sdp;return Object.keys(v._reverseStreams||[]).forEach(function(C){var w=v._reverseStreams[C];T=T.replace(new RegExp(v._streams[w.id].id,"g"),w.id)}),new RTCSessionDescription({type:b.type,sdp:T})}function p(v,b){var T=b.sdp;return Object.keys(v._reverseStreams||[]).forEach(function(C){var w=v._reverseStreams[C],N=v._streams[w.id];T=T.replace(new RegExp(w.id,"g"),N.id)}),new RTCSessionDescription({type:b.type,sdp:T})}},shimPeerConnection:function(s){var a=i.detectBrowser(s);if(!s.RTCPeerConnection&&s.webkitRTCPeerConnection&&(s.RTCPeerConnection=function(l,h){return r("PeerConnection"),l&&l.iceTransportPolicy&&(l.iceTransports=l.iceTransportPolicy),new s.webkitRTCPeerConnection(l,h)},s.RTCPeerConnection.prototype=s.webkitRTCPeerConnection.prototype,s.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get:function(){return s.webkitRTCPeerConnection.generateCertificate}})),s.RTCPeerConnection){var c=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(l,h,p){var y=this,O=arguments;if(arguments.length>0&&"function"==typeof l)return c.apply(this,arguments);if(0===c.length&&(0===arguments.length||"function"!=typeof arguments[0]))return c.apply(this,[]);var v=function(C){var w={};return C.result().forEach(function(k){var L={id:k.id,timestamp:k.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[k.type]||k.type};k.names().forEach(function(D){L[D]=k.stat(D)}),w[L.id]=L}),w},b=function(C){return new Map(Object.keys(C).map(function(w){return[w,C[w]]}))};if(arguments.length>=2){var T=function(C){O[1](b(v(C)))};return c.apply(this,[T,arguments[0]])}return new n(function(C,w){c.apply(y,[function(N){C(b(v(N)))},w])}).then(h,p)},a.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){var h=s.RTCPeerConnection.prototype[l];s.RTCPeerConnection.prototype[l]=function(){var p=arguments,y=this,O=new n(function(v,b){h.apply(y,[p[0],v,b])});return p.length<2?O:O.then(function(){p[1].apply(null,[])},function(v){p.length>=3&&p[2].apply(null,[v])})}}),a.version<52&&["createOffer","createAnswer"].forEach(function(l){var h=s.RTCPeerConnection.prototype[l];s.RTCPeerConnection.prototype[l]=function(){var p=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var y=1===arguments.length?arguments[0]:void 0;return new n(function(O,v){h.apply(p,[O,v,y])})}return h.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){var h=s.RTCPeerConnection.prototype[l];s.RTCPeerConnection.prototype[l]=function(){return arguments[0]=new("addIceCandidate"===l?s.RTCIceCandidate:s.RTCSessionDescription)(arguments[0]),h.apply(this,arguments)}});var u=s.RTCPeerConnection.prototype.addIceCandidate;s.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?u.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),n.resolve())}}},fixNegotiationNeeded:function(s){i.wrapPeerConnectionEvent(s,"negotiationneeded",function(a){if("stable"===a.target.signalingState)return a})},shimGetDisplayMedia:function(s,a){if(s.navigator&&s.navigator.mediaDevices&&!("getDisplayMedia"in s.navigator.mediaDevices)){if("function"!=typeof a)return void console.error("shimGetDisplayMedia: getSourceId argument is not a function");s.navigator.mediaDevices.getDisplayMedia=function(c){return a(c).then(function(u){var l=c.video&&c.video.width,h=c.video&&c.video.height;return c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:u,maxFrameRate:c.video&&c.video.frameRate||3}},l&&(c.video.mandatory.maxWidth=l),h&&(c.video.mandatory.maxHeight=h),s.navigator.mediaDevices.getUserMedia(c)})},s.navigator.getDisplayMedia=function(c){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),s.navigator.mediaDevices.getDisplayMedia(c)}}}}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(28),r=i.log;d.exports=function(e){var o=i.detectBrowser(e),s=e&&e.navigator,a=function(y){if("object"!=typeof y||y.mandatory||y.optional)return y;var O={};return Object.keys(y).forEach(function(v){if("require"!==v&&"advanced"!==v&&"mediaSource"!==v){var b="object"==typeof y[v]?y[v]:{ideal:y[v]};void 0!==b.exact&&"number"==typeof b.exact&&(b.min=b.max=b.exact);var T=function(w,N){return w?w+N.charAt(0).toUpperCase()+N.slice(1):"deviceId"===N?"sourceId":N};if(void 0!==b.ideal){O.optional=O.optional||[];var C={};"number"==typeof b.ideal?(C[T("min",v)]=b.ideal,O.optional.push(C),(C={})[T("max",v)]=b.ideal,O.optional.push(C)):(C[T("",v)]=b.ideal,O.optional.push(C))}void 0!==b.exact&&"number"!=typeof b.exact?(O.mandatory=O.mandatory||{},O.mandatory[T("",v)]=b.exact):["min","max"].forEach(function(w){void 0!==b[w]&&(O.mandatory=O.mandatory||{},O.mandatory[T(w,v)]=b[w])})}}),y.advanced&&(O.optional=(O.optional||[]).concat(y.advanced)),O},c=function(y,O){if(o.version>=61)return O(y);if((y=JSON.parse(JSON.stringify(y)))&&"object"==typeof y.audio){var v=function(w,N,k){N in w&&!(k in w)&&(w[k]=w[N],delete w[N])};v((y=JSON.parse(JSON.stringify(y))).audio,"autoGainControl","googAutoGainControl"),v(y.audio,"noiseSuppression","googNoiseSuppression"),y.audio=a(y.audio)}if(y&&"object"==typeof y.video){var C,b=y.video.facingMode,T=o.version<66;if((b=b&&("object"==typeof b?b:{ideal:b}))&&("user"===b.exact||"environment"===b.exact||"user"===b.ideal||"environment"===b.ideal)&&(!s.mediaDevices.getSupportedConstraints||!s.mediaDevices.getSupportedConstraints().facingMode||T)&&(delete y.video.facingMode,"environment"===b.exact||"environment"===b.ideal?C=["back","rear"]:("user"===b.exact||"user"===b.ideal)&&(C=["front"]),C))return s.mediaDevices.enumerateDevices().then(function(w){var N=(w=w.filter(function(k){return"videoinput"===k.kind})).find(function(k){return C.some(function(L){return-1!==k.label.toLowerCase().indexOf(L)})});return!N&&w.length&&-1!==C.indexOf("back")&&(N=w[w.length-1]),N&&(y.video.deviceId=b.exact?{exact:N.deviceId}:{ideal:N.deviceId}),y.video=a(y.video),r("chrome: "+JSON.stringify(y)),O(y)});y.video=a(y.video)}return r("chrome: "+JSON.stringify(y)),O(y)},u=function(y){return o.version>=64?y:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[y.name]||y.name,message:y.message,constraint:y.constraint||y.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};s.getUserMedia=function(y,O,v){c(y,function(b){s.webkitGetUserMedia(b,O,function(T){v&&v(u(T))})})};var h=function(y){return new n(function(O,v){s.getUserMedia(y,O,v)})};if(s.mediaDevices||(s.mediaDevices={getUserMedia:h,enumerateDevices:function(){return new n(function(y){var O={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(v){y(v.map(function(b){return{label:b.label,kind:O[b.kind],deviceId:b.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),s.mediaDevices.getUserMedia){var p=s.mediaDevices.getUserMedia.bind(s.mediaDevices);s.mediaDevices.getUserMedia=function(y){return c(y,function(O){return p(O).then(function(v){if(O.audio&&!v.getAudioTracks().length||O.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(function(b){b.stop()}),new DOMException("","NotFoundError");return v},function(v){return n.reject(u(v))})})}}else s.mediaDevices.getUserMedia=function(y){return h(y)};void 0===s.mediaDevices.addEventListener&&(s.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===s.mediaDevices.removeEventListener&&(s.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}}).call(this,t(0))},function(d,E,t){"use strict";var n=t(28),i=t(564),r=t(565);d.exports={shimGetUserMedia:t(566),shimPeerConnection:function(e){var o=n.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(c){return c}),e.RTCSessionDescription||(e.RTCSessionDescription=function(c){return c}),o.version<15025)){var s=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(c){s.set.call(this,c);var u=new Event("enabled");u.enabled=c,this.dispatchEvent(u)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var a=r(e,o.version);e.RTCPeerConnection=function(c){return c&&c.iceServers&&(c.iceServers=i(c.iceServers)),new a(c)},e.RTCPeerConnection.prototype=a.prototype},shimReplaceTrack:function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(e,o){if("getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)){var s=e.navigator.getDisplayMedia;e.navigator.mediaDevices.getDisplayMedia=function(a){return s.call(e.navigator,a)},e.navigator.getDisplayMedia=function(a){return n.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),s.call(e.navigator,a)}}}}},function(d,E,t){"use strict";var n=t(28);d.exports=function(i,r){var e=!1;return(i=JSON.parse(JSON.stringify(i))).filter(function(o){if(o&&(o.urls||o.url)){var s=o.urls||o.url;o.url&&!o.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var a="string"==typeof s;return a&&(s=[s]),s=s.filter(function(c){return 0!==c.indexOf("turn:")||-1===c.indexOf("transport=udp")||-1!==c.indexOf("turn:[")||e?0===c.indexOf("stun:")&&r>=14393&&-1===c.indexOf("?transport=udp"):(e=!0,!0)}),delete o.url,o.urls=a?s[0]:s,!!s.length}})}},function(d,E,t){"use strict";(function(n){var i=t(251);function e(l,h,p,y,O){var v=i.writeRtpDescription(l.kind,h);if(v+=i.writeIceParameters(l.iceGatherer.getLocalParameters()),v+=i.writeDtlsParameters(l.dtlsTransport.getLocalParameters(),"offer"===p?"actpass":O||"active"),v+="a=mid:"+l.mid+"\r\n",v+=l.rtpSender&&l.rtpReceiver?"a=sendrecv\r\n":l.rtpSender?"a=sendonly\r\n":l.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",l.rtpSender){var b=l.rtpSender._initialTrackId||l.rtpSender.track.id;l.rtpSender._initialTrackId=b;var T="msid:"+(y?y.id:"-")+" "+b+"\r\n";v+="a="+T,v+="a=ssrc:"+l.sendEncodingParameters[0].ssrc+" "+T,l.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+l.sendEncodingParameters[0].rtx.ssrc+" "+T,v+="a=ssrc-group:FID "+l.sendEncodingParameters[0].ssrc+" "+l.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return v+="a=ssrc:"+l.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",l.rtpSender&&l.sendEncodingParameters[0].rtx&&(v+="a=ssrc:"+l.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),v}function s(l,h){var p={codecs:[],headerExtensions:[],fecMechanisms:[]},y=function(v,b){v=parseInt(v,10);for(var T=0;T<b.length;T++)if(b[T].payloadType===v||b[T].preferredPayloadType===v)return b[T]},O=function(v,b,T,C){var w=y(v.parameters.apt,T),N=y(b.parameters.apt,C);return w&&N&&w.name.toLowerCase()===N.name.toLowerCase()};return l.codecs.forEach(function(v){for(var b=0;b<h.codecs.length;b++){var T=h.codecs[b];if(v.name.toLowerCase()===T.name.toLowerCase()&&v.clockRate===T.clockRate){if("rtx"===v.name.toLowerCase()&&v.parameters&&T.parameters.apt&&!O(v,T,l.codecs,h.codecs))continue;(T=JSON.parse(JSON.stringify(T))).numChannels=Math.min(v.numChannels,T.numChannels),p.codecs.push(T),T.rtcpFeedback=T.rtcpFeedback.filter(function(C){for(var w=0;w<v.rtcpFeedback.length;w++)if(v.rtcpFeedback[w].type===C.type&&v.rtcpFeedback[w].parameter===C.parameter)return!0;return!1});break}}}),l.headerExtensions.forEach(function(v){for(var b=0;b<h.headerExtensions.length;b++){var T=h.headerExtensions[b];if(v.uri===T.uri){p.headerExtensions.push(T);break}}}),p}function a(l,h,p){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[h][l].indexOf(p)}function c(l,h){var p=l.getRemoteCandidates().find(function(y){return h.foundation===y.foundation&&h.ip===y.ip&&h.port===y.port&&h.priority===y.priority&&h.protocol===y.protocol&&h.type===y.type});return p||l.addRemoteCandidate(h),!p}function u(l,h){var p=new Error(h);return p.name=l,p.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[l],p}d.exports=function(l,h){function p(C,w){w.addTrack(C),w.dispatchEvent(new l.MediaStreamTrackEvent("addtrack",{track:C}))}function O(C,w,N,k){var L=new Event("track");L.track=w,L.receiver=N,L.transceiver={receiver:N},L.streams=k,l.setTimeout(function(){C._dispatchEvent("track",L)})}var v=function(C){var w=this,N=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(L){w[L]=N[L].bind(N)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",C=JSON.parse(JSON.stringify(C||{})),this.usingBundle="max-bundle"===C.bundlePolicy,"negotiate"===C.rtcpMuxPolicy)throw u("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(C.rtcpMuxPolicy||(C.rtcpMuxPolicy="require"),C.iceTransportPolicy){case"all":case"relay":break;default:C.iceTransportPolicy="all"}switch(C.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:C.bundlePolicy="balanced"}if(C.iceServers=function o(l,h){var p=!1;return(l=JSON.parse(JSON.stringify(l))).filter(function(y){if(y&&(y.urls||y.url)){var O=y.urls||y.url;y.url&&!y.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var v="string"==typeof O;return v&&(O=[O]),O=O.filter(function(b){return 0!==b.indexOf("turn:")||-1===b.indexOf("transport=udp")||-1!==b.indexOf("turn:[")||p?0===b.indexOf("stun:")&&h>=14393&&-1===b.indexOf("?transport=udp"):(p=!0,!0)}),delete y.url,y.urls=v?O[0]:O,!!O.length}})}(C.iceServers||[],h),this._iceGatherers=[],C.iceCandidatePoolSize)for(var k=C.iceCandidatePoolSize;k>0;k--)this._iceGatherers.push(new l.RTCIceGatherer({iceServers:C.iceServers,gatherPolicy:C.iceTransportPolicy}));else C.iceCandidatePoolSize=0;this._config=C,this.transceivers=[],this._sdpSessionId=i.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(v.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(v.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),v.prototype.onicecandidate=null,v.prototype.onaddstream=null,v.prototype.ontrack=null,v.prototype.onremovestream=null,v.prototype.onsignalingstatechange=null,v.prototype.oniceconnectionstatechange=null,v.prototype.onconnectionstatechange=null,v.prototype.onicegatheringstatechange=null,v.prototype.onnegotiationneeded=null,v.prototype.ondatachannel=null,v.prototype._dispatchEvent=function(C,w){this._isClosed||(this.dispatchEvent(w),"function"==typeof this["on"+C]&&this["on"+C](w))},v.prototype._emitGatheringStateChange=function(){var C=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",C)},v.prototype.getConfiguration=function(){return this._config},v.prototype.getLocalStreams=function(){return this.localStreams},v.prototype.getRemoteStreams=function(){return this.remoteStreams},v.prototype._createTransceiver=function(C,w){var k={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:C,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)k.iceTransport=this.transceivers[0].iceTransport,k.dtlsTransport=this.transceivers[0].dtlsTransport;else{var L=this._createIceAndDtlsTransports();k.iceTransport=L.iceTransport,k.dtlsTransport=L.dtlsTransport}return w||this.transceivers.push(k),k},v.prototype.addTrack=function(C,w){if(this._isClosed)throw u("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(D){return D.track===C}))throw u("InvalidAccessError","Track already exists.");for(var k,L=0;L<this.transceivers.length;L++)!this.transceivers[L].track&&this.transceivers[L].kind===C.kind&&(k=this.transceivers[L]);return k||(k=this._createTransceiver(C.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(w)&&this.localStreams.push(w),k.track=C,k.stream=w,k.rtpSender=new l.RTCRtpSender(C,k.dtlsTransport),k.rtpSender},v.prototype.addStream=function(C){var w=this;if(h>=15025)C.getTracks().forEach(function(k){w.addTrack(k,C)});else{var N=C.clone();C.getTracks().forEach(function(k,L){var D=N.getTracks()[L];k.addEventListener("enabled",function(W){D.enabled=W.enabled})}),N.getTracks().forEach(function(k){w.addTrack(k,N)})}},v.prototype.removeTrack=function(C){if(this._isClosed)throw u("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(C instanceof l.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var w=this.transceivers.find(function(L){return L.rtpSender===C});if(!w)throw u("InvalidAccessError","Sender was not created by this connection.");var N=w.stream;w.rtpSender.stop(),w.rtpSender=null,w.track=null,w.stream=null,-1===this.transceivers.map(function(L){return L.stream}).indexOf(N)&&this.localStreams.indexOf(N)>-1&&this.localStreams.splice(this.localStreams.indexOf(N),1),this._maybeFireNegotiationNeeded()},v.prototype.removeStream=function(C){var w=this;C.getTracks().forEach(function(N){var k=w.getSenders().find(function(L){return L.track===N});k&&w.removeTrack(k)})},v.prototype.getSenders=function(){return this.transceivers.filter(function(C){return!!C.rtpSender}).map(function(C){return C.rtpSender})},v.prototype.getReceivers=function(){return this.transceivers.filter(function(C){return!!C.rtpReceiver}).map(function(C){return C.rtpReceiver})},v.prototype._createIceGatherer=function(C,w){var N=this;if(w&&C>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var k=new l.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(k,"state",{value:"new",writable:!0}),this.transceivers[C].bufferedCandidateEvents=[],this.transceivers[C].bufferCandidates=function(L){var D=!L.candidate||0===Object.keys(L.candidate).length;k.state=D?"completed":"gathering",null!==N.transceivers[C].bufferedCandidateEvents&&N.transceivers[C].bufferedCandidateEvents.push(L)},k.addEventListener("localcandidate",this.transceivers[C].bufferCandidates),k},v.prototype._gather=function(C,w){var N=this,k=this.transceivers[w].iceGatherer;if(!k.onlocalcandidate){var L=this.transceivers[w].bufferedCandidateEvents;this.transceivers[w].bufferedCandidateEvents=null,k.removeEventListener("localcandidate",this.transceivers[w].bufferCandidates),k.onlocalcandidate=function(D){if(!(N.usingBundle&&w>0)){var W=new Event("icecandidate");W.candidate={sdpMid:C,sdpMLineIndex:w};var Z=D.candidate,oe=!Z||0===Object.keys(Z).length;if(oe)("new"===k.state||"gathering"===k.state)&&(k.state="completed");else{"new"===k.state&&(k.state="gathering"),Z.component=1,Z.ufrag=k.getLocalParameters().usernameFragment;var Q=i.writeCandidate(Z);W.candidate=Object.assign(W.candidate,i.parseCandidate(Q)),W.candidate.candidate=Q,W.candidate.toJSON=function(){return{candidate:W.candidate.candidate,sdpMid:W.candidate.sdpMid,sdpMLineIndex:W.candidate.sdpMLineIndex,usernameFragment:W.candidate.usernameFragment}}}var ne=i.getMediaSections(N._localDescription.sdp);ne[W.candidate.sdpMLineIndex]+=oe?"a=end-of-candidates\r\n":"a="+W.candidate.candidate+"\r\n",N._localDescription.sdp=i.getDescription(N._localDescription.sdp)+ne.join("");var he=N.transceivers.every(function(ae){return ae.iceGatherer&&"completed"===ae.iceGatherer.state});"gathering"!==N.iceGatheringState&&(N.iceGatheringState="gathering",N._emitGatheringStateChange()),oe||N._dispatchEvent("icecandidate",W),he&&(N._dispatchEvent("icecandidate",new Event("icecandidate")),N.iceGatheringState="complete",N._emitGatheringStateChange())}},l.setTimeout(function(){L.forEach(function(D){k.onlocalcandidate(D)})},0)}},v.prototype._createIceAndDtlsTransports=function(){var C=this,w=new l.RTCIceTransport(null);w.onicestatechange=function(){C._updateIceConnectionState(),C._updateConnectionState()};var N=new l.RTCDtlsTransport(w);return N.ondtlsstatechange=function(){C._updateConnectionState()},N.onerror=function(){Object.defineProperty(N,"state",{value:"failed",writable:!0}),C._updateConnectionState()},{iceTransport:w,dtlsTransport:N}},v.prototype._disposeIceAndDtlsTransports=function(C){var w=this.transceivers[C].iceGatherer;w&&(delete w.onlocalcandidate,delete this.transceivers[C].iceGatherer);var N=this.transceivers[C].iceTransport;N&&(delete N.onicestatechange,delete this.transceivers[C].iceTransport);var k=this.transceivers[C].dtlsTransport;k&&(delete k.ondtlsstatechange,delete k.onerror,delete this.transceivers[C].dtlsTransport)},v.prototype._transceive=function(C,w,N){var k=s(C.localCapabilities,C.remoteCapabilities);w&&C.rtpSender&&(k.encodings=C.sendEncodingParameters,k.rtcp={cname:i.localCName,compound:C.rtcpParameters.compound},C.recvEncodingParameters.length&&(k.rtcp.ssrc=C.recvEncodingParameters[0].ssrc),C.rtpSender.send(k)),N&&C.rtpReceiver&&k.codecs.length>0&&("video"===C.kind&&C.recvEncodingParameters&&h<15019&&C.recvEncodingParameters.forEach(function(L){delete L.rtx}),k.encodings=C.recvEncodingParameters.length?C.recvEncodingParameters:[{}],k.rtcp={compound:C.rtcpParameters.compound},C.rtcpParameters.cname&&(k.rtcp.cname=C.rtcpParameters.cname),C.sendEncodingParameters.length&&(k.rtcp.ssrc=C.sendEncodingParameters[0].ssrc),C.rtpReceiver.receive(k))},v.prototype.setLocalDescription=function(C){var N,k,w=this;if(-1===["offer","answer"].indexOf(C.type))return n.reject(u("TypeError",'Unsupported type "'+C.type+'"'));if(!a("setLocalDescription",C.type,w.signalingState)||w._isClosed)return n.reject(u("InvalidStateError","Can not set local "+C.type+" in state "+w.signalingState));if("offer"===C.type)N=i.splitSections(C.sdp),k=N.shift(),N.forEach(function(D,W){var Z=i.parseRtpParameters(D);w.transceivers[W].localCapabilities=Z}),w.transceivers.forEach(function(D,W){w._gather(D.mid,W)});else if("answer"===C.type){N=i.splitSections(w._remoteDescription.sdp),k=N.shift();var L=i.matchPrefix(k,"a=ice-lite").length>0;N.forEach(function(D,W){var Z=w.transceivers[W],oe=Z.iceGatherer,Q=Z.iceTransport,ne=Z.dtlsTransport,he=Z.localCapabilities,ae=Z.remoteCapabilities;if(!(i.isRejected(D)&&0===i.matchPrefix(D,"a=bundle-only").length||Z.rejected)){var Le=i.getIceParameters(D,k),me=i.getDtlsParameters(D,k);L&&(me.role="server"),(!w.usingBundle||0===W)&&(w._gather(Z.mid,W),"new"===Q.state&&Q.start(oe,Le,L?"controlling":"controlled"),"new"===ne.state&&ne.start(me));var Oe=s(he,ae);w._transceive(Z,Oe.codecs.length>0,!1)}})}return w._localDescription={type:C.type,sdp:C.sdp},w._updateSignalingState("offer"===C.type?"have-local-offer":"stable"),n.resolve()},v.prototype.setRemoteDescription=function(C){var w=this;if(-1===["offer","answer"].indexOf(C.type))return n.reject(u("TypeError",'Unsupported type "'+C.type+'"'));if(!a("setRemoteDescription",C.type,w.signalingState)||w._isClosed)return n.reject(u("InvalidStateError","Can not set remote "+C.type+" in state "+w.signalingState));var N={};w.remoteStreams.forEach(function(Q){N[Q.id]=Q});var k=[],L=i.splitSections(C.sdp),D=L.shift(),W=i.matchPrefix(D,"a=ice-lite").length>0,Z=i.matchPrefix(D,"a=group:BUNDLE ").length>0;w.usingBundle=Z;var oe=i.matchPrefix(D,"a=ice-options:")[0];return w.canTrickleIceCandidates=!!oe&&oe.substr(14).split(" ").indexOf("trickle")>=0,L.forEach(function(Q,ne){var he=i.splitLines(Q),ae=i.getKind(Q),ye=i.isRejected(Q)&&0===i.matchPrefix(Q,"a=bundle-only").length,Le=he[0].substr(2).split(" ")[2],me=i.getDirection(Q,D),Oe=i.parseMsid(Q),ge=i.getMid(Q)||i.generateIdentifier();if(ye||"application"===ae&&("DTLS/SCTP"===Le||"UDP/DTLS/SCTP"===Le))w.transceivers[ne]={mid:ge,kind:ae,protocol:Le,rejected:!0};else{!ye&&w.transceivers[ne]&&w.transceivers[ne].rejected&&(w.transceivers[ne]=w._createTransceiver(ae,!0));var ce,pe,Ue,de,ve,Ae,Xe,Ye,We,At,ht,at=i.parseRtpParameters(Q);ye||(At=i.getIceParameters(Q,D),(ht=i.getDtlsParameters(Q,D)).role="client"),Xe=i.parseRtpEncodingParameters(Q);var Wt=i.parseRtcpParameters(Q),$t=i.matchPrefix(Q,"a=end-of-candidates",D).length>0,un=i.matchPrefix(Q,"a=candidate:").map(function(lt){return i.parseCandidate(lt)}).filter(function(lt){return 1===lt.component});if(("offer"===C.type||"answer"===C.type)&&!ye&&Z&&ne>0&&w.transceivers[ne]&&(w._disposeIceAndDtlsTransports(ne),w.transceivers[ne].iceGatherer=w.transceivers[0].iceGatherer,w.transceivers[ne].iceTransport=w.transceivers[0].iceTransport,w.transceivers[ne].dtlsTransport=w.transceivers[0].dtlsTransport,w.transceivers[ne].rtpSender&&w.transceivers[ne].rtpSender.setTransport(w.transceivers[0].dtlsTransport),w.transceivers[ne].rtpReceiver&&w.transceivers[ne].rtpReceiver.setTransport(w.transceivers[0].dtlsTransport)),"offer"!==C.type||ye)"answer"!==C.type||ye||(pe=(ce=w.transceivers[ne]).iceGatherer,Ue=ce.iceTransport,de=ce.dtlsTransport,ve=ce.rtpReceiver,Ae=ce.sendEncodingParameters,Ye=ce.localCapabilities,w.transceivers[ne].recvEncodingParameters=Xe,w.transceivers[ne].remoteCapabilities=at,w.transceivers[ne].rtcpParameters=Wt,un.length&&"new"===Ue.state&&(!W&&!$t||Z&&0!==ne?un.forEach(function(lt){c(ce.iceTransport,lt)}):Ue.setRemoteCandidates(un)),(!Z||0===ne)&&("new"===Ue.state&&Ue.start(pe,At,"controlling"),"new"===de.state&&de.start(ht)),!s(ce.localCapabilities,ce.remoteCapabilities).codecs.filter(function(lt){return"rtx"===lt.name.toLowerCase()}).length&&ce.sendEncodingParameters[0].rtx&&delete ce.sendEncodingParameters[0].rtx,w._transceive(ce,"sendrecv"===me||"recvonly"===me,"sendrecv"===me||"sendonly"===me),!ve||"sendrecv"!==me&&"sendonly"!==me?delete ce.rtpReceiver:(We=ve.track,Oe?(N[Oe.stream]||(N[Oe.stream]=new l.MediaStream),p(We,N[Oe.stream]),k.push([We,ve,N[Oe.stream]])):(N.default||(N.default=new l.MediaStream),p(We,N.default),k.push([We,ve,N.default]))));else{(ce=w.transceivers[ne]||w._createTransceiver(ae)).mid=ge,ce.iceGatherer||(ce.iceGatherer=w._createIceGatherer(ne,Z)),un.length&&"new"===ce.iceTransport.state&&(!$t||Z&&0!==ne?un.forEach(function(lt){c(ce.iceTransport,lt)}):ce.iceTransport.setRemoteCandidates(un)),Ye=l.RTCRtpReceiver.getCapabilities(ae),h<15019&&(Ye.codecs=Ye.codecs.filter(function(lt){return"rtx"!==lt.name})),Ae=ce.sendEncodingParameters||[{ssrc:1001*(2*ne+2)}];var nt,En=!1;"sendrecv"===me||"sendonly"===me?(En=!ce.rtpReceiver,ve=ce.rtpReceiver||new l.RTCRtpReceiver(ce.dtlsTransport,ae),En&&(We=ve.track,Oe&&"-"===Oe.stream||(Oe?(N[Oe.stream]||(N[Oe.stream]=new l.MediaStream,Object.defineProperty(N[Oe.stream],"id",{get:function(){return Oe.stream}})),Object.defineProperty(We,"id",{get:function(){return Oe.track}}),nt=N[Oe.stream]):(N.default||(N.default=new l.MediaStream),nt=N.default)),nt&&(p(We,nt),ce.associatedRemoteMediaStreams.push(nt)),k.push([We,ve,nt]))):ce.rtpReceiver&&ce.rtpReceiver.track&&(ce.associatedRemoteMediaStreams.forEach(function(lt){var wt=lt.getTracks().find(function(In){return In.id===ce.rtpReceiver.track.id});wt&&function y(C,w){w.removeTrack(C),w.dispatchEvent(new l.MediaStreamTrackEvent("removetrack",{track:C}))}(wt,lt)}),ce.associatedRemoteMediaStreams=[]),ce.localCapabilities=Ye,ce.remoteCapabilities=at,ce.rtpReceiver=ve,ce.rtcpParameters=Wt,ce.sendEncodingParameters=Ae,ce.recvEncodingParameters=Xe,w._transceive(w.transceivers[ne],!1,En)}}}),void 0===w._dtlsRole&&(w._dtlsRole="offer"===C.type?"active":"passive"),w._remoteDescription={type:C.type,sdp:C.sdp},w._updateSignalingState("offer"===C.type?"have-remote-offer":"stable"),Object.keys(N).forEach(function(Q){var ne=N[Q];if(ne.getTracks().length){if(-1===w.remoteStreams.indexOf(ne)){w.remoteStreams.push(ne);var he=new Event("addstream");he.stream=ne,l.setTimeout(function(){w._dispatchEvent("addstream",he)})}k.forEach(function(ae){ne.id===ae[2].id&&O(w,ae[0],ae[1],[ne])})}}),k.forEach(function(Q){Q[2]||O(w,Q[0],Q[1],[])}),l.setTimeout(function(){!w||!w.transceivers||w.transceivers.forEach(function(Q){Q.iceTransport&&"new"===Q.iceTransport.state&&Q.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Q.iceTransport.addRemoteCandidate({}))})},4e3),n.resolve()},v.prototype.close=function(){this.transceivers.forEach(function(C){C.iceTransport&&C.iceTransport.stop(),C.dtlsTransport&&C.dtlsTransport.stop(),C.rtpSender&&C.rtpSender.stop(),C.rtpReceiver&&C.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},v.prototype._updateSignalingState=function(C){this.signalingState=C;var w=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",w)},v.prototype._maybeFireNegotiationNeeded=function(){var C=this;"stable"!==this.signalingState||!0===this.needNegotiation||(this.needNegotiation=!0,l.setTimeout(function(){if(C.needNegotiation){C.needNegotiation=!1;var w=new Event("negotiationneeded");C._dispatchEvent("negotiationneeded",w)}},0))},v.prototype._updateIceConnectionState=function(){var C,w={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(k){k.iceTransport&&!k.rejected&&w[k.iceTransport.state]++}),C="new",w.failed>0?C="failed":w.checking>0?C="checking":w.disconnected>0?C="disconnected":w.new>0?C="new":w.connected>0?C="connected":w.completed>0&&(C="completed"),C!==this.iceConnectionState){this.iceConnectionState=C;var N=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",N)}},v.prototype._updateConnectionState=function(){var C,w={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(k){k.iceTransport&&k.dtlsTransport&&!k.rejected&&(w[k.iceTransport.state]++,w[k.dtlsTransport.state]++)}),w.connected+=w.completed,C="new",w.failed>0?C="failed":w.connecting>0?C="connecting":w.disconnected>0?C="disconnected":w.new>0?C="new":w.connected>0&&(C="connected"),C!==this.connectionState){this.connectionState=C;var N=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",N)}},v.prototype.createOffer=function(){var C=this;if(C._isClosed)return n.reject(u("InvalidStateError","Can not call createOffer after close"));var w=C.transceivers.filter(function(W){return"audio"===W.kind}).length,N=C.transceivers.filter(function(W){return"video"===W.kind}).length,k=arguments[0];if(k){if(k.mandatory||k.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==k.offerToReceiveAudio&&(w=!0===k.offerToReceiveAudio?1:!1===k.offerToReceiveAudio?0:k.offerToReceiveAudio),void 0!==k.offerToReceiveVideo&&(N=!0===k.offerToReceiveVideo?1:!1===k.offerToReceiveVideo?0:k.offerToReceiveVideo)}for(C.transceivers.forEach(function(W){"audio"===W.kind?--w<0&&(W.wantReceive=!1):"video"===W.kind&&--N<0&&(W.wantReceive=!1)});w>0||N>0;)w>0&&(C._createTransceiver("audio"),w--),N>0&&(C._createTransceiver("video"),N--);var L=i.writeSessionBoilerplate(C._sdpSessionId,C._sdpSessionVersion++);C.transceivers.forEach(function(W,Z){var oe=W.track,Q=W.kind,ne=W.mid||i.generateIdentifier();W.mid=ne,W.iceGatherer||(W.iceGatherer=C._createIceGatherer(Z,C.usingBundle));var he=l.RTCRtpSender.getCapabilities(Q);h<15019&&(he.codecs=he.codecs.filter(function(ye){return"rtx"!==ye.name})),he.codecs.forEach(function(ye){"H264"===ye.name&&void 0===ye.parameters["level-asymmetry-allowed"]&&(ye.parameters["level-asymmetry-allowed"]="1"),W.remoteCapabilities&&W.remoteCapabilities.codecs&&W.remoteCapabilities.codecs.forEach(function(Le){ye.name.toLowerCase()===Le.name.toLowerCase()&&ye.clockRate===Le.clockRate&&(ye.preferredPayloadType=Le.payloadType)})}),he.headerExtensions.forEach(function(ye){(W.remoteCapabilities&&W.remoteCapabilities.headerExtensions||[]).forEach(function(me){ye.uri===me.uri&&(ye.id=me.id)})});var ae=W.sendEncodingParameters||[{ssrc:1001*(2*Z+1)}];oe&&h>=15019&&"video"===Q&&!ae[0].rtx&&(ae[0].rtx={ssrc:ae[0].ssrc+1}),W.wantReceive&&(W.rtpReceiver=new l.RTCRtpReceiver(W.dtlsTransport,Q)),W.localCapabilities=he,W.sendEncodingParameters=ae}),"max-compat"!==C._config.bundlePolicy&&(L+="a=group:BUNDLE "+C.transceivers.map(function(W){return W.mid}).join(" ")+"\r\n"),L+="a=ice-options:trickle\r\n",C.transceivers.forEach(function(W,Z){L+=e(W,W.localCapabilities,"offer",W.stream,C._dtlsRole),L+="a=rtcp-rsize\r\n",W.iceGatherer&&"new"!==C.iceGatheringState&&(0===Z||!C.usingBundle)&&(W.iceGatherer.getLocalCandidates().forEach(function(oe){oe.component=1,L+="a="+i.writeCandidate(oe)+"\r\n"}),"completed"===W.iceGatherer.state&&(L+="a=end-of-candidates\r\n"))});var D=new l.RTCSessionDescription({type:"offer",sdp:L});return n.resolve(D)},v.prototype.createAnswer=function(){var C=this;if(C._isClosed)return n.reject(u("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==C.signalingState&&"have-local-pranswer"!==C.signalingState)return n.reject(u("InvalidStateError","Can not call createAnswer in signalingState "+C.signalingState));var w=i.writeSessionBoilerplate(C._sdpSessionId,C._sdpSessionVersion++);C.usingBundle&&(w+="a=group:BUNDLE "+C.transceivers.map(function(L){return L.mid}).join(" ")+"\r\n"),w+="a=ice-options:trickle\r\n";var N=i.getMediaSections(C._remoteDescription.sdp).length;C.transceivers.forEach(function(L,D){if(!(D+1>N)){if(L.rejected)return"application"===L.kind?w+="DTLS/SCTP"===L.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+L.protocol+" webrtc-datachannel\r\n":"audio"===L.kind?w+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===L.kind&&(w+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(w+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+L.mid+"\r\n");var W;L.stream&&("audio"===L.kind?W=L.stream.getAudioTracks()[0]:"video"===L.kind&&(W=L.stream.getVideoTracks()[0]),W&&h>=15019&&"video"===L.kind&&!L.sendEncodingParameters[0].rtx&&(L.sendEncodingParameters[0].rtx={ssrc:L.sendEncodingParameters[0].ssrc+1}));var Z=s(L.localCapabilities,L.remoteCapabilities);!Z.codecs.filter(function(Q){return"rtx"===Q.name.toLowerCase()}).length&&L.sendEncodingParameters[0].rtx&&delete L.sendEncodingParameters[0].rtx,w+=e(L,Z,"answer",L.stream,C._dtlsRole),L.rtcpParameters&&L.rtcpParameters.reducedSize&&(w+="a=rtcp-rsize\r\n")}});var k=new l.RTCSessionDescription({type:"answer",sdp:w});return n.resolve(k)},v.prototype.addIceCandidate=function(C){var N,w=this;return C&&void 0===C.sdpMLineIndex&&!C.sdpMid?n.reject(new TypeError("sdpMLineIndex or sdpMid required")):new n(function(k,L){if(!w._remoteDescription)return L(u("InvalidStateError","Can not add ICE candidate without a remote description"));if(C&&""!==C.candidate){var W=C.sdpMLineIndex;if(C.sdpMid)for(var Z=0;Z<w.transceivers.length;Z++)if(w.transceivers[Z].mid===C.sdpMid){W=Z;break}var oe=w.transceivers[W];if(!oe)return L(u("OperationError","Can not add ICE candidate"));if(oe.rejected)return k();var Q=Object.keys(C.candidate).length>0?i.parseCandidate(C.candidate):{};if("tcp"===Q.protocol&&(0===Q.port||9===Q.port)||Q.component&&1!==Q.component)return k();if((0===W||W>0&&oe.iceTransport!==w.transceivers[0].iceTransport)&&!c(oe.iceTransport,Q))return L(u("OperationError","Can not add ICE candidate"));var ne=C.candidate.trim();0===ne.indexOf("a=")&&(ne=ne.substr(2)),(N=i.getMediaSections(w._remoteDescription.sdp))[W]+="a="+(Q.type?ne:"end-of-candidates")+"\r\n",w._remoteDescription.sdp=i.getDescription(w._remoteDescription.sdp)+N.join("")}else for(var D=0;D<w.transceivers.length&&(w.transceivers[D].rejected||(w.transceivers[D].iceTransport.addRemoteCandidate({}),(N=i.getMediaSections(w._remoteDescription.sdp))[D]+="a=end-of-candidates\r\n",w._remoteDescription.sdp=i.getDescription(w._remoteDescription.sdp)+N.join(""),!w.usingBundle));D++);k()})},v.prototype.getStats=function(C){if(C&&C instanceof l.MediaStreamTrack){var w=null;if(this.transceivers.forEach(function(k){k.rtpSender&&k.rtpSender.track===C?w=k.rtpSender:k.rtpReceiver&&k.rtpReceiver.track===C&&(w=k.rtpReceiver)}),!w)throw u("InvalidAccessError","Invalid selector.");return w.getStats()}var N=[];return this.transceivers.forEach(function(k){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(L){k[L]&&N.push(k[L].getStats())})}),n.all(N).then(function(k){var L=new Map;return k.forEach(function(D){D.forEach(function(W){L.set(W.id,W)})}),L})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(C){var w=l[C];if(w&&w.prototype&&w.prototype.getStats){var N=w.prototype.getStats;w.prototype.getStats=function(){return N.apply(this).then(function(k){var L=new Map;return Object.keys(k).forEach(function(D){k[D].type=function r(l){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[l.type]||l.type}(k[D]),L.set(D,k[D])}),L})}}});var T=["createOffer","createAnswer"];return T.forEach(function(C){var w=v.prototype[C];v.prototype[C]=function(){var N=arguments;return"function"==typeof N[0]||"function"==typeof N[1]?w.apply(this,[arguments[2]]).then(function(k){"function"==typeof N[0]&&N[0].apply(null,[k])},function(k){"function"==typeof N[1]&&N[1].apply(null,[k])}):w.apply(this,arguments)}}),(T=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(C){var w=v.prototype[C];v.prototype[C]=function(){var N=arguments;return"function"==typeof N[1]||"function"==typeof N[2]?w.apply(this,arguments).then(function(){"function"==typeof N[1]&&N[1].apply(null)},function(k){"function"==typeof N[2]&&N[2].apply(null,[k])}):w.apply(this,arguments)}}),["getStats"].forEach(function(C){var w=v.prototype[C];v.prototype[C]=function(){var N=arguments;return"function"==typeof N[1]?w.apply(this,arguments).then(function(){"function"==typeof N[1]&&N[1].apply(null)}):w.apply(this,arguments)}}),v}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){d.exports=function(i){var r=i&&i.navigator,o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(s){return o(s).catch(function(a){return n.reject(function(s){return{name:{PermissionDeniedError:"NotAllowedError"}[s.name]||s.name,message:s.message,constraint:s.constraint,toString:function(){return this.name}}}(a))})}}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(28);d.exports={shimGetUserMedia:t(568),shimOnTrack:function(r){"object"==typeof r&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)&&Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(o){o.stream.getTracks().forEach(function(s){var a=new Event("track");a.track=s,a.receiver={track:s},a.transceiver={receiver:a.receiver},a.streams=[o.stream],this.dispatchEvent(a)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof r&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(r){"object"==typeof r&&r.HTMLMediaElement&&!("srcObject"in r.HTMLMediaElement.prototype)&&Object.defineProperty(r.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}})},shimPeerConnection:function(r){var e=i.detectBrowser(r);if("object"==typeof r&&(r.RTCPeerConnection||r.mozRTCPeerConnection)){r.RTCPeerConnection||(r.RTCPeerConnection=function(u,l){if(e.version<38&&u&&u.iceServers){for(var h=[],p=0;p<u.iceServers.length;p++){var y=u.iceServers[p];if(y.hasOwnProperty("urls"))for(var O=0;O<y.urls.length;O++){var v={url:y.urls[O]};0===y.urls[O].indexOf("turn")&&(v.username=y.username,v.credential=y.credential),h.push(v)}else h.push(u.iceServers[p])}u.iceServers=h}return new r.mozRTCPeerConnection(u,l)},r.RTCPeerConnection.prototype=r.mozRTCPeerConnection.prototype,r.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return r.mozRTCPeerConnection.generateCertificate}}),r.RTCSessionDescription=r.mozRTCSessionDescription,r.RTCIceCandidate=r.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(u){var l=r.RTCPeerConnection.prototype[u];r.RTCPeerConnection.prototype[u]=function(){return arguments[0]=new("addIceCandidate"===u?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}});var o=r.RTCPeerConnection.prototype.addIceCandidate;r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),n.resolve())};var a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(u,l,h){return c.apply(this,[u||null]).then(function(p){if(e.version<48&&(p=function(u){var l=new Map;return Object.keys(u).forEach(function(h){l.set(h,u[h]),l[h]=u[h]}),l}(p)),e.version<53&&!l)try{p.forEach(function(y){y.type=a[y.type]||y.type})}catch(y){if("TypeError"!==y.name)throw y;p.forEach(function(O,v){p.set(v,Object.assign({},O,{type:a[O.type]||O.type}))})}return p}).then(l,h)}}},shimSenderGetStats:function(r){if("object"==typeof r&&r.RTCPeerConnection&&r.RTCRtpSender&&(!r.RTCRtpSender||!("getStats"in r.RTCRtpSender.prototype))){var e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){var s=this,a=e.apply(s,[]);return a.forEach(function(c){c._pc=s}),a});var o=r.RTCPeerConnection.prototype.addTrack;o&&(r.RTCPeerConnection.prototype.addTrack=function(){var s=o.apply(this,arguments);return s._pc=this,s}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):n.resolve(new Map)}}},shimReceiverGetStats:function(r){if("object"==typeof r&&r.RTCPeerConnection&&r.RTCRtpSender&&(!r.RTCRtpSender||!("getStats"in r.RTCRtpReceiver.prototype))){var e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){var o=this,s=e.apply(o,[]);return s.forEach(function(a){a._pc=o}),s}),i.wrapPeerConnectionEvent(r,"track",function(o){return o.receiver._pc=o.srcElement,o}),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(e){var o=this;i.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(s){s.track&&-1!==e.getTracks().indexOf(s.track)&&o.removeTrack(s)})})},shimRTCDataChannel:function(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)},shimGetDisplayMedia:function(r,e){!r.navigator||!r.navigator.mediaDevices||"getDisplayMedia"in r.navigator.mediaDevices||(r.navigator.mediaDevices.getDisplayMedia=function(o){if(!o||!o.video){var s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,n.reject(s)}return!0===o.video?o.video={mediaSource:e}:o.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(o)},r.navigator.getDisplayMedia=function(o){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),r.navigator.mediaDevices.getDisplayMedia(o)})}}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(28),r=i.log;d.exports=function(e){var o=i.detectBrowser(e),s=e&&e.navigator,a=e&&e.MediaStreamTrack,c=function(T){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[T.name]||T.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[T.message]||T.message,constraint:T.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},u=function(T,C,w){var N=function(k){if("object"!=typeof k||k.require)return k;var L=[];return Object.keys(k).forEach(function(D){if("require"!==D&&"advanced"!==D&&"mediaSource"!==D){var W=k[D]="object"==typeof k[D]?k[D]:{ideal:k[D]};if((void 0!==W.min||void 0!==W.max||void 0!==W.exact)&&L.push(D),void 0!==W.exact&&("number"==typeof W.exact?W.min=W.max=W.exact:k[D]=W.exact,delete W.exact),void 0!==W.ideal){k.advanced=k.advanced||[];var Z={};Z[D]="number"==typeof W.ideal?{min:W.ideal,max:W.ideal}:W.ideal,k.advanced.push(Z),delete W.ideal,Object.keys(W).length||delete k[D]}}}),L.length&&(k.require=L),k};return T=JSON.parse(JSON.stringify(T)),o.version<38&&(r("spec: "+JSON.stringify(T)),T.audio&&(T.audio=N(T.audio)),T.video&&(T.video=N(T.video)),r("ff37: "+JSON.stringify(T))),s.mozGetUserMedia(T,C,function(k){w(c(k))})};if(s.mediaDevices||(s.mediaDevices={getUserMedia:function(T){return new n(function(C,w){u(T,C,w)})},addEventListener:function(){},removeEventListener:function(){}}),s.mediaDevices.enumerateDevices=s.mediaDevices.enumerateDevices||function(){return new n(function(T){T([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var h=s.mediaDevices.enumerateDevices.bind(s.mediaDevices);s.mediaDevices.enumerateDevices=function(){return h().then(void 0,function(T){if("NotFoundError"===T.name)return[];throw T})}}if(o.version<49){var p=s.mediaDevices.getUserMedia.bind(s.mediaDevices);s.mediaDevices.getUserMedia=function(T){return p(T).then(function(C){if(T.audio&&!C.getAudioTracks().length||T.video&&!C.getVideoTracks().length)throw C.getTracks().forEach(function(w){w.stop()}),new DOMException("The object can not be found here.","NotFoundError");return C},function(C){return n.reject(c(C))})}}if(!(o.version>55&&"autoGainControl"in s.mediaDevices.getSupportedConstraints())){var y=function(T,C,w){C in T&&!(w in T)&&(T[w]=T[C],delete T[C])},O=s.mediaDevices.getUserMedia.bind(s.mediaDevices);if(s.mediaDevices.getUserMedia=function(T){return"object"==typeof T&&"object"==typeof T.audio&&(T=JSON.parse(JSON.stringify(T)),y(T.audio,"autoGainControl","mozAutoGainControl"),y(T.audio,"noiseSuppression","mozNoiseSuppression")),O(T)},a&&a.prototype.getSettings){var v=a.prototype.getSettings;a.prototype.getSettings=function(){var T=v.apply(this,arguments);return y(T,"mozAutoGainControl","autoGainControl"),y(T,"mozNoiseSuppression","noiseSuppression"),T}}if(a&&a.prototype.applyConstraints){var b=a.prototype.applyConstraints;a.prototype.applyConstraints=function(T){return"audio"===this.kind&&"object"==typeof T&&(T=JSON.parse(JSON.stringify(T)),y(T,"autoGainControl","mozAutoGainControl"),y(T,"noiseSuppression","mozNoiseSuppression")),b.apply(this,[T])}}}s.getUserMedia=function(T,C,w){if(o.version<44)return u(T,C,w);i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),s.mediaDevices.getUserMedia(T).then(C,w)}}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){var i=t(28);d.exports={shimLocalStreamsAPI:function(r){if("object"==typeof r&&r.RTCPeerConnection){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getStreamById=function(o){var s=null;return this._localStreams&&this._localStreams.forEach(function(a){a.id===o&&(s=a)}),this._remoteStreams&&this._remoteStreams.forEach(function(a){a.id===o&&(s=a)}),s}),!("addStream"in r.RTCPeerConnection.prototype)){var e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(o){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(o)&&this._localStreams.push(o);var s=this;o.getTracks().forEach(function(a){e.call(s,a,o)})},r.RTCPeerConnection.prototype.addTrack=function(o,s){return s&&(this._localStreams?-1===this._localStreams.indexOf(s)&&this._localStreams.push(s):this._localStreams=[s]),e.call(this,o,s)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(o){this._localStreams||(this._localStreams=[]);var s=this._localStreams.indexOf(o);if(-1!==s){this._localStreams.splice(s,1);var a=this,c=o.getTracks();this.getSenders().forEach(function(u){-1!==c.indexOf(u.track)&&a.removeTrack(u)})}})}},shimRemoteStreamsAPI:function(r){if("object"==typeof r&&r.RTCPeerConnection&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=o)}});var e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(function(a){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(a)>=0)){o._remoteStreams.push(a);var c=new Event("addstream");c.stream=a,o.dispatchEvent(c)}})}),e.apply(o,arguments)}}},shimCallbacksAPI:function(r){if("object"==typeof r&&r.RTCPeerConnection){var e=r.RTCPeerConnection.prototype,o=e.createOffer,s=e.createAnswer,a=e.setLocalDescription,c=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(h,p){var y=arguments.length>=2?arguments[2]:arguments[0],O=o.apply(this,[y]);return p?(O.then(h,p),n.resolve()):O},e.createAnswer=function(h,p){var y=arguments.length>=2?arguments[2]:arguments[0],O=s.apply(this,[y]);return p?(O.then(h,p),n.resolve()):O};var l=function(h,p,y){var O=a.apply(this,[h]);return y?(O.then(p,y),n.resolve()):O};e.setLocalDescription=l,e.setRemoteDescription=l=function(h,p,y){var O=c.apply(this,[h]);return y?(O.then(p,y),n.resolve()):O},e.addIceCandidate=l=function(h,p,y){var O=u.apply(this,[h]);return y?(O.then(p,y),n.resolve()):O}}},shimGetUserMedia:function(r){var e=r&&r.navigator;e.getUserMedia||(e.webkitGetUserMedia?e.getUserMedia=e.webkitGetUserMedia.bind(e):e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(o,s,a){e.mediaDevices.getUserMedia(o).then(s,a)}.bind(e)))},shimRTCIceServerUrls:function(r){var e=r.RTCPeerConnection;r.RTCPeerConnection=function(o,s){if(o&&o.iceServers){for(var a=[],c=0;c<o.iceServers.length;c++){var u=o.iceServers[c];!u.hasOwnProperty("urls")&&u.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(u=JSON.parse(JSON.stringify(u))).urls=u.url,delete u.url,a.push(u)):a.push(o.iceServers[c])}o.iceServers=a}return new e(o,s)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in r.RTCPeerConnection&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})},shimTrackEventTransceiver:function(r){"object"==typeof r&&r.RTCPeerConnection&&"receiver"in r.RTCTrackEvent.prototype&&!r.RTCTransceiver&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(r){var e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(o){var s=this;if(o){void 0!==o.offerToReceiveAudio&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var a=s.getTransceivers().find(function(u){return u.sender.track&&"audio"===u.sender.track.kind});!1===o.offerToReceiveAudio&&a?"sendrecv"===a.direction?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":"recvonly"===a.direction&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):!0===o.offerToReceiveAudio&&!a&&s.addTransceiver("audio"),void 0!==o.offerToReceiveVideo&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var c=s.getTransceivers().find(function(u){return u.sender.track&&"video"===u.sender.track.kind});!1===o.offerToReceiveVideo&&c?"sendrecv"===c.direction?c.setDirection("sendonly"):"recvonly"===c.direction&&c.setDirection("inactive"):!0===o.offerToReceiveVideo&&!c&&s.addTransceiver("video")}return e.apply(s,arguments)}}}}).call(this,t(0))},function(d,E,t){"use strict";var n=t(251),i=t(28);d.exports={shimRTCIceCandidate:function(r){if(!(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)){var e=r.RTCIceCandidate;r.RTCIceCandidate=function(o){if("object"==typeof o&&o.candidate&&0===o.candidate.indexOf("a=")&&((o=JSON.parse(JSON.stringify(o))).candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){var s=new e(o),a=n.parseCandidate(o.candidate),c=Object.assign(s,a);return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new e(o)},r.RTCIceCandidate.prototype=e.prototype,i.wrapPeerConnectionEvent(r,"icecandidate",function(o){return o.candidate&&Object.defineProperty(o,"candidate",{value:new r.RTCIceCandidate(o.candidate),writable:"false"}),o})}},shimCreateObjectURL:function(r){var e=r&&r.URL;if("object"==typeof r&&r.HTMLMediaElement&&"srcObject"in r.HTMLMediaElement.prototype&&e.createObjectURL&&e.revokeObjectURL){var o=e.createObjectURL.bind(e),s=e.revokeObjectURL.bind(e),a=new Map,c=0;e.createObjectURL=function(h){if("getTracks"in h){var p="polyblob:"+ ++c;return a.set(p,h),i.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),p}return o(h)},e.revokeObjectURL=function(h){s(h),a.delete(h)};var u=Object.getOwnPropertyDescriptor(r.HTMLMediaElement.prototype,"src");Object.defineProperty(r.HTMLMediaElement.prototype,"src",{get:function(){return u.get.apply(this)},set:function(h){return this.srcObject=a.get(h)||null,u.set.apply(this,[h])}});var l=r.HTMLMediaElement.prototype.setAttribute;r.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=a.get(arguments[1])||null),l.apply(this,arguments)}}},shimMaxMessageSize:function(r){if(!r.RTCSctpTransport&&r.RTCPeerConnection){var e=i.detectBrowser(r);"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var o=function(l){var h=n.splitSections(l.sdp);return h.shift(),h.some(function(p){var y=n.parseMLine(p);return y&&"application"===y.kind&&-1!==y.protocol.indexOf("SCTP")})},s=function(l){var h=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===h||h.length<2)return-1;var p=parseInt(h[1],10);return p!=p?-1:p},a=function(l){var h=65536;return"firefox"===e.browser&&(h=e.version<57?-1===l?16384:2147483637:e.version<60?57===e.version?65535:65536:2147483637),h},c=function(l,h){var p=65536;"firefox"===e.browser&&57===e.version&&(p=65535);var y=n.matchPrefix(l.sdp,"a=max-message-size:");return y.length>0?p=parseInt(y[0].substr(19),10):"firefox"===e.browser&&-1!==h&&(p=2147483637),p},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var l=this;if(l._sctp=null,o(arguments[0])){var O,h=s(arguments[0]),p=a(h),y=c(arguments[0],h);O=0===p&&0===y?Number.POSITIVE_INFINITY:0===p||0===y?Math.max(p,y):Math.min(p,y);var v={};Object.defineProperty(v,"maxMessageSize",{get:function(){return O}}),l._sctp=v}return u.apply(l,arguments)}}},shimSendThrowTypeError:function(r){if(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype){var o=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){var s=this,a=o.apply(s,arguments);return e(a,s),a},i.wrapPeerConnectionEvent(r,"datachannel",function(s){return e(s.channel,s.target),s})}function e(s,a){var c=s.send;s.send=function(){var u=arguments[0],l=u.length||u.size||u.byteLength;if("open"===s.readyState&&a.sctp&&l>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return c.apply(s,arguments)}}}}},function(d,E,t){"use strict";(function(n){const i=t(7);function r(){return"undefined"==typeof document||"complete"===document.readyState||"interactive"===document.readyState&&document.body}let e=!1;const o={isDomLoaded:r,isDomUnloaded:()=>e,whenUnloaded:new n(s=>{"undefined"!=typeof window&&window.addEventListener("unload",()=>{e=!0,o.emit("unload"),s()})}),whenLoaded:new n(s=>{if(r())return void s();const a=()=>{document.removeEventListener("DOMContentLoaded",a),document.removeEventListener("load",a),o.emit("load"),s()};document.addEventListener("DOMContentLoaded",a),document.addEventListener("load",a)})};i(o),d.exports=o}).call(this,t(0))},function(d,E,t){var n=t(79),i=t(256),r=t(239),e=t(573),o=t(11),s=t(55),a=t(257);d.exports=function c(u,l,h,p,y){u!==l&&r(l,function(O,v){if(y||(y=new n),o(O))e(u,l,v,h,c,p,y);else{var b=p?p(a(u,v),O,v+"",u,l,y):void 0;void 0===b&&(b=O),i(u,v,b)}},s)}},function(d,E,t){var n=t(256),i=t(180),r=t(189),e=t(56),o=t(190),s=t(65),a=t(12),c=t(129),u=t(66),l=t(17),h=t(11),p=t(135),y=t(86),O=t(257),v=t(574);d.exports=function b(T,C,w,N,k,L,D){var W=O(T,w),Z=O(C,w),oe=D.get(Z);if(oe)n(T,w,oe);else{var Q=L?L(W,Z,w+"",T,C,D):void 0,ne=void 0===Q;if(ne){var he=a(Z),ae=!he&&u(Z),ye=!he&&!ae&&y(Z);Q=Z,he||ae||ye?a(W)?Q=W:c(W)?Q=e(W):ae?(ne=!1,Q=i(Z,!0)):ye?(ne=!1,Q=r(Z,!0)):Q=[]:p(Z)||s(Z)?(Q=W,s(W)?Q=v(W):(!h(W)||l(W))&&(Q=o(Z))):ne=!1}ne&&(D.set(Z,Q),k(Q,Z,N,L,D),D.delete(Z)),n(T,w,Q)}}},function(d,E,t){var n=t(41),i=t(55);d.exports=function r(e){return n(e,i(e))}},function(d,E,t){"use strict";const n=t(147),i=t(258),r=t(259),e=t(264),o=t(2)("normalizeConstraintInput"),s={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960},"1920x1080":{width:1920,height:1080}},a=[1,7,15,30];function c(O){return O._inject&&O._inject.logging||o}function u(O,v,b,T,C){if(void 0===v)return;const w=b(v);return w||C.warn(`Invalid ${O} passed to the Publisher. Got: ${v}, expecting one of ${T}`),w}function l(O,v){const b=c(v),T=(()=>{const w=v[`publish${r(O)}`];return void 0===w||Boolean(w)})();let C=(()=>{const w=v[`${O}Source`];return void 0===w||null!==w&&!1!==w&&("object"==typeof w?!v[`isCustom${r(O)}Track`]&&("string"!=typeof w.deviceId?(b.warn(`Invalid ${O}Source passed to Publisher. Expected either a device ID or device.`),!0):w.deviceId):"string"!=typeof w?(b.warn(`Ignoring invalid ${O}Source parameter`),!0):w)})();return"audio"===O&&v.isScreenSharing&&!e&&!1!==C&&(v.audioSource&&c(v).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),C=!1),{source:C,publish:T}}function h(O,v){return"Chrome"===O.name&&-1!==O.userAgent.indexOf("Mac OS X")&&1===v?2:v}const p=["user","environment","left","right"],y=(O,v)=>{if(void 0===O||p.indexOf(O)>=0)return O;c(v).warn(`Invalid facingMode passed to Publisher. Expected one of: ${p.join(", ")}`)};d.exports=function(v){const b=c(v),T=v.env||{},C=v.isScreenSharing,w=v.isCustomAudioTrack,N=v.isCustomVideoTrack;return C&&!i&&n(v.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),["echoCancellation","autoGainControl","noiseSuppression"].forEach(k=>{!1!==v[k]&&Object.assign(v,{[k]:!0})}),{isScreenSharing:C,isCustomAudioTrack:w,isCustomVideoTrack:N,audio:l("audio",v),video:l("video",v),usingOptionalMandatoryStyle:v.usingOptionalMandatoryStyle,enableRenegotiation:v.enableRenegotiation,enableStereo:v.enableStereo,noiseSuppression:v.noiseSuppression,autoGainControl:v.autoGainControl,echoCancellation:v.echoCancellation,disableAudioProcessing:v.disableAudioProcessing,videoDimensions:u("resolution",v.resolution,k=>s[k],`"${Object.keys(s).join('", "')}"`,b),frameRate:h(T,u("frameRate",v.frameRate,k=>-1!==a.indexOf(k)?k:void 0,a.join(","),b)),maxResolution:function(){if(void 0===v.maxResolution)return C?{width:1920,height:1920}:void 0;const k={width:v.maxResolution.width,height:v.maxResolution.height};return Object.keys(k).forEach(L=>{const D=k[L];("number"!=typeof D||D>1920)&&(b.warn(`Invalid maxResolution passed to the Publisher. maxResolution.${L} must be less than or equal to 1920`),k[L]=1920)}),k}(),facingMode:y(v.facingMode,v)}}},function(d,E,t){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function e(s){if(null==s)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}d.exports=function o(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de","5"===Object.getOwnPropertyNames(s)[0])return!1;for(var a={},c=0;c<10;c++)a["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(h){return a[h]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(h){l[h]=h}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(h){return!1}}()?Object.assign:function(s,a){for(var c,l,u=e(s),h=1;h<arguments.length;h++){for(var p in c=Object(arguments[h]))i.call(c,p)&&(u[p]=c[p]);if(n){l=n(c);for(var y=0;y<l.length;y++)r.call(c,l[y])&&(u[l[y]]=c[l[y]])}}return u}},function(d,E,t){(function(n,i){var r=Object.getOwnPropertyDescriptors||function(ve){for(var Ae=Object.keys(ve),Xe={},Ye=0;Ye<Ae.length;Ye++)Xe[Ae[Ye]]=Object.getOwnPropertyDescriptor(ve,Ae[Ye]);return Xe},e=/%[sdj%]/g;E.format=function(de){if(!L(de)){for(var ve=[],Ae=0;Ae<arguments.length;Ae++)ve.push(a(arguments[Ae]));return ve.join(" ")}Ae=1;for(var Xe=arguments,Ye=Xe.length,We=String(de).replace(e,function(At){if("%%"===At)return"%";if(Ae>=Ye)return At;switch(At){case"%s":return String(Xe[Ae++]);case"%d":return Number(Xe[Ae++]);case"%j":try{return JSON.stringify(Xe[Ae++])}catch(ht){return"[Circular]"}default:return At}}),at=Xe[Ae];Ae<Ye;at=Xe[++Ae])w(at)||!oe(at)?We+=" "+at:We+=" "+a(at);return We},E.deprecate=function(de,ve){if(void 0!==n&&!0===n.noDeprecation)return de;if(void 0===n)return function(){return E.deprecate(de,ve).apply(this,arguments)};var Ae=!1;return function Xe(){if(!Ae){if(n.throwDeprecation)throw new Error(ve);n.traceDeprecation?console.trace(ve):console.error(ve),Ae=!0}return de.apply(this,arguments)}};var s,o={};function a(de,ve){var Ae={seen:[],stylize:u};return arguments.length>=3&&(Ae.depth=arguments[2]),arguments.length>=4&&(Ae.colors=arguments[3]),C(ve)?Ae.showHidden=ve:ve&&E._extend(Ae,ve),W(Ae.showHidden)&&(Ae.showHidden=!1),W(Ae.depth)&&(Ae.depth=2),W(Ae.colors)&&(Ae.colors=!1),W(Ae.customInspect)&&(Ae.customInspect=!0),Ae.colors&&(Ae.stylize=c),h(Ae,de,Ae.depth)}function c(de,ve){var Ae=a.styles[ve];return Ae?"\x1b["+a.colors[Ae][0]+"m"+de+"\x1b["+a.colors[Ae][1]+"m":de}function u(de,ve){return de}function h(de,ve,Ae){if(de.customInspect&&ve&&he(ve.inspect)&&ve.inspect!==E.inspect&&(!ve.constructor||ve.constructor.prototype!==ve)){var Xe=ve.inspect(Ae,de);return L(Xe)||(Xe=h(de,Xe,Ae)),Xe}var Ye=function p(de,ve){if(W(ve))return de.stylize("undefined","undefined");if(L(ve)){var Ae="'"+JSON.stringify(ve).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return de.stylize(Ae,"string")}return k(ve)?de.stylize(""+ve,"number"):C(ve)?de.stylize(""+ve,"boolean"):w(ve)?de.stylize("null","null"):void 0}(de,ve);if(Ye)return Ye;var We=Object.keys(ve),at=function l(de){var ve={};return de.forEach(function(Ae,Xe){ve[Ae]=!0}),ve}(We);if(de.showHidden&&(We=Object.getOwnPropertyNames(ve)),ne(ve)&&(We.indexOf("message")>=0||We.indexOf("description")>=0))return y(ve);if(0===We.length){if(he(ve))return de.stylize("[Function"+(ve.name?": "+ve.name:"")+"]","special");if(Z(ve))return de.stylize(RegExp.prototype.toString.call(ve),"regexp");if(Q(ve))return de.stylize(Date.prototype.toString.call(ve),"date");if(ne(ve))return y(ve)}var En,ht="",Wt=!1,$t=["{","}"];return T(ve)&&(Wt=!0,$t=["[","]"]),he(ve)&&(ht=" [Function"+(ve.name?": "+ve.name:"")+"]"),Z(ve)&&(ht=" "+RegExp.prototype.toString.call(ve)),Q(ve)&&(ht=" "+Date.prototype.toUTCString.call(ve)),ne(ve)&&(ht=" "+y(ve)),0!==We.length||Wt&&0!=ve.length?Ae<0?Z(ve)?de.stylize(RegExp.prototype.toString.call(ve),"regexp"):de.stylize("[Object]","special"):(de.seen.push(ve),En=Wt?function O(de,ve,Ae,Xe,Ye){for(var We=[],at=0,At=ve.length;at<At;++at)ge(ve,String(at))?We.push(v(de,ve,Ae,Xe,String(at),!0)):We.push("");return Ye.forEach(function(ht){ht.match(/^\d+$/)||We.push(v(de,ve,Ae,Xe,ht,!0))}),We}(de,ve,Ae,at,We):We.map(function(nt){return v(de,ve,Ae,at,nt,Wt)}),de.seen.pop(),function b(de,ve,Ae){var Ye=de.reduce(function(We,at){return at.indexOf("\n"),We+at.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ye>60?Ae[0]+(""===ve?"":ve+"\n ")+" "+de.join(",\n  ")+" "+Ae[1]:Ae[0]+ve+" "+de.join(", ")+" "+Ae[1]}(En,ht,$t)):$t[0]+ht+$t[1]}function y(de){return"["+Error.prototype.toString.call(de)+"]"}function v(de,ve,Ae,Xe,Ye,We){var at,At,ht;if((ht=Object.getOwnPropertyDescriptor(ve,Ye)||{value:ve[Ye]}).get?At=de.stylize(ht.set?"[Getter/Setter]":"[Getter]","special"):ht.set&&(At=de.stylize("[Setter]","special")),ge(Xe,Ye)||(at="["+Ye+"]"),At||(de.seen.indexOf(ht.value)<0?(At=w(Ae)?h(de,ht.value,null):h(de,ht.value,Ae-1)).indexOf("\n")>-1&&(At=We?At.split("\n").map(function(Wt){return"  "+Wt}).join("\n").substr(2):"\n"+At.split("\n").map(function(Wt){return"   "+Wt}).join("\n")):At=de.stylize("[Circular]","special")),W(at)){if(We&&Ye.match(/^\d+$/))return At;(at=JSON.stringify(""+Ye)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(at=at.substr(1,at.length-2),at=de.stylize(at,"name")):(at=at.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),at=de.stylize(at,"string"))}return at+": "+At}function T(de){return Array.isArray(de)}function C(de){return"boolean"==typeof de}function w(de){return null===de}function k(de){return"number"==typeof de}function L(de){return"string"==typeof de}function W(de){return void 0===de}function Z(de){return oe(de)&&"[object RegExp]"===ye(de)}function oe(de){return"object"==typeof de&&null!==de}function Q(de){return oe(de)&&"[object Date]"===ye(de)}function ne(de){return oe(de)&&("[object Error]"===ye(de)||de instanceof Error)}function he(de){return"function"==typeof de}function ye(de){return Object.prototype.toString.call(de)}function Le(de){return de<10?"0"+de.toString(10):de.toString(10)}E.debuglog=function(de){if(W(s)&&(s=n.env.NODE_DEBUG||""),de=de.toUpperCase(),!o[de])if(new RegExp("\\b"+de+"\\b","i").test(s)){var ve=n.pid;o[de]=function(){var Ae=E.format.apply(E,arguments);console.error("%s %d: %s",de,ve,Ae)}}else o[de]=function(){};return o[de]},E.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},E.isArray=T,E.isBoolean=C,E.isNull=w,E.isNullOrUndefined=function N(de){return null==de},E.isNumber=k,E.isString=L,E.isSymbol=function D(de){return"symbol"==typeof de},E.isUndefined=W,E.isRegExp=Z,E.isObject=oe,E.isDate=Q,E.isError=ne,E.isFunction=he,E.isPrimitive=function ae(de){return null===de||"boolean"==typeof de||"number"==typeof de||"string"==typeof de||"symbol"==typeof de||void 0===de},E.isBuffer=t(578);var me=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Oe(){var de=new Date,ve=[Le(de.getHours()),Le(de.getMinutes()),Le(de.getSeconds())].join(":");return[de.getDate(),me[de.getMonth()],ve].join(" ")}function ge(de,ve){return Object.prototype.hasOwnProperty.call(de,ve)}E.log=function(){console.log("%s - %s",Oe(),E.format.apply(E,arguments))},E.inherits=t(579),E._extend=function(de,ve){if(!ve||!oe(ve))return de;for(var Ae=Object.keys(ve),Xe=Ae.length;Xe--;)de[Ae[Xe]]=ve[Ae[Xe]];return de};var ce="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function pe(de,ve){if(!de){var Ae=new Error("Promise was rejected with a falsy value");Ae.reason=de,de=Ae}return ve(de)}E.promisify=function(ve){if("function"!=typeof ve)throw new TypeError('The "original" argument must be of type Function');if(ce&&ve[ce]){var Ae;if("function"!=typeof(Ae=ve[ce]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ae,ce,{value:Ae,enumerable:!1,writable:!1,configurable:!0}),Ae}function Ae(){for(var Xe,Ye,We=new i(function(ht,Wt){Xe=ht,Ye=Wt}),at=[],At=0;At<arguments.length;At++)at.push(arguments[At]);at.push(function(ht,Wt){ht?Ye(ht):Xe(Wt)});try{ve.apply(this,at)}catch(ht){Ye(ht)}return We}return Object.setPrototypeOf(Ae,Object.getPrototypeOf(ve)),ce&&Object.defineProperty(Ae,ce,{value:Ae,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ae,r(ve))},E.promisify.custom=ce,E.callbackify=function Ue(de){if("function"!=typeof de)throw new TypeError('The "original" argument must be of type Function');function ve(){for(var Ae=[],Xe=0;Xe<arguments.length;Xe++)Ae.push(arguments[Xe]);var Ye=Ae.pop();if("function"!=typeof Ye)throw new TypeError("The last argument must be of type Function");var We=this,at=function(){return Ye.apply(We,arguments)};de.apply(this,Ae).then(function(At){n.nextTick(at,null,At)},function(At){n.nextTick(pe,At,at)})}return Object.setPrototypeOf(ve,Object.getPrototypeOf(de)),Object.defineProperties(ve,r(de)),ve}}).call(this,t(43),t(0))},function(d,E){d.exports=function(n){return n&&"object"==typeof n&&"function"==typeof n.copy&&"function"==typeof n.fill&&"function"==typeof n.readUInt8}},function(d,E){d.exports="function"==typeof Object.create?function(n,i){n.super_=i,n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,i){n.super_=i;var r=function(){};r.prototype=i.prototype,n.prototype=new r,n.prototype.constructor=n}},function(d,E,t){var n=t(581),i=t(262),r=t(263),e=t(61);d.exports=function o(s){return function(a){a=e(a);var c=i(a)?r(a):void 0,u=c?c[0]:a.charAt(0),l=c?n(c,1).join(""):a.slice(1);return u[s]()+l}}},function(d,E,t){var n=t(261);d.exports=function i(r,e,o){var s=r.length;return o=void 0===o?s:o,!e&&o>=s?r:n(r,e,o)}},function(d,E){d.exports=function t(n){return n.split("")}},function(d,E){var t="\\ud800-\\udfff",s="["+t+"]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",l="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",O="(?:"+a+"|"+c+")?",v="[\\ufe0e\\ufe0f]?",T=v+O+"(?:\\u200d(?:"+[l,h,p].join("|")+")"+v+O+")*",C="(?:"+[l+a+"?",a,h,p,s].join("|")+")",w=RegExp(c+"(?="+c+")|"+C+T,"g");d.exports=function N(k){return k.match(w)||[]}},function(d,E,t){"use strict";d.exports=["screen","window","tab","browser","application"]},function(d,E,t){"use strict";const n=t(2),i=t(35)(),r=t(51),e=t(119),o=t(587),s=t(590),a="/opentok/webrtc/docs/js/release-notes.html",c=i.onlyLocal(),u=n("setLogLevel"),h=r(()=>{u.info("%c\n \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2557   \u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2557  \u2588\u2588\u2557\n\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2551\u255a\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2551 \u2588\u2588\u2554\u255d\n\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2554\u2588\u2588\u2557 \u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2554\u255d\n\u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u255d \u2588\u2588\u2554\u2550\u2550\u255d  \u2588\u2588\u2551\u255a\u2588\u2588\u2557\u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2588\u2588\u2557\n\u255a\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551 \u255a\u2588\u2588\u2588\u2588\u2551   \u2588\u2588\u2551   \u255a\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2557\n \u255a\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d     \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u2550\u2550\u255d   \u255a\u2550\u255d    \u255a\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d",'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),u.info(`OpenTok JS SDK ${c.version}`),u.info(`Release notes: ${c.websiteUrl}${a}`),u.info(`Known issues: ${c.websiteUrl}${a}l#knownIssues`)});function p(y){if(void 0===y||!o(e,{priority:y})&&0!==y){const v=s(e,(b,T)=>`OT.${T.toUpperCase()} = ${b.priority}`).join(", ");u.error(`level must be one of: OT.NONE = 0, ${v}`),u.warn("Using OT.WARN instead"),y=e.warn.priority}return n.setLogLevel(y),y>=e.debug.priority&&h(),u.info("OpenTok JS SDK now uses the debug library. More info at https://www.npmjs.com/package/debug#browser-support"),u.info(`Changed log level to: ${y}`),y}p(c.debug?e.debug.priority:e.warn.priority),d.exports=p},function(d,E,t){var n=t(97);d.exports=function r(e,o){var s;if("function"!=typeof o)throw new TypeError("Expected a function");return e=n(e),function(){return--e>0&&(s=o.apply(this,arguments)),e<=1&&(o=void 0),s}}},function(d,E,t){var n=t(232),i=t(36),r=t(588),e=t(12),o=t(122);d.exports=function s(a,c,u){var l=e(a)?n:r;return u&&o(a,c,u)&&(c=void 0),l(a,i(c,3))}},function(d,E,t){var n=t(266);d.exports=function i(r,e){var o;return n(r,function(s,a,c){return!(o=e(s,a,c))}),!!o}},function(d,E,t){var n=t(25);d.exports=function i(r,e){return function(o,s){if(null==o)return o;if(!n(o))return r(o,s);for(var a=o.length,c=e?a:-1,u=Object(o);(e?c--:++c<a)&&!1!==s(u[c],c,u););return o}}},function(d,E,t){var n=t(34),i=t(36),r=t(591),e=t(12);d.exports=function o(s,a){return(e(s)?n:r)(s,i(a,3))}},function(d,E,t){var n=t(266),i=t(25);d.exports=function r(e,o){var s=-1,a=i(e)?Array(e.length):[];return n(e,function(c,u,l){a[++s]=o(c,u,l)}),a}},function(d,E,t){"use strict";d.exports=function(i){return"http:"!==i.substr(0,5)&&"https:"!==i.substr(0,6)&&"data:image/png;base64,"!==i.substr(0,22)?`data:image/png;base64,${i}`:i}},function(d,E,t){"use strict";const n=t(58),i=t(2)("Style");d.exports=function(e,o){const s=this,a={},c={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]};s.getAll=function(){return n(a)},s.get=function(h){return h?a[h]:s.getAll()},s.setAll=function(h,p){return Object.keys(h).forEach(y=>{s.set(y,h[y],p)}),s},s.set=function(h,p,y){let O;i.debug(`setStyle: ${h.toString()}`);const v=function(p){switch(p){case"true":return!0;case"false":return!1;default:return p}}(p);return function(p,y){const O=c[p];return void 0!==O&&(null===O||-1!==O.indexOf(y))}(h,v)?(O=a[h],v!==O&&(a[h]=v,y||o(h,p,O)),s):(i.warn(`Style.set::Invalid style property passed ${h} : ${v}`),s)},e&&s.setAll(e,!0)}},function(d,E,t){"use strict";const n=t(3),i=t(270);d.exports=()=>Boolean("Node"!==n.name&&!n.isIosWebView&&(!!i()||(void 0!==typeof window?window:global).navigator.mediaDevices&&(void 0!==typeof window?window:global).navigator.mediaDevices.getUserMedia||(void 0!==typeof window?window:global).navigator.webkitGetUserMedia||(void 0!==typeof window?window:global).navigator.mozGetUserMedia))},function(d,E,t){"use strict";const n=t(3);d.exports=()=>"Node"!==n.name&&(!!("function"==typeof(void 0!==typeof window?window:global).webkitRTCPeerConnection&&(void 0!==typeof window?window:global).webkitRTCPeerConnection.prototype.addTrack||"function"==typeof(void 0!==typeof window?window:global).RTCPeerConnection)||"function"==typeof(void 0!==typeof window?window:global).mozRTCPeerConnection&&n.version>20)},function(d,E,t){"use strict";d.exports=void 0!==(void 0!==typeof window?window:global).WebSocket},function(d,E){d.exports='<div id="tb_alert"><div id="section-normal-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div></div><div id="section-upgrade-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-supported-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application is not supported on your mobile device\'s browser at this time.</div></div></div>'},function(d,E,t){"use strict";var i=t(1)(t(49));const r=t(31);d.exports=function(e){function o(a,c){var u;let h=(void 0===c?{}:c).destroyOnClose,p=void 0===h||h;(u=e.call(this)||this).modalDiv=document.createElement("div"),u.modalDiv.classList.add("OT_ModalDialog"),u.modalDiv.innerHTML=a;const y=u.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(y,O=>O.addEventListener("click",v=>{v.preventDefault(),u.close()})),u.close(),document.body.appendChild(u.modalDiv),p&&u.on("closed",()=>u.destroy()),u}(0,i.default)(o,e);var s=o.prototype;return s.open=function(){this.modalDiv.style.display="block",this.emit("opened")},s.close=function(){this.modalDiv.style.display="none",this.emit("closed")},s.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},s.el=function(c){return this.modalDiv.querySelector(c)},o}(r)},function(d,E,t){"use strict";const n=t(26);d.exports=function(i){void 0===i&&(i={});const r=i.env||t(3),e=i.analytics||new n;e.logEvent({action:"UserAgentParsing",variation:"Attempt",payload:{userAgent:r.userAgent}}),e.logEvent({action:"UserAgentParsing",variation:r.error?"Failure":"Success",payload:{userAgent:r.userAgent}})}},function(d,E,t){var n=t(601),i=t(271),r=t(602),e=t(603);function o(s){var a="function"==typeof Map?new Map:void 0;return d.exports=o=function(u){if(null===u||!r(u))return u;if("function"!=typeof u)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(u))return a.get(u);a.set(u,l)}function l(){return e(u,arguments,n(this).constructor)}return l.prototype=Object.create(u.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),i(l,u)},o(s)}d.exports=o},function(d,E){function t(n){return d.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},t(n)}d.exports=t},function(d,E){d.exports=function t(n){return-1!==Function.toString.call(n).indexOf("[native code]")}},function(d,E,t){var n=t(271);function i(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function r(e,o,s){return d.exports=r=i()?Reflect.construct:function(c,u,l){var h=[null];h.push.apply(h,u);var y=new(Function.bind.apply(c,h));return l&&n(y,l.prototype),y},r.apply(null,arguments)}d.exports=r},function(d,E,t){"use strict";(function(n){d.exports=(i,r)=>(r=r||(()=>{}),i.then(e=>new n(o=>{o(r())}).then(()=>e),e=>new n(o=>{o(r())}).then(()=>{throw e})))}).call(this,t(0))},function(d,E,t){var n=t(60),i=t(606),r=t(607),e=t(47);d.exports=function o(s,a){return a=n(a,s),null==(s=r(s,a))||delete s[e(i(a))]}},function(d,E){d.exports=function t(n){var i=null==n?0:n.length;return i?n[i-1]:void 0}},function(d,E,t){var n=t(99),i=t(261);d.exports=function r(e,o){return o.length<2?e:n(e,i(o,0,-1))}},function(d,E,t){var n=t(135);d.exports=function i(r){return n(r)?void 0:r}},function(d,E,t){var n=t(36),i=t(25),r=t(30);d.exports=function e(o){return function(s,a,c){var u=Object(s);if(!i(s)){var l=n(a,3);s=r(s),a=function(p){return l(u[p],p,u)}}var h=o(s,a,c);return h>-1?u[l?s[h]:h]:void 0}}},function(d,E,t){var n=t(93),i=t(94),r=t(128),e=t(95),o=t(611),s=t(98);d.exports=function c(u,l,h){var p=-1,y=i,O=u.length,v=!0,b=[],T=b;if(h)v=!1,y=r;else if(O>=200){var C=l?null:o(u);if(C)return s(C);v=!1,y=e,T=new n}else T=l?[]:b;e:for(;++p<O;){var w=u[p],N=l?l(w):w;if(w=h||0!==w?w:0,v&&N==N){for(var k=T.length;k--;)if(T[k]===N)continue e;l&&T.push(N),b.push(w)}else y(T,N,h)||(T!==b&&T.push(N),b.push(w))}return b}},function(d,E,t){var n=t(186),i=t(224),r=t(98),o=n&&1/r(new n([,-0]))[1]==1/0?function(s){return new n(s)}:i;d.exports=o},function(d,E,t){"use strict";d.exports=e=>(e=>parseInt(e,10))((e=>e.substring(0,9))((e=>e&&e.replace(/\D+/g,"")||"0")(e)))},function(d,E,t){"use strict";(function(n){var i=t(1),r=i(t(4)),e=i(t(5));const s=t(2)("hasValidPeerConnection");function a(l){return new n(h=>{l.addEventListener("signalingstatechange",()=>h(!0)),l.createOffer({offerToReceiveAudio:1}).then(p=>l.setLocalDescription(p)).then(()=>setTimeout(()=>{h(!1)},1e3))})}function u(){return(u=(0,e.default)(r.default.mark(function l(h){var p;return r.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:O.prev=0,p=new h({iceServers:[]}),O.next=8;break;case 4:return O.prev=4,O.t0=O.catch(0),s.error("Error occurred creating PeerConnection",O.t0),O.abrupt("return",!1);case 8:return O.prev=8,O.next=11,a(p);case 11:O.next=18;break;case 13:O.prev=13,O.t1=O.catch(8),s.error("Error occurred checking the validity of the PeerConnection",O.t1);try{p.close()}catch(v){}return O.abrupt("return",!1);case 18:O.prev=18,p.close(),O.next=26;break;case 22:return O.prev=22,O.t2=O.catch(18),s.error("Error occurred closing PeerConnection",O.t2),O.abrupt("return",!1);case 26:return O.abrupt("return",!0);case 27:case"end":return O.stop()}},l,null,[[0,4],[8,13],[18,22]])}))).apply(this,arguments)}d.exports=function c(l){return u.apply(this,arguments)}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){const i=t(38),r=t(3),e=t(615),o=t(74),s=t(2)("createPeerConnection");d.exports=function(c){let u=c.window,l=c.config,h=c.constraints;s.debug("called");const p=i(l);p.iceServers=e(r,p.iceServers),o()&&(p.sdpSemantics="plan-b");const y=new u.RTCPeerConnection(p,h);return n.resolve(y)}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(9),i=t(272),r={Edge(e){let o=!1;return e.map(s=>{if(!s)return;const a=s.urls||s.url&&[s.url];if(!a)return;const c=a.filter(u=>0!==u.indexOf("turn:")||-1===u.indexOf("transport=udp")||-1!==u.indexOf("turn:[")||o?0===u.indexOf("stun:"):(o=!0,!0));return 0!==c.length?n(i(s,["url","urls"]),{urls:c}):void 0}).filter(s=>void 0!==s)},Safari:e=>e.map(o=>{if(void 0!==o.urls&&void 0===o.url)return o;const s=o.urls||o.url&&[o.url];return n(i(o,["url","urls"]),{urls:s})})};d.exports=function(o,s){let a=o.name;o.isEdge&&(a=o.isLegacyEdge?"Edge":"ChromiumEdge");const c=r[a];return c?c(s):s}},function(d,E,t){"use strict";const n=t(53),i=t(3),r_h264_baseline="42001f",r_h264_constBaseline="42e01f",e=o=>{let c=o.to;return o.sdp.replace(new RegExp(`^(a=fmtp:\\d+ .*profile-level-id=)${o.from}`,"gmi"),`$1${c}`)};d.exports={local:{offer:function(s,a){let c=void 0===s?{}:s,u=c.numSimulcastStreams,l=c.audioBitrate,h=c.priorityVideoCodec,p=void 0===h?"":h,y=c.codecFlags,O=void 0===y?{}:y,v=c.enableStereo,b=void 0!==v&&v,T=c.enableDtx,C=void 0!==T&&T,w=c.replaceBaselineProfile,N=void 0!==w&&w,k=c.removeVideoOrientation,L=void 0!==k&&k,D=n.filterExcessSSRCs(a);u>1&&(D=n.enableSimulcast(D,u)),l>0&&(D=n.setAudioBitrate(D,l)),L&&(D=n.removeVideoOrientation(D)),D=n.modifyReceiveStereo(D,!1),D=n.modifySendStereo(D,Boolean(b)),D=n.modifyDtx(D,Boolean(C)),i.isLegacyEdge||Object.keys(O).filter(Z=>!1===O[Z]).forEach(Z=>{D=n.removeVideoCodec(D,Z)}),p&&!i.isLegacyEdge?D=n.reprioritizeVideoCodec(D,p,"top"):"h264"!==p&&(D=n.reprioritizeVideoCodec(D,"h264","bottom"));let W=D;return N&&(W=e({sdp:W,from:r_h264_baseline,to:r_h264_constBaseline})),{local:D,remote:W}},answer:function(s,a){let c=void 0===s?{}:s,u=c.audioBitrate,l=c.codecFlags,h=c.enableStereo,p=void 0!==h&&h,y=c.enableDtx,O=void 0!==y&&y,v=c.replaceBaselineProfile,b=void 0!==v&&v,T=c.sourceStreamId,C=a;u>0&&(C=n.setAudioBitrate(C,u)),C=n.modifyReceiveStereo(C,Boolean(p)),C=n.modifySendStereo(C,!1),C=n.modifyDtx(C,Boolean(O)),"MANTIS"===T&&"passive"===n.getSetupRole(C)&&(C=n.setSetupRole(C,"active")),l&&Object.keys(l).filter(N=>!1===l[N]).forEach(N=>{C=n.removeVideoCodec(C,N)});let w=C;return b&&(w=e({sdp:w,from:r_h264_baseline,to:r_h264_constBaseline})),{local:C,remote:w}}},remote:{offer:(o,s)=>{let a=o.replaceBaselineProfile,c=void 0!==a&&a,u=s;return-1===u.indexOf("a=rtcp-fb")&&(u=u.replace(/^m=video(.*)$/gim,"m=video$1\r\na=rtcp-fb:* ccm fir\r\na=rtcp-fb:* nack ")),c&&(u=e({sdp:u,from:r_h264_constBaseline,to:r_h264_baseline})),{local:u}},answer:function(s,a){let c=void 0===s?{}:s,u=c.audioBitrate,l=c.replaceBaselineProfile,h=void 0!==l&&l,p=a;return u>0&&(p=n.setAudioBitrate(p,u)),h&&(p=e({sdp:p,from:r_h264_constBaseline,to:r_h264_baseline})),{local:p}}}}},function(d,E,t){var n=t(40),i=t(56),r=t(42),e=t(25),o=t(276),s=t(618),a=t(233),c=t(98),u=t(263),l=t(277),y=n?n.iterator:void 0;d.exports=function O(v){if(!v)return[];if(e(v))return o(v)?u(v):i(v);if(y&&v[y])return s(v[y]());var b=r(v);return("[object Map]"==b?a:"[object Set]"==b?c:l)(v)}},function(d,E){d.exports=function t(n){for(var i,r=[];!(i=n.next()).done;)r.push(i.value);return r}},function(d,E,t){var n=t(34);d.exports=function i(r,e){return n(e,function(o){return r[o]})}},function(d,E,t){"use strict";d.exports=(n,i)=>{let r=[],e=null;if("function"==typeof n.getReceivers){const o=n.getReceivers().find(s=>"audio"===s.track.kind);o&&(r=o.getSynchronizationSources())}else e=new Error("peerConnection does not support getReceivers function");i&&i(e,r)}},function(d,E,t){"use strict";(function(n){const i=t(622),r=function(o){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),o&&this.setPeerConnection(o)};r.prototype.setPeerConnection=function(o){if(this.pc)throw new Error("Peer connection already set");this.pc=o,this._forwardIceCandidate=i(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},r.prototype.canAddCandidates=function(){return!!(this.pc&&"closed"!==this.pc.iceConnectionState&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},r.prototype.addIceCandidate=function(o){if(this.canAddCandidates())return this._forwardIceCandidate(o);const s=this.pending;return new n((a,c)=>{s.push({iceCandidate:o,resolve:a,reject:c})})},r.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},r.prototype.process=function(){for(;this.pending.length;){const o=this.pending.shift();this._forwardIceCandidate(o.iceCandidate).then(o.resolve).catch(o.reject)}},r.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},d.exports=r}).call(this,t(0))},function(d,E,t){"use strict";(function(n){d.exports=function(r,e){const o=r[e];return function(s){return new n((a,c)=>{const u=o.apply(r,[s,a,c]);u&&"function"==typeof u.then&&a(u)})}}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(155),i=t(3),r=t(2)("offerProcessor"),e=t(53),o=t(624);d.exports=function(a,c,u,l,h,p,y,O,v,b,T,C,w){const N=(oe,Q)=>ne=>{r.error(oe),r.error(ne),b&&b(oe,ne,Q)},k=oe=>{const Q=e.hasSendStereo(p.sdp),ne=e.hasSendDtx(p.sdp),he=e.getAudioBitrate(p.sdp),ae=n(h,"local","answer",{enableStereo:Q,enableDtx:ne,audioBitrate:he,replaceBaselineProfile:C,codecFlags:y,sourceStreamId:w},oe.sdp),ye=new l({type:oe.type,sdp:ae.local}),Le={type:oe.type,sdp:ae.remote};return a.setLocalDescription(ye).then(()=>v(Le)).catch(N("Error while setting LocalDescription","SetLocalDescription"))},D=new l({type:p.type,sdp:n(h,"remote","offer",{replaceBaselineProfile:C},p.sdp).local}),W=N("Error while setting RemoteDescription","SetRemoteDescription");return o(D,O,i,c,u).then(()=>(T(!0),D)).catch(oe=>{if(T(!1),!e.hasMediaType(D.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");r.debug("Couldn't set remote description",D,oe,", trying without video");const Q=new l({type:p.type,sdp:e.disableMediaType(D.sdp,"video")});return r.debug("offer without video",Q.sdp),Q}).then(oe=>a.setRemoteDescription(oe)).then(()=>a.createAnswer().then(k).catch(N("Error while setting createAnswer","CreateAnswer"))).catch(W)}},function(d,E,t){"use strict";(function(n){const i=t(74);d.exports=(e,o,s,a,c)=>{if(!a)return n.resolve(!0);const u={iceServers:[]};i()&&(u.sdpSemantics="plan-b");const l=new a(u),h=()=>{try{l.close()}catch(p){}};return l.setRemoteDescription(new c(e)).then(()=>{h()}).catch(p=>{throw h(),p})}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(62),i=t(626);d.exports=function(e){let o=[];const s={};let a={sentMessages:0,recvMessages:0};const u=function(h){const p=new i(h);return o.push(p),p.on("close",()=>{!function(h){o.filter(p=>h!==p)}(p)}),p};return s.add=function(l,h){return u(e.createDataChannel(l,h))},s.addMany=function(l){for(const h in l)l.hasOwnProperty(h)&&s.add(h,l[h])},s.get=function(l,h){return n(o,p=>p.equals(l,h))},s.getOrAdd=function(l,h){let p=s.get(l,h);return p||(p=s.add(l,h)),p},s.getQosData=function(){const l={sentMessages:0,recvMessages:0};return o.forEach(h=>{l.sentMessages+=h.getQosData().sentMessages,l.recvMessages+=h.getQosData().recvMessages}),l},s.sampleQos=function(){const l=s.getQosData(),h={sentMessages:l.sentMessages-a.sentMessages,recvMessages:l.recvMessages-a.recvMessages};return a=l,h},s.destroy=function(){o.forEach(l=>{l.close()}),o=[]},e.addEventListener("datachannel",l=>{u(l.channel)}),s}},function(d,E,t){"use strict";const n=t(7),i=t(2)("DataChannel"),r=function(o){this.data=o.data,this.source=o.source,this.lastEventId=o.lastEventId,this.origin=o.origin,this.timeStamp=o.timeStamp,this.type=o.type,this.ports=o.ports,this.path=o.path};d.exports=function(o){const s={},a=[],c={sentMessages:0,recvMessages:0},u=function(T){return a.push(T),s},l=function(T){return o.send(T),c.sentMessages++,s};return n(s,!0),s.label=o.label,s.id=o.id,s.reliable=o.reliable,s.negotiated=o.negotiated,s.ordered=o.ordered,s.protocol=o.protocol,s._channel=o,s.close=function(){o.close()},s.equals=function(b,T){if(s.label!==b)return!1;for(const C in T)if(T.hasOwnProperty(C)&&s[C]!==T[C])return!1;return!0},s.getQosData=function(){return c},s.send=u,o.addEventListener("open",function(){s.send=l,function(){let T;for(;T=a.shift();)s.send(T)}()},!1),o.addEventListener("close",function(T){s.send=u,s.trigger("close",T)},!1),o.addEventListener("error",function(T){i.error(T)},!1),o.addEventListener("message",function(T){const C=new r(T);c.recvMessages++,s.trigger("message",C)},!1),s}},function(d,E,t){"use strict";const n=t(9),i=t(155),r=t(2)("subscribeProcessor");d.exports=function(o){let s=o.peerConnection,a=o.NativeRTCSessionDescription,c=o.sdpTransforms,u=o.numSimulcastStreams,l=o.offerOverrides,h=o.offerConstraints,p=o.replaceBaselineProfile,y=o.removeVideoOrientation;const O=(b,T)=>C=>{r.error(b,C);const w=new Error(b);throw w.reason=C,w.prefix=T,w};return r.debug("subscribeProcessor: creating offer"),s.createOffer(h).then(b=>{r.debug("subscribeProcessor: offer created",b);const T=i(c,"local","offer",n({numSimulcastStreams:u,replaceBaselineProfile:p,removeVideoOrientation:y},l),b.sdp),C=new a({type:b.type,sdp:T.local}),w=new a({type:b.type,sdp:T.remote});return r.debug("subscribeProcessor: setting local description"),s.setLocalDescription(C).then(()=>w,O("Error while setting LocalDescription","SetLocalDescription"))},O("Error while creating Offer","CreateOffer")).then(b=>({sdp:b.sdp,type:b.type}))}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=t(53),o=e.mediaDirections,s=o.RECVONLY,a=o.INACTIVE,c=function(){var u=(0,r.default)(i.default.mark(function l(h,p){var y,v;return i.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(h){T.next=2;break}return T.abrupt("return");case 2:return T.next=4,h.createOffer();case 4:return y=T.sent,T.next=7,h.setLocalDescription(y);case 7:v=e.changeMediaDirection(h.remoteDescription.sdp,p),h.setRemoteDescription({type:h.remoteDescription.type,sdp:v});case 10:case"end":return T.stop()}},l)}));return function(h,p){return u.apply(this,arguments)}}();d.exports={changeMediaDirectionToInactive:u=>c(u,a),changeMediaDirectionToRecvOnly:u=>c(u,s)}},function(d,E,t){"use strict";function r(N,k){(null==k||k>N.length)&&(k=N.length);for(var L=0,D=new Array(k);L<k;L++)D[L]=N[L];return D}E.__esModule=!0,E.parseStatsOldAPI=b,E.parseStatsNewAPI=T,E.default=function C(N,k,L,D,W){return l?T(N,k,L,D,W):b(N,0,L,0,W)};const e=t(3),o=t(8),s=t(2)("QoS"),a=t(53),c=t(280),u=t(630),l=t(102)(),h=t(157),p=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","audioRtt","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth","srtpCipher"],y=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoWidth","srtpCipher"],O=(N,k)=>s.debug(`Raw stats for peer conn ${N.id}:`,k),v=N=>`${N.ipAddress||N.address||N.ip}:${N.portNumber||N.port}`;function b(N,k,L,D,W){const Z=ne=>(Number(ne.stat("googFrameRateSent"))>0?(L.videoSentBytes=Number(ne.stat("bytesSent")),L.videoSentPackets=Number(ne.stat("packetsSent")),L.videoSentPacketsLost=Number(ne.stat("packetsLost")),L.videoRtt=Number(ne.stat("googRtt"))/1e3,L.videoFrameRate=Number(ne.stat("googFrameRateInput")),L.videoWidth=Number(ne.stat("googFrameWidthSent")),L.videoHeight=Number(ne.stat("googFrameHeightSent")),L.videoFrameRateSent=Number(ne.stat("googFrameRateSent")),L.videoWidthInput=Number(ne.stat("googFrameWidthInput")),L.videoHeightInput=Number(ne.stat("googFrameHeightInput")),L.videoCodec=ne.stat("googCodecName"),L.videoBandwidthLimitedResolution="true"===ne.stat("googBandwidthLimitedResolution"),L.cpuLimitedResolution="true"===ne.stat("googCpuLimitedResolution")):Number(ne.stat("googFrameRateReceived"))>0&&(L.videoRecvBytes=Number(ne.stat("bytesReceived")),L.videoRecvPackets=Number(ne.stat("packetsReceived")),L.videoRecvPacketsLost=Number(ne.stat("packetsLost")),L.videoFrameRate=Number(ne.stat("googFrameRateOutput")),L.videoFrameRateReceived=Number(ne.stat("googFrameRateReceived")),L.videoFrameRateDecoded=Number(ne.stat("googFrameRateDecoded")),L.videoWidth=Number(ne.stat("googFrameWidthReceived")),L.videoHeight=Number(ne.stat("googFrameHeightReceived")),L.videoCodec=ne.stat("googCodecName")),null),oe=ne=>{Number(ne.stat("audioInputLevel"))>0?(L.audioSentPackets=Number(ne.stat("packetsSent")),L.audioSentPacketsLost=Number(ne.stat("packetsLost")),L.audioSentBytes=Number(ne.stat("bytesSent")),L.audioCodec=ne.stat("googCodecName"),L.audioRtt=Number(ne.stat("googRtt"))/1e3):Number(ne.stat("audioOutputLevel"))>0&&(L.audioRecvPackets=Number(ne.stat("packetsReceived")),L.audioRecvPacketsLost=Number(ne.stat("packetsLost")),L.audioRecvBytes=Number(ne.stat("bytesReceived")),L.audioCodec=ne.stat("googCodecName"))};N.getStats(ne=>{if(ne.result){const he=ne.result();O(N,he);const ae=(me,Oe)=>he.filter(ge=>ge.id===Oe.stat(me))[0],ye=me=>ae("localCandidateId",me),Le=me=>ae("remoteCandidateId",me);for(let me=0;me<he.length;me++){const Oe=he[me];Oe.stat&&("true"===Oe.stat("googActiveConnection")&&(Oe.stat("googChannelId").indexOf("audio")>-1?(L.audioLocalAddress=Oe.stat("googLocalAddress"),L.audioRemoteAddress=Oe.stat("googRemoteAddress"),L.audioLocalCandidateType=Oe.stat("googLocalCandidateType"),L.audioRemoteCandidateType=Oe.stat("googRemoteCandidateType"),L.audioTransportType=Oe.stat("googTransportType"),L.audioLocalRelayProtocol=c(ye(Oe).stat("priority")),L.audioRemoteRelayProtocol=c(Le(Oe).stat("priority"))):Oe.stat("googChannelId").indexOf("video")>-1&&(L.videoLocalAddress=Oe.stat("googLocalAddress"),L.videoRemoteAddress=Oe.stat("googRemoteAddress"),L.videoLocalCandidateType=Oe.stat("googLocalCandidateType"),L.videoRemoteCandidateType=Oe.stat("googRemoteCandidateType"),L.videoTransportType=Oe.stat("googTransportType"),L.videoLocalRelayProtocol=c(ye(Oe).stat("priority")),L.videoRemoteRelayProtocol=c(Le(Oe).stat("priority")))),Number(Oe.stat("googAvailableSendBandwidth"))>0&&(L.videoSentEstimatedBandwidth=Number(Oe.stat("googAvailableSendBandwidth"))),Number(Oe.stat("googAvailableReceiveBandwidth"))>0&&(L.videoRecvEstimatedBandwidth=Number(Oe.stat("googAvailableReceiveBandwidth"))),oe(Oe),Z(Oe))}"videoCodec"in L&&!L.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(me=>{L[`video${me}`]=L[`audio${me}`]})}W(null,L)})}function T(N,k,L,D,W){const Q=he=>{const ae={packetsSent:"videoSentPackets",packetsLost:"videoSentPacketsLost",bytesSent:"videoSentBytes",framesPerSecond:"videoFrameRate",framesSent:"videoFrameRateSent",framesReceived:"videoFramesReceived",frameWidth:"videoWidth",frameHeight:"videoHeight"},ye=["videoSentPackets","videoSentBytes"];for(const Le in ae)if(Le in he){const me=ae[Le];ye.includes(me)&&Number.isSafeInteger(L[me])?L[me]+=he[Le]:L[me]=he[Le]}};N.getStats(null).then(he=>{let ae,ye,Le,me,Oe,ge,ce,pe;const Ue=[],Ae=We=>{const at=(We=>We.toLowerCase().replace(/[^a-z]/g,""))(We.type),At=We.id.toLowerCase();if(/(in|out)boundrtp$/.test(at)){const ht=/rtp/.test(At),Wt=ht&&/audio/.test(At),En=ht&&/video/.test(At)||"video"===We.kind;if(Wt||"audio"===We.kind?((he,ae)=>{if("outboundrtp"===ae?(L.audioSentPackets=he.packetsSent,L.audioSentPacketsLost=he.packetsLost,L.audioSentBytes=he.bytesSent):"inboundrtp"===ae&&(L.audioRecvPackets=he.packetsReceived,L.audioRecvPacketsLost=he.packetsLost,L.audioRecvBytes=he.bytesReceived),void 0===L.audioCodec&&-1!==["Safari"].indexOf(o.env.name)&&void 0!==he.codecId){const Le=("answer"===N.remoteDescription.type?N.remoteDescription:N.localDescription).sdp,me=he.codecId.lastIndexOf("_"),Oe=a.getCodecsAndCodecMap(Le,"audio");-1!==me&&void 0!==Oe&&(L.audioCodec=Oe.codecMap[he.codecId.substring(me+1)])}})(We,at):En&&((he,ae)=>{if("outboundrtp"===ae?(he.hasOwnProperty("qualityLimitationReason")&&(L.videoBandwidthLimitedResolution="bandwidth"===he.qualityLimitationReason,L.cpuLimitedResolution="cpu"===he.qualityLimitationReason),Q(he)):"inboundrtp"===ae&&(L.videoRecvPackets=he.packetsReceived,L.videoRecvPacketsLost=he.packetsLost,L.videoRecvBytes=he.bytesReceived),(e.isFirefox&&["outboundrtp","inboundrtp"].includes(ae)||!D&&"inboundrtp"===ae)&&(L.videoFrameRate=(()=>{if(!("videoSentBytes"in L?L.videoSentBytes>0:L.videoRecvBytes>0))return 0;let me=0;if(e.isFirefox&&e.version<96)me=Number(he.framerateMean);else{const Oe="outboundrtp"===ae?"framesEncoded":"framesDecoded";L[Oe]=he[Oe],me=h({currentStatFrames:he[Oe],currentTimestamp:he.timestamp,prevStatFrames:k[Oe],prevTimestamp:k.timeStamp||Date.now()})}return me})()),void 0===L.videoCodec&&-1!==["Safari"].indexOf(o.env.name)&&void 0!==he.codecId){const me=("answer"===N.remoteDescription.type?N.remoteDescription:N.localDescription).sdp,Oe=he.codecId.lastIndexOf("_"),ge=a.getCodecsAndCodecMap(me,"video");-1!==Oe&&void 0!==ge&&(L.videoCodec=ge.codecMap[he.codecId.substring(Oe+1)])}})(We,at),We.hasOwnProperty("roundTripTime")){const nt=We.mediaType||We.kind;"video"===nt?Ue.push(We.roundTripTime):"audio"===nt&&(L.audioRtt=We.roundTripTime)}if("remoteinboundrtp"===at&&We.hasOwnProperty("packetsLost")){const ct=`${We.kind}SentPacketsLost`;L[ct]||(L[ct]=0),L[ct]+=We.packetsLost}}else if("transport"===at){const ht=We.selectedCandidatePairId;L.srtpCipher=We.srtpCipher,ht&&(me=u(ht,he))}else"localcandidate"===at?(ae=We.candidateType,Le=v(We),ge=We.protocol||We.transport):"remotecandidate"===at?(ye=We.candidateType,Oe=v(We)):"track"===at&&0!==At.indexOf("video")?(ce=We.frameWidth,pe=We.frameHeight,Q(We)):"mediasource"===at?(We.hasOwnProperty("framesPerSecond")&&(L.videoFrameRate=We.framesPerSecond),We.hasOwnProperty("width")&&(L.videoWidthInput=We.width),We.hasOwnProperty("height")&&(L.videoHeightInput=We.height)):"candidatepair"===at&&We.hasOwnProperty("availableOutgoingBitrate")&&(L[`video${D?"Sent":"Recv"}EstimatedBandwidth`]=parseInt(We.availableOutgoingBitrate,10))};if("function"==typeof he[Symbol.iterator]){O(N,Array.from(he));for(var Ye,Xe=function n(N,k){var L;if("undefined"==typeof Symbol||null==N[Symbol.iterator]){if(Array.isArray(N)||(L=function i(N,k){if(N){if("string"==typeof N)return r(N,k);var L=Object.prototype.toString.call(N).slice(8,-1);if("Object"===L&&N.constructor&&(L=N.constructor.name),"Map"===L||"Set"===L)return Array.from(N);if("Arguments"===L||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return r(N,k)}}(N))||k&&N&&"number"==typeof N.length){L&&(N=L);var D=0;return function(){return D>=N.length?{done:!0}:{done:!1,value:N[D++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(L=N[Symbol.iterator]()).next.bind(L)}(he);!(Ye=Xe()).done;){const We=Ye.value;Ae(Array.isArray(We)?We[1]:We)}}else{O(N,he);for(const We in he)he.hasOwnProperty(We)&&Ae(he[We])}if(N.currentRemoteDescription&&(L.useDtx=a.hasSendDtx(N.currentRemoteDescription.sdp)),D&&(L.videoRtt=(()=>{if(0===Ue.length)return null;const We=Ue.filter(ht=>ht>0),at=We.reduce((ht,Wt)=>ht+Wt,0);return We.length?at/We.length:0})()),(L.audioRecvBytes||L.audioSentBytes)&&(L.audioLocalCandidateType=ae,L.audioLocalAddress=Le,L.audioRemoteCandidateType=ye,L.audioRemoteAddress=Oe,L.audioTransportType=ge,L.audioLocalRelayProtocol=me,void 0===L.audioCodec)){const At=a.getCodecs(("answer"===N.remoteDescription.type?N.remoteDescription:N.localDescription).sdp,"audio");L.audioCodec=At[0]}if((L.videoRecvBytes||L.videoSentBytes)&&(L.videoLocalCandidateType=ae,L.videoLocalAddress=Le,L.videoRemoteCandidateType=ye,L.videoRemoteAddress=Oe,L.videoTransportType=ge,L.videoLocalRelayProtocol=me,void 0===L.videoCodec)){const At=a.getCodecs(("answer"===N.remoteDescription.type?N.remoteDescription:N.localDescription).sdp,"video");L.videoCodec=At[0]}(function w(N,k){(k?p:y).forEach(D=>{N.hasOwnProperty(D)||(N[D]=null)})})(L,D),L.videoWidth=L.videoWidth||ce,L.videoHeight=L.videoHeight||pe,W(null,L)}).catch(function(ae){W(ae)})}},function(d,E,t){"use strict";const n=t(280);d.exports=(i,r)=>{let e="";if(!i||!r)return e;const o=r.get(i);if(o){const s=o.localCandidateId;if(s){const a=r.get(s);if(a){const c=a.relayProtocol,u=a.priority;e=c?`TURN/${c.toUpperCase()}`:n(u)}}}return e}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(15));E.default=function(){function e(){(0,i.default)(this,"value",null),(0,i.default)(this,"changeCount",0)}return e.prototype.onValue=function(a){!a||a!==this.value&&(this.value&&(this.changeCount+=1),this.value=a)},e}()},function(d,E,t){var n=t(11),i=t(633),r=t(229),o=Math.max,s=Math.min;d.exports=function a(c,u,l){var h,p,y,O,v,b,T=0,C=!1,w=!1,N=!0;if("function"!=typeof c)throw new TypeError("Expected a function");function k(ae){var ye=h,Le=p;return h=p=void 0,T=ae,O=c.apply(Le,ye)}function L(ae){return T=ae,v=setTimeout(Z,u),C?k(ae):O}function W(ae){var ye=ae-b;return void 0===b||ye>=u||ye<0||w&&ae-T>=y}function Z(){var ae=i();if(W(ae))return oe(ae);v=setTimeout(Z,function D(ae){var me=u-(ae-b);return w?s(me,y-(ae-T)):me}(ae))}function oe(ae){return v=void 0,N&&h?k(ae):(h=p=void 0,O)}function he(){var ae=i(),ye=W(ae);if(h=arguments,p=this,b=ae,ye){if(void 0===v)return L(b);if(w)return clearTimeout(v),v=setTimeout(Z,u),k(b)}return void 0===v&&(v=setTimeout(Z,u)),O}return u=r(u)||0,n(l)&&(C=!!l.leading,y=(w="maxWait"in l)?o(r(l.maxWait)||0,u):y,N="trailing"in l?!!l.trailing:N),he.cancel=function Q(){void 0!==v&&clearTimeout(v),T=0,h=b=p=v=void 0},he.flush=function ne(){return void 0===v?O:oe(i())},he}},function(d,E,t){var n=t(14);d.exports=function(){return n.Date.now()}},function(d,E,t){"use strict";const n=t(51);E.check=function(i){void 0===i&&(i={});const r=i.env||t(3);return"Chrome"===r.name&&r.userAgent.toLowerCase().indexOf("android")>-1&&r.version<65},E.once=n(()=>E.check())},function(d,E,t){"use strict";const n=t(3);d.exports=function(i){void 0===i&&(i={});const e=i.env,o=void 0===e?n:e;return!!(o.isiOS&&o.iOSVersion>10)}},function(d,E,t){"use strict";const n=t(37),i=t(8);d.exports=function(e){let o,s,a,c,u;const l=this;let h=e.archiving;const p=e.archivingStarted||"Archiving on",y=e.archivingEnded||"Archiving off";let O=!0;const v=function(C){c.nodeValue=C,o.setAttribute("title",C)},b=function(){u&&(clearTimeout(u),u=null),h?i.addClass(s,"OT_active"):i.removeClass(s,"OT_active"),i.removeClass(l.domElement,"OT_archiving-"+(h?"off":"on")),i.addClass(l.domElement,"OT_archiving-"+(h?"on":"off")),e.show&&h?(v(p),i.addClass(a,"OT_mode-on"),i.removeClass(a,"OT_mode-auto"),l.setDisplayMode("on"),u=setTimeout(()=>{i.addClass(a,"OT_mode-auto"),i.removeClass(a,"OT_mode-on")},5e3)):e.show&&!O?(i.addClass(a,"OT_mode-on"),i.removeClass(a,"OT_mode-auto"),l.setDisplayMode("on"),v(y),u=setTimeout(()=>{l.setDisplayMode("off")},5e3)):l.setDisplayMode("off")};n(this,{mode:h&&e.show?"on":"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate(){o=i.createElement("div",{className:"OT_archiving-light-box"},""),s=i.createElement("div",{className:"OT_archiving-light"},""),o.appendChild(s),a=i.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),c=document.createTextNode(""),a.appendChild(c),l.domElement.appendChild(o),l.domElement.appendChild(a),b()}}),this.setShowArchiveStatus=function(T){e.show=T,l.domElement&&b.call(l)},this.setArchiving=function(T){h=T,O=!1,l.domElement&&b.call(l)}}},function(d,E,t){"use strict";d.exports=function(n){void 0===n&&(n={});const i=n.global||(void 0!==typeof window?window:global);return()=>i.navigator&&i.navigator.mediaDevices}},function(d,E,t){"use strict";(function(n){const i=t(9),r=t(11),e=t(106),o=t(639),s=t(26),a=t(22),c=t(7);d.exports=function(l){void 0===l&&(l={});const h=l.env||t(3),p=l.Errors||t(6),y=l.otError||t(13)(),O=l.logging||t(2)("getUserMedia"),v=l.screenSharing||t(161)(),b=l.getDisplayMediaExtensionHelper||t(288),T=l.customGetUserMedia,C=l.global||(void 0!==typeof window?window:global),w=l.analytics||new s,N=C.navigator,k=C.location,L=()=>{return T||(N.mediaDevices?(ae=N.mediaDevices).getUserMedia.bind(ae):void 0);var ae},D=function(){const ye=L();return ye?ye(...arguments):n.reject(new Error("Cannot find getUserMedia"))},W=()=>{return T||(N.mediaDevices&&N.getDisplayMedia?N.getDisplayMedia.bind(N):N.mediaDevices&&N.mediaDevices.getDisplayMedia?(ae=N.mediaDevices).getDisplayMedia.bind(ae):void 0);var ae},Z=function(){const ye=W();return ye?ye(...arguments):n.reject(new Error("Cannot find getDisplayMedia"))},oe=(()=>{const ae={name:p.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},ye={name:p.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},Le={name:p.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},me={name:p.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},Oe={name:p.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},ge={name:p.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},pe={AbortError:{name:p.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:ae,NotFoundError:me,NotReadableError:Oe,OverconstrainedError:Le,SecurityError:i({},ae,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:Le,PermissionDeniedError:ae,PermissionDismissedError:ae,NotSupportedError:ye,ConstraintNotSatisfiedError:Le,MandatoryUnsatisfiedError:Le,OverConstrainedError:Le,DevicesNotFoundError:me,NoDevicesFoundError:me,HardwareUnavailableError:Oe,SourceUnavailableError:Oe,TrackStartError:Oe,ScreenCaptureError:ge,TabCaptureError:ge};return o({objectToTrack:pe,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage(Ue){w.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:Ue}})}}),pe})(),Q=(ae,ye)=>{let Le=ae;"AbortError"===Le&&"string"==typeof ye&&ye.match(/(screen|tab).?capture/i)&&(Le="ScreenCaptureError");const me=oe[Le];let Oe;return Oe=me?y(me.name,new Error(`${me.message} (getUserMedia error: ${ae})`)):new Error(`Unknown error while getting user media: ${ae}`),Oe.originalMessage=ye,Oe.originalName=ae,Oe};return function(ae,ye){if(void 0===ye&&(ye=!1),O.debug("getUserMedia wrapper called with",ae),function(ye){if(!ye||!r(ye))return!0;for(const Le in ye)if(ye.hasOwnProperty(Le)&&ye[Le])return!1;return!0}(ae))return O.error("Couldn't get UserMedia: All constraints were false"),c(n.reject(y(p.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));const me=c((ye&&b.isSupportedInThisBrowser?Z:D)(ae).catch(pe=>{const Ue=(ae=>{if(r(ae)&&ae.name){let ye=ae.name,Le=ae.message;if(("Cannot find getUserMedia"===Le||"Cannot find getDisplayMedia"===Le)&&(ye="Chrome"===h.name&&h.version>73&&"https:"!==C.location.protocol?"NotAllowedError":"NotSupportedError"),"Safari"===h.name&&"Error"===ye){const ge=Object.prototype.toString.call(ae).match(/^\[object (\w+Error)\]$/);ge&&(ye=ge[1])}const me=Q(ye,Le);return me.constraintName=ae.constraint||ae.constraintName,me instanceof a||w.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:me.name,message:me.message,originalMessage:me.originalMessage}}),me}if("string"==typeof ae){const ye=Q(ae);return w.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:ae}}),ye}return w.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:ae}}),new Error("Unknown error type while getting media")})(pe);if(Ue.name===p.UNABLE_TO_CAPTURE_SCREEN)return new n((de,ve)=>{v.checkCapability(Ae=>{if("chrome"===Ae.extensionRequired){if(Ae.extensionRegistered&&!Ae.extensionInstalled){const Xe=y(p.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,Ue);Xe.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",ve(Xe)}else if(!Ae.extensionRegistered){const Xe=y(p.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,Ue);Xe.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",ve(Xe)}}else ve(Ue)})});throw Ue}).then(pe=>(O.debug("got stream:",{stream:pe,tracks:pe.getTracks(),trackLabels:pe.getTracks().map(Ue=>Ue.label)}),pe))),Oe=-1!==k.protocol.indexOf("https")?500:100;let ge=!0;const ce=()=>{ge=!1};return me.then(ce,ce),e(Oe).then(()=>{if(!ge)return;const pe=()=>{me.emit("accessDialogClosed")};me.emit("accessDialogOpened"),me.then(pe,pe)}),me}}}).call(this,t(0))},function(d,E,t){"use strict";d.exports=function(n){let i=void 0===n?{}:n,r=i.objectToTrack,e=i.keys,o=i.onUsage;if(!Array.isArray(e)&&void 0!==e)throw new Error("keys must be an array, or undefined");if("function"!=typeof o)throw new Error("onUsage must be a function");if(null==r)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(r).forEach(s=>{if(void 0!==e&&-1===e.indexOf(s))return;let a=r[s];Object.defineProperty(r,s,{get:()=>(o(s),a),set(c){a=c,o(s,a)},enumerable:!0})})}},function(d,E,t){"use strict";const n=t(3),r=t(641).isCallbackBasedAPI;let e=t(265),o=null;const s=(l,h)=>{o.getSources(l,h)},a=(l,h)=>{o.getSources(l).then(p=>{h(void 0,p)},h)},u=(l,h)=>{(r?s:a)({types:[l]},(y,O)=>{if(y)return void h(y);const v=O[0];v?h(void 0,{audio:!1,video:{mandatory:{chromeMediaSource:l,chromeMediaSourceId:v.id}}}):h(new Error("Could not find Electron source for screensharing"))})};d.exports=function(h){void 0===h&&(h={});try{const p=()=>{let O=void 0!==typeof window?window:global;for(;"function"!=typeof O.require&&O.parent&&O.parent!==O;)O=O.parent;return O},y=()=>{const O=p();return(O.require?O.require("electron"):O.electron).desktopCapturer};o=h.desktopCapturer||(n.isElectron?y():null),e=h.isElectronScreenSharingSource||e}catch(p){}return{isSupportedInThisBrowser:null!==o,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:()=>({isInstalled:p=>p(!0),getConstraints(p,y,O){e(p)?O(void 0,{audio:!0,video:!1}):u(p,O)}})}}},function(d,E,t){"use strict";const i=t(3).version<78;d.exports={isCallbackBasedAPI:i,isPromiseBasedAPI:!i}},function(d,E,t){"use strict";const n=t(3),i=t(159).default;d.exports={isSupportedInThisBrowser:!!n.isFirefox&&!i,autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register:()=>({isInstalled(e){e("object"==typeof OTScreenSharing)},getConstraints(e,o,s){o.video={mediaSource:e},o.browserWindow&&(o.video.browserWindow=o.browserWindow,delete o.browserWindow),void 0!==o.scrollWithPage&&(o.video.scrollWithPage=o.scrollWithPage,delete o.scrollWithPage),s(void 0,o)}})}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5)),e=n(t(19));const s=t(644).normaliseOptions,c=t(289).isMediaStreamTrack,u=t(147),l=t(9),h=t(140),p=t(290).default,y=t(6),O=t(48),v=t(13)(),T=t(291).isValidVideoContentHint,C=t(7),w=t(148),N=t(3),k=t(264),L="getUserMedia request was aborted";d.exports=function(W){void 0===W&&(W={}),["deviceHelpers","getUserMediaHelper"].forEach(ge=>{u(W[ge],`${ge} dependency must be injected into processPubOptions`)});const Z=W.generateConstraintInfo||t(254),oe=W.global||(void 0!==typeof window?window:global),Q=W.logging||t(2)("processPubOptions"),ne=W.navigator||oe.navigator,he=W.screenSharing||t(161)(),ae=W.env||N,ye=t(645)({navigator:ne||{}}),me=W.deviceHelpers,Oe=W.getUserMediaHelper;return(ge,ce,pe)=>{const Ue=s(ge,ce,Q),de=w(Ue.videoSource),ve=c(Ue.audioSource),Ae=c(Ue.videoSource),We=!ve&&null!==Ue.audioSource||!Ae&&null!==Ue.videoSource,at=$t=>"boolean"==typeof $t,At=!de||ve||k,ht=h(Ue,{mirror:!de&&!Ae,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:de?"contain":"cover",audioFallbackEnabled:At,insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,enableDtx:!1,disableAudioProcessing:!1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0});if(void 0!==ht.videoContentHint&&!T(ht.videoContentHint)&&(Q.warn(`${ce}: Invalid content hint. Valid content hints are "text", "detail", "motion", or ""`),ht.videoContentHint=""),ht.name&&(ht.name=String(ht.name)),at(ht.enableDtx)||(ht.enableDtx=!1),at(ht.enableStereo)||(ht.enableStereo=!1),ht.constraints)Q.warn(`${ce}: You have passed your own constraints not using ours`);else{const $t=Z((0,e.default)({isScreenSharing:de,isCustomAudioTrack:ve,isCustomVideoTrack:Ae},O(ht,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl"]),{env:ae,usingOptionalMandatoryStyle:ye(de)}));l(ht,$t)}const Wt={isScreenSharing:de,isCustomAudioTrack:ve,isCustomVideoTrack:Ae,shouldAllowAudio:At,properties:ht};return C(Wt),Wt.getUserMedia=(0,r.default)(i.default.mark(function $t(){var un,En,nt,ct,De,lt,wt,In,Gn;return i.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(un=function(){for(var nn=arguments.length,Rn=new Array(nn),Pn=0;Pn<nn;Pn++)Rn[Pn]=arguments[Pn];return Wt.emit("accessDialogOpened",...Rn)},En=function(){for(var nn=arguments.length,Rn=new Array(nn),Pn=0;Pn<nn;Pn++)Rn[Pn]=arguments[Pn];return Wt.emit("accessDialogClosed",...Rn)},We){ut.next=7;break}return nt=new oe.MediaStream,ve&&nt.addTrack(Ue.audioSource),Ae&&nt.addTrack(Ue.videoSource),ut.abrupt("return",nt);case 7:if(!de){ut.next=15;break}return ut.next=10,he.getConstraints({onAccessDialogOpened:un,onAccessDialogClosed:En,videoSource:Ue.videoSource,constraints:ht.constraints});case 10:if(ht.constraints=ut.sent,!pe()){ut.next=13;break}throw v(y.CANCEL,new Error(L));case 13:ut.next=25;break;case 15:return ut.next=17,me.shouldAskForDevices();case 17:if(ct=ut.sent,!pe()){ut.next=20;break}throw v(y.CANCEL,new Error(L));case 20:Q.debug(`${ce}: shouldAskForDevices:`,ct),ct.video||(Q.warn(`${ce}: Setting video constraint to false, there are no video sources`),ht.constraints.video=!1),ct.audio||(Q.warn(`${ce}: Setting audio constraint to false, there are no audio sources`),ht.constraints.audio=!1),Wt.videoDevices=ct.videoDevices,Wt.audioDevices=ct.audioDevices;case 25:if(Q.debug(`${ce}: onConstraintsFound`,De=ht.constraints),!pe()){ut.next=29;break}throw v(y.CANCEL,new Error(L));case 29:return lt="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",wt="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=204106",In=Vt=>"NotReadableError"===Vt.originalName&&"Failed starting capture of a video track"===Vt.originalMessage,Gn=function(){var Vt=(0,r.default)(i.default.mark(function nn(){var Rn,Pn,Mr;return i.default.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return(Rn=Oe(De,de)).on("accessDialogOpened",un),Rn.on("accessDialogClosed",En),Ht.prev=3,Ht.next=6,Rn;case 6:if(Pn=Ht.sent,!(ae.isiOS&&ht.publishVideo&&Pn.getVideoTracks().length&&"ended"===Pn.getVideoTracks()[0].readyState)){Ht.next=11;break}throw Pn.getTracks().forEach(rr=>rr.stop()),new Error(lt);case 11:return Ht.abrupt("return",Pn);case 14:if(Ht.prev=14,Ht.t0=Ht.catch(3),!ae.isiOS){Ht.next=34;break}if(!(In(Ht.t0)&&ae.iOSVersion>=13&&ae.iOSVersion<13.4)){Ht.next=32;break}return Ht.prev=18,Mr=Oe({audio:!0,video:!1},!1),Ht.next=22,Mr;case 22:Ht.sent.getTracks().forEach(rr=>rr.stop()),Ht.next=29;break;case 26:Ht.prev=26,Ht.t1=Ht.catch(18),Q.debug(`${ce}: error disposing audio track`,Ht.t1);case 29:throw new Error(wt);case 32:if(Ht.t0.name!==y.HARDWARE_UNAVAILABLE){Ht.next=34;break}throw new Error(lt);case 34:throw Ht.t0;case 35:return Ht.prev=35,setTimeout(()=>{Rn.off("accessDialogOpened",un),Rn.off("accessDialogClosed",En)}),Ht.finish(35);case 38:case"end":return Ht.stop()}},nn,null,[[3,14,35,38],[18,26]])}));return function(){return Vt.apply(this,arguments)}}(),ut.next=35,p(Gn,(Vt,nn)=>!(![lt,wt].includes(Vt.message)||1!==nn||pe())&&1e3)();case 35:if(nt=ut.sent,!pe()){ut.next=39;break}throw nt.getTracks().forEach(Vt=>{Vt.stop()}),v(y.CANCEL,new Error(L));case 39:return ve&&nt.addTrack(Ue.audioSource),Ae&&nt.addTrack(Ue.videoSource),ut.abrupt("return",nt);case 42:case"end":return ut.stop()}},$t)})),Wt}}},function(d,E,t){"use strict";const i=t(289).isMediaStreamTrack,r=t(38),e=t(3);E.normaliseOptions=(s,a,c)=>{const u=s&&"object"==typeof s?r(s):{};if(!1===u.audioSource&&(u.audioSource=null),!1===u.videoSource&&(u.videoSource=null),void 0!==u.minVideoBitrate&&!("number"==typeof u.minVideoBitrate&&u.minVideoBitrate>0)&&(c.warn(`${a}: Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number`),delete u.minVideoBitrate),void 0!==u.audioBitrate&&!(u.audioBitrate>=6e3&&u.audioBitrate<=51e4)&&(c.warn(`${a}: Invalid audioBitrate in publisher properties. audioBitrate must be a number between 6000 and 510000 bits per second`),delete u.audioBitrate),"Firefox"===e.name&&e.version<49){const l="Firefox 48 and below";i(u.audioSource)&&(u.audioSource=null,c.warn(`${a}: Cannot use custom tracks with ${l}. Setting audioSource to null`)),i(u.videoSource)&&(u.videoSource=null,c.warn(`${a}: Cannot use custom tracks with ${l}. Setting videoSource to null`))}return u}},function(d,E,t){"use strict";const n=t(3),i=n.name,r=n.version,e=t(258);d.exports=function(s){let c=(void 0===s?{}:s).navigator,u=void 0===c?window.navigator:c;return function(h){return h&&!e||!(u.mediaDevices&&u.mediaDevices.getUserMedia)||"Chrome"===i&&r<61}}},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={}),["processPubOptions"].forEach(a=>{if(!i[a])throw new Error(`${a} dependency must be injected into OT.getUserMedia`)});const r=i.logging||t(2)("getUserMedia"),o=i.processPubOptions;return function(c){return void 0===c&&(c={}),o(c,"OT.getUserMedia",()=>!1).getUserMedia().catch(l=>{throw r.error(`OT.getUserMedia failed to getUserMedia: ${l}`),l})}}},function(d,E,t){"use strict";d.exports=function(i,r){const e=(o,s)=>()=>{throw new Error(`Cannot ${o} ${s}, ${i} is destroyed`)};Object.keys(r).forEach(o=>{"function"==typeof r[o]?r[o]=e("call",o):Object.defineProperty(r,o,{get:e("get",o),set:e("set",o)})})}},function(d,E,t){"use strict";d.exports=n=>{if("srcObject"in n)return;const i=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(n,"srcObject",{get(){return this._srcObject},set(r){const e=this;if(this._srcObject=r,this.src&&i.revokeObjectURL(this.src),r)return this.src=i.createObjectURL(r),r.addEventListener("addtrack",()=>{e.src&&i.revokeObjectURL(e.src),e.src=i.createObjectURL(r)}),r.addEventListener("removetrack",()=>{e.src&&i.revokeObjectURL(e.src),e.src=i.createObjectURL(r)}),this._srcObject;this.src=""}})}},function(d,E,t){"use strict";d.exports=e=>(e=>!(!e||"function"!=typeof e.getBoundingClientRect))(e)&&(e=>{const o=e.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight,a=window.innerWidth||document.documentElement.clientWidth;return o.top<=s&&o.top+o.height>=0&&o.left<=a&&o.left+o.width>=0})(e)&&(e=>{const o=s=>!(!s.style||"hidden"!==s.style.visibility)||!!s.parentNode&&o(s.parentNode);return null!==e.offsetParent&&!o(e)})(e)},function(d,E,t){"use strict";const n=t(104),i=t(8),r={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};d.exports=function(o,s,a){let c=a;n(o,{isRotated:{get(){return this.orientation()&&(270===this.orientation().videoOrientation||90===this.orientation().videoOrientation)}},orientation:{get:()=>c,set(u){c=u;const l=r[u.videoOrientation]||r.ROTATED_NORMAL;switch(i.env.name){case"Chrome":case"Safari":s().style.webkitTransform=l;break;default:s().style.transform=l}o.trigger("orientationChanged",c)}},audioChannelType:{get(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set(u){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=u)}}})}},function(d,E,t){"use strict";d.exports=function(){return function(e,o,s){const a=[];function c(p){setTimeout(()=>{if(a.length)if(function i(r){return r.getTracks().every(e=>"ended"===e.readyState)}(e))l(),"function"==typeof o&&o();else{const y=p.target;u(y),"function"==typeof s&&s(y)}},100)}function u(p){p.onended===c&&(p.onended=null);const y=a.indexOf(p);y>=0&&a.splice(y,1)}function l(){a.slice().forEach(u)}function h(){e.getTracks().forEach(p=>{a.push(p),p.onended=c})}return h(),{stop:l,refresh:()=>{l(),h()}}}}},function(d,E,t){"use strict";const n=i=>i>=15&&i<15.4;d.exports=i=>!!(i=i||t(3)).isiPad||(i.isiPhone?n(i.iOSVersion):!!i.isSafari&&n(i.version))},function(d,E,t){"use strict";const n=[{width:320,height:180,maxBitrate:3e5},{width:320,height:240,maxBitrate:4e5},{width:352,height:288,maxBitrate:5e5},{width:480,height:270,maxBitrate:55e4},{width:640,height:360,maxBitrate:8e5},{width:640,height:480,maxBitrate:8e5},{width:960,height:540,maxBitrate:11e5},{width:1280,height:720,maxBitrate:25e5},{width:1920,height:1080,maxBitrate:45e5}].sort((e,o)=>e.maxBitrate-o.maxBitrate);d.exports=(e,o)=>{var s;return e&&o&&(null==(s=n.find(c=>o*e<=c.height*c.width))?void 0:s.maxBitrate)||45e5}},function(d,E,t){var n=t(64),i=t(100),r=t(36);d.exports=function e(o,s){var a={};return s=r(s,3),i(o,function(c,u,l){n(a,u,s(c,u,l))}),a}},function(d,E,t){"use strict";d.exports=function(i,r){const e=setTimeout(()=>{i((o,s)=>{if(!o)for(let a=0;a<s.length;a+=1){const c=s[a];-1!==c.id.indexOf("_send")&&"ssrc"===c.type&&("audio"===c.kind||"audio"===c.mediaType)&&0===parseInt(c.bytesSent,10)&&r()}})},3e3);return function(){clearTimeout(e)}}},function(d,E,t){"use strict";const n=t(7),i=t(16);d.exports=function(){return function(o,s){const a={},c=[];let u=!1;this._id=i();const l=()=>{this.trigger("iceConnected"),u=!0};n(this);const T=s.getPeerConnection(o,this);T.on({iceConnected:l,close:()=>this.trigger("close"),signalingStateChange:w=>this.trigger("signalingStateChange",w),signalingStateStable:w=>this.trigger("signalingStateStable",w),error:w=>this.trigger("error",w.reason,w.prefix),qos:w=>this.trigger("qos",w),iceConnectionStateChange:w=>this.trigger("iceConnectionStateChange",w),remoteVideoSupported:w=>this.trigger("remoteVideoSupported",w)},this),this._onTrackAdded=w=>{const N=w.track;a[N.id]=w.transceiver.mid,c.push(N.id),T.iceConnectionStateIsConnected()&&!u&&l(),this.trigger("trackAdded",w)},this.disconnect=()=>{s.removeSinglePeerConnection(this._id),T.stopTransceivers(Object.values(a))},this.removeTrack=w=>{a[w.id]&&T.stopTransceivers([a[w.id]]);const N=c.indexOf(w.id);N>-1&&c.splice(N,1),s.removeTrack(w,this._id)},this.remoteTracks=()=>c,this.getDataChannel=(w,N,k)=>{T.getDataChannel(w,N,k)},this.getSourceStreamId=()=>T.getSourceStreamId(),this.processMessage=(w,N)=>{T.processMessage(w,N)},this.remoteDescription=()=>T.remoteDescription(),this.getStats=w=>{T.getStats(w)},this.getSynchronizationSources=w=>{T.getSynchronizationSources(w)},this.getRtcStatsReport=w=>{T.getRtcStatsReport(w)},this.remoteStreams=()=>T.remoteStreams(),this.hasRelayCandidates=()=>T.hasRelayCandidates(),this.iceRestart=()=>T.iceRestart(),this.iceConnectionStateIsConnected=()=>T.iceConnectionStateIsConnected()}}},function(d,E,t){"use strict";d.exports=function(r,e,o){void 0===o&&(o=!1);let s=null,a=0,c=null,u=o;const l=b=>"inbound-rtp"===b.type&&"audio"===(b.kind||b.mediaType),h=b=>b.id===c&&"track"===b.type&&"audio"===(b.kind||b.mediaType),v=setInterval(()=>{r((b,T)=>{if(b)return;c=(T.find(l)||{}).trackId;const w=T.find(h);if(w){const N=w.audioLevel,k=w.totalSamplesReceived;if(void 0===N)return;((b,T)=>b===s&&T===a)(N,k)?(clearInterval(v),e("audioLevelStuck")):((b,T)=>!u&&0===b&&0===s&&T>a)(N,k)&&(clearInterval(v),e("audioLevelStuckAt0")),s=N,a=k}})},500);return o||setTimeout(()=>{u=!0},3e3),{stop:()=>{clearInterval(v)}}}},function(d,E,t){"use strict";(function(n){const r=new(t(26));d.exports=function(o){void 0===o&&(o={});const s=o.analytics||r,a=o.errors||t(6),c=o.ExceptionCodes||t(10),u=o.otError||t(13)(),l=o.sessionObjects||t(21),h=o.uuid||t(16);return function(y){void 0===y&&(y=()=>{});const O=h();function v(b){b?y(u(a.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),c.REPORT_ISSUE_ERROR)):y(null,O)}0===l.sessions.length()?s.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:O}},null,v):n.all(l.sessions.map(b=>b.reportIssue({id:O}))).then(()=>v(),b=>v(b))}}}).call(this,t(0))},function(d,E,t){"use strict";d.exports=n=>{let i=n.window,r=!1;try{const e=Object.defineProperty({},"passive",{get(){r=!0}});i.addEventListener("testPassive",null,e),i.removeEventListener("testPassive",null,e)}catch(e){}return r}},function(d,E,t){"use strict";Object.defineProperty(E,"__esModule",{value:!0});var n=function(){function c(u,l){for(var h=0;h<l.length;h++){var p=l[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,l,h){return l&&c(u.prototype,l),h&&c(u,h),u}}(),r=function e(c){return c&&c.__esModule?c:{default:c}}(t(301)),s=function(){},a=function(){function c(){(function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.internalIsCanceled=!1,this.listeners=[]}return n(c,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach(function(l){return l()}),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new r.default("Operation has been canceled.")}},{key:"onCancel",value:function(l){var h=this;return this.internalIsCanceled?s:(this.listeners.push(l),function(){if(h.listeners){var p=h.listeners.indexOf(l);-1!==p&&h.listeners.splice(p,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return c.CANCELED;var l=new c;return this.onCancel(function(){return l.cancel()}),l}}]),c}();E.default=a,a.CANCELED=new a,a.CANCELED.internalIsCanceled=!0},function(d,E,t){"use strict";(function(n){const i=t(63),r=t(302).default,e=t(153);t(107)(),d.exports=function s(a,c){const u=i(a),l=new n(h=>{const p=()=>{(a.videoWidth()>2||a.videoHeight()>2)&&h(!0)};u.on("videoDimensionsChanged",p),p()});return r(e(l,c,()=>!1),()=>u.removeAll())}}).call(this,t(0))},function(d,E,t){"use strict";(function(n){const i=t(63),r=t(302).default,e=t(153);t(107)(),d.exports=function s(a,c){void 0===c&&(c=5e3);const u=i(a),l=new n(h=>{u.on("timeupdate",h),u.on("loadedmetadata",h)});return r(e(l,c,()=>!1),()=>u.removeAll())}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(2)("WidgetView:fixMini");d.exports=function(a){const c=a.clientWidth,u=a.clientHeight;a.classList.remove("OT_micro"),a.classList.remove("OT_mini"),(c<64||u<64)&&(a.classList.add("OT_micro"),n.debug("OT_micro class added",{clientWidth:c,clientHeight:u,microWidth:64,microHeight:64})),(c<128||u<128)&&(a.classList.add("OT_mini"),n.debug("OT_mini class added",{clientWidth:c,clientHeight:u,miniWidth:128,miniHeight:128}))}},function(d,E,t){"use strict";const n=t(16);d.exports=function(r,e){let o,s;if(r&&r.nodeName?(o=r,(!o.getAttribute("id")||0===o.getAttribute("id").length)&&o.setAttribute("id",`OT_${n()}`),s=o.getAttribute("id")):r&&(o=document.getElementById(r),o&&(s=r)),s||(s=`OT_${n().replace(/-/g,"_")}`),!o)return o=document.createElement("div"),o.id=s,o.setAttribute("id",s),o.style.backgroundColor="#000000",document.body.appendChild(o),o;const a=document.createElement("div");switch(a.id=`OT_${n()}`,e){case"append":return o.appendChild(a),a;case"before":return o.parentNode.insertBefore(a,o),a;case"after":return o.parentNode.insertBefore(a,o.nextSibling),a;default:for(;o.firstChild;)o.removeChild(o.firstChild);return o}}},function(d,E,t){"use strict";d.exports=function(i,r){return void 0===r&&(r="px"),String(parseFloat(i,10))===String(i).trim()?`${String(i).trim()}${r}`:i}},function(d,E,t){"use strict";(function(n){const i=t(75);d.exports=function(e,o){let s=void 0===o?{}:o,a=s.frequency,c=void 0===a?60:a,u=s.timeout,l=void 0===u?2e3:u;return new n((h,p)=>{let y;const O=new i(()=>{(function v(){try{return e()}catch(b){return!1}})()&&(clearTimeout(y),O.stop(),h())},c);y=setTimeout(()=>{O.stop(),p(new Error("TIMEOUT"))},l),O.start()})}}).call(this,t(0))},function(d,E,t){"use strict";const n=t(13)(),i=t(6),r=t(10);d.exports=e=>"404"===String(e.code)?n(i.STREAM_NOT_FOUND,new Error("stream not found"),r.UNABLE_TO_SUBSCRIBE):"409"===String(e.code)&&"streamLimitExceeded"===e.message?n(i.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),r.STREAM_LIMIT_EXCEEDED):"405"===String(e.code)&&"IncompatibleEncryptionSettings"===e.message?n(i.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to an encrypted stream without enabling encryption"),r.UNABLE_TO_SUBSCRIBE):n(i.UNABLE_TO_SUBSCRIBE,new Error(`subscriberCreate failed with unexpected code ${e.code}: ${e.message}`),r.UNEXPECTED_SERVER_RESPONSE)},function(d,E,t){"use strict";const n=t(27),i=t(50),r=t(103),e=t(23)();d.exports=o=>{let s=o.subscriber,a=o.audioLevelSampler,c=0,u=0;const l=new r(()=>{const h=s.listenerCount(n.AUDIO_LEVEL_UPDATED);i()-u>1e4&&0===h?l.stop():(c=a.sample(),h>0&&s.dispatchEvent(new e.AudioLevelUpdatedEvent(c)))});return Object.defineProperty(s,"loudness",{get:()=>(l.start(),u=i(),c),set(){throw new TypeError("Cannot set readonly property loudness")},configurable:!0}),s.listenerCount(n.AUDIO_LEVEL_UPDATED)&&l.start(),s.on("audioLevelUpdated:added",()=>{l.start()}),s.once(n.SUBSCRIBER_DESTROYED,()=>{l.stop()}),{destroy(){a.destroy(),l.stop()}}}},function(d,E,t){"use strict";const n=t(253),i=t(145),r=t(670),e=t(304),o=t(305),s=t(158)(),a=t(671),c=t(2)("Subscriber");d.exports=function(u,l){if(void 0===l&&(l={}),u){if(r({hasGetSynchronizationSupport:l.hasGetSynchronizationSupport}))return new n(u.getSynchronizationSources);if(e())return new n(u.getStats);if(o()){let p;try{p=l.audioContext||s()}catch(y){c.warn("Failed to get AudioContext()",y)}if(a(p))return new i(p)}}}},function(d,E,t){"use strict";const n=t(3),i=()=>window.RTCRtpReceiver&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype;d.exports=function(r){return void 0===r&&(r={}),(r.hasGetSynchronizationSupport||i)()&&!n.isFirefox}},function(d,E,t){"use strict";d.exports=n=>(void 0!==typeof window?window:global).AudioContext&&n instanceof(void 0!==typeof window?window:global).AudioContext||(void 0!==typeof window?window:global).webkitAudioContext&&n instanceof(void 0!==typeof window?window:global).webkitAudioContext},function(d,E,t){"use strict";const n=t(37),i=t(8);d.exports=function(e){let o=!1,s=!1;const a=function(u){const l=["auto","on"].indexOf(this.getDisplayMode())>-1;i.removeClass(u,"OT_video-disabled OT_video-disabled-warning OT_active"),l&&(o?i.addClass(u,"OT_video-disabled"):s&&i.addClass(u,"OT_video-disabled-warning"),i.addClass(u,"OT_active"))}.bind(this);this.disableVideo=function(u){o=u,!0===u&&(s=!1),a(this.domElement)},this.setWarning=function(u){s=u,a(this.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});const c=this.setDisplayMode.bind(this);this.setDisplayMode=function(u){c(u),a(this.domElement)}}},function(d,E,t){"use strict";const n=t(37),i=t(8);d.exports=function(e){let o=!1;const s=c=>{const u=["auto","on"].indexOf(this.getDisplayMode())>-1;i.removeClass(c,["OT_audio-blocked","OT_active"].join(" ")),u&&(o&&i.addClass(c,"OT_audio-blocked"),i.addClass(c,"OT_active"))};this.setAudioBlocked=c=>{o=c,s(this.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});const a=this.setDisplayMode.bind(this);this.setDisplayMode=c=>{a(c),s(this.domElement)}}},function(d,E,t){"use strict";const n=t(37),i=t(8);d.exports=function(e){let o=!1;const s=c=>{const u=["auto","on"].indexOf(this.getDisplayMode())>-1;i.removeClass(c,["OT_active"].join(" ")),u&&o&&i.addClass(c,"OT_active")};this.setVideoUnsupported=c=>{o=c,s(this.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});const a=this.setDisplayMode.bind(this);this.setDisplayMode=c=>{a(c),s(this.domElement)}}},function(d,E,t){"use strict";const n=t(48),i=t(9),r=t(62),e=t(76),o=t(157);d.exports=function(c,u){void 0===u&&(u=5e3);let l,h=!1;const p={},O=()=>{h||c((v,b)=>{if(!h){if(!v){const T=function(b){return void 0===b&&(b=[]),r(b,T=>e.isVideoInboundRtpStat(T))}(b);T?i(p,n(T,["timestamp","framesDecoded"])):p.timestamp||i(p,{timestamp:Date.now(),framesDecoded:0})}l=setTimeout(O,u)}})};return O(),{getFrameRateFromStat:v=>o({currentStatFrames:v.framesDecoded,currentTimestamp:v.timestamp,prevStatFrames:p.framesDecoded,prevTimestamp:p.timestamp}),destroy(){h=!0,l&&(clearTimeout(l),l=null)}}}},function(d,E,t){"use strict";d.exports=n=>{let r=n.onWarning,e=n.onTimeout,o=n.warningMs,s=n.timeoutMs;const a=[],c=()=>{a.forEach(u=>clearTimeout(u))};n.connectivityState.observe({onEnterConnecting(){a.push(setTimeout(r,o),setTimeout(e,s))},onEnterConnected:c,onEnterDisconnected:c})}},function(d,E,t){"use strict";const n=t(308);d.exports=i=>new n({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:i.onInvalidTransition}})},function(d,E,t){"use strict";const n=t(75);d.exports=i=>{let r=i.connectivityState;const o=new n(i.logAttempt,.2,6);r.observe({onEnterConnecting(){o.start()},onEnterDisconnected(){o.stop()},onEnterConnected(){o.stop()}})}},function(d,E,t){var n=t(680),i=t(260),r=n(function(e,o,s){return e+(s?" ":"")+i(o)});d.exports=r},function(d,E,t){var n=t(681),i=t(682),r=t(685),o=RegExp("['\u2019]","g");d.exports=function s(a){return function(c){return n(r(i(c).replace(o,"")),a,"")}}},function(d,E){d.exports=function t(n,i,r,e){var o=-1,s=null==n?0:n.length;for(e&&s&&(r=n[++o]);++o<s;)r=i(r,n[o],o,n);return r}},function(d,E,t){var n=t(683),i=t(61),r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");d.exports=function l(h){return(h=i(h))&&h.replace(r,n).replace(u,"")}},function(d,E,t){var r=t(684)({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});d.exports=r},function(d,E){d.exports=function t(n){return function(i){return null==n?void 0:n[i]}}},function(d,E,t){var n=t(686),i=t(687),r=t(61),e=t(688);d.exports=function o(s,a,c){return s=r(s),void 0===(a=c?void 0:a)?i(s)?e(s):n(s):s.match(a)||[]}},function(d,E){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;d.exports=function n(i){return i.match(t)||[]}},function(d,E){var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;d.exports=function n(i){return t.test(i)}},function(d,E){var t="\\ud800-\\udfff",o="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",h="A-Z\\xc0-\\xd6\\xd8-\\xde",y="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",v="["+y+"]",T="\\d+",C="["+o+"]",w="["+s+"]",N="[^"+t+y+T+o+s+h+"]",W="(?:\\ud83c[\\udde6-\\uddff]){2}",Z="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="["+h+"]",ne="(?:"+w+"|"+N+")",he="(?:"+oe+"|"+N+")",ae="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ye="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Le="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",me="[\\ufe0e\\ufe0f]?",pe=me+Le+"(?:\\u200d(?:"+["[^"+t+"]",W,Z].join("|")+")"+me+Le+")*",Ue="(?:"+[C,W,Z].join("|")+")"+pe,de=RegExp([oe+"?"+w+"+"+ae+"(?="+[v,oe,"$"].join("|")+")",he+"+"+ye+"(?="+[v,oe+ne,"$"].join("|")+")",oe+"?"+ne+"+"+ae,oe+"+"+ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",T,Ue].join("|"),"g");d.exports=function ve(Ae){return Ae.match(de)||[]}},function(d,E,t){"use strict";d.exports=(n,i)=>{const r=n.getSenders().find(o=>"video"===o.track.kind),e=r.getParameters();e.encodings.forEach(o=>{o.active=i}),r.setParameters(e)}},function(d,E,t){"use strict";const n=t(48),i=t(269);d.exports=r=>{const e=n(r,["audioDeviceId","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","resolution","showControls","style","videoContentHint","videoDeviceId","videoDimensions","videoFilter","videoSource","width"]);return e.style&&(e.style=i(e.style)),e}},function(d,E,t){"use strict";const n=t(27),i=t(50),r=t(103),e=t(23)();d.exports=o=>{let s=o.publisher,a=o.widgetView,c=0,u=0;const l=new r(()=>{const h=s.listenerCount(n.AUDIO_LEVEL_UPDATED);if(i()-u>1e4&&0===h)return void l.stop();const y=a&&a.video();if(y){const O=y.getAudioInputLevel();c=O,h>0&&s.dispatchEvent(new e.AudioLevelUpdatedEvent(O))}});Object.defineProperty(s,"loudness",{get:()=>(l.start(),u=i(),c),set(){throw new TypeError("Cannot set readonly property loudness")}}),s.listenerCount(n.AUDIO_LEVEL_UPDATED)&&l.start(),s.on("audioLevelUpdated:added",()=>{l.start()}),s.once(n.PUBLISHER_DESTROYED,()=>{l.stop()})}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));d.exports=function(o){let s=!1;return function(){var a=(0,r.default)(i.default.mark(function u(){var l,h,p,y=arguments;return i.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!s){v.next=2;break}throw new Error("The previous call to this function has not yet completed.");case 2:for(s=!0,v.prev=3,l=y.length,h=new Array(l),p=0;p<l;p++)h[p]=y[p];return v.next=7,o.call(this,...h);case 7:return v.abrupt("return",v.sent);case 8:return v.prev=8,s=!1,v.finish(8);case 11:case"end":return v.stop()}},u,this,[[3,,8,11]])}));return function c(){return a.apply(this,arguments)}}()}},function(d,E,t){"use strict";const n=t(13)(),i=t(6);d.exports=function(e){const o=document.createElement("canvas");if(!o.captureStream)throw n(i.NOT_SUPPORTED,new Error("Your browser does not support HTMLCanvasElement.captureStream()"));o.width=e.width,o.height=e.height,o.getContext("2d").fillRect(0,0,1,1);const a=o.captureStream().getVideoTracks()[0];return a.isCreatedCanvas=!0,a.enabled=!1,a}},function(d,E,t){"use strict";d.exports=(o,s)=>{if(!o)return null;const c=o.getVideoTracks()[0];return c?((o,s)=>(o=>o.getSettings&&o.getSettings().deviceId)(o)||(o=>{let s;return o.getConstraints&&o.getConstraints().deviceId&&(s=o.getConstraints().deviceId.exact),s})(o)||((o,s)=>{let a;if(s&&s.length){const c=s.find(u=>u.label===o.label);c&&(a=c.deviceId)}return a})(o,s))(c,s):null}},function(d,E,t){"use strict";const n=t(6),i=t(10),r=t(13)();d.exports=e=>{const s=String(e.code);return"405"===s&&"IncompatibleEncryptionSettings"===e.message?r(n.STREAM_CREATE_FAILED,new Error("IncompatibleEncryptionSettings: Tried to publish a stream to an encrypted session without enabling encryption"),i.UNABLE_TO_PUBLISH):["403","404","409"].includes(s)?r(n.STREAM_CREATE_FAILED,new Error(`Failed to create stream in server model: ${e.message}`),i.UNABLE_TO_PUBLISH):r(n.UNEXPECTED_SERVER_RESPONSE,new Error(`Unexpected server response: ${e.message}`),i.UNEXPECTED_SERVER_RESPONSE)}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=t(3),o=t(311),s=t(698),a=t(2)("MediaProcessor");function c(u){var l=this;void 0===u&&(u={});const p=u.ML,y=void 0===p?o:p,O=u.MediaTransform,v=void 0===O?s:O;let b,T,C;this.isValidVideoFilter=N=>v.isSupported(N.type)&&v.isValidConfig(N);const w={backgroundBlur:y.setBackgroundOptions,backgroundReplacement:y.setBackgroundOptions};this.canUpdateVideoFilter=N=>!!w[N],this.updateVideoFilter=function(){var N=(0,r.default)(i.default.mark(function k(L){var D,W,Z;return i.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(l.canUpdateVideoFilter(D=L.type)){Q.next=4;break}return a.warn(`Ignoring: filter "${D}" doesn't support real-time updates`),Q.abrupt("return");case 4:return W=v.getConfigurator(D),Z=W.getConfig(L),Q.next=8,w[D](Z);case 8:T=L;case 9:case"end":return Q.stop()}},k)}));return function(k){return N.apply(this,arguments)}}(),this.setVideoFilter=function(){var N=(0,r.default)(i.default.mark(function k(L){var D,W,Z;return i.default.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(W=v.getConfigurator(D=L.type)){ne.next=5;break}return a.warn(`Ignoring: filter "${D}" isn't supported`),ne.abrupt("return");case 5:if(Z=W.getConfig(L)){ne.next=9;break}return a.warn(`Ignoring: couldn't configure filter ${D}`),ne.abrupt("return");case 9:if(!l.getVideoFilter()){ne.next=20;break}return ne.prev=11,ne.next=14,l.destroy();case 14:ne.next=20;break;case 16:return ne.prev=16,ne.t0=ne.catch(11),a.warn(`Ignoring, couldn't remove previous filter: ${ne.t0}`),ne.abrupt("return");case 20:return ne.next=22,y.createConnector(Z);case 22:b=ne.sent,T=L;case 24:case"end":return ne.stop()}},k,null,[[11,16]])}));return function(k){return N.apply(this,arguments)}}(),this.getVideoFilter=()=>T,this.getOriginalVideoTrack=()=>C,this.setMediaStream=function(){var N=(0,r.default)(i.default.mark(function k(L){var D,W,Z;return i.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(D=L.getVideoTracks(),W=D[0]){Q.next=4;break}return a.warn("Ignoring. No video track found"),Q.abrupt("return",null);case 4:return Z=null,Q.prev=5,Q.next=8,b.setTrack(W);case 8:Z=Q.sent,C=W,Q.next=15;break;case 12:Q.prev=12,Q.t0=Q.catch(5),a.error(`Error setting media stream: ${Q.t0}`);case 15:return Q.abrupt("return",Z);case 16:case"end":return Q.stop()}},k,null,[[5,12]])}));return function(k){return N.apply(this,arguments)}}(),this.setVideoTrack=function(){var N=(0,r.default)(i.default.mark(function k(L){var D;return i.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return D=null,Z.prev=1,Z.next=4,b.setTrack(L);case 4:D=Z.sent,C=L,Z.next=11;break;case 8:Z.prev=8,Z.t0=Z.catch(1),a.error(`Error setting video track: ${Z.t0}`);case 11:return Z.abrupt("return",D);case 12:case"end":return Z.stop()}},k,null,[[1,8]])}));return function(k){return N.apply(this,arguments)}}(),this._setConnector=N=>{b=N},this.destroy=(0,r.default)(i.default.mark(function N(){return i.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,b.destroy();case 3:L.next=8;break;case 5:L.prev=5,L.t0=L.catch(0),a.warn(`Error destroying connector: ${L.t0}`);case 8:b=null,T=null,C=null;case 11:case"end":return L.stop()}},N,null,[[0,5]])})),this.enableLogging=(N,k)=>{if(!N)return void a.warn("Error enabling logging: invalid API key");const L={appId:N,sourceType:"video"};k&&(L.proxyUrl=k),y.setMetadata(L)},this.disableLogging=()=>{y.setMetadata()}}c.isSupported=function(u){void 0===u&&(u={});const h=u.env,y=u.ML;return!!(void 0===h?e:h).isChromium&&(void 0===y?o:y).isSupported()},d.exports=c},function(d,E,t){"use strict";t.r(E),function(n,i){function r(){return new n((ke,_)=>{"undefined"==typeof MediaStreamTrackProcessor||"undefined"==typeof MediaStreamTrackGenerator?_("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):ke()})}t.d(E,"MediaProcessor",function(){return us}),t.d(E,"MediaProcessorConnector",function(){return To}),t.d(E,"getVonageMetadata",function(){return Rt}),t.d(E,"isSupported",function(){return r}),t.d(E,"setVonageMetadata",function(){return Ot});let e=(()=>{class ke{}return ke.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},ke.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"},ke})();var o={exports:{}},s=function(_,Pe){return function(){for(var it=new Array(arguments.length),on=0;on<it.length;on++)it[on]=arguments[on];return _.apply(Pe,it)}},a=s,c=Object.prototype.toString;function u(ke){return Array.isArray(ke)}function l(ke){return void 0===ke}function p(ke){return"[object ArrayBuffer]"===c.call(ke)}function T(ke){return null!==ke&&"object"==typeof ke}function C(ke){if("[object Object]"!==c.call(ke))return!1;var _=Object.getPrototypeOf(ke);return null===_||_===Object.prototype}function L(ke){return"[object Function]"===c.call(ke)}function Q(ke,_){if(null!=ke)if("object"!=typeof ke&&(ke=[ke]),u(ke))for(var Pe=0,He=ke.length;Pe<He;Pe++)_.call(null,ke[Pe],Pe,ke);else for(var it in ke)Object.prototype.hasOwnProperty.call(ke,it)&&_.call(null,ke[it],it,ke)}var ye={isArray:u,isArrayBuffer:p,isBuffer:function h(ke){return null!==ke&&!l(ke)&&null!==ke.constructor&&!l(ke.constructor)&&"function"==typeof ke.constructor.isBuffer&&ke.constructor.isBuffer(ke)},isFormData:function y(ke){return"[object FormData]"===c.call(ke)},isArrayBufferView:function O(ke){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(ke):ke&&ke.buffer&&p(ke.buffer)},isString:function v(ke){return"string"==typeof ke},isNumber:function b(ke){return"number"==typeof ke},isObject:T,isPlainObject:C,isUndefined:l,isDate:function w(ke){return"[object Date]"===c.call(ke)},isFile:function N(ke){return"[object File]"===c.call(ke)},isBlob:function k(ke){return"[object Blob]"===c.call(ke)},isFunction:L,isStream:function D(ke){return T(ke)&&L(ke.pipe)},isURLSearchParams:function W(ke){return"[object URLSearchParams]"===c.call(ke)},isStandardBrowserEnv:function oe(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:Q,merge:function ne(){var ke={};function _(it,on){ke[on]=C(ke[on])&&C(it)?ne(ke[on],it):C(it)?ne({},it):u(it)?it.slice():it}for(var Pe=0,He=arguments.length;Pe<He;Pe++)Q(arguments[Pe],_);return ke},extend:function he(ke,_,Pe){return Q(_,function(it,on){ke[on]=Pe&&"function"==typeof it?a(it,Pe):it}),ke},trim:function Z(ke){return ke.trim?ke.trim():ke.replace(/^\s+|\s+$/g,"")},stripBOM:function ae(ke){return 65279===ke.charCodeAt(0)&&(ke=ke.slice(1)),ke}},Le=ye;function me(ke){return encodeURIComponent(ke).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Oe=function(_,Pe,He){if(!Pe)return _;var it;if(He)it=He(Pe);else if(Le.isURLSearchParams(Pe))it=Pe.toString();else{var on=[];Le.forEach(Pe,function(tr,Fn){null==tr||(Le.isArray(tr)?Fn+="[]":tr=[tr],Le.forEach(tr,function(Si){Le.isDate(Si)?Si=Si.toISOString():Le.isObject(Si)&&(Si=JSON.stringify(Si)),on.push(me(Fn)+"="+me(Si))}))}),it=on.join("&")}if(it){var ln=_.indexOf("#");-1!==ln&&(_=_.slice(0,ln)),_+=(-1===_.indexOf("?")?"?":"&")+it}return _},ge=ye;function ce(){this.handlers=[]}ce.prototype.use=function(_,Pe,He){return this.handlers.push({fulfilled:_,rejected:Pe,synchronous:!!He&&He.synchronous,runWhen:He?He.runWhen:null}),this.handlers.length-1},ce.prototype.eject=function(_){this.handlers[_]&&(this.handlers[_]=null)},ce.prototype.forEach=function(_){ge.forEach(this.handlers,function(He){null!==He&&_(He)})};var pe=ce,Ue=ye,ve=function(_,Pe,He,it,on){return _.config=Pe,He&&(_.code=He),_.request=it,_.response=on,_.isAxiosError=!0,_.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},_},Ae=ve,Xe=function(_,Pe,He,it,on){var ln=new Error(_);return Ae(ln,Pe,He,it,on)},Ye=Xe,at=ye,At=at.isStandardBrowserEnv()?{write:function(Pe,He,it,on,ln,xn){var tr=[];tr.push(Pe+"="+encodeURIComponent(He)),at.isNumber(it)&&tr.push("expires="+new Date(it).toGMTString()),at.isString(on)&&tr.push("path="+on),at.isString(ln)&&tr.push("domain="+ln),!0===xn&&tr.push("secure"),document.cookie=tr.join("; ")},read:function(Pe){var He=document.cookie.match(new RegExp("(^|;\\s*)("+Pe+")=([^;]*)"));return He?decodeURIComponent(He[3]):null},remove:function(Pe){this.write(Pe,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},nt=ye,ct=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],lt=ye,wt=lt.isStandardBrowserEnv()?function(){var He,_=/(msie|trident)/i.test(navigator.userAgent),Pe=document.createElement("a");function it(on){var ln=on;return _&&(Pe.setAttribute("href",ln),ln=Pe.href),Pe.setAttribute("href",ln),{href:Pe.href,protocol:Pe.protocol?Pe.protocol.replace(/:$/,""):"",host:Pe.host,search:Pe.search?Pe.search.replace(/^\?/,""):"",hash:Pe.hash?Pe.hash.replace(/^#/,""):"",hostname:Pe.hostname,port:Pe.port,pathname:"/"===Pe.pathname.charAt(0)?Pe.pathname:"/"+Pe.pathname}}return He=it(window.location.href),function(ln){var xn=lt.isString(ln)?it(ln):ln;return xn.protocol===He.protocol&&xn.host===He.host}}():function(){return!0};function In(ke){this.message=ke}In.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},In.prototype.__CANCEL__=!0;var Gn=In,ft=ye,Vt=At,nn=Oe,Jt=wt,Mr=Xe,bn=Di,Zn=Gn,Ht=function(_){return new n(function(He,it){var tr,on=_.data,ln=_.headers,xn=_.responseType;function Fn(){_.cancelToken&&_.cancelToken.unsubscribe(tr),_.signal&&_.signal.removeEventListener("abort",tr)}ft.isFormData(on)&&delete ln["Content-Type"];var yn=new XMLHttpRequest;if(_.auth){var Si=_.auth.username||"",Eo=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";ln.Authorization="Basic "+btoa(Si+":"+Eo)}var mo=function(_,Pe){return _&&!function(_){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_)}(Pe)?function(_,Pe){return Pe?_.replace(/\/+$/,"")+"/"+Pe.replace(/^\/+/,""):_}(_,Pe):Pe}(_.baseURL,_.url);function Bi(){if(yn){var ue="getAllResponseHeaders"in yn?function(_){var He,it,on,Pe={};return _&&nt.forEach(_.split("\n"),function(xn){if(on=xn.indexOf(":"),He=nt.trim(xn.substr(0,on)).toLowerCase(),it=nt.trim(xn.substr(on+1)),He){if(Pe[He]&&ct.indexOf(He)>=0)return;Pe[He]="set-cookie"===He?(Pe[He]?Pe[He]:[]).concat([it]):Pe[He]?Pe[He]+", "+it:it}}),Pe}(yn.getAllResponseHeaders()):null;(function(_,Pe,He){var it=He.config.validateStatus;He.status&&it&&!it(He.status)?Pe(Ye("Request failed with status code "+He.status,He.config,null,He.request,He)):_(He)})(function(Re){He(Re),Fn()},function(Re){it(Re),Fn()},{data:xn&&"text"!==xn&&"json"!==xn?yn.response:yn.responseText,status:yn.status,statusText:yn.statusText,headers:ue,config:_,request:yn}),yn=null}}if(yn.open(_.method.toUpperCase(),nn(mo,_.params,_.paramsSerializer),!0),yn.timeout=_.timeout,"onloadend"in yn?yn.onloadend=Bi:yn.onreadystatechange=function(){!yn||4!==yn.readyState||0===yn.status&&(!yn.responseURL||0!==yn.responseURL.indexOf("file:"))||setTimeout(Bi)},yn.onabort=function(){!yn||(it(Mr("Request aborted",_,"ECONNABORTED",yn)),yn=null)},yn.onerror=function(){it(Mr("Network Error",_,null,yn)),yn=null},yn.ontimeout=function(){var J=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded";_.timeoutErrorMessage&&(J=_.timeoutErrorMessage),it(Mr(J,_,(_.transitional||bn.transitional).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",yn)),yn=null},ft.isStandardBrowserEnv()){var Xo=(_.withCredentials||Jt(mo))&&_.xsrfCookieName?Vt.read(_.xsrfCookieName):void 0;Xo&&(ln[_.xsrfHeaderName]=Xo)}"setRequestHeader"in yn&&ft.forEach(ln,function(J,le){void 0===on&&"content-type"===le.toLowerCase()?delete ln[le]:yn.setRequestHeader(le,J)}),ft.isUndefined(_.withCredentials)||(yn.withCredentials=!!_.withCredentials),xn&&"json"!==xn&&(yn.responseType=_.responseType),"function"==typeof _.onDownloadProgress&&yn.addEventListener("progress",_.onDownloadProgress),"function"==typeof _.onUploadProgress&&yn.upload&&yn.upload.addEventListener("progress",_.onUploadProgress),(_.cancelToken||_.signal)&&(tr=function(ue){!yn||(it(!ue||ue&&ue.type?new Zn("canceled"):ue),yn.abort(),yn=null)},_.cancelToken&&_.cancelToken.subscribe(tr),_.signal&&(_.signal.aborted?tr():_.signal.addEventListener("abort",tr))),on||(on=null),yn.send(on)})},rr=ye,Ti=function(_,Pe){Ue.forEach(_,function(it,on){on!==Pe&&on.toUpperCase()===Pe.toUpperCase()&&(_[Pe]=it,delete _[on])})},bo=ve,Gr={"Content-Type":"application/x-www-form-urlencoded"};function pi(ke,_){!rr.isUndefined(ke)&&rr.isUndefined(ke["Content-Type"])&&(ke["Content-Type"]=_)}var qr={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function uo(){var ke;return("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(ke=Ht),ke}(),transformRequest:[function(_,Pe){return Ti(Pe,"Accept"),Ti(Pe,"Content-Type"),rr.isFormData(_)||rr.isArrayBuffer(_)||rr.isBuffer(_)||rr.isStream(_)||rr.isFile(_)||rr.isBlob(_)?_:rr.isArrayBufferView(_)?_.buffer:rr.isURLSearchParams(_)?(pi(Pe,"application/x-www-form-urlencoded;charset=utf-8"),_.toString()):rr.isObject(_)||Pe&&"application/json"===Pe["Content-Type"]?(pi(Pe,"application/json"),function gi(ke,_,Pe){if(rr.isString(ke))try{return(_||JSON.parse)(ke),rr.trim(ke)}catch(He){if("SyntaxError"!==He.name)throw He}return(Pe||JSON.stringify)(ke)}(_)):_}],transformResponse:[function(_){var Pe=this.transitional||qr.transitional,on=!(Pe&&Pe.silentJSONParsing)&&"json"===this.responseType;if(on||Pe&&Pe.forcedJSONParsing&&rr.isString(_)&&_.length)try{return JSON.parse(_)}catch(ln){if(on)throw"SyntaxError"===ln.name?bo(ln,this,"E_JSON_PARSE"):ln}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(_){return _>=200&&_<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};rr.forEach(["delete","get","head"],function(_){qr.headers[_]={}}),rr.forEach(["post","put","patch"],function(_){qr.headers[_]=rr.merge(Gr)});var Di=qr,Ir=ye,go=Di,Zo=function(_){return!(!_||!_.__CANCEL__)},On=ye,Lr=function(_,Pe,He){var it=this||go;return Ir.forEach(He,function(ln){_=ln.call(it,_,Pe)}),_},Yr=Zo,So=Di,mi=Gn;function Zt(ke){if(ke.cancelToken&&ke.cancelToken.throwIfRequested(),ke.signal&&ke.signal.aborted)throw new mi("canceled")}var Cr=ye,ki=function(_,Pe){Pe=Pe||{};var He={};function it(yn,Si){return Cr.isPlainObject(yn)&&Cr.isPlainObject(Si)?Cr.merge(yn,Si):Cr.isPlainObject(Si)?Cr.merge({},Si):Cr.isArray(Si)?Si.slice():Si}function on(yn){return Cr.isUndefined(Pe[yn])?Cr.isUndefined(_[yn])?void 0:it(void 0,_[yn]):it(_[yn],Pe[yn])}function ln(yn){if(!Cr.isUndefined(Pe[yn]))return it(void 0,Pe[yn])}function xn(yn){return Cr.isUndefined(Pe[yn])?Cr.isUndefined(_[yn])?void 0:it(void 0,_[yn]):it(void 0,Pe[yn])}function tr(yn){return yn in Pe?it(_[yn],Pe[yn]):yn in _?it(void 0,_[yn]):void 0}var Fn={url:ln,method:ln,data:ln,baseURL:xn,transformRequest:xn,transformResponse:xn,paramsSerializer:xn,timeout:xn,timeoutMessage:xn,withCredentials:xn,adapter:xn,responseType:xn,xsrfCookieName:xn,xsrfHeaderName:xn,onUploadProgress:xn,onDownloadProgress:xn,decompress:xn,maxContentLength:xn,maxBodyLength:xn,transport:xn,httpAgent:xn,httpsAgent:xn,cancelToken:xn,socketPath:xn,responseEncoding:xn,validateStatus:tr};return Cr.forEach(Object.keys(_).concat(Object.keys(Pe)),function(Si){var Eo=Fn[Si]||on,mo=Eo(Si);Cr.isUndefined(mo)&&Eo!==tr||(He[Si]=mo)}),He},zr={};["object","boolean","number","function","string","symbol"].forEach(function(ke,_){zr[ke]=function(He){return typeof He===ke||"a"+(_<1?"n ":" ")+ke}});var Hn={};zr.transitional=function(_,Pe,He){function it(on,ln){return"[Axios v0.25.0] Transitional option '"+on+"'"+ln+(He?". "+He:"")}return function(on,ln,xn){if(!1===_)throw new Error(it(ln," has been removed"+(Pe?" in "+Pe:"")));return Pe&&!Hn[ln]&&(Hn[ln]=!0,console.warn(it(ln," has been deprecated since v"+Pe+" and will be removed in the near future"))),!_||_(on,ln,xn)}};var Po=ye,Fo=Oe,lo=pe,dr=function(_){return Zt(_),_.headers=_.headers||{},_.data=Lr.call(_,_.data,_.headers,_.transformRequest),_.headers=On.merge(_.headers.common||{},_.headers[_.method]||{},_.headers),On.forEach(["delete","get","head","post","put","patch","common"],function(it){delete _.headers[it]}),(_.adapter||So.adapter)(_).then(function(it){return Zt(_),it.data=Lr.call(_,it.data,it.headers,_.transformResponse),it},function(it){return Yr(it)||(Zt(_),it&&it.response&&(it.response.data=Lr.call(_,it.response.data,it.response.headers,_.transformResponse))),n.reject(it)})},Uo=ki,Wi={assertOptions:function so(ke,_,Pe){if("object"!=typeof ke)throw new TypeError("options must be an object");for(var He=Object.keys(ke),it=He.length;it-- >0;){var on=He[it],ln=_[on];if(ln){var xn=ke[on],tr=void 0===xn||ln(xn,on,ke);if(!0!==tr)throw new TypeError("option "+on+" must be "+tr)}else if(!0!==Pe)throw Error("Unknown option "+on)}},validators:zr},Ei=Wi.validators;function Ri(ke){this.defaults=ke,this.interceptors={request:new lo,response:new lo}}Ri.prototype.request=function(_,Pe){if("string"==typeof _?(Pe=Pe||{}).url=_:Pe=_||{},!Pe.url)throw new Error("Provided config url is not valid");(Pe=Uo(this.defaults,Pe)).method=Pe.method?Pe.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var He=Pe.transitional;void 0!==He&&Wi.assertOptions(He,{silentJSONParsing:Ei.transitional(Ei.boolean),forcedJSONParsing:Ei.transitional(Ei.boolean),clarifyTimeoutError:Ei.transitional(Ei.boolean)},!1);var it=[],on=!0;this.interceptors.request.forEach(function(mo){"function"==typeof mo.runWhen&&!1===mo.runWhen(Pe)||(on=on&&mo.synchronous,it.unshift(mo.fulfilled,mo.rejected))});var xn,ln=[];if(this.interceptors.response.forEach(function(mo){ln.push(mo.fulfilled,mo.rejected)}),!on){var tr=[dr,void 0];for(Array.prototype.unshift.apply(tr,it),tr=tr.concat(ln),xn=n.resolve(Pe);tr.length;)xn=xn.then(tr.shift(),tr.shift());return xn}for(var Fn=Pe;it.length;){var yn=it.shift(),Si=it.shift();try{Fn=yn(Fn)}catch(Eo){Si(Eo);break}}try{xn=dr(Fn)}catch(Eo){return n.reject(Eo)}for(;ln.length;)xn=xn.then(ln.shift(),ln.shift());return xn},Ri.prototype.getUri=function(_){if(!_.url)throw new Error("Provided config url is not valid");return _=Uo(this.defaults,_),Fo(_.url,_.params,_.paramsSerializer).replace(/^\?/,"")},Po.forEach(["delete","get","head","options"],function(_){Ri.prototype[_]=function(Pe,He){return this.request(Uo(He||{},{method:_,url:Pe,data:(He||{}).data}))}}),Po.forEach(["post","put","patch"],function(_){Ri.prototype[_]=function(Pe,He,it){return this.request(Uo(it||{},{method:_,url:Pe,data:He}))}});var xo=Ri,Mo=Gn;function Vo(ke){if("function"!=typeof ke)throw new TypeError("executor must be a function.");var _;this.promise=new n(function(it){_=it});var Pe=this;this.promise.then(function(He){if(Pe._listeners){var it,on=Pe._listeners.length;for(it=0;it<on;it++)Pe._listeners[it](He);Pe._listeners=null}}),this.promise.then=function(He){var it,on=new n(function(ln){Pe.subscribe(ln),it=ln}).then(He);return on.cancel=function(){Pe.unsubscribe(it)},on},ke(function(it){Pe.reason||(Pe.reason=new Mo(it),_(Pe.reason))})}Vo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Vo.prototype.subscribe=function(_){this.reason?_(this.reason):this._listeners?this._listeners.push(_):this._listeners=[_]},Vo.prototype.unsubscribe=function(_){if(this._listeners){var Pe=this._listeners.indexOf(_);-1!==Pe&&this._listeners.splice(Pe,1)}},Vo.source=function(){var _;return{token:new Vo(function(it){_=it}),cancel:_}};var es=Vo,ts=ye,fi=ye,Oi=s,Qo=xo,No=ki,Sn=function en(ke){var _=new Qo(ke),Pe=Oi(Qo.prototype.request,_);return fi.extend(Pe,Qo.prototype,_),fi.extend(Pe,_),Pe.create=function(it){return en(No(ke,it))},Pe}(Di);Sn.Axios=Qo,Sn.Cancel=Gn,Sn.CancelToken=es,Sn.isCancel=Zo,Sn.VERSION="0.25.0",Sn.all=function(_){return n.all(_)},Sn.spread=function(_){return function(He){return _.apply(null,He)}},Sn.isAxiosError=function(_){return ts.isObject(_)&&!0===_.isAxiosError},o.exports=Sn,o.exports.default=Sn;var Kn=o.exports;class vn{isEmpty(){return!this.isPresent()}static of(_){if(null!=_)return new Tr(_);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(_){return vn.of(_)}static ofNullable(_){return null!=_?new Tr(_):new $r}static empty(){return new $r}static from(_){switch(_.kind){case"present":return vn.of(_.value);case"empty":return vn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class Tr extends vn{constructor(_){super(),this.payload=_}isPresent(){return!0}get(){return this.payload}ifPresent(_){_(this.payload)}ifPresentOrElse(_,Pe){_(this.payload)}filter(_){return _(this.payload)?this:vn.empty()}map(_){const Pe=_(this.payload);return vn.ofNullable(Pe)}flatMap(_){return _(this.payload)}or(_){return this}orElse(_){return this.payload}orElseGet(_){return this.payload}orElseThrow(_){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(_){return _.present(this.payload)}toJSON(_){return this.payload}}class $r extends vn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(_){}ifPresentOrElse(_,Pe){Pe()}filter(_){return this}map(_){return vn.empty()}flatMap(_){return vn.empty()}or(_){return _()}orElse(_){return _}orElseGet(_){return this.orElse(_())}orElseThrow(_){throw _()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(_){return _.empty()}toJSON(_){return null}}function Ot(ke){globalThis._vonageMediaProcessorMetadata=ke}function Rt(){return globalThis._vonageMediaProcessorMetadata}class jt{constructor(){const _=Rt();this._report={action:vn.empty(),applicationId:vn.ofNullable(void 0!==_&&null!=_?_.appId:null),timestamp:Date.now(),fps:vn.empty(),framesTransformed:vn.empty(),guid:vn.empty(),highestFrameTransformCpu:vn.empty(),message:vn.empty(),source:vn.ofNullable(void 0!==_&&null!=_?_.sourceType:null),transformedFps:vn.empty(),transformerType:vn.empty(),variation:vn.empty(),videoHeight:vn.empty(),videoWidth:vn.empty(),version:"1.2.7",error:vn.empty(),proxyUrl:vn.ofNullable(void 0!==_&&null!=_?_.proxyUrl:null)}}action(_){return this._report.action=vn.ofNullable(_),this}framesTransformed(_){return this._report.framesTransformed=vn.ofNullable(_),this}fps(_){return this._report.fps=vn.ofNullable(_),this}guid(_){return this._report.guid=vn.ofNullable(_),this}message(_){return this._report.message=vn.ofNullable(_),this}transformedFps(_){return this._report.transformedFps=vn.ofNullable(_),this}transformerType(_){return this._report.transformerType=vn.ofNullable(_),this}variation(_){return this._report.variation=vn.ofNullable(_),this}videoHeight(_){return this._report.videoHeight=vn.ofNullable(_),this}videoWidth(_){return this._report.videoWidth=vn.ofNullable(_),this}error(_){return this._report.error=vn.ofNullable(_),this}build(){return this._report}}class gn{static report(_){return new n((Pe,He)=>{if(_.applicationId.isEmpty()||_.source.isEmpty())return void Pe("success");let it=Kn.create(),ln="hlg.tokbox.com/prod/logging/vcp_webrtc";if(_.proxyUrl.isEmpty())ln="https://"+ln;else{let xn;xn="/"!==_.proxyUrl.get().slice(_.proxyUrl.get().length-1)?_.proxyUrl.get()+"/":_.proxyUrl.get(),ln=xn+ln}var ke;it.post(ln,(ke=_,JSON.stringify(ke,(_,Pe)=>{if(null!==Pe)return Pe})),{timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}}).then(xn=>{console.log(xn),Pe("success")}).catch(xn=>{console.log(xn),He(xn)})})}}var Nn,li=new Uint8Array(16);function mr(){if(!Nn&&!(Nn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nn(li)}var yi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Br(ke){return"string"==typeof ke&&yi.test(ke)}for(var ei=[],vi=0;vi<256;++vi)ei.push((vi+256).toString(16).substr(1));function Qn(ke,_,Pe){var He=(ke=ke||{}).random||(ke.rng||mr)();if(He[6]=15&He[6]|64,He[8]=63&He[8]|128,_){Pe=Pe||0;for(var it=0;it<16;++it)_[Pe+it]=He[it];return _}return function ti(ke){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Pe=(ei[ke[_+0]]+ei[ke[_+1]]+ei[ke[_+2]]+ei[ke[_+3]]+"-"+ei[ke[_+4]]+ei[ke[_+5]]+"-"+ei[ke[_+6]]+ei[ke[_+7]]+"-"+ei[ke[_+8]]+ei[ke[_+9]]+"-"+ei[ke[_+10]]+ei[ke[_+11]]+ei[ke[_+12]]+ei[ke[_+13]]+ei[ke[_+14]]+ei[ke[_+15]]).toLowerCase();if(!Br(Pe))throw TypeError("Stringified UUID is invalid");return Pe}(He)}const Zi=new WeakMap,ai=new WeakMap,Qi=new WeakMap,Mn=Symbol("anyProducer"),Lo=n.resolve(),ao=Symbol("listenerAdded"),Yo=Symbol("listenerRemoved");let Ao=!1;function kt(ke){if("string"!=typeof ke&&"symbol"!=typeof ke)throw new TypeError("eventName must be a string or a symbol")}function Jr(ke){if("function"!=typeof ke)throw new TypeError("listener must be a function")}function Fi(ke,_){const Pe=ai.get(ke);return Pe.has(_)||Pe.set(_,new Set),Pe.get(_)}function co(ke,_){const Pe="string"==typeof _||"symbol"==typeof _?_:Mn,He=Qi.get(ke);return He.has(Pe)||He.set(Pe,new Set),He.get(Pe)}function Xr(ke,_){_=Array.isArray(_)?_:[_];let Pe=!1,He=()=>{},it=[];const on={enqueue(ln){it.push(ln),He()},finish(){Pe=!0,He()}};for(const ln of _)co(ke,ln).add(on);return{next(){var ln=this;return _asyncToGenerator3(function*(){return it?0===it.length?Pe?(it=void 0,ln.next()):(yield new n(xn=>{He=xn}),ln.next()):{done:!1,value:yield it.shift()}:{done:!0}})()},return(ln){var xn=arguments;return _asyncToGenerator3(function*(){it=void 0;for(const tr of _)co(ke,tr).delete(on);return He(),xn.length>0?{done:!0,value:yield ln}:{done:!0}})()},[Symbol.asyncIterator](){return this}}}function Co(ke){if(void 0===ke)return qo;if(!Array.isArray(ke))throw new TypeError("`methodNames` must be an array of strings");for(const _ of ke)if(!qo.includes(_))throw"string"!=typeof _?new TypeError("`methodNames` element must be a string"):new Error(`${_} is not Emittery method`);return ke}const Bo=ke=>ke===ao||ke===Yo;class bi{static mixin(_,Pe){return Pe=Co(Pe),He=>{if("function"!=typeof He)throw new TypeError("`target` must be function");for(const ln of Pe)if(void 0!==He.prototype[ln])throw new Error(`The property \`${ln}\` already exists on \`target\``);Object.defineProperty(He.prototype,_,{enumerable:!1,get:function it(){return Object.defineProperty(this,_,{enumerable:!1,value:new bi}),this[_]}});const on=ln=>function(...xn){return this[_][ln](...xn)};for(const ln of Pe)Object.defineProperty(He.prototype,ln,{enumerable:!1,value:on(ln)});return He}}static get isDebugEnabled(){if("object"!=typeof i)return Ao;const{env:_}=i||{env:{}};return"emittery"===_.DEBUG||"*"===_.DEBUG||Ao}static set isDebugEnabled(_){Ao=_}constructor(_={}){Zi.set(this,new Set),ai.set(this,new Map),Qi.set(this,new Map),this.debug=_.debug||{},void 0===this.debug.enabled&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(Pe,He,it,on)=>{on=JSON.stringify(on),"symbol"==typeof it&&(it=it.toString());const ln=new Date,xn=`${ln.getHours()}:${ln.getMinutes()}:${ln.getSeconds()}.${ln.getMilliseconds()}`;console.log(`[${xn}][emittery:${Pe}][${He}] Event Name: ${it}\n\tdata: ${on}`)})}logIfDebugEnabled(_,Pe,He){(bi.isDebugEnabled||this.debug.enabled)&&this.debug.logger(_,this.debug.name,Pe,He)}on(_,Pe){Jr(Pe),_=Array.isArray(_)?_:[_];for(const He of _)kt(He),Fi(this,He).add(Pe),this.logIfDebugEnabled("subscribe",He,void 0),Bo(He)||this.emit(ao,{eventName:He,listener:Pe});return this.off.bind(this,_,Pe)}off(_,Pe){Jr(Pe),_=Array.isArray(_)?_:[_];for(const He of _)kt(He),Fi(this,He).delete(Pe),this.logIfDebugEnabled("unsubscribe",He,void 0),Bo(He)||this.emit(Yo,{eventName:He,listener:Pe})}once(_){return new n(Pe=>{const He=this.on(_,it=>{He(),Pe(it)})})}events(_){_=Array.isArray(_)?_:[_];for(const Pe of _)kt(Pe);return Xr(this,_)}emit(_,Pe){var He=this;return _asyncToGenerator3(function*(){kt(_),He.logIfDebugEnabled("emit",_,Pe),function rs(ke,_,Pe){const He=Qi.get(ke);if(He.has(_))for(const it of He.get(_))it.enqueue(Pe);if(He.has(Mn)){const it=n.all([_,Pe]);for(const on of He.get(Mn))on.enqueue(it)}}(He,_,Pe);const it=Fi(He,_),on=Zi.get(He),ln=[...it],xn=Bo(_)?[]:[...on];yield Lo,yield n.all([...ln.map(function(){var tr=_asyncToGenerator3(function*(Fn){if(it.has(Fn))return Fn(Pe)});return function(Fn){return tr.apply(this,arguments)}}()),...xn.map(function(){var tr=_asyncToGenerator3(function*(Fn){if(on.has(Fn))return Fn(_,Pe)});return function(Fn){return tr.apply(this,arguments)}}())])})()}emitSerial(_,Pe){var He=this;return _asyncToGenerator3(function*(){kt(_),He.logIfDebugEnabled("emitSerial",_,Pe);const it=Fi(He,_),on=Zi.get(He),ln=[...it],xn=[...on];yield Lo;for(const tr of ln)it.has(tr)&&(yield tr(Pe));for(const tr of xn)on.has(tr)&&(yield tr(_,Pe))})()}onAny(_){return Jr(_),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Zi.get(this).add(_),this.emit(ao,{listener:_}),this.offAny.bind(this,_)}anyEvent(){return Xr(this)}offAny(_){Jr(_),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Yo,{listener:_}),Zi.get(this).delete(_)}clearListeners(_){_=Array.isArray(_)?_:[_];for(const Pe of _)if(this.logIfDebugEnabled("clear",Pe,void 0),"string"==typeof Pe||"symbol"==typeof Pe){Fi(this,Pe).clear();const He=co(this,Pe);for(const it of He)it.finish();He.clear()}else{Zi.get(this).clear();for(const He of ai.get(this).values())He.clear();for(const He of Qi.get(this).values()){for(const it of He)it.finish();He.clear()}}}listenerCount(_){_=Array.isArray(_)?_:[_];let Pe=0;for(const He of _)if("string"!=typeof He){void 0!==He&&kt(He),Pe+=Zi.get(this).size;for(const it of ai.get(this).values())Pe+=it.size;for(const it of Qi.get(this).values())Pe+=it.size}else Pe+=Zi.get(this).size+Fi(this,He).size+co(this,He).size+co(this).size;return Pe}bindMethods(_,Pe){if("object"!=typeof _||null===_)throw new TypeError("`target` must be an object");Pe=Co(Pe);for(const He of Pe){if(void 0!==_[He])throw new Error(`The property \`${He}\` already exists on \`target\``);Object.defineProperty(_,He,{enumerable:!1,value:this[He].bind(this)})}}}const qo=Object.getOwnPropertyNames(bi.prototype).filter(ke=>"constructor"!==ke);Object.defineProperty(bi,"listenerAdded",{value:ao,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(bi,"listenerRemoved",{value:Yo,writable:!1,enumerable:!0,configurable:!1});var jo=bi;function zo(ke){return function ns(ke){if(function cs(ke){return"object"==typeof ke&&null!==ke&&"message"in ke&&"string"==typeof ke.message}(ke))return ke;try{return new Error(JSON.stringify(ke))}catch(_){return new Error(String(ke))}}(ke).message}var Jo=(()=>((Jo||(Jo={})).FPS_DROP="fps_drop",Jo))();class Wn extends jo{constructor(_,Pe){super(),this.index_=Pe,this.uuid_=Qn(),this.framesTransformed_=0,this.transformer_=_,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in _&&(this.transformerType_=_.getTransformerType());const He=(new jt).action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();gn.report(He)}setTrackExpectedRate(_){this.trackExpectedRate_=_}start(_){var Pe=this;return _asyncToGenerator3(function*(){if(Pe.controller_=_,Pe.transformer_&&"function"==typeof Pe.transformer_.start)try{yield Pe.transformer_.start(_)}catch(He){const it=(new jt).action("MediaTransformer").guid(Pe.uuid_).message(e.errors.transformer_start).transformerType(Pe.transformerType_).variation("Error").error(zo(He)).build();gn.report(it),Pe.emit("error",{eventMetaData:{transformerIndex:Pe.index_},error:He,function:"start"})}})()}transform(_,Pe){var He=this;return _asyncToGenerator3(function*(){var it,on,ln,xn;if(0===He.mediaTransformerQosReportStartTimestamp_&&(He.mediaTransformerQosReportStartTimestamp_=Date.now()),_ instanceof VideoFrame&&(He.videoHeight_=null!=(it=null==_?void 0:_.displayHeight)?it:0,He.videoWidth_=null!=(on=null==_?void 0:_.displayWidth)?on:0),++He.framesFromSource_,He.transformer_)if(He.shouldStop_)console.warn("[Pipeline] flush from transform"),_.close(),He.flush(Pe),Pe.terminate();else try{yield null==(xn=(ln=He.transformer_).transform)?void 0:xn.call(ln,_,Pe),++He.framesTransformed_,500===He.framesTransformed_&&He.mediaTransformerQosReport()}catch(tr){const Fn=(new jt).action("MediaTransformer").guid(He.uuid_).message(e.errors.transformer_transform).transformerType(He.transformerType_).variation("Error").error(zo(tr)).build();gn.report(Fn),He.emit("error",{eventMetaData:{transformerIndex:He.index_},error:tr,function:"transform"})}})()}flush(_){var Pe=this;return _asyncToGenerator3(function*(){if(Pe.transformer_&&"function"==typeof Pe.transformer_.flush&&!Pe.isFlashed_){Pe.isFlashed_=!0;try{yield Pe.transformer_.flush(_)}catch(it){const on=(new jt).action("MediaTransformer").guid(Pe.uuid_).message(e.errors.transformer_flush).transformerType(Pe.transformerType_).variation("Error").error(zo(it)).build();gn.report(on),Pe.emit("error",{eventMetaData:{transformerIndex:Pe.index_},error:it,function:"flush"})}}Pe.mediaTransformerQosReport();const He=(new jt).action("MediaTransformer").guid(Pe.uuid_).transformerType(Pe.transformerType_).variation("Delete").build();gn.report(He)})()}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let _=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,Pe=this.framesFromSource_/_,He=this.framesTransformed_/_;-1!=this.trackExpectedRate_&&.8*this.trackExpectedRate_>Pe&&this.emit("warn",{eventMetaData:{transformerIndex:this.index_},warningType:Jo.FPS_DROP,dropInfo:{requested:this.trackExpectedRate_,current:Pe}});const it=(new jt).action("MediaTransformer").fps(Pe).transformedFps(He).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();gn.report(it),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class ss extends jo{constructor(_){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let Pe=0;Pe<_.length;Pe++){let He=new Wn(_[Pe],Pe);He.on("error",it=>{this.emit("error",it)}),He.on("warn",it=>{this.emit("warn",it)}),this.transformers_.push(He)}}setTrackExpectedRate(_){this.trackExpectedRate_=_;for(let Pe of this.transformers_)Pe.setTrackExpectedRate(this.trackExpectedRate_)}start(_,Pe){var He=this;return _asyncToGenerator3(function*(){if(He.transformers_&&0!==He.transformers_.length){try{let it=_;for(let on of He.transformers_)_=_.pipeThrough(new TransformStream(on));_.pipeTo(Pe).then(_asyncToGenerator3(function*(){console.log("[Pipeline] Setup."),yield Pe.abort(),yield it.cancel(),He.emit("pipelineInfo",{message:"pipeline_ended"})})).catch(function(){var on=_asyncToGenerator3(function*(ln){_.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(xn=>{console.error("[Pipeline] Error from stream transform:",xn)}),yield Pe.abort(ln),yield it.cancel(ln),He.emit("pipelineInfo",{message:"pipeline_ended_with_error"})});return function(ln){return on.apply(this,arguments)}}())}catch(it){return He.emit("pipelineInfo",{message:"pipeline_started_with_error"}),void He.destroy()}He.emit("pipelineInfo",{message:"pipeline_started"}),console.log("[Pipeline] Pipeline started.")}else console.log("[Pipeline] No transformers.")})()}destroy(){var _=this;return _asyncToGenerator3(function*(){console.log("[Pipeline] Destroying Pipeline.");for(let Pe of _.transformers_)Pe.stop()})()}}class us extends jo{constructor(){super(),this.uuid_=Qn(),this.trackExpectedRate_=-1;const _=(new jt).action("MediaProcessor").guid(this.uuid_).variation("Create").build();gn.report(_)}setTrackExpectedRate(_){this.trackExpectedRate_=_,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(_,Pe){return this.readable_=_,this.writable_=Pe,this.transformInternal()}transformInternal(){return new n((_,Pe)=>{if(!this.transformers_||0===this.transformers_.length){const it=(new jt).action("MediaProcessor").guid(this.uuid_).message(e.errors.transformer_none).variation("Error").build();return gn.report(it),void Pe("[MediaProcessor] Need to set transformers.")}if(!this.readable_){const it=(new jt).action("MediaProcessor").guid(this.uuid_).message(e.errors.readable_null).variation("Error").build();return gn.report(it),void Pe("[MediaProcessor] Readable is null.")}if(!this.writable_){const it=(new jt).action("MediaProcessor").guid(this.uuid_).message(e.errors.writable_null).variation("Error").build();return gn.report(it),void Pe("[MediaProcessor] Writable is null.")}let He=!1;this.pipeline_&&(He=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new ss(this.transformers_),this.pipeline_.on("warn",it=>{this.emit("warn",it)}),this.pipeline_.on("error",it=>{this.emit("error",it)}),this.pipeline_.on("pipelineInfo",it=>{He&&("pipeline_started"===it.message?it.message="pipeline_restarted":"pipeline_started_with_error"===it.message&&(it.message="pipeline_restarted_with_error")),this.emit("pipelineInfo",it)}),-1!=this.trackExpectedRate_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{_()}).catch(it=>{Pe(it)})})}setTransformers(_){const Pe=(new jt).action("MediaProcessor").guid(this.uuid_).message(e.updates.transformer_new).variation("Update").build();return gn.report(Pe),this.transformers_=_,this.readable_&&this.writable_?this.transformInternal():n.resolve()}destroy(){return new n(_=>{this.pipeline_&&this.pipeline_.destroy();const Pe=(new jt).action("MediaProcessor").guid(this.uuid_).variation("Delete").build();gn.report(Pe),_()})}}class as{constructor(){this.processor_=null,this.generator_=null}init(_){return new n((Pe,He)=>{try{this.processor_=new MediaStreamTrackProcessor(_)}catch(it){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${it}`),He(it)}try{"audio"===_.kind?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):"video"===_.kind?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):He("kind not supported")}catch(it){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${it}`),He(it)}Pe()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class To{constructor(_){this.insertableStreamHelper_=new as,this.mediaProcessor_=_}setTrack(_){return new n((Pe,He)=>{this.insertableStreamHelper_.init(_).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{Pe(this.insertableStreamHelper_.getProccesorTrack())}).catch(it=>{He(it)})}).catch(it=>{He(it)})})}destroy(){return new n((_,Pe)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{_()}).catch(He=>{Pe(He)}):Pe("no processor")})}}}.call(this,t(0),t(43))},function(d,E,t){"use strict";const n={backgroundBlur:t(699),backgroundReplacement:t(700)},i=s=>!!n[s],r=s=>i(s)?n[s]:null;d.exports={isSupported:i,getConfigurator:r,isValidConfig:s=>{const a=s.type;return!!i(a)&&r(a).isValidConfig(s)}}},function(d,E,t){"use strict";var i=t(1)(t(19));const r=t(312).BlurRadius,e=t(313),o=r.High,a=h=>"low"===h||"high"===h;d.exports={isValidConfig:h=>{if("backgroundBlur"!==(null==h?void 0:h.type))return!1;const p=h.blurStrength;return!p||a(p)},getConfig:function(p){void 0===p&&(p={});const y=(0,i.default)({},e.getConfig(),{transformerType:"BackgroundBlur",radius:o}),v=p.blurStrength;return a(v)&&(y.radius="low"===v?r.Low:r.High),y}}},function(d,E,t){"use strict";var i=t(1)(t(19));const r=t(313),o=c=>/^data:image\/(?:png|jpeg|bmp|gif);base64/.test(c)||/\.(?:png|jpe?g|bmp|gif)$/i.test(c);d.exports={isValidConfig:c=>"backgroundReplacement"===(null==c?void 0:c.type)&&o(c.backgroundImgUrl),getConfig:function(u){void 0===u&&(u={});const l=(0,i.default)({},r.getConfig(),{transformerType:"VirtualBackground"}),p=u.backgroundImgUrl;return o(p)&&(l.backgroundAssetUri=p),l}}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5)),e=n(t(15));const o=t(2)("MediaProcessorConnector");let s=function(c){var u=this;(0,e.default)(this,"setTrack",function(){var l=(0,r.default)(i.default.mark(function h(p){var y;return i.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return y=null,v.prev=1,v.next=4,u.connector.setTrack(p);case 4:y=v.sent,u.originalTrack=p,v.next=11;break;case 8:v.prev=8,v.t0=v.catch(1),o.error(`Error setting track: ${v.t0}`);case 11:return v.abrupt("return",y);case 12:case"end":return v.stop()}},h,null,[[1,8]])}));return function(h){return l.apply(this,arguments)}}()),(0,e.default)(this,"destroy",(0,r.default)(i.default.mark(function l(){return i.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,u.connector.destroy();case 3:p.next=8;break;case 5:p.prev=5,p.t0=p.catch(0),o.warn(`Error destroying connector: ${p.t0}`);case 8:case"end":return p.stop()}},l,null,[[0,5]])}))),(0,e.default)(this,"stopOriginalTrack",()=>{this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null)}),this.connector=c};(0,e.default)(s,"isValidConnector",a=>"function"==typeof(null==a?void 0:a.setTrack)&&"function"==typeof(null==a?void 0:a.destroy)),d.exports=s},function(d,E,t){"use strict";d.exports=n=>!!n&&!!n.apiKey},function(d,E,t){"use strict";d.exports=i=>null===i||!1===i},function(d,E,t){"use strict";d.exports=n=>{var i;n&&(null==(i=n.videoSource)?void 0:i.canvas)&&(!n||!("videoContentHint"in n))&&(n.videoContentHint="detail")}},function(d,E,t){"use strict";const n=t(148);d.exports=r=>{var e;r||(r={});const o=!!n(null==(e=r)?void 0:e.videoSource);r.capableSimulcastScreenshare=o&&(r=>!(null==r||!r.scalableScreenshare))(r)}},function(d,E,t){var n=t(707),i=t(100),r=t(36);d.exports=function e(o,s){return n(o,r(s,3),i)}},function(d,E){d.exports=function t(n,i,r){var e;return r(n,function(o,s,a){if(i(o,s,a))return e=s,!1}),e}},function(d,E,t){"use strict";(function(n){const i=t(53),r=t(74);d.exports=e=>{let u,l,o=e.RTCPeerConnection,a=e.stream,c=e.codecFlags;if(e.env.isLegacyEdge)return!0;const h=()=>{try{u.close()}catch(p){}try{l.close()}catch(p){}u=null,l=null};try{const p={iceServers:[]};r()&&(p.sdpSemantics="plan-b"),u=new o(p),l=new o(p),a.getTracks().forEach(y=>u.addTrack(y,a))}catch(p){return h(),n.resolve(!1)}return u.createOffer().then(p=>{const y={type:p.type,sdp:p.sdp};return Object.keys(c).forEach(O=>{c[O]||(y.sdp=i.removeVideoCodec(y.sdp,O))}),l.setRemoteDescription(y)}).then(()=>!0).catch(()=>!1).then(p=>(h(),p))}}).call(this,t(0))},function(d,E,t){"use strict";const i=t(6).INVALID_PARAMETER;d.exports=r=>{let e=r.otError;return o=>{if(!o)return;const s=(a,c)=>{if(!a)throw e(i,new Error(`iceConfig invalid: ${c}`))};"includeServers"in o&&s(-1!==["all","custom"].indexOf(o.includeServers),".includeServers must be all or custom"),"transportPolicy"in o&&s(-1!==["all","relay"].indexOf(o.transportPolicy),".transportPolicy must be all or relay"),s(Array.isArray(o.customServers),".customServers must be an array"),o.customServers.forEach(a=>{s(a.urls||!("url"in a),"ice servers need .urls, not .url"),s("string"==typeof a.urls||Array.isArray(a.urls),"ice server .urls must be a string or an array"),s(!a.username||"string"==typeof a.username,"ice server .username must be a string if present"),s(!a.credential||"string"==typeof a.credential,"ice server .credential must be a string if present")})}}},function(d,E,t){"use strict";const n=t(3);d.exports=(r,e)=>{let o=!1;return o="boolean"==typeof e?e:r&&r.spc,o&&n.isChrome&&n.version>=98}},function(d,E,t){"use strict";d.exports=e=>{if("string"!=typeof e)throw new Error("secret must be a string");if(e.length<8)throw new Error("secret must have at least 8 characters");if(e.length>256)throw new Error("secret must not exceed 256 characters")}},function(d,E,t){"use strict";const n=t(10);d.exports=function(r){switch(r){case n.AUTHENTICATION_ERROR:case n.INVALID_SESSION_ID:case n.TERMS_OF_SERVICE_FAILURE:case n.UNEXPECTED_SERVER_RESPONSE:return r;case n.ANVIL_EMPTY_RESPONSE_BODY:case n.ANVIL_CONNECT_FAILED:return n.CONNECT_FAILED;default:return n.UNEXPECTED_SERVER_RESPONSE}}},function(d,E,t){"use strict";const n=t(10),i=t(6);d.exports={NOT_CONNECTED:{code:i.NOT_CONNECTED,message:"Cannot use forceMute functionality. You are not connected to the session.",exceptionCode:n.NOT_CONNECTED},PERMISSION_DENIED:{code:i.PERMISSION_DENIED,message:"This token does not allow forceMute usage. The role must be at least `moderator` to enable this functionality",exceptionCode:n.UNABLE_TO_FORCE_MUTE},INVALID_PARAMETER:{code:i.INVALID_PARAMETER,message:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",exceptionCode:n.INVALID_PARAMETER},NOT_FOUND:{code:i.NOT_FOUND,message:"The stream does not exist."},UNEXPECTED_SERVER_RESPONSE:{code:i.UNEXPECTED_SERVER_RESPONSE,message:"An unexpected error occurred.",exceptionCode:n.UNEXPECTED_SERVER_RESPONSE}}},function(d,E,t){"use strict";(function(n){var i=t(1);E.__esModule=!0,E.default=function l(h){void 0===h&&(h={});const p=h.convertRumorError||t(316),y=h.Dispatcher||t(320),O=h.ExceptionCodes||t(10),v=h.hasIceRestartsCapability||t(317),b=h.hasRenegotiationCapability||t(731),T=h.hasE2eeCapability||t(170),C=h.logging||t(2)("RaptorSocket"),w=h.Message||t(321),N=h.OTHelpers||t(8),k=h.RumorSocket||(0,u.default)(),L=h.Signal||t(322),D=h.SignalError||t(736),W=function Z(oe,Q,ne,he,ae,ye,Le){var me=this;let Oe,ge,ce,pe,Ue,de,ve,Ae;void 0===Le&&(Le=[]);const Ye=ae||new y,We=N.statable(this,["disconnected","connecting","connected","error","disconnecting"],"disconnected"),at=function(De){(!De.action||!De.variation)&&C.debug("Expected action and variation"),ye.logEvent((0,o.default)({sessionId:ge,partnerId:Oe,p2p:de,messagingServer:ve,connectionId:oe},De))},At=function(){for(var De=arguments.length,lt=new Array(De),wt=0;wt<De;wt++)lt[wt]=arguments[wt];const In=lt[0];We(In?"error":"connected"),Ue(...lt)},ht=ct=>{let De="clientDisconnected";!this.is("disconnecting")&&Ae&&(De="networkDisconnected"),ct&&4001===ct.code&&(De="networkTimedout"),We("disconnected"),Ye.onClose(De)},Wt=ct=>{Ae=!0,C.error(ct)},$t=()=>{Ye.onReconnecting()},un=()=>{at({action:"Reconnect",variation:"Success",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId}),Ye.onReconnected()},En=()=>{at({action:"Reconnect",variation:"Attempt",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})},nt=ct=>{"connectionLimitExceeded"===ct.message&&(ct.code=O.CONNECTION_LIMIT_EXCEEDED),ct.reason="ConnectToSession";const De=p(ct);at({action:"Reconnect",variation:"Failure",failureReason:ct.reason,failureCode:De.code,failureMessage:De.message,messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})};Object.defineProperty(this,"socketId",{get(){return this._rumor.socketID}}),this.connect=function(De,lt,wt,In){if(!this.is("disconnected","error"))return void C.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");We("connecting"),Oe=lt.partnerId,ge=lt.sessionId,de=lt.p2pEnabled,ve=lt.messagingServer,ce=De,Ue=In,pe={apiKey:Oe,sessionId:ge};const Gn=`/v2/partner/${Oe}/session/${ge}`;this._rumor=new Z.RumorSocket({messagingURL:ne,notifyDisconnectAddress:he,connectionId:oe,enableReconnection:lt.reconnection}),this._rumor.on("close",ht),this._rumor.on("error",Wt),this._rumor.on("reconnecting",$t),this._rumor.on("reconnectAttempt",En),this._rumor.on("reconnectFailure",nt),this._rumor.on("reconnected",un),this._rumor.on("message",Ye.dispatch.bind(Ye));const ft=ut=>{At({reason:"WebSocketConnection",code:ut.code,message:ut.message})};this._rumor.once("error",ft),this._rumor.once("open",()=>{this._rumor.removeListener("error",ft),C.debug(`connected. Subscribing to ${Gn} on ${ne}`),this._rumor.subscribe([Gn]);const ut=Le;(Z.hasIceRestartsCapability()||Z.hasRenegotiationCapability())&&lt.renegotiation&&ut.push("renegotiation"),Z.hasE2eeCapability()&&lt.e2ee&&ut.push("e2ee");const Rn=w.connections.create({apiKey:Oe,sessionId:ge,connectionId:this._rumor.id,connectionEventsSuppressed:wt.connectionEventsSuppressed,capabilities:ut}),Pn=new n(Jt=>{const Mr=bn=>{bn.id===this._rumor.id&&(Jt(bn),ae.off("connection#created",Mr))};ae.on("connection#created",Mr)});this.publish(Rn,{"X-TB-TOKEN-AUTH":ce},!0,(Jt,Mr)=>{if(Jt)return"connectionLimitExceeded"===Jt.message&&(Jt.code=O.CONNECTION_LIMIT_EXCEEDED),void At({reason:"ConnectToSession",code:Jt.code,message:Jt.message,socketId:this.socketId});const bn=Mr&&Mr.data?JSON.parse(Mr.data):null;bn&&(!bn.connection||0===bn.connection.length)&&(bn.connection=[],Array.isArray(bn.stream)&&bn.stream.forEach(Ht=>bn.connection.push(Ht.connection)));const Zn=(Ht,rr)=>{Ht?At({reason:"GetSessionState",code:Ht.code,message:Ht.message,socketId:this.socketId}):At(void 0,rr)};Pn.then(Ht=>{bn.connection.some(Ti=>Ti.id===Ht.id)||bn.connection.unshift(Ht);const rr=(0,a.default)();Ye.registerCallback(rr,Zn),Ye.emit("session#read",bn,rr)})})})},this.disconnect=function(){this.is("disconnected")||(We("disconnecting"),this._rumor.disconnect())},this.publish=function(ct,De,lt,wt){const In=(0,s.default)(wt=wt||function(){}),Gn=(0,a.default)();if(C.debug(`Publish (ID:${Gn}) ${ct}`),this._rumor.readyState!==k.OPEN||this._rumor.reconnecting&&!lt){const ft=new Error("Not connected.");return ft.code=500,In(ft),void C.error("cannot publish until the socket is connected.")}return Ye.registerCallback(Gn,In),this._rumor.publish([he],ct,(0,o.default)({},De,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":Gn,"X-TB-FROM-ADDRESS":this._rumor.id}),lt,function(ft){ft&&In(...arguments)}),Gn},this.send=function(ct,De,lt,wt){void 0===lt&&(lt=!0),void 0===wt&&(wt=()=>{}),me.publish((0,c.default)(ct),De,lt,wt)},this.streamCreate=function(ct,De,lt,wt,In,Gn,ft,ut,Vt){const Rn=w.streams.create({apiKey:Oe,sessionId:ge,streamId:De,name:ct,audioFallbackEnabled:lt,channels:wt,minBitrate:In,maxBitrate:Gn,sourceStreamId:ft,e2ee:ut});this.publish(Rn,{},!0,(Pn,Jt)=>{Vt(Pn,De,Jt)})},this.streamDestroy=function(ct,De){this.publish(w.streams.destroy(Oe,ge,ct,De),{},!0)},this.streamChannelUpdate=function(ct,De,lt){this.publish(w.streamChannels.update(Oe,ge,ct,De,lt),{},!0)},this.subscriberCreate=function(ct,De,lt,wt,In,Gn){this.publish(w.subscribers.create({apiKey:Oe,sessionId:ge,streamId:ct,subscriberId:De,connectionId:this._rumor.id,channelsToSubscribeTo:lt,sourceStreamId:wt,e2ee:In}),{},!0,Gn)},this.subscriberDestroy=function(ct,De){this.publish(w.subscribers.destroy(Oe,ge,ct,De),{},!0)},this.subscriberUpdate=function(ct,De,lt){this.publish(w.subscribers.update(Oe,ge,ct,De,lt),{},!0)},this.subscriberChannelUpdate=function(ct,De,lt,wt){this.publish(w.subscriberChannels.update(Oe,ge,ct,De,lt,wt),{},!0)},this.forceDisconnect=function(ct,De){this.publish(w.connections.destroy({apiKey:Oe,sessionId:ge,connectionId:ct}),{},!0,De)},this.forceUnpublish=function(ct,De){this.publish(w.streams.destroy(Oe,ge,ct),{},!0,De)},this.forceMuteStream=function(ct,De){this.publish(w.forceMute.update((0,r.default)({},pe,{streamId:ct,active:!0})),{},!0,De)},this.forceMuteAll=function(ct,De,lt){this.publish(w.forceMute.update((0,r.default)({},pe,{excludedStreamIds:ct,active:De})),{},!0,lt)},this.signal=function(ct,De,lt){const wt=new L(ge,this._rumor.id,ct||{});wt.valid?this.publish(wt.toRaptorMessage(),{},wt.retryAfterReconnect,In=>{let Gn,ft,ut;const Vt=[400,403,404,413,500];if(In){const nn=parseInt(In.code,10);Vt.includes(nn)?(ft=nn,ut=In.message):(ft=O.UNEXPECTED_SERVER_RESPONSE,ut="Unexpected server response. Try this operation again later."),Gn=new D(ft,ut)}else lt("signal","send",{type:wt.data?typeof wt.data:null});De&&(0,e.default)(De)&&De(Gn,wt.toHash())}):De&&(0,e.default)(De)&&De(new D(wt.error.code,wt.error.reason),wt.toHash())},this.id=function(){return this._rumor&&this._rumor.id}};return W.hasIceRestartsCapability=v,W.hasRenegotiationCapability=b,W.hasE2eeCapability=T,W.RumorSocket=k,W};var r=i(t(19)),e=i(t(17)),o=i(t(9)),s=i(t(51)),a=i(t(16)),c=i(t(318)),u=i(t(715))}).call(this,t(0))},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=function c(u){let h=(void 0===u?{}:u).WebSocket,p=void 0===h?a.default:h;const y=(0,r.default)(),O=(0,o.default)({EventEmitter:i.default,WebSocket:p,logging:e.default,allocateId:y});return(0,s.default)({EventEmitter:i.default,ReconnectableSocket:O,logging:e.default,allocateId:y})};var i=n(t(31)),r=n(t(716)),e=n(t(2)),o=n(t(717)),s=n(t(722)),a=n(t(727))},function(d,E,t){"use strict";E.__esModule=!0,E.default=function n(){let i=0;return()=>(i+=1,i)}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(4)),r=n(t(5)),e=n(t(156)),o=n(t(46)),s=n(t(49)),a=n(t(15)),c=n(t(319)),u=t(77),l=n(t(718)),h=n(t(63)),p=n(t(719)),y=n(t(721));const O=C=>function(){C(...arguments)},v=C=>1e3===C||C>=3e3&&C<=4999,b=u.codes.CLOSE_TIMEOUT;E.default=C=>{var w,N;let L=C.WebSocket,D=C.logging,W=C.allocateId,Z=C.BUFFER_DRAIN_INTERVAL,oe=void 0===Z?100:Z,Q=C.BUFFER_DRAIN_MAX_RETRIES,ne=void 0===Q?10:Q;return N=w=function(he){function ae(Le){var me;const Oe="string"==typeof Le?{url:Le}:Le,ge=Oe.url,ce=Oe.connectTimeout,pe=void 0===ce?15e3:ce,Ue=Oe.pingThreshold,de=void 0===Ue?3e3:Ue,ve=Oe.pingWarningDelay,Ae=void 0===ve?100:ve,Xe=Oe.disconnectThreshold,Ye=void 0===Xe?5900:Xe,We=Oe.reconnectMaxDuration,at=void 0===We?6e4:We;if(!ge)throw new Error("Must provide url");me=he.call(this)||this,(0,a.default)((0,e.default)(me),"_url",void 0),(0,a.default)((0,e.default)(me),"_id",W()),(0,a.default)((0,e.default)(me),"_logger",D(`ReconnectableSocket:${me._id}`)),(0,a.default)((0,e.default)(me),"_webSocket",void 0),(0,a.default)((0,e.default)(me),"_connectTimer",void 0),(0,a.default)((0,e.default)(me),"_pingTimer",void 0),(0,a.default)((0,e.default)(me),"_pingWarningTimer",void 0),(0,a.default)((0,e.default)(me),"_disconnectTimer",void 0),(0,a.default)((0,e.default)(me),"_queuedMessages",[]),(0,a.default)((0,e.default)(me),"_draining",!1),me.readyStateMachine=(0,p.default)({reconnectMaxDuration:at,CLOSED:ae.CLOSED,CLOSING:ae.CLOSING}),me._url=ge,(0,c.default)({logger:me._logger,obj:(0,e.default)(me),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),me.readyStateMachine.observe("onEnterOpen",ht=>{let Wt=ht.from;me._resetPingTimers(),me._resetDisconnectTimer(),me._connectTimer.clear(),"reconnecting"===Wt?(me._queuedMessages.forEach($t=>me.send($t,!0)),me._queuedMessages=[],me.emit("reconnected")):me.emit("open")}),me.readyStateMachine.observe("onEnterClosed",(ht,Wt)=>{me.emit("close",Wt)}),me.readyStateMachine.observe("onEnterClosing",O(function(){var ht=(0,r.default)(i.default.mark(function Wt($t,un){var En,nt,ct;return i.default.wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return En=$t.from,nt=un.code,ct=un.reason,me._clearTimers(),lt.next=5,me._clearSocket({drain:"open"===En,code:nt,reason:ct});case 5:"reconnecting"===En&&me.emit("reconnectFailure",{code:nt,reason:ct}),setTimeout(()=>{me.readyStateMachine.closed({code:nt,reason:ct})});case 7:case"end":return lt.stop()}},Wt)}));return function(Wt,$t){return ht.apply(this,arguments)}}())),me.readyStateMachine.observe("onEnterReconnecting",()=>{me.emit("reconnecting")}),me.readyStateMachine.observe("onDisconnect",O(function(){var ht=(0,r.default)(i.default.mark(function Wt($t,un){var En,ct,De;return i.default.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(En=$t.from,ct=un.code,De=un.reason,"reconnecting"!==$t.to){wt.next=10;break}if(!me._draining){wt.next=5;break}return wt.abrupt("return");case 5:return me._clearTimers(),me.emit("reconnectAttempt"),wt.next=9,me._clearSocket({drain:"open"===En,code:ct,reason:De});case 9:me._createSocket();case 10:case"end":return wt.stop()}},Wt)}));return function(Wt,$t){return ht.apply(this,arguments)}}()));const At=(ht,Wt)=>new l.default({name:ht,duration:Wt,logger:me._logger});return me._connectTimer=At("connect",pe),me._pingTimer=At("ping",de),me._pingWarningTimer=At("pingWarning",Ae),me._disconnectTimer=At("disconnect",Ye),me._createSocket(),me}(0,s.default)(ae,he),(0,o.default)(ae,[{key:"url",get:function(){return"function"==typeof this._url?this._url():this._url}},{key:"reconnecting",get:function(){return"reconnecting"===this.readyStateMachine.state}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:ae.OPEN,open:ae.OPEN,closing:ae.CLOSING,closed:ae.CLOSED,connecting:ae.CONNECTING}[this.readyStateMachine.state]}}]);var ye=ae.prototype;return ye._createSocket=function(){const me=new L(this.url);me.binaryType="arraybuffer";const Oe=(0,h.default)(me);Oe.on("open",()=>{this.readyStateMachine.open()}),Oe.on("close",ge=>{this.readyStateMachine.disconnect({code:ge.code,reason:ge.reason})}),Oe.on("error",ge=>{this.emit("error",ge)}),Oe.on("message",ge=>{this.readyState!==ae.CLOSING&&this._resetDisconnectTimer(),this.emit("message",ge)}),this._webSocket=me,this._webSocketEvents=Oe,this._connectTimer.reset(()=>{const ge={code:b,reason:"Timeout while opening connection"},ce=new Error(ge.reason);ce.code=b,this.emit("error",ce),this.readyStateMachine.disconnect(ge)})},ye._clearSocket=function(){var Le=(0,r.default)(i.default.mark(function Oe(ge){var ce,pe,Ue,de,ve;return i.default.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(Ue=void 0!==(pe=(ce=void 0===ge?{}:ge).drain)&&pe,de=ce.code,ve=ce.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===ae.CLOSED){Xe.next=8;break}if(!Ue){Xe.next=7;break}return Xe.next=7,(0,y.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:oe,BUFFER_DRAIN_MAX_RETRIES:ne});case 7:try{!v(de)||void 0===de&&void 0===ve?this._webSocket.close():this._webSocket.close(de,ve)}catch(Ye){D.error("Could not close websocket",Ye)}case 8:this._draining=!1;case 9:case"end":return Xe.stop()}},Oe,this)}));return function me(Oe){return Le.apply(this,arguments)}}(),ye.send=function(me,Oe){void 0===Oe&&(Oe=!0),this.readyState===ae.OPEN&&this._resetPingTimers();const ge=()=>{try{return this._webSocket.send(me),"sent"}catch(ce){if(this._webSocket.readyState===L.OPEN)return this._logger.debug("webSocket.send threw exception even though it was open:",ce),"dropped";throw ce}};if("reconnecting"===this.readyStateMachine.state){if(this._webSocket.readyState===L.OPEN)try{ge()}catch(ce){}return Oe?(this._queuedMessages.push(me),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",me),"dropped")}return ge()},ye.close=function(me,Oe){if(this.readyState===ae.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===ae.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:me,reason:Oe})},ye._resetPingTimers=function(){this._pingWarningTimer.clear(),this._pingTimer.reset(()=>{this._pingWarningTimer.reset(()=>{this._logger.warn("Did not send message after needsPing event. Other side may disconnect.")}),this.emit("needsPing")})},ye._resetDisconnectTimer=function(){this._disconnectTimer.reset(()=>this.readyStateMachine.disconnect({code:b,reason:"No activity"}))},ye._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach(me=>me.clear())},ae}(C.EventEmitter),(0,a.default)(w,"CONNECTING",L.CONNECTING),(0,a.default)(w,"OPEN",L.OPEN),(0,a.default)(w,"CLOSING",L.CLOSING),(0,a.default)(w,"CLOSED",L.CLOSED),N}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(15));E.default=function(){function e(s){let a=s.name,c=s.logger,u=s.duration;(0,i.default)(this,"name",void 0),(0,i.default)(this,"logger",void 0),(0,i.default)(this,"duration",void 0),(0,i.default)(this,"currId",void 0),this.name=a,this.logger=c,this.duration=u}var o=e.prototype;return o.reset=function(a){this.clear();const c=setTimeout(()=>{void 0!==this.currId&&(this.logger.spam(`${this.name} timer with id ${this.currId} expired, entering callback`),this.currId=void 0,a())},this.duration);this.currId=c,this.logger.spam(`Started ${this.name} timer with id ${this.currId}, expires in ${this.duration}ms`)},o.clear=function(){void 0!==this.currId&&(clearTimeout(this.currId),this.logger.spam(`Cleared ${this.name} timer with id ${this.currId}`),this.currId=void 0)},o.isRunning=function(){return void 0!==this.currId},e}()},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(308)),r=n(t(720)),e=t(77);const s=(0,n(t(2)).default)("ReconnectableSocketStateMachine"),a=e.codes.CLOSE_UNSUPPORTED,c=e.codes.CLOSE_UNEXPECTED_CONDITION;E.default=l=>{let O,h=l.reconnectMaxDuration,p=l.CLOSED,y=l.CLOSING;return new i.default({init:"connecting",methods:{onInvalidTransition(b,T,C){s.error("Invalid state transition",{transition:b,from:T,to:C})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:function v(b){let T=b.code;return("open"===this.state||!O)&&(O=(0,r.default)(h)),h>0&&!O()&&-1===[a,c].indexOf(T)&&-1===[p,y].indexOf(this.readyState)?"reconnecting":"closing"}}]})}},function(d,E,t){"use strict";d.exports=n=>{let i=!1;return setTimeout(()=>{i=!0},n),()=>i}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(4)),r=n(t(5)),e=n(t(106)),o=function(){var s=(0,r.default)(i.default.mark(function a(c,u){var l,h,p,y,O,v;return i.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:p=void 0===(h=(l=void 0===u?{}:u).BUFFER_DRAIN_INTERVAL)?100:h,O=void 0===(y=l.BUFFER_DRAIN_MAX_RETRIES)?10:y,v=0;case 2:if(!(v<O)){T.next=10;break}if(0!==c.bufferedAmount){T.next=5;break}return T.abrupt("break",10);case 5:return T.next=7,(0,e.default)(p);case 7:v+=1,T.next=2;break;case 10:case"end":return T.stop()}},a)}));return function(a,c){return s.apply(this,arguments)}}();E.default=o},function(d,E,t){"use strict";var n=t(108),i=t(1);E.__esModule=!0,E.default=void 0;var r=i(t(156)),e=i(t(46)),o=i(t(49)),s=i(t(15)),a=i(t(16)),c=i(t(319)),u=i(t(723)),l=n(t(172)),h=i(t(726)),p=t(77);E.default=O=>{var v,b;let C=O.ReconnectableSocket,w=O.logging,N=O.allocateId;return b=v=function(k){function L(W){var Z;let oe=W.messagingURL,Q=W.notifyDisconnectAddress,ne=W.connectionId,he=W.enableReconnection,ae=W.pingThreshold,ye=void 0===ae?2e3:ae,Le=W.disconnectThreshold,me=void 0===Le?(he?3:25)*ye-100:Le,Oe=W.reconnectMaxDuration,ge=void 0===Oe?he?6e4:0:Oe;Z=k.call(this)||this,(0,s.default)((0,r.default)(Z),"url",void 0),(0,s.default)((0,r.default)(Z),"id",void 0),(0,s.default)((0,r.default)(Z),"_opened",!1),(0,s.default)((0,r.default)(Z),"_socket",void 0),(0,s.default)((0,r.default)(Z),"_reconnectAttempts",0),(0,s.default)((0,r.default)(Z),"_socketID",(0,a.default)()),(0,s.default)((0,r.default)(Z),"_receivedTransactionIDs",[]),(0,s.default)((0,r.default)(Z),"_notifyDisconnectAddress",void 0),(0,s.default)((0,r.default)(Z),"_enableReconnection",void 0),(0,s.default)((0,r.default)(Z),"_pendingMessages",[]),(0,s.default)((0,r.default)(Z),"_logger",w(`RumorSocket:${N()}`)),(0,c.default)({logger:Z._logger,obj:(0,r.default)(Z),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),Z.url=oe,Z.id=ne,Z._notifyDisconnectAddress=Q,Z._enableReconnection=he,Z.on("error",pe=>{Z._logger.error(pe.message)});try{Z._socket=new C({url:()=>Z._enableReconnection?[Z.url,Z.url.indexOf("?")>=0?"&":"?",`socketId=${Z._socketID}`,Z._socket&&Z._socket.reconnecting?"&reconnect=true":"",`&attempt=${(0,a.default)()}`].join(""):Z.url,pingThreshold:ye,disconnectThreshold:me,reconnectMaxDuration:ge})}catch(pe){Z._logger.error(pe),Z.emit("error",new h.default(p.codes.CLOSE_CONNECT_EXCEPTION))}const ce=()=>{Z._opened=!0,Z._socket.send(u.default.Connect(Z.id,Q).serialize()),Z.emit("open",Z.id)};return Z._socket.once("open",ce),Z._socket.on("message",pe=>Z._receiveMessage(pe)),Z._socket.once("close",pe=>{Z._logger.debug(`ReconnectableSocket closed (code: ${pe.code})`),Z._clearPendingMessages(),-1===[p.codes.CLOSE_NORMAL,p.codes.CLOSE_GOING_AWAY,p.codes.CLOSE_TIMEOUT].indexOf(pe.code)&&Z.emit("error",new h.default(pe.code)),Z.emit("close",pe)}),Z._socket.on("error",pe=>Z.emit("error",new h.default(pe.code))),Z._socket.on("needsPing",()=>{Z._socket.send(u.default.Ping().serialize())}),Z._socket.on("reconnecting",()=>{!Z._opened||(Z._clearPendingMessagesWhichShouldntRetry(),Z.emit("reconnecting"),Z._reconnectAttempts=0)}),Z._socket.on("reconnectAttempt",()=>{!Z._opened||(Z._reconnectAttempts+=1,Z._socket.send(u.default.Disconnect("1").serialize(),!1),Z.emit("reconnectAttempt"))}),Z._socket.on("reconnected",()=>{Z._opened?(Z._pendingMessages.forEach(pe=>{Z._socket.send(pe.rumorMessage.serialize())}),Z.emit("reconnected")):ce()}),Z._socket.on("reconnectFailure",()=>{!Z._opened||(Z._logger.debug(`Reconnecting failed as connectivity was not restored within ${ge}ms`),Z.emit("reconnectFailure",new h.default))}),Z}(0,o.default)(L,k),(0,e.default)(L,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:C.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}}]);var D=L.prototype;return D._clearPendingMessagesWhichShouldntRetry=function(){const Z=this._pendingMessages.filter(oe=>!oe.retryAfterReconnect);this._pendingMessages=this._pendingMessages.filter(oe=>oe.retryAfterReconnect),Z.forEach(oe=>{const Q=new Error("Not connected.");Q.code=500,oe.completion(Q)})},D._clearPendingMessages=function(){this._pendingMessages.forEach(Z=>{const oe=new Error("Not connected.");oe.code=500,Z.completion(oe)}),this._pendingMessages=[]},D._sendAck=function(Z){this._socket.send(u.default.Status([Z.fromAddress],{"TRANSACTION-ID":Z.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},D._receiveMessage=function(Z){const oe=u.default.deserialize(Z.data);if(oe.type!==l.PONG){if(this._logger.debug("Received:",oe),oe.transactionId&&(this._pendingMessages=this._pendingMessages.filter(Q=>(Q.rumorMessage.transactionId===oe.transactionId&&(this._logger.debug("Marking",oe.transactionId," as received"),Q.completion(void 0,oe)),Q.rumorMessage.transactionId!==oe.transactionId))),oe.transactionId&&oe.type!==l.STATUS){if(this._sendAck(oe),this._receivedTransactionIDs.indexOf(oe.transactionId)>=0)return;this._receivedTransactionIDs.push(oe.transactionId)}this.emit("message",oe)}},D.publish=function(Z,oe,Q,ne,he){void 0===he&&(he=()=>{});const ae=u.default.Publish(Z,oe,Q);if("dropped"===this._socket.send(ae.serialize(),!1)&&!ne){const Le=new Error("Not connected.");return Le.code=500,void he(Le)}this._pendingMessages.push({rumorMessage:ae,retryAfterReconnect:ne,completion:he})},D.subscribe=function(Z){this._socket.send(u.default.Subscribe(Z).serialize())},D.unsubscribe=function(Z){this._socket.send(u.default.Unsubscribe(Z).serialize())},D.disconnect=function(){if(this.readyState===L.OPEN&&this._socket.send(u.default.Disconnect().serialize()),this._socket.readyState!==C.CLOSED&&this._socket.readyState!==C.CLOSING){const Z=p.codes.CLOSE_NORMAL;this._socket.close(Z,p.messages[Z])}},D.status=function(Z,oe){this._socket.send(u.default.Status(Z,{"TRANSACTION-ID":oe,"X-TB-FROM-ADDRESS":this.id}).serialize())},D.reconnectRetriesCount=function(){return this._reconnectAttempts},D.messageQueueSize=function(){return this._pendingMessages.length},(0,e.default)(L,[{key:"socketID",get:function(){return this._socketID}}]),L}(O.EventEmitter),(0,s.default)(v,"CONNECTING",C.CONNECTING),(0,s.default)(v,"OPEN",C.OPEN),(0,s.default)(v,"CLOSING",C.CLOSING),(0,s.default)(v,"CLOSED",C.CLOSED),b}},function(d,E,t){"use strict";var n=t(108),i=t(1);E.__esModule=!0,E.default=void 0;var r=i(t(15)),e=i(t(16)),o=t(724),s=n(t(172));E.default=function(){function u(h,p,y,O){(0,r.default)(this,"type",void 0),(0,r.default)(this,"toAddress",void 0),(0,r.default)(this,"headers",void 0),(0,r.default)(this,"data",void 0),this.type=h,this.toAddress=p,this.headers=y,this.data=O,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&"2"!==this.status[0]}return u.prototype.serialize=function(){let p,y,O,v,b=8,T=7;const C=[],w=[],N=[];for(T++,O=0;O<this.toAddress.length;O++)C.push(new o.TextEncoder("utf-8").encode(this.toAddress[O])),T+=2,T+=C[O].length;T++,O=0;for(const D in this.headers)!this.headers.hasOwnProperty(D)||(w.push(new o.TextEncoder("utf-8").encode(D)),N.push(new o.TextEncoder("utf-8").encode(this.headers[D])),T+=4,T+=w[O].length,T+=N[O].length,O++);y=new o.TextEncoder("utf-8").encode(this.data),T+=y.length;const k=new ArrayBuffer(T),L=new Uint8Array(k,0,T);for(T-=4,L[0]=(4278190080&T)>>>24,L[1]=(16711680&T)>>>16,L[2]=(65280&T)>>>8,L[3]=(255&T)>>>0,L[4]=0,L[5]=0,L[6]=this.type,L[7]=this.toAddress.length,O=0;O<C.length;O++)for(p=C[O],L[b++]=p.length>>8&255,L[b++]=p.length>>0&255,v=0;v<p.length;v++)L[b++]=p[v];for(L[b++]=w.length,O=0;O<w.length;O++){for(p=w[O],L[b++]=p.length>>8&255,L[b++]=p.length>>0&255,v=0;v<p.length;v++)L[b++]=p[v];for(p=N[O],L[b++]=p.length>>8&255,L[b++]=p.length>>0&255,v=0;v<p.length;v++)L[b++]=p[v]}for(O=0;O<y.length;O++)L[b++]=y[O];return k},u.deserialize=function(p){(void 0!==typeof window?window:global).Buffer&&(void 0!==typeof window?window:global).Buffer.isBuffer(p)&&(p=(u=>{const l=new ArrayBuffer(u.length),h=new Uint8Array(l);for(let p=0;p<u.length;++p)h[p]=u[p];return l})(p));let y,O,v,b,T,C,w,N,k=8;const L=new Uint8Array(p);y=L[6];const D=[];for(N=0;N<L[7];N++)w=L[k++]<<8,w+=L[k++],O=new Uint8Array(p,k,w),D[N]=new o.TextDecoder("utf-8").decode(O),k+=w;for(v=L[k++],b={},N=0;N<v;N++)w=L[k++]<<8,w+=L[k++],O=new Uint8Array(p,k,w),T=new o.TextDecoder("utf-8").decode(O),k+=w,w=L[k++]<<8,w+=L[k++],O=new Uint8Array(p,k,w),C=new o.TextDecoder("utf-8").decode(O),b[T]=C,k+=w;const W=new Uint8Array(p,k);return new u(y,D,b,new o.TextDecoder("utf-8").decode(W))},u.Connect=function(p,y){const O={uniqueId:p,"TRANSACTION-ID":(0,e.default)(),notifyDisconnectAddress:y};return new u(s.CONNECT,[],O,"")},u.Disconnect=function(p){return new u(s.DISCONNECT,[],{reconnect:p},"")},u.Subscribe=function(p){return new u(s.SUBSCRIBE,p,{},"")},u.Unsubscribe=function(p){return new u(s.UNSUBSCRIBE,p,{},"")},u.Publish=function(p,y,O){return new u(s.MESSAGE,p,O||{},y||"")},u.Status=function(p,y){return new u(s.STATUS,p,y||{},"")},u.Ping=function(){return new u(s.PING,[],{},"")},u}()},function(d,E,t){"use strict";var n=t(108);E.__esModule=!0,E.TextDecoder=E.TextEncoder=void 0;var i=n(t(725));const r=(void 0!==typeof window?window:global).TextEncoder||i.TextEncoder;E.TextEncoder=r;const e=(void 0!==typeof window?window:global).TextDecoder||i.TextDecoder;E.TextDecoder=e},function(d,E,t){"use strict";function n(b,T,C){return T<=b&&b<=C}function i(b){if(void 0===b)return{};if(b===Object(b))return b;throw TypeError("Could not convert argument to dictionary")}function s(b){this.tokens=[].slice.call(b)}t.r(E),t.d(E,"TextEncoder",function(){return y}),t.d(E,"TextDecoder",function(){return p}),s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(b){if(Array.isArray(b))for(var T=b;T.length;)this.tokens.unshift(T.pop());else this.tokens.unshift(b)},push:function(b){if(Array.isArray(b))for(var T=b;T.length;)this.tokens.push(T.shift());else this.tokens.push(b)}};var a=-1;function c(b,T){if(b)throw TypeError("Decoder error");return T||65533}var h="utf-8";function p(b,T){if(!(this instanceof p))return new p(b,T);if((b=void 0!==b?String(b).toLowerCase():h)!==h)throw new Error("Encoding not supported. Only utf-8 is supported");T=i(T),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(T.fatal),this._ignoreBOM=Boolean(T.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function y(b,T){if(!(this instanceof y))return new y(b,T);if((b=void 0!==b?String(b).toLowerCase():h)!==h)throw new Error("Encoding not supported. Only utf-8 is supported");T=i(T),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(T.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function O(b){var T=b.fatal,C=0,w=0,N=0,k=128,L=191;this.handler=function(D,W){if(-1===W&&0!==N)return N=0,c(T);if(-1===W)return a;if(0===N){if(n(W,0,127))return W;if(n(W,194,223))N=1,C=W-192;else if(n(W,224,239))224===W&&(k=160),237===W&&(L=159),N=2,C=W-224;else{if(!n(W,240,244))return c(T);240===W&&(k=144),244===W&&(L=143),N=3,C=W-240}return C<<=6*N,null}if(!n(W,k,L))return C=N=w=0,k=128,L=191,D.prepend(W),c(T);if(k=128,L=191,C+=W-128<<6*(N-(w+=1)),w!==N)return null;var Z=C;return C=N=w=0,Z}}function v(b){this.handler=function(C,w){if(-1===w)return a;if(n(w,0,127))return w;var N,k;n(w,128,2047)?(N=1,k=192):n(w,2048,65535)?(N=2,k=224):n(w,65536,1114111)&&(N=3,k=240);for(var L=[(w>>6*N)+k];N>0;)L.push(128|63&w>>6*(N-1)),N-=1;return L}}p.prototype={decode:function(T,C){var w;w="object"==typeof T&&T instanceof ArrayBuffer?new Uint8Array(T):"object"==typeof T&&"buffer"in T&&T.buffer instanceof ArrayBuffer?new Uint8Array(T.buffer,T.byteOffset,T.byteLength):new Uint8Array(0),C=i(C),this._streaming||(this._decoder=new O({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(C.stream);for(var L,N=new s(w),k=[];!N.endOfStream()&&(L=this._decoder.handler(N,N.read()))!==a;)null!==L&&(Array.isArray(L)?k.push.apply(k,L):k.push(L));if(!this._streaming){do{if((L=this._decoder.handler(N,N.read()))===a)break;null!==L&&(Array.isArray(L)?k.push.apply(k,L):k.push(L))}while(!N.endOfStream());this._decoder=null}return k.length&&-1!==["utf-8"].indexOf(this.encoding)&&!this._ignoreBOM&&!this._BOMseen&&(65279===k[0]?(this._BOMseen=!0,k.shift()):this._BOMseen=!0),function e(b){for(var T="",C=0;C<b.length;++C){var w=b[C];w<=65535?T+=String.fromCharCode(w):(w-=65536,T+=String.fromCharCode(55296+(w>>10),56320+(1023&w)))}return T}(k)}},y.prototype={encode:function(T,C){T=T?String(T):"",C=i(C),this._streaming||(this._encoder=new v(this._options)),this._streaming=Boolean(C.stream);for(var k,w=[],N=new s(function r(b){for(var T=String(b),C=T.length,w=0,N=[];w<C;){var k=T.charCodeAt(w);if(k<55296||k>57343)N.push(k);else if(56320<=k&&k<=57343)N.push(65533);else if(55296<=k&&k<=56319)if(w===C-1)N.push(65533);else{var L=b.charCodeAt(w+1);56320<=L&&L<=57343?(N.push(65536+((1023&k)<<10)+(1023&L)),w+=1):N.push(65533)}w+=1}return N}(T));!N.endOfStream()&&(k=this._encoder.handler(N,N.read()))!==a;)Array.isArray(k)?w.push.apply(w,k):w.push(k);if(!this._streaming){for(;(k=this._encoder.handler(N,N.read()))!==a;)Array.isArray(k)?w.push.apply(w,k):w.push(k);this._encoder=null}return new Uint8Array(w)}}},function(d,E,t){"use strict";var n=t(108),i=t(1);E.__esModule=!0,E.default=void 0;var r=i(t(15)),e=n(t(77));const o=t(6);E.default=function(c){if((0,r.default)(this,"code",void 0),(0,r.default)(this,"message",void 0),(0,r.default)(this,"name",void 0),this.code=e.codes.CLOSE_FALLBACK_CODE,Object.values(e.codes).includes(c))switch(this.code=c,this.code){case e.codes.CLOSE_GOING_AWAY:case e.codes.CLOSE_PROTOCOL_ERROR:case e.codes.CLOSE_UNSUPPORTED:case e.codes.CLOSE_NO_STATUS:case e.codes.CLOSE_ABNORMAL:case e.codes.CLOSE_INCONSISTENT_DATA:case e.codes.CLOSE_POLICY_VIOLATION:case e.codes.CLOSE_TOO_LARGE:case e.codes.CLOSE_UNEXPECTED_CONDITION:case e.codes.CLOSE_CONNECTIVITY_LOSS:case e.codes.CLOSE_CONNECT_EXCEPTION:case e.codes.CLOSE_TIMEOUT:return this.name=o.DISCONNECTED,void(this.message="Action failed due to session disconnection.")}this.message=e.messages[this.code]||"No message available from code."}},function(d,E,t){"use strict";var n=t(1);E.__esModule=!0,E.default=void 0;var i=n(t(728)),r=(void 0!==typeof window?window:global).WebSocket?(void 0!==typeof window?window:global).WebSocket:i.default;E.default=r},function(d,E,t){"use strict";d.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(d,E,t){"use strict";const n=t(730);d.exports=function(r){const e=n(r.data);return e.transactionId=r.transactionId,e.fromAddress=r.headers["X-TB-FROM-ADDRESS"],e}},function(d,E,t){"use strict";d.exports=function(i){if(0===i.length)return{};const r=JSON.parse(i),e=r.uri.substr(1).split("/");e.shift(),""===e[e.length-1]&&e.pop(),r.params={};for(let o=0,s=e.length;o<s-1;o+=2)r.params[e[o]]=e[o+1];return r.resource=e.length%2==0?"channel"===e[e.length-2]&&e.length>6?`${e[e.length-4]}_${e[e.length-2]}`:e[e.length-2]:"channel"===e[e.length-1]&&e.length>5?`${e[e.length-3]}_${e[e.length-1]}`:e[e.length-1],r.signature=`${r.resource}#${r.method}`,r}},function(d,E,t){"use strict";const i=t(3).name,r=t(52).once;d.exports=()=>r()&&["Chrome","Firefox","Safari"].indexOf(i)>-1},function(d,E,t){"use strict";const n=t(3),i=t(52).once;d.exports=()=>i()&&("Chrome"===n.name||"Firefox"===n.name||"Node"===n.name||"Safari"===n.name||"Edge"===n.name)},function(d,E,t){"use strict";const n=t(52).once;d.exports=()=>n()},function(d,E,t){"use strict";d.exports="DTLS_SRTP"},function(d,E,t){"use strict";d.exports=function(i){let r=i.supportsWebRTC;return{supportsWebRTC:"true"===r||!0===r}}},function(d,E,t){"use strict";d.exports=function(i,r){this.code=i,this.message=r,this.reason=r}},function(d,E,t){"use strict";d.exports=function(r){const e=[];this.enqueue=function(){e.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){let s;for(;s=e.shift();)r.trigger(...s)}}},function(d,E,t){"use strict";var i=t(1)(t(19));const r=t(207),e=t(240),o=t(59),s=t(9),a=t(141),c=t(10),u=t(739),l=t(740),h=t(290).default,p={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:v=>`Unexpected server response (${v}). Try this operation again later.`},y=[0,600,1200];d.exports=function O(v){let b=void 0===v?{}:v,T=b.axios,C=void 0===T?r:T,w=b.retryDelays,N=void 0===w?y:w;return h(function k(D){let Z=D.sessionId,oe=D.token,Q=D.clientVersion,ne=D.connectionId;const he=e.parse(D.anvilUrl,!0),ae=e.format({protocol:he.protocol,auth:he.auth,host:he.host,pathname:e.resolve((he.pathname||"").replace(/\/?$/,"/"),`session/${Z}`),query:(0,i.default)({},he.query,{extended:!0})});return C.get(ae,{validateStatus:ye=>ye>=200&&ye<300,headers:{"X-OPENTOK-AUTH":oe,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":Q,"X-TB-CONNECTIONID":ne,Accept:"application/json"}}).catch(ye=>{if(ye.response){const Le=new Error(p.UNEXPECTED_SERVER_RESPONSE(`${ye.response.statusCode}${ye.response.status?` ${ye.response.status}`:""}`));throw Le.code=c.ANVIL_INVALID_HTTP_STATUS,Le.name=u(Le.code),Le}if(ye.request){const Le=new Error(p.CONNECT_FAILED);throw Le.code=c.ANVIL_CONNECT_FAILED,Le.name=u(Le.code),Le}{const Le=c.ANVIL_UNKNOWN_HTTP_ERROR,me=u(ye.code);throw s(ye,{code:Le,name:me}),ye}}).then(ye=>{let Le=ye.data;if("string"==typeof Le){if(Le.length>0)try{JSON.parse(Le)}catch(ce){throw ce.message=p.UNEXPECTED_SERVER_RESPONSE(ce.toString()),ce.code=c.ANVIL_XDOMAIN_OR_PARSING_ERROR,ce.name=u(ce.code),ce}const ge=new Error(0===Le.length?p.EMPTY_RESPONSE:p.BADLY_FORMED);throw ge.code=0===Le.length?c.ANVIL_EMPTY_RESPONSE_BODY:c.ANVIL_BADLY_FORMED_RESPONSE,ge.name=u(ge.code),ge}if(null===Le||0===Le.length){const ge=new Error(p.EMPTY_RESPONSE);throw ge.code=c.ANVIL_EMPTY_RESPONSE_BODY,ge.name=u(ge.code),ge}const Oe=Le.filter(ge=>null!=ge.error)[0];if(Oe){const ge=l(o(Oe,"error.code","500"));"Invalid token format"===o(Oe,"error.errorMessage.message")&&(Oe.error.errorMessage.message+=` Token: ${oe}`);const ce=new Error(o(Oe,"error.errorMessage.message",void 0===ge?`Unknown error: ${Oe.error.code}`:p.NO_ERROR));throw ce.code=ge||c.ANVIL_UNEXPECTED_ERROR_CODE,ce.name=u(ce.code),ce}return new a(Le[0])})},(D,W)=>D.code&&D.code>=3e3&&D.code<=3007&&N[W])}},function(d,E,t){"use strict";const n=t(10),i=t(6),r={[n.ANVIL_BADLY_FORMED_RESPONSE]:i.BADLY_FORMED_RESPONSE,[n.ANVIL_INVALID_HTTP_STATUS]:i.INVALID_HTTP_STATUS,[n.ANVIL_XDOMAIN_OR_PARSING_ERROR]:i.XDOMAIN_OR_PARSING_ERROR,[n.ANVIL_UNKNOWN_HTTP_ERROR]:i.UNKNOWN_HTTP_ERROR,[n.ANVIL_UNEXPECTED_ERROR_CODE]:i.UNEXPECTED_ERROR_CODE,[n.ANVIL_EMPTY_RESPONSE_BODY]:i.EMPTY_RESPONSE_BODY,[n.ANVIL_CONNECT_FAILED]:i.CONNECT_FAILED,[n.AUTHENTICATION_ERROR]:i.AUTHENTICATION_ERROR,[n.INVALID_SESSION_ID]:i.INVALID_SESSION_ID,[n.TERMS_OF_SERVICE_FAILURE]:i.TERMS_OF_SERVICE_FAILURE,[n.UNEXPECTED_SERVER_RESPONSE]:i.UNEXPECTED_SERVER_RESPONSE};d.exports=function e(o){return r[o]}},function(d,E,t){"use strict";const n=t(10),i={400:n.INVALID_SESSION_ID,403:n.AUTHENTICATION_ERROR,404:n.INVALID_SESSION_ID,409:n.TERMS_OF_SERVICE_FAILURE,500:n.UNEXPECTED_SERVER_RESPONSE};d.exports=function r(e){return i[e]}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5)),e=n(t(49));const o=t(31),s=t(742);let a=function(c){function u(h){var p;return void 0===h&&(h={}),(p=c.call(this)||this)._generateKey=h.generateKey||s,p}(0,e.default)(u,c);var l=u.prototype;return l.set=function(){var h=(0,r.default)(i.default.mark(function y(O,v){return i.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.keyPromise=this._generateKey(O,v),C.next=3,this.keyPromise;case 3:this.emit("keyChanged",C.sent);case 5:case"end":return C.stop()}},y,this)}));return function p(y,O){return h.apply(this,arguments)}}(),l.get=function(){var h=(0,r.default)(i.default.mark(function y(){return i.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.keyPromise;case 2:return b.abrupt("return",b.sent);case 4:case"end":return b.stop()}},y,this)}));return function p(){return h.apply(this,arguments)}}(),l.clear=function(){this.keyPromise=void 0},u}(o);d.exports=a},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=function(){var o=(0,r.default)(i.default.mark(function s(a,c){var l,h,p;return i.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=!0,h=new TextEncoder,O.next=5,window.crypto.subtle.importKey("raw",h.encode(c),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 5:return p=O.sent,O.abrupt("return",window.crypto.subtle.deriveKey({name:"PBKDF2",salt:h.encode(a),iterations:1e5,hash:"SHA-256"},p,{name:"AES-CTR",length:256},l,["encrypt","decrypt"]));case 7:case"end":return O.stop()}},s)}));return function(a,c){return o.apply(this,arguments)}}();d.exports=e},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));let o={SFrame:{}};t(3).isNode||(o=t(744));const a=o.SFrame,c=l=>a.createClient(l,{skipVp8PayloadHeader:!0});let u=function(){function l(){this._clientStore={}}var h=l.prototype;return h.createSender=function(){var p=(0,r.default)(i.default.mark(function O(v){return i.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(void 0===v&&(v=0),!this.getSender(v)){T.next=3;break}return T.abrupt("return",this.getSender(v));case 3:return this._clientStore[v]||(this._clientStore[v]={}),T.next=6,c(v);case 6:return this._clientStore[v].sender=T.sent,T.abrupt("return",this.getSender(v));case 8:case"end":return T.stop()}},O,this)}));return function y(O){return p.apply(this,arguments)}}(),h.createReceiver=function(){var p=(0,r.default)(i.default.mark(function O(v){return i.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!this.getReceiver(v)){T.next=2;break}return T.abrupt("return",this.getReceiver(v));case 2:return this._clientStore[v]||(this._clientStore[v]={}),T.next=5,c(v);case 5:return this._clientStore[v].receiver=T.sent,T.abrupt("return",this.getReceiver(v));case 7:case"end":return T.stop()}},O,this)}));return function y(O){return p.apply(this,arguments)}}(),h.getSender=function(y){var O;return null==(O=this._clientStore[y])?void 0:O.sender},h.getReceiver=function(y){var O;return null==(O=this._clientStore[y])?void 0:O.receiver},h.deleteReceiver=function(y){this.getReceiver(y)&&(this._clientStore[y].receiver.deleteReceiver(y),delete this._clientStore[y].receiver)},h.deleteSender=function(y){var O;null==(O=this._clientStore[y])||delete O.sender},l}();d.exports=u},function(d,E,t){(function(n){d.exports=function(i){var r={};function e(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return i[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=i,e.c=r,e.d=function(o,s,a){e.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:a})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,s){if(1&s&&(o=e(o)),8&s||4&s&&"object"==typeof o&&o&&o.__esModule)return o;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&s&&"string"!=typeof o)for(var c in o)e.d(a,c,function(u){return o[u]}.bind(null,c));return a},e.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(s,"a",s),s},e.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},e.p="",e(e.s="./index.js")}({"./Client.js":function(i,r,e){"use strict";e.r(r),e.d(r,"SFrame",function(){return s});var o=e("./Worker.js");const s={createClient:(l=_asyncToGenerator3(function*(h,p){const y=new u;return yield y.init(h,p),y}),function(p,y){return l.apply(this,arguments)})};var l;function a(l){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator3(function*(l){return l instanceof CryptoKey&&"private"==l.type?yield crypto.subtle.exportKey("pkcs8",l):l instanceof CryptoKey?yield crypto.subtle.exportKey("raw",l):l instanceof Uint8Array?l.buffer.slice(0):l.slice(0)}),c.apply(this,arguments)}class u extends EventTarget{constructor(){var h;super(),h=this,this.worker=new o.default,this.transId=1,this.transactions=new Map,this.worker.addEventListener("message",function(){var p=_asyncToGenerator3(function*(y){const O=y.data;if(O.transId){const v=h.transactions.get(O.transId);h.transactions.delete(O.transId),O.error?v.reject(new Error(O.error)):v.resolve(O.result)}else if(O.event){const v=new Event(O.event.name);v.id=O.event.data.id,v.senderId=O.event.data.senderId,h.dispatchEvent(v)}});return function(y){return p.apply(this,arguments)}}()),this.postMessage=(p,y,O)=>new n((v,b)=>{const T=this.transId++;this.worker.postMessage({transId:T,cmd:p,args:y},O),this.transactions.set(T,{resolve:v,reject:b})})}init(h,p){var y=this;return _asyncToGenerator3(function*(){return y.postMessage("init",{senderId:h,config:p})})()}setSenderEncryptionKey(h){var p=this;return _asyncToGenerator3(function*(){const y=yield a(h);return p.postMessage("setSenderEncryptionKey",[y],[y])})()}ratchetSenderEncryptionKey(){var h=this;return _asyncToGenerator3(function*(){return h.postMessage("ratchetSenderEncryptionKey")})()}setSenderSigningKey(h){var p=this;return _asyncToGenerator3(function*(){const y=yield a(h);return p.postMessage("setSenderSigningKey",[y])})()}addReceiver(h){var p=this;return _asyncToGenerator3(function*(){return p.postMessage("addReceiver",[h])})()}setReceiverEncryptionKey(h,p){var y=this;return _asyncToGenerator3(function*(){const O=yield a(p);return y.postMessage("setReceiverEncryptionKey",[h,O],[O])})()}setReceiverVerifyKey(h,p){var y=this;return _asyncToGenerator3(function*(){const O=yield a(p);return y.postMessage("setReceiverVerifyKey",[h,O],[O])})()}deleteReceiver(h){return this.postMessage("deleteReceiver",[h])}encrypt(h,p){var y=this;return _asyncToGenerator3(function*(){const O=p.track.kind,{readable:v,writable:b}=p.createEncodedStreams?p.createEncodedStreams():p.createEncodedVideoStreams?p.createEncodedVideoStreams():p.createEncodedAudioStreams();return y.postMessage("encrypt",{id:h,kind:O,readableStream:v,writableStream:b},[v,b])})()}decrypt(h,p){var y=this;return _asyncToGenerator3(function*(){const O=p.track.kind,{readable:v,writable:b}=p.createEncodedStreams?p.createEncodedStreams():p.createEncodedVideoStreams?p.createEncodedVideoStreams():p.createEncodedAudioStreams();return y.postMessage("decrypt",{id:h,kind:O,readableStream:v,writableStream:b},[v,b])})()}close(){this.worker.terminate();for(let h of this.transactions.values())h.reject(new Error("Client closed"));this.transactions.clear()}}},"./Worker.js":function(i,r,e){"use strict";e.r(r),e.d(r,"default",function(){return a});var o=e("./node_modules/worker-loader/dist/runtime/inline.js"),s=e.n(o);function a(){return s()('/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, \'__esModule\', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === \'object\' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, \'default\', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != \'string\') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module[\'default\']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, \'a\', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = "";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = "./Worker.js");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ "./Worker.js":\n/*!*******************!*\\\n  !*** ./Worker.js ***!\n  \\*******************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/debounce */ "./node_modules/lodash/debounce.js");\n/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/Context.js */ "./lib/Context.js");\n/* harmony import */ var _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/VP8PayloadHeader.js */ "./lib/VP8PayloadHeader.js");\n/* harmony import */ var _lib_Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Utils.js */ "./lib/Utils.js");\n/* harmony import */ var _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/TaskQueue.js */ "./lib/TaskQueue.js");\n\n\n\n\n\n\nconst postDecryptStatusMessage = lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default()((message) => {\n\tpostMessage(message)\n},  1000, { leading: false, trailing: true });\n\nlet context; \n\nonmessage = async (event) => {\n\t//Get data\n\tconst {transId,cmd,args} = event.data;\n\t\n\ttry {\n\t\tlet result = true;\n\t\t\n\t\t//Depending on the cmd\n\t\tswitch(event.data.cmd)\n\t\t{\n\t\t\tcase "init":\n\t\t\t{\n\t\t\t\t//Get info\n\t\t\t\tconst {senderId, config} = args;\n\t\t\t\t//Crate context\n\t\t\t\tcontext = new _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__["Context"](senderId, config);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase "encrypt":\n\t\t\t{\n\t\t\t\t//The recrypt queue\n\t\t\t\tconst tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();\n\t\t\t\t//Get event data\n\t\t\t\tconst{id, kind, readableStream, writableStream} = args;\n\t\t\t\t//Create transform stream foo encrypting\n\t\t\t\tconst transformStream = new TransformStream({\n\t\t\t\t\ttransform: async (chunk, controller)=>{\n\t\t\t\t\t\t//Nothing in clear\n\t\t\t\t\t\tlet skip = 0;\n\t\t\t\t\t\t//Check if it is video and we are skipping vp8 payload header\n\t\t\t\t\t\tif (kind=="video" && context.isSkippingVp8PayloadHeader())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//Get VP8 header\n\t\t\t\t\t\t\tconst vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);\n\t\t\t\t\t\t\t//Skip it\n\t\t\t\t\t\t\tskip = vp8.byteLength;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//Enqueue task\n\t\t\t\t\t\ttasks.enqueue (\n\t\t\t\t\t\t\tcontext.encrypt(kind, id, chunk.data, skip),\n\t\t\t\t\t\t\t(encrypted) => {\n\t\t\t\t\t\t\t\t//Set back encrypted payload\n\t\t\t\t\t\t\t\tchunk.data = encrypted.buffer;\n\t\t\t\t\t\t\t\t//write back\n\t\t\t\t\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(error)=>{\n\t\t\t\t\t\t\t\t//TODO: handle errors\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//Encrypt\n\t\t\t\treadableStream\n\t\t\t\t\t.pipeThrough(transformStream)\n\t\t\t\t\t.pipeTo(writableStream);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase "decrypt":\n\t\t\t{\n\t\t\t\t//The recrypt queue\n\t\t\t\tconst tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();\n\t\t\t\t//Last reveiced senderId\n\t\t\t\tlet senderId = -1;\n\t\t\t\t//Get event data\n\t\t\t\tconst{id, kind, readableStream, writableStream} = args;\n\t\t\t\t//Create transform stream for encrypting\n\t\t\t\tconst transformStream = new TransformStream({\n\t\t\t\t\ttransform: async (chunk, controller)=>{\n\t\t\t\t\t\t//Nothing in clear\n\t\t\t\t\t\tlet skip = 0;\n\t\t\t\t\t\t//Check if it is video and we are skipping vp8 payload header\n\t\t\t\t\t\tif (kind=="video" && context.isSkippingVp8PayloadHeader())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//Get VP8 header\n\t\t\t\t\t\t\tconst vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);\n\t\t\t\t\t\t\t//Skip it\n\t\t\t\t\t\t\tskip = vp8.byteLength;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Enqueue task\n\t\t\t\t\t\ttasks.enqueue(\n\t\t\t\t\t\t\tcontext.decrypt(kind, id, chunk.data, skip),\n\t\t\t\t\t\t\t(decrypted) => {\n\t\t\t\t\t\t\t\t//Set back decrypted payload\n\t\t\t\t\t\t\t\tchunk.data = decrypted.buffer;\n\t\t\t\t\t\t\t\t//write back\n\t\t\t\t\t\t\t\tcontroller.enqueue(chunk);\n\t\t\t\t\t\t\t\t//If it is a sender\n\t\t\t\t\t\t\t\tif (decrypted.senderId!=senderId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//Store it\n\t\t\t\t\t\t\t\t\tsenderId = decrypted.senderId;\n\t\t\t\t\t\t\t\t\t//Launch event\n\t\t\t\t\t\t\t\t\tpostMessage ({event: {\n\t\t\t\t\t\t\t\t\t\tname\t: "authenticated",\n\t\t\t\t\t\t\t\t\t\tdata\t: {\n\t\t\t\t\t\t\t\t\t\t\tid\t : id,\n\t\t\t\t\t\t\t\t\t\t\tsenderId : senderId\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (decrypted.decryptionRestored) {\n\t\t\t\t\t\t\t\t\tpostDecryptStatusMessage({\n\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\tname: "decryptionRestored",\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\tsenderId,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\tif (error.message === \'decryptFailed\') {\n\t\t\t\t\t\t\t\t\tpostDecryptStatusMessage({\n\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\tname: "decryptFailed",\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\tsenderId,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t//Decrypt\n\t\t\t\treadableStream\n\t\t\t\t\t.pipeThrough(transformStream)\n\t\t\t\t\t.pipeTo(writableStream);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\t//Excute "cmd" method on context\n\t\t\t\tresult = await context[cmd](...args || []);\n\t\t}\n\t\t//Send result back\n\t\tpostMessage ({transId,result});\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\t//Send error back\n\t\tpostMessage({transId,error});\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/AesCm128HmacSha256EncryptionKey.js":\n/*!************************************************!*\\\n  !*** ./lib/AesCm128HmacSha256EncryptionKey.js ***!\n  \\************************************************/\n/*! exports provided: AesCm128HmacSha256EncryptionKey */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AesCm128HmacSha256EncryptionKey", function() { return AesCm128HmacSha256EncryptionKey; });\n/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");\n/* harmony import */ var _Salts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Salts.js */ "./lib/Salts.js");\n/* harmony import */ var _IV_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IV.js */ "./lib/IV.js");\n\n\n\n\nconst ratchetKey = (key) => \n\tcrypto.subtle.deriveBits(\n\t\t{\n\t\t\tname : "HKDF",\n\t\t\thash : "SHA-256",\n\t\t\tsalt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].RatchetKey,\n\t\t\tinfo : new ArrayBuffer()\n\t\t},\n\t\tkey,\n\t\t256\n\t);\n\nclass AesCm128HmacSha256EncryptionKey \n{\n\tconstructor(){\n\t\tthis.ratchets = [];\n\t}\n\n\tasync setKey(key)\n\t{\n\t\tif (key instanceof CryptoKey)\n\t\t{\n\t\t\t//Check private key algorithm\n\t\t\tif (key.algorithm.name!="HKDF")\n\t\t\t\t//Error\n\t\t\t\tthrow new Error("Invalid key");\n\t\t} else {\n\t\t\t//Import key\n\t\t\tkey = await crypto.subtle.importKey(\n\t\t\t\t"raw",\n\t\t\t\tkey,\n\t\t\t\t"HKDF",\n\t\t\t\tfalse,\n\t\t\t\t["deriveBits", "deriveKey"]\n\t\t\t);\n\t\t}\n\t\tthis.key = key;\n\t\t\n\t\t//Get salt key\n\t\tthis.saltKey = new Uint8Array(await crypto.subtle.deriveBits(\n\t\t\t{\n\t\t\t\tname : "HKDF",\n\t\t\t\thash : "SHA-256",\n\t\t\t\tsalt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].SaltKey,\n\t\t\t\tinfo : new ArrayBuffer()\n\t\t\t},\n\t\t\tkey,\n\t\t\t128\n\t\t));\n\t\n\t\t//Get encryption key\n\t\tthis.encryptionKey = await crypto.subtle.deriveKey(\n\t\t\t{\n\t\t\t\tname : "HKDF",\n\t\t\t\thash : "SHA-256",\n\t\t\t\tsalt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].EncryptionKey,\n\t\t\t\tinfo : new ArrayBuffer()\n\t\t\t},\n\t\t\tkey,\n\t\t\t{\n\t\t\t\tname : "AES-CTR",\n\t\t\t\tlength : 128\n\t\t\t},\n\t\t\tfalse,\n\t\t\t["encrypt","decrypt"]\n\t\t);\n\t\n\t\t//Get authentication key\n\t\tthis.authKey = await crypto.subtle.deriveKey(\n\t\t\t{\n\t\t\t\tname : "HKDF",\n\t\t\t\thash : "SHA-256",\n\t\t\t\tsalt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].AuthenticationKey,\n\t\t\t\tinfo : new ArrayBuffer()\n\t\t\t},\n\t\t\tkey,\n\t\t\t{\n\t\t\t\tname : "HMAC",\n\t\t\t\thash : "SHA-256",\n\t\t\t\tlength : 256\n\t\t\t},\n\t\t\tfalse,\n\t\t\t["sign","verify"]\n\t\t);\n\t}\n\n\t\n\tasync encrypt(type,header,payload,extraBytes,skip)\n\t{\n\t\t//Encure int\n\t\tskip = skip ? skip : 0;\n\t\t\n\t\t//Create IV\n\t\tconst iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);\n\t\t\n\t\t//Encrypt\n\t\tconst encrypted = await crypto.subtle.encrypt(\n\t\t\t{\n\t\t\t\tname\t: "AES-CTR",\n\t\t\t\tcounter : iv,\n\t\t\t\tlength  : 128\n\t\t\t},\n\t\t\tthis.encryptionKey,\n\t\t\tpayload\n\t\t);\n\t\n\t\t//Get auth tag length from media type\n\t\tconst authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);\n\t\t\n\t\t//Create encrypted frame\n\t\tconst encryptedFrame = new Uint8Array(header.byteLength + payload.byteLength + authTagLength + extraBytes + skip);\n\t\t\n\t\t//Set header and encrypted payolad\n\t\tencryptedFrame.set(header, skip);\n\t\tencryptedFrame.set(new Uint8Array(encrypted), skip + header.length);\n\t\t\n\t\t//Authenticate\n\t\tconst signature = new Uint8Array(await crypto.subtle.sign(\n\t\t\t"HMAC",\n\t\t\tthis.authKey, \n\t\t\tencryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)\n\t\t));\n\t\n\t\t//Truncate\n\t\tconst authTag = signature.subarray(0, authTagLength);\n\t\n\t\t//Append authentication tag\n\t\tencryptedFrame.set(authTag, skip + encrypted.byteLength + header.byteLength );\n\t\t\n\t\t//Done\n\t\treturn [encryptedFrame,authTag];\n\t\t\n\t}\n\t\n\tasync decrypt(type, header, encryptedFrame, extrabytes, skip)\n\t{\n\t\t//Encure int\n\t\tskip = skip ? skip : 0;\n\t\t\n\t\t//Create IV\n\t\tconst iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);\n\t\t\n\t\t//Get auth tag length from media type\n\t\tconst authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);\n\t\t\n\t\t//Get encrypted frame length (without extra bytes from signature)\n\t\tconst frameLength = encryptedFrame.byteLength - extrabytes - skip;\n\t\t\n\t\t//Get authentication tag\n\t\tconst authTag = encryptedFrame.subarray(skip + frameLength - authTagLength, skip + frameLength);\n\t\t\n\t\t//Get encrypted payload\n\t\tconst encrypted = encryptedFrame.subarray(skip + header.byteLength, skip + frameLength - authTagLength);\n\t\t\n\t\t//Calculate signature\n\t\tconst signature = new Uint8Array(await crypto.subtle.sign(\n\t\t\t"HMAC",\n\t\t\tthis.authKey, \n\t\t\tencryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)\n\t\t));\n\t\n\t\t//Authenticate authTag\n\t\tlet authenticated = true;\n\t\t//Avoid timimg attacks by iterating over all bytes\n\t\tfor (let i=0;i<authTagLength;++i)\n\t\t\t//check signature\n\t\t\tauthenticated &= authTag[i]===signature[i];\n\t\t\n\t\t//If not all where equal\n\t\tif (!authenticated)\n\t\t\t//Authentication error\n\t\t\tthrow new Error("Authentication error");\n\t\t\n\t\t//Decrypt\n\t\tconst payload = new Uint8Array (await crypto.subtle.decrypt(\n\t\t\t{\n\t\t\t\tname\t: "AES-CTR",\n\t\t\t\tcounter : iv,\n\t\t\t\tlength  : 128\n\t\t\t},\n\t\t\tthis.encryptionKey,\n\t\t\tencrypted\n\t\t));\n\t\t\n\t\t//Done\n\t\treturn [payload, authTag];\n\t}\n\t\n\tasync ratchet(index)\n\t{\n\t\t// return stored key if exists\n\t\tif (this.ratchets[index]) {\n\t\t\treturn this.ratchets[index];\n\t\t}\n\t\t\n\t\t//Create new key\n\t\tconst key = new AesCm128HmacSha256EncryptionKey();\n\n\t\t// Get previous ratchet\n\t\tconst previousRatchetKey = index === 0 ? this.key : this.ratchets[index - 1].key;\n\t\t\n\t\t//Set ratchet key\n\t\tawait key.setKey(await ratchetKey(previousRatchetKey));\n\t\t\n\t\tthis.ratchets[index] = key;\n\t\t//Done\n\t\treturn key;\n\t}\n\t\n\tstatic getAuthTagLen(type)\n\t{\n\t\treturn type.toLowerCase()==="video" ? 10 : 4;\n\t};\n\t\n\tstatic async create(raw) \n\t{\n\t\t//Create new key\n\t\tconst key = new AesCm128HmacSha256EncryptionKey();\n\t\t//Set raw key\n\t\tawait key.setKey(raw);\n\t\t//Done\n\t\treturn key;\n\t}\n};\n\n\n\n/***/ }),\n\n/***/ "./lib/Context.js":\n/*!************************!*\\\n  !*** ./lib/Context.js ***!\n  \\************************/\n/*! exports provided: Context */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });\n/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");\n/* harmony import */ var _Sender_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sender.js */ "./lib/Sender.js");\n/* harmony import */ var _Receiver_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Receiver.js */ "./lib/Receiver.js");\n\n\n\n\nclass Context\n{\n\t\n\tconstructor(senderId, config)\n\t{\n\t\t//Store config\n\t\tthis.config = Object.assign({}, config);\n\t\t//Only one sender per context\n\t\tthis.sender = new _Sender_js__WEBPACK_IMPORTED_MODULE_1__["Sender"](senderId);\n\t\t\n\t\t//The map of known remote senders\n\t\tthis.receivers = new Map();\n\t}\n\t\n\tisSkippingVp8PayloadHeader()\n\t{\n\t\treturn !!this.config.skipVp8PayloadHeader;\n\t}\n\t\t\n\tasync setSenderEncryptionKey(key)\n\t{\n\t\t//Set it\n\t\treturn this.sender.setEncryptionKey(key);\n\t}\n\t\n\tasync ratchetSenderEncryptionKey()\n\t{\n\t\t//Set it\n\t\treturn this.sender.ratchetEncryptionKey();\n\t}\n\t\n\tasync setSenderSigningKey(key)\n\t{\n\t\t//Set it\n\t\treturn this.sender.setSigningKey(key);\n\t}\n\t\n\taddReceiver(receiverkKeyId)\n\t{\n\t\t//Check we don\'t have a receiver already for that id\n\t\tif(this.receivers.has(receiverkKeyId))\n\t\t\t//Error\n\t\t\tthrow new Error("There was already a receiver for keyId "+receiverkKeyId);\n\t\t//Add new\n\t\tthis.receivers.set(receiverkKeyId, new _Receiver_js__WEBPACK_IMPORTED_MODULE_2__["Receiver"](receiverkKeyId));\n\t}\n\t\n\tasync setReceiverEncryptionKey(receiverkKeyId, key)\n\t{\n\t\t//Get receiver for the sender\n\t\tconst receiver = this.receivers.get(receiverkKeyId);\n\t\t\n\t\t//IF not found\n\t\tif (!receiver)\n\t\t\t//Error\n\t\t\tthrow new Error("No receiver found for keyId "+receiverkKeyId);\n\t\t\n\t\t//Rachet\n\t\treturn receiver.setEncryptionKey(key);\n\t}\n\t\n\tasync setReceiverVerifyKey(receiverkKeyId,key)\n\t{\n\t\t//Get receiver for the sender\n\t\tconst receiver = this.receivers.get(receiverkKeyId);\n\t\t\n\t\t//IF not found\n\t\tif (!receiver)\n\t\t\t//Error\n\t\t\tthrow new Error("No receiver found for keyId "+receiverkKeyId);\n\t\t\n\t\t//Rachet\n\t\treturn receiver.setVerifyKey(key);\n\t}\n\t\n\tdeleteReceiver(receiverkKeyId)\n\t{\n\t\t//Delete receiver\n\t\treturn this.receivers.delete(receiverkKeyId);\n\t}\n\t\n\tasync encrypt(type, ssrcId, frame, skip)\n\t{\n\t\t//Encrypt it\n\t\treturn this.sender.encrypt(type, ssrcId, frame, skip);\n\t}\n\t\n\tasync decrypt(type, ssrcId, encryptedFrame, skip)\n\t{\n\t\t//convert if needed\n\t\tif (!(encryptedFrame instanceof Uint8Array))\n\t\t\tencryptedFrame = new Uint8Array (encryptedFrame);\n\t\t\n\t\t//Parse encrypted payload\n\t\tconst header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].parse(encryptedFrame.subarray(skip));\n\t\t\n\t\t//Get receiver for the sender\n\t\tconst receiver = this.receivers.get(header.keyId);\n\t\t\n\t\t//IF not found\n\t\tif (!receiver)\n\t\t\t//Error\n\t\t\tthrow new Error("No receiver found for keyId " + header.keyId);\n\t\t\n\t\t//Decrypt it\n\t\treturn receiver.decrypt(type, ssrcId, header, encryptedFrame, skip);\n\t}\n\t\n};\n\n\n/***/ }),\n\n/***/ "./lib/EcdsaSignKey.js":\n/*!*****************************!*\\\n  !*** ./lib/EcdsaSignKey.js ***!\n  \\*****************************/\n/*! exports provided: EcdsaSignKey */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaSignKey", function() { return EcdsaSignKey; });\n//TODO: Update to Ed25519 when available\n// https://chromestatus.com/features/4913922408710144\n// https://chromium.googlesource.com/chromium/src/+log/master/components/webcrypto/algorithms/ed25519.cc\n\nclass EcdsaSignKey\n{\n\t\n\tasync setKey(privKey)\n\t{\n\t\t//If it is a crypto key already\n\t\tif (privKey instanceof CryptoKey)\n\t\t{\n\t\t\t//Check private key algorithm\n\t\t\tif (privKey.algorithm.name!="ECDSA" || !privKey.usages.includes("sign"))\n\t\t\t\t//Error\n\t\t\t\tthrow new Error("Invalid key");\n\t\t\t//Set it\n\t\t\tthis.privKey = privKey;\n\t\t} else {\n\t\t\t//Import it\n\t\t\tthis.privKey = await crypto.subtle.importKey(\n\t\t\t\t"pkcs8",\n\t\t\t\tprivKey,\n\t\t\t\t{\n\t\t\t\t\tname\t\t: "ECDSA",\n\t\t\t\t\tnamedCurve\t: "P-521"\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t["sign"]\n\t\t\t);\n\t\t}\n\t}\n\t\n\tasync sign(authTags)\n\t{\n\t\t//Verify\n\t\treturn new Uint8Array(await crypto.subtle.sign(\n\t\t\t{\n\t\t\t  name: "ECDSA",\n\t\t\t  hash: "SHA-512"\n\t\t\t},\n\t\t\tthis.privKey,\n\t\t\tauthTags\n\t\t));\n\t}\n\t\n\tstatic getSignatureLen()\n\t{\n\t\treturn 64;\n\t}\n\t\n\tstatic async create(privKey)\n\t{\n\t\t//Craete key\n\t\tconst key = new EcdsaSignKey();\n\t\t//Set key\n\t\tawait key.setKey(privKey);\n\t\t//Done\n\t\treturn key;\n\t\t\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/EcdsaVerifyKey.js":\n/*!*******************************!*\\\n  !*** ./lib/EcdsaVerifyKey.js ***!\n  \\*******************************/\n/*! exports provided: EcdsaVerifyKey */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaVerifyKey", function() { return EcdsaVerifyKey; });\n\nclass EcdsaVerifyKey\n{\n\tasync setKey(pubKey)\n\t{\n\t\t//If it is a crypto key already\n\t\tif (pubKey instanceof CryptoKey)\n\t\t{\n\t\t\t//Check \n\t\t\tif (pubKey.algorithm.name!="ECDSA" || !pubKey.usages.includes("verify"))\n\t\t\t\t//Error\n\t\t\t\tthrow new Error("Invalid key");\n\t\t\t//Set it\n\t\t\tthis.pubKey = pubKey;\n\t\t} else {\n\t\t\t//Import it\n\t\t\tthis.pubKey = await crypto.subtle.importKey(\n\t\t\t\t"raw",\n\t\t\t\tpubKey,\n\t\t\t\t{\n\t\t\t\t\tname\t\t: "ECDSA",\n\t\t\t\t\tnamedCurve\t: "P-521"\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t["verify"]\n\t\t\t);\n\t\t}\n\t}\n\t\n\tasync verify(signed,signature)\n\t{\n\t\t//Verify\n\t\treturn await window.crypto.subtle.verify(\n\t\t\t{\n\t\t\t\tname: "ECDSA",\n\t\t\t\thash: "SHA-512"\n\t\t\t},\n\t\t\tthis.pubKey,\n\t\t\tsignature,\n\t\t\tsigned\n\t\t);\n\t}\n\t\n\tstatic getSignatureLen()\n\t{\n\t\treturn 64;\n\t}\n\t\n\tstatic async create(pubKey)\n\t{\n\t\t//Craete key\n\t\tconst key = new EcdsaVerifyKey();\n\t\t//Set key\n\t\tawait key.setKey(pubKey);\n\t\t//Done\n\t\treturn key;\n\t\t\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/Header.js":\n/*!***********************!*\\\n  !*** ./lib/Header.js ***!\n  \\***********************/\n/*! exports provided: Header */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Header", function() { return Header; });\n/*\n\t0 1 2 3 4 5 6 7\n\t+-+-+-+-+-+-+-+-+\n\t|S|LEN  |X|  K  |\n\t+-+-+-+-+-+-+-+-+\n\tSFrame header metadata\n\n\tSignature flag (S): 1 bit This field indicates the payload contains a signature of set. Counter Length (LEN): 3 bits This field indicates the length of the CTR fields in bytes. Extended Key Id Flag (X): 1 bit\n\tIndicates if the key field contains the key id or the key length. Key or Key Length: 3 bits This field contains the key id (KID) if the X flag is set to 0, or the key length (KLEN) if set to 1.\n\n\tIf X flag is 0 then the KID is in the range of 0-7 and the frame counter (CTR) is found in the next LEN bytes:\n\n\t 0 1 2 3 4 5 6 7\n\t+-+-+-+-+-+-+-+-+---------------------------------+\n\t|S|LEN  |0| KID |    CTR... (length=LEN)          |\n\t+-+-+-+-+-+-+-+-+---------------------------------+\n\tKey id (KID): 3 bits The key id (0-7). Frame counter (CTR): (Variable length) Frame counter value up to 8 bytes long.\n\n\tif X flag is 1 then KLEN is the length of the key (KID), that is found after the SFrame header metadata byte. After the key id (KID), the frame counter (CTR) will be found in the next LEN bytes:\n\n\t 0 1 2 3 4 5 6 7\n\t+-+-+-+-+-+-+-+-+---------------------------+---------------------------+\n\t|S|LEN  |1|KLEN |   KID... (length=KLEN)    |    CTR... (length=LEN)    |\n\t+-+-+-+-+-+-+-+-+---------------------------+---------------------------+\n*/\nconst Header = {\n\t\n\tparse : function(buffer) \n\t{\n\t\t//Create uint view\n\t\tconst view = new Uint8Array(buffer);\n\t\t\n\t\t//Get metadata\n\t\tconst metadata = view[0];\n\t\t\n\t\t//Get values\n\t\tconst s\t\t= !!(metadata & 0x80);\n\t\tconst len\t= (metadata >> 4) & 0x07;\n\t\tconst x\t\t= !!(metadata & 0x08);\n\t\tconst k\t\t= metadata & 0x07;\n\t\t\n\t\t//Get key id\n\t\tlet keyId = 0;\n\t\t//Check if it is the extented key format\n\t\tif (x)\n\t\t{\n\t\t\t//Read length\n\t\t\tfor (let i=0;i<k;i++)\n\t\t\t\tkeyId = (keyId * 256) + view[i+1];\n\t\t} else {\n\t\t\t//Short version\n\t\t\tkeyId = k;\n\t\t}\n\t\t\n\t\t//Get ctr\n\t\tconst ini = x ? k + 1 : 1;\n\t\tlet counter = 0;\n\t\t//Read length\n\t\tfor (let i=0;i<len;i++)\n\t\t\tcounter = (counter * 256) + view[ini+i];\n\t\t\n\t\t//Get header buffer view\n\t\tconst header = view.subarray(0, x ? k + len + 1 : len + 1);\n\t\t\n\t\t//Add parsed atributes\n\t\theader.signature   = s;\n\t\theader.keyId\t   = keyId;\n\t\theader.counter\t   = counter;\n\t\t\n\t\t//Done\n\t\treturn header; \n\t},\n\tgenerate: function(signature,keyId,counter)\n\t{\n\t\t//Check keyId\n\t\tHeader.checkKeyId(keyId);\n\t\t\n\t\t//Calcultate variavle length\n\t\tconst varlen = (x) => x ? parseInt(Math.log(x) / Math.log(256))+1 : 1;\n\t\t\n\t\t//Get key extension and length\n\t\tconst x = keyId > 7;\n\t\tconst k = x ? varlen(keyId) : keyId;\n\t\t\n\t\t//Get counter length\n\t\tconst len = varlen(counter);\n\t\t\n\t\t//Ensure counter is not huge\n\t\tif (len>7)\n\t\t\t//Error\n\t\t\tthrow new Error("Counter is too big");\n\t\t\n\t\t//Generate header\n\t\tconst header = new Uint8Array( x ? 1 + k + len : 1 + len);\n\t\t\n\t\t//Set metadata header\n\t\theader[0] = !!signature;\n\t\theader[0] = header[0] << 3  | ( len & 0x07);\n\t\theader[0] = header[0] << 1  | x;\n\t\theader[0] = header[0] << 3  | ( k & 0x07);\n\t\t\n\t\t//Add parsed atributes\n\t\theader.signature   = !!signature;\n\t\theader.keyId\t   = keyId;\n\t\theader.counter\t   = counter;\n\t\t\n\t\t//If extended key\n\t\tif (x)\n\t\t\t//Add key id\n\t\t\tfor (let i=0; i<k; ++i)\n\t\t\t\theader[i+1] = (keyId >> (k-1-i)*8) & 0xff;\n\t\t//The coutner init\n\t\tconst ini = x ? k + 1 : 1;\n\t\t//Add counter\n\t\tfor (let i=0; i<len; ++i)\n\t\t\theader[ini+i] = (counter >> (len-1-i)*8) & 0xff;\n\t\t\t\n\t\t\n\t\t//Done\n\t\treturn header;\n\t}\n};\n\nHeader.MaxKeyId = 0xFFFFFFFFFF;\n\nHeader.checkKeyId = function(keyId)\n{\n\t//Check it is possitive\n\tif (keyId<0)\n\t\t//Error\n\t\tthrow new Error("keyId must be possitive");\n\t//Check it is possitive\n\tif (keyId>Header.MaxKeyId)\n\t\t//Error\n\t\tthrow new Error("keyId must be 5 bytes long at most");\n};\n\n\n/***/ }),\n\n/***/ "./lib/IV.js":\n/*!*******************!*\\\n  !*** ./lib/IV.js ***!\n  \\*******************/\n/*! exports provided: IV */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IV", function() { return IV; });\nconst IV = \n{\n\tgenerate : function(keyId,counter,salt)\n\t{\n\t\t//128 bits\n\t\tconst iv = new Uint8Array (16);\n\t\t//Get view\n\t\tconst view = new DataView(iv.buffer);\n\t\t//Set keyId\n\t\tview.setBigUint64(0, BigInt(counter));\n\t\t//Set coutner\n\t\tview.setBigUint64(8, BigInt(keyId));\n\t\t//Xor with salt key\n\t\tfor (let i=0; i<iv.byteLength; ++i)\n\t\t\t//xor\n\t\t\tview.setUint8(i,iv[i]^salt[i]); \n\t\t//return buffer\n\t\treturn iv;\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/Receiver.js":\n/*!*************************!*\\\n  !*** ./lib/Receiver.js ***!\n  \\*************************/\n/*! exports provided: Receiver */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Receiver", function() { return Receiver; });\n/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");\n/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");\n/* harmony import */ var _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EcdsaVerifyKey.js */ "./lib/EcdsaVerifyKey.js");\n/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");\n\n\n\n\n\nconst MaxRatchetAttempts = 5;\nconst ReplayWindow = 128;\nconst KeyTimeout = 1000;\n\nclass Receiver\n{\n\tconstructor(senderId)\n\t{\n\t\t//Check keyId\n\t\t_Header_js__WEBPACK_IMPORTED_MODULE_1__["Header"].checkKeyId(senderId);\n\t\t\n\t\t//Store sender id\n\t\tthis.senderId = senderId;\n\t\t//Last received counter\n\t\tthis.maxReceivedCounter = -1;\n\t\t//Number or ratchets of current key\n\t\tthis.numKeyRatchets = 0;\n\t\t//Create keyring\n\t\tthis.keyring = [];\n\t\t//Pending verified tags\n\t\tthis.pending = new Map();\n\t\t// has failed decryption\n\t\tthis.keyFailing = false;\n\n\t\t//Scheduled keys\n\t\tthis.scheduledKeys = new WeakSet ();\n\n\t\t//Function to clear up keys up to given one\n\t\tthis.schedulePreviousKeysTimeout = (key) =>{\n\t\t\t//If this is the only key\n\t\t\tif (this.keyring.length==1 && this.keyring[0]===key)\n\t\t\t\t//Do nothing\n\t\t\t\treturn;\n\t\t\t//If has been already scheduled\n\t\t\tif (this.scheduledKeys.has(key))\n\t\t\t\t//Not do it twice\n\t\t\t\treturn;\n\t\t\t//Add it\n\t\t\tthis.scheduledKeys.add(key);\n\t\t\t//Schedule key timeout of previous keys\n\t\t\tsetTimeout(()=>{\n\t\t\t\t//Find key index\n\t\t\t\tconst i = this.keyring.findIndex(k=>k===key);\n\t\t\t\t//Remove previous keys\n\t\t\t\tthis.keyring = this.keyring.splice(i);\n\t\t\t}, KeyTimeout);\n\t\t};\n\t}\n\t\n\tasync decrypt(type, ssrcId, header, encryptedFrame, skip)\n\t{\n\t\tlet authTag, payload, extrabytes = 0, signature, signed;\n\t\tconst prevAuthTags = [];\n\t\t\n\t\t//convert if needed\n\t\tif (!(encryptedFrame instanceof Uint8Array))\n\t\t\tencryptedFrame = new Uint8Array (encryptedFrame);\n\n\t\t// Replay attack protection\n\t\tif (header.counter < this.maxReceivedCounter && (this.maxReceivedCounter - header.counter) > ReplayWindow) {\n\t\t\t//Error\n\t\t\tthrow new Error("Replay check failed, frame counter too old");\n\t\t}\n\t\t\n\t\t//Check if frame contains signature\n\t\tif (header.signature)\n\t\t{\n\t\t\t//Start from the end\n\t\t\tlet end = encryptedFrame.byteLength;\n\t\t\t\n\t\t\t//Get lengths\n\t\t\tconst singatureLength = ECDSAVerifyKey.getSignatureLen();\n\t\t\tconst authTagLength   = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);\n\t\t\t\n\t\t\t//Get signature\n\t\t\tsignature = encryptedFrame.subarray(end - singatureLength, end);\n\t\t\t//Move backward\n\t\t\tend -= singatureLength;\n\t\t\t\n\t\t\t//Get number of tags\n\t\t\tconst num = encryptedFrame[end--];\n\t\t\t\n\t\t\t//Read all tags\n\t\t\tfor (let i=0; i<num; ++i)\n\t\t\t{\n\t\t\t\t//Get previous tag\n\t\t\t\tconst prevTag = encryptedFrame.subarray(end - authTagLength, end);\n\t\t\t\t//Move backward\n\t\t\t\tend -= authTagLength;\n\t\t\t\t//Add tag to previous tags in hex\n\t\t\t\tprevAuthTags.push(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(prevTag))\n\t\t\t}\n\t\t\t//Get the extra bytes\n\t\t\textrabytes = encryptedFrame.byteLength - end;\n\t\t\t\n\t\t\t//Move backward to start oth current frame auth tag\n\t\t\tend -= authTagLength;\n\t\t\t\n\t\t\t//Get singed part\n\t\t\tsigned = encryptedFrame.subarray(end, encryptedFrame.byteLength - singatureLength)\n\t\t}\n\n\t\t//For each key in key ring\n\t\tfor (let i=0;i<this.keyring.length;++i)\n\t\t{\n\t\t\t//Get key from ring\n\t\t\tconst key = this.keyring[i];\n\t\t\ttry {\n\t\t\t\t//Try to decrypt payload\n\t\t\t\t[payload, authTag] = await key.decrypt(type, header, encryptedFrame, extrabytes, skip);\n\t\t\t\t//Done\n\t\t\t\tbreak;\n\t\t\t} catch(e) {\n\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\t//If not found yet\n\t\tif (!payload)\n\t\t{\n\t\t\t//Get last key\n\t\t\tconst key = this.keyring[this.keyring.length-1];\n\t\t\t//Try ratchet last key\n\t\t\tfor (let i = 0; i < MaxRatchetAttempts; ++i)\n\t\t\t{\n\t\t\t\t//Ratchet key\n\t\t\t\tconst ratchetKey = await key.ratchet(i);\n\t\t\t\ttry {\n\t\t\t\t\t//Try to decrypt payload\n\t\t\t\t\t[payload, authTag] = await ratchetKey.decrypt(type, header, encryptedFrame, extrabytes, skip);\n\t\t\t\t\t// Set working ratchet as new key\n\t\t\t\t\tthis.keyring.push(ratchetKey);\n\t\t\t\t\tthis.schedulePreviousKeysTimeout(ratchetKey);\n\t\t\t\t\t//Done\n\t\t\t\t\tbreak;\n\t\t\t\t} catch(e) {\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Last check\n\t\tif (!payload) {\n\t\t\t//Decryption failed\n\t\t\tif (this.keyFailing)  {\n\t\t\t\tthrow new Error(\'decryptStillFailing\')\n\t\t\t} else {\n\t\t\t\tthis.keyFailing = true;\n\t\t\t\tthrow new Error("decryptFailed");\n\t\t\t}\n\t\t}\n\n\t\t//If we are sending part of the frame in clear\n\t\tif (skip)\n\t\t\t//Copy skiped payload\n\t\t\tpayload.set(encryptedFrame.subarray(0,skip),0);\n\n\t\t//Check if have received anything from this ssrc before\n\t\tif (!this.pending.has(ssrcId))\n\t\t\t//Add it\n\t\t\tthis.pending.set(ssrcId,new Set());\n\n\t\t//Get pending list\n\t\tconst pending = this.pending.get(ssrcId);\n\n\t\t//Check if it constains signatures\n\t\tif (header.signed)\n\t\t{\n\t\t\t//try to verify list\n\t\t\tif (!await this.verifyKey.verify(signed,signature))\n\t\t\t\t//Error\n\t\t\t\tthrow new Error("Could not verify signature");\n\t\t\t//For each signed tag\n\t\t\tfor (const tag in prevAuthTags)\n\t\t\t\t//Delete from pending to be verified tags\n\t\t\t\tpending.delete(tag);\n\t\t} else {\n\t\t\t//Push this tag to\n\t\t\tpending.add(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(authTag));\n\t\t}\n\n\t\t//Set authenticated sender id and frame Id\n\t\tpayload.senderId = header.keyId;\n\t\tpayload.frameId  = header.counter;\n\n\t\t// inform that decryption is working after previously failing\n\t\tif (this.keyFailing) {\n\t\t\tpayload.decryptionRestored = true;\n\t\t\tthis.keyFailing = false;\n\t\t}\n\n\t\t//Store last received counter\n\t\tthis.maxReceivedCounter = Math.max(header.counter, this.maxReceivedCounter);\n\n\t\t//Return decrypted payload\n\t\treturn payload;\n\t}\n\n\tasync setVerifyKey(key)\n\t{\n\t\t//Create new singing key\n\t\tthis.verifyKey = _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__["EcdsaVerifyKey"].create(key);\n\t}\n\n\tasync setEncryptionKey(raw)\n\t{\n\t\t//Create new encryption key\n\t\tconst key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].create(raw);\n\t\t//Append to the keyring\n\t\tthis.keyring.push(key);\n\t\t//Restart ratchet count number\n\t\tthis.numKeyRatchets = 0;\n\t\t//Activate\n\t\tthis.schedulePreviousKeysTimeout(key);\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/Salts.js":\n/*!**********************!*\\\n  !*** ./lib/Salts.js ***!\n  \\**********************/\n/*! exports provided: Salts */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Salts", function() { return Salts; });\nconst textEncoder = new TextEncoder()\n\nconst Salts =  {\n\t"SaltKey"\t\t: textEncoder.encode("SFrameSaltKey"),\n\t"EncryptionKey"\t\t: textEncoder.encode("SFrameEncryptionKey"),\n\t"AuthenticationKey"\t: textEncoder.encode("SFrameAuthenticationKey"),\n\t"RatchetKey"\t\t: textEncoder.encode("SFrameRatchetKey")\n};\n\n\n/***/ }),\n\n/***/ "./lib/Sender.js":\n/*!***********************!*\\\n  !*** ./lib/Sender.js ***!\n  \\***********************/\n/*! exports provided: Sender */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sender", function() { return Sender; });\n/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");\n/* harmony import */ var _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EcdsaSignKey.js */ "./lib/EcdsaSignKey.js");\n/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");\n\n\n\n\n\nconst SigningFrameInterval = 10;\n\nclass Sender\n{\n\tconstructor(senderId)\n\t{\n\t\t//Check keyId\n\t\t_Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].checkKeyId(senderId);\n\t\t\n\t\t//The global frame counter\n\t\tthis.counter = 0;\n\t\t\n\t\t//Store senderId/keyId\n\t\tthis.senderId = senderId;\n\t\t\n\t\t//Pending frames for signing\n\t\tthis.pending = new Map();\n\t}\n\t\n\tasync encrypt(type, ssrcId, payload, skip)\n\t{\n\t\t//Check we have a valid key\n\t\tif (!this.key)\n\t\t\tthrow Error("Encryption key not set");\n\t\t\n\t\t//convert if needed\n\t\tif (!(payload instanceof Uint8Array))\n\t\t\tpayload = new Uint8Array (payload);\n\t\t\n\t\t//Encure int\n\t\tskip = skip ? skip : 0;\n\t\t\n\t\t//Get counter for frame\n\t\tconst counter = this.counter++;\n\t\t\n\t\t//If we don\'t have the ssrc\n\t\t// TODO FIX https://github.com/medooze/sframe/issues/15 and uncomment line below\n\t\t// if (!this.pending.has(ssrcId))\n\t\t//Create new pending frames array\n\t\t\tthis.pending.set(ssrcId,[]);\n\t\t\n\t\t//Get pending frames for signature\n\t\tconst pending = this.pending.get(ssrcId);\t\t\n\t\t\n\t\t//Do we need to sign the frames?\n\t\tconst signing = this.signingKey && pending.length > SigningFrameInterval;\n\t\t\n\t\t//Get auth tag len for type\n\t\tconst authTagLen = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);\n\t\t\n\t\t//Calculae extra bytes\n\t\tconst extraBytes = signing ? pending.length * _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type) + 1 + _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].getSignatureLen() : 0;\n\t\t\n\t\t//Generate header\n\t\tconst header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].generate(signing,this.senderId,counter);\n\t\t\n\t\t//Encrypt frame\n\t\tconst [encryptedFrame,authTag] = await this.key.encrypt(type, header, payload, extraBytes, skip);\n\t\t\n\t\t//If we are sending part of the frame in clear\n\t\tif (skip)\n\t\t\t//Copy skiped payload\n\t\t\tencryptedFrame.set(payload.subarray(0,skip),0);\n\t\t\n\t\t//If we need to sign the frame\n\t\tif (signing)\n\t\t{\n\t\t\t//Append after auth tag\n\t\t\tlet ini = skip + encryptedFrame.byteLength - extraBytes;\n\t\t\t\n\t\t\t//Get tag list view\n\t\t\tconst authTags = encryptedFrame.subarray(ini - authTagLen, (pending.length + 1) * authTagLen);\n\t\t\t\n\t\t\t//Add all previous tags \n\t\t\tfor (const previousTag of pending)\n\t\t\t{\n\t\t\t\t//Append to frame\n\t\t\t\tencryptedFrame.set(previousTag, ini);\n\t\t\t\t//Move\n\t\t\t\tini += authTagLen;\n\t\t\t}\n\t\t\t\n\t\t\t//Add number of bytes\n\t\t\tencryptedFrame[ini++] = pending.length;\n\t\t\t\n\t\t\t//Create signature with all auth tags (including this frame\'s one)\n\t\t\tconst signature = await this.signingKey.sign(authTags);\n\t\t\t\n\t\t\t//Add signature\n\t\t\tencryptedFrame.set(signature, ini);\n\t\t\t\n\t\t\t//Empty pending list \n\t\t\tthis.pending.set(ssrcId,[]);\n\t\t\t\n\t\t//If we can sign\n\t\t} else if (this.signingKey) {\n\t\t\t//Append a copy of current tag at the begining\n\t\t\tpending.unshift(authTag.slice());\n\t\t}\n\t\t\n\t\t//Set authenticated sender id and frame Id\n\t\tencryptedFrame.senderId = header.keyId;\n\t\tencryptedFrame.frameId  = header.counter;\n\t\t\n\t\t//Done\n\t\treturn encryptedFrame;\n\t}\n\t\n\tasync setSigningKey(key)\n\t{\n\t\t//Create new singing key\n\t\tthis.signingKey = await _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].create(key);\n\t}\n\t\n\tasync setEncryptionKey(key)\n\t{\n\t\t//Create new encryption key\n\t\tthis.key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].create(key);\n\t}\n\t\n\tasync ratchetEncryptionKey()\n\t{\n\t\t//Check we have a valid key\n\t\tif (!this.key)\n\t\t\tthrow Error("Encryption key not set");\n\t\t\n\t\t//Rachet the key and store it\n\t\tthis.key = await this.key.ratchet();\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/TaskQueue.js":\n/*!**************************!*\\\n  !*** ./lib/TaskQueue.js ***!\n  \\**************************/\n/*! exports provided: TaskQueue */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });\nclass TaskQueue\n{\n\tconstructor()\n\t{\n\t\tthis.tasks = [];\n\t\tthis.running = false;\n\t}\n\t\n\tenqueue(promise,callback,error)\n\t{\n\t\t//enqueue task\n\t\tthis.tasks.push({promise,callback,error});\n\t\t//Try run \n\t\tthis.run();\n\t}\n\t\n\tasync run()\n\t{\n\t\t//If already running \n\t\tif (this.running)\n\t\t\t//Nothing\n\t\t\treturn;\n\t\t//Running\n\t\tthis.running = true;\n\t\t//Run all pending tasks\n\t\twhile(this.tasks.length)\n\t\t{\n\t\t\ttry {\n\t\t\t\t//Wait for first promise to finish\n\t\t\t\tconst result = await this.tasks[0].promise;\n\t\t\t\t//Run callback\n\t\t\t\tthis.tasks[0].callback(result); \n\t\t\t} catch(e) {\n\t\t\t\t//Run error callback\n\t\t\t\tthis.tasks[0].error(e); \n\t\t\t}\n\t\t\t//Remove task from queue\n\t\t\tthis.tasks.shift();\n\t\t}\n\t\t//Ended\n\t\tthis.running = false;\n\t}\n}\n\n\n/***/ }),\n\n/***/ "./lib/Utils.js":\n/*!**********************!*\\\n  !*** ./lib/Utils.js ***!\n  \\**********************/\n/*! exports provided: Utils */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });\nconst Utils = \n{\n\ttoHex : function(buffer)\n\t{\n\t\treturn Array.prototype.map.call(buffer instanceof Uint8Array ? buffer : new Uint8Array (buffer), x =>x.toString(16).padStart(2,"0")).join("");\n\t},\n\tfromHex: function(str)\n\t{\n\t\tconst bytes = [];\n\t\tfor (let i=0;i<str.length/2;++i)\n\t\t\tbytes.push(parseInt(str.substring(i*2, (i+1)*2), 16));\n\n\t\treturn new Uint8Array(bytes);\n\t},\n\tequals : function(a,b)\n\t{\n\t\tif (a.byteLength != b.byteLength) return false;\n\t\tfor (let i = 0 ; i != a.byteLength ; i++)\n\t\t\tif (a[i] != b[i]) return false;\n\t\treturn true;\n\t}\n};\n\n\n/***/ }),\n\n/***/ "./lib/VP8PayloadHeader.js":\n/*!*********************************!*\\\n  !*** ./lib/VP8PayloadHeader.js ***!\n  \\*********************************/\n/*! exports provided: VP8PayloadHeader */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n"use strict";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VP8PayloadHeader", function() { return VP8PayloadHeader; });\n\nconst VP8PayloadHeader = {\n\t\n\tparse : function(buffer) \n\t{\n\t\t//Check size\n\t\tif (buffer.byteLength<3)\n\t\t\t//Invalid\n\t\t\treturn null;\n\t\t\n\t\t//Create uint view\n\t\tconst view = new Uint8Array(buffer);\n\t\t\n\t\t//Read comon 3 bytes\n\t\t//   0 1 2 3 4 5 6 7\n                //  +-+-+-+-+-+-+-+-+\n                //  |Size0|H| VER |P|\n                //  +-+-+-+-+-+-+-+-+\n                //  |     Size1     |\n                //  +-+-+-+-+-+-+-+-+\n                //  |     Size2     |\n                //  +-+-+-+-+-+-+-+-+\n\t\tconst firstPartitionSize\t= view[0] >> 5;\n\t\tconst showFrame\t\t\t= view[0] >> 4 & 0x01;\n\t\tconst version\t\t\t= view[0] >> 1 & 0x07;\n\t\tconst isKeyFrame\t\t= (view[0] & 0x01) == 0;\n\n\t\t//check if more\n\t\tif (isKeyFrame)\n\t\t{\n\t\t\t//Check size\n\t\t\tif (buffer.byteLength<10)\n\t\t\t\t//Invalid\n\t\t\t\treturn null;\n\t\t\t//Get size in le\n\t\t\tconst hor = view[7]<<8 | view[6];\n\t\t\tconst ver = view[9]<<8 | view[8];\n\t\t\t//Get dimensions and scale\n\t\t\tconst width\t\t= hor & 0x3fff;\n\t\t\tconst horizontalScale   = hor >> 14;\n\t\t\tconst height\t\t= ver & 0x3fff;\n\t\t\tconst verticalScale\t= ver >> 14;\n\t\t\t//Key frame\n\t\t\treturn view.subarray (0,10);\n\t\t}\n\t\t\n\t\t//No key frame\n\t\treturn view.subarray (0,3);\n\t}\n};\n\n\t\t\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_Symbol.js":\n/*!****************************************!*\\\n  !*** ./node_modules/lodash/_Symbol.js ***!\n  \\****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_baseGetTag.js":\n/*!********************************************!*\\\n  !*** ./node_modules/lodash/_baseGetTag.js ***!\n  \\********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),\n    getRawTag = __webpack_require__(/*! ./_getRawTag */ "./node_modules/lodash/_getRawTag.js"),\n    objectToString = __webpack_require__(/*! ./_objectToString */ "./node_modules/lodash/_objectToString.js");\n\n/** `Object#toString` result references. */\nvar nullTag = \'[object Null]\',\n    undefinedTag = \'[object Undefined]\';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_baseTrim.js":\n/*!******************************************!*\\\n  !*** ./node_modules/lodash/_baseTrim.js ***!\n  \\******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar trimmedEndIndex = __webpack_require__(/*! ./_trimmedEndIndex */ "./node_modules/lodash/_trimmedEndIndex.js");\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, \'\')\n    : string;\n}\n\nmodule.exports = baseTrim;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_freeGlobal.js":\n/*!********************************************!*\\\n  !*** ./node_modules/lodash/_freeGlobal.js ***!\n  \\********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == \'object\' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_getRawTag.js":\n/*!*******************************************!*\\\n  !*** ./node_modules/lodash/_getRawTag.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js");\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_objectToString.js":\n/*!************************************************!*\\\n  !*** ./node_modules/lodash/_objectToString.js ***!\n  \\************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_root.js":\n/*!**************************************!*\\\n  !*** ./node_modules/lodash/_root.js ***!\n  \\**************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar freeGlobal = __webpack_require__(/*! ./_freeGlobal */ "./node_modules/lodash/_freeGlobal.js");\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == \'object\' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function(\'return this\')();\n\nmodule.exports = root;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/_trimmedEndIndex.js":\n/*!*************************************************!*\\\n  !*** ./node_modules/lodash/_trimmedEndIndex.js ***!\n  \\*************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/debounce.js":\n/*!*****************************************!*\\\n  !*** ./node_modules/lodash/debounce.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),\n    now = __webpack_require__(/*! ./now */ "./node_modules/lodash/now.js"),\n    toNumber = __webpack_require__(/*! ./toNumber */ "./node_modules/lodash/toNumber.js");\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = \'Expected a function\';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho\'s article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it\'s invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on(\'resize\', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on(\'click\', _.debounce(sendMail, 300, {\n *   \'leading\': true,\n *   \'trailing\': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { \'maxWait\': 1000 });\n * var source = new EventSource(\'/stream\');\n * jQuery(source).on(\'message\', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on(\'popstate\', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != \'function\') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = \'maxWait\' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = \'trailing\' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we\'re at the\n    // trailing edge, the system time has gone backwards and we\'re treating\n    // it as the trailing edge, or we\'ve hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/isObject.js":\n/*!*****************************************!*\\\n  !*** ./node_modules/lodash/isObject.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String(\'\')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == \'object\' || type == \'function\');\n}\n\nmodule.exports = isObject;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/isObjectLike.js":\n/*!*********************************************!*\\\n  !*** ./node_modules/lodash/isObjectLike.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is object-like. A value is object-like if it\'s not `null`\n * and has a `typeof` result of "object".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == \'object\';\n}\n\nmodule.exports = isObjectLike;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/isSymbol.js":\n/*!*****************************************!*\\\n  !*** ./node_modules/lodash/isSymbol.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),\n    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");\n\n/** `Object#toString` result references. */\nvar symbolTag = \'[object Symbol]\';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol(\'abc\');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == \'symbol\' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/now.js":\n/*!************************************!*\\\n  !*** ./node_modules/lodash/now.js ***!\n  \\************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n\n\n/***/ }),\n\n/***/ "./node_modules/lodash/toNumber.js":\n/*!*****************************************!*\\\n  !*** ./node_modules/lodash/toNumber.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseTrim = __webpack_require__(/*! ./_baseTrim */ "./node_modules/lodash/_baseTrim.js"),\n    isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),\n    isSymbol = __webpack_require__(/*! ./isSymbol */ "./node_modules/lodash/isSymbol.js");\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber(\'3.2\');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == \'number\') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == \'function\' ? value.valueOf() : value;\n    value = isObject(other) ? (other + \'\') : other;\n  }\n  if (typeof value != \'string\') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n\n\n/***/ }),\n\n/***/ "./node_modules/webpack/buildin/global.js":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ })\n\n/******/ });\n',"Worker",void 0,void 0)}},"./index.js":function(i,r,e){"use strict";e.r(r);var o=e("./lib/Utils.js");e.d(r,"Utils",function(){return o.Utils});var s=e("./Client.js");e.d(r,"SFrame",function(){return s.SFrame})},"./lib/Utils.js":function(i,r,e){"use strict";e.r(r),e.d(r,"Utils",function(){return o});const o={toHex:function(s){return Array.prototype.map.call(s instanceof Uint8Array?s:new Uint8Array(s),a=>a.toString(16).padStart(2,"0")).join("")},fromHex:function(s){const a=[];for(let c=0;c<s.length/2;++c)a.push(parseInt(s.substring(2*c,2*(c+1)),16));return new Uint8Array(a)},equals:function(s,a){if(s.byteLength!=a.byteLength)return!1;for(let c=0;c!=s.byteLength;c++)if(s[c]!=a[c])return!1;return!0}}},"./node_modules/worker-loader/dist/runtime/inline.js":function(i,r,e){"use strict";i.exports=function(o,s,a,c){var u=self||window;try{try{var l;try{l=new u.Blob([o])}catch(v){(l=new(u.BlobBuilder||u.WebKitBlobBuilder||u.MozBlobBuilder||u.MSBlobBuilder)).append(o),l=l.getBlob()}var p=u.URL||u.webkitURL,y=p.createObjectURL(l),O=new u[s](y,a);return p.revokeObjectURL(y),O}catch(v){return new u[s]("data:application/javascript,".concat(encodeURIComponent(o)),a)}}catch(v){if(!c)throw Error("Inline worker is not supported");return new u[s](c,a)}}}})}).call(this,t(0))},function(d,E,t){"use strict";var i=t(1)(t(15));const r=t(73)();d.exports=function(){function o(a,c){void 0===c&&(c={}),(0,i.default)(this,"_firstSinglepeerConnection",void 0),(0,i.default)(this,"_peerConnection",void 0),(0,i.default)(this,"_spcToAdd",void 0),(0,i.default)(this,"_singlePeerConnections",{}),(0,i.default)(this,"_session",void 0),(0,i.default)(this,"_tracks",[]),this._session=a,this.PeerConnection=c.PeerConnection||r}var s=o.prototype;return s.getPeerConnection=function(c,u){return this._spcToAdd=u,this._peerConnection?this._peerConnection.addOptions(c):(this._firstSinglePeerConnection=u._id,this._peerConnection=new this.PeerConnection(c),this._peerConnection.on("trackAdded",l=>{const h=l.track;this._tracks.includes(h.id)||(this._singlePeerConnections[this._spcToAdd._id].push(h),this._tracks.push(h.id),this._spcToAdd._onTrackAdded(l))})),this._singlePeerConnections[u._id]=[],this._peerConnection},s.removeSinglePeerConnection=function(c){this._firstSinglePeerConnection===c&&this._peerConnection.iceRestart(),delete this._singlePeerConnections[c],Object.keys(this._singlePeerConnections).length||(this._peerConnection.disconnect(),this._peerConnection=null)},s.removeTrack=function(c,u){var l;let h=this._tracks.indexOf(c.id);h>-1&&this._tracks.splice(h,1),h=null==(l=this._singlePeerConnections[u])?void 0:l.indexOf(c),h>-1&&this._singlePeerConnections[u].splice(h,1)},s.destroy=function(){this._spcToAdd=null,this._singlePeerConnections=null,this._session=null,this._tracks=null,this._peerConnection&&(this._peerConnection.disconnect(),this._peerConnection=null)},o}()},function(d,E,t){"use strict";d.exports=function(i){void 0===i&&(i={});const r=i.Session||t(315)(),e=i.sessionObjects||t(21);return function(s,a,c){null==a&&(a=s,s=null),Array.isArray(a)&&1===a.length&&(a=a[0]);let u=e.sessions.get(a);return u||(u=new r(s,a,c),e.sessions.add(u)),u}}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=t(748),o=t(274),s=t(3),a=t(6),c=t(10),u=t(13)(),l=t(53),h=t(74),p=t(142)(void 0!==typeof window?window:global);function y(v){return o(e(v,["AV1X","AV1","VP9","rtx","red","ulpfec","H265","X-H264UC","x-ulpfecuc"]))}const O=function(){var v=(0,r.default)(i.default.mark(function b(){var T,C,w,N,k,L;return i.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if("undefined"!=typeof window){Z.next=2;break}return Z.abrupt("return",{videoEncoders:[],videoDecoders:[]});case 2:if(T=p.RTCPeerConnection,!window.RTCRtpSender||!("getCapabilities"in window.RTCRtpSender)){Z.next=7;break}return C=y(C=window.RTCRtpSender.getCapabilities("video").codecs.map(oe=>oe.mimeType||oe.name).map(oe=>oe.replace("video/",""))),Z.abrupt("return",{videoEncoders:C,videoDecoders:C});case 7:if("Chrome"!==s.name||"captureStream"in window.HTMLCanvasElement.prototype){Z.next=9;break}return Z.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 9:if(!s.isLegacyEdge){Z.next=11;break}return Z.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});case 11:return(w=window.document.createElement("canvas")).getContext("2d"),N=w.captureStream(),Z.prev=14,L={iceServers:[]},h()&&(L.sdpSemantics="plan-b"),(k=new T(L)).addTrack?k.addTrack(N.getVideoTracks()[0],N):k.addStream&&k.addStream(N),Z.next=21,k.createOffer();case 21:return C=y(C=l.getCodecs(Z.sent.sdp,"video")||[]),Z.abrupt("return",{videoEncoders:C,videoDecoders:C});case 27:throw Z.prev=27,Z.t0=Z.catch(14),u(a.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),c.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return Z.prev=30,k.close(),Z.finish(30);case 33:case"end":return Z.stop()}},b,null,[[14,27,30,33]])}));return function(){return v.apply(this,arguments)}}();d.exports=O},function(d,E,t){var n=t(749),i=t(238),r=t(88),e=t(129),o=r(function(s,a){return e(s)?n(s,i(a,1,e,!0)):[]});d.exports=o},function(d,E,t){var n=t(93),i=t(94),r=t(128),e=t(34),o=t(68),s=t(95);d.exports=function c(u,l,h,p){var y=-1,O=i,v=!0,b=u.length,T=[],C=l.length;if(!b)return T;h&&(l=e(l,o(h))),p?(O=r,v=!1):l.length>=200&&(O=s,v=!1,l=new n(l));e:for(;++y<b;){var w=u[y],N=null==h?w:h(w);if(w=p||0!==w?w:0,v&&N==N){for(var k=C;k--;)if(l[k]===N)continue e;T.push(w)}else O(l,N,p)||T.push(w)}return T}},function(d,E,t){"use strict";const n=t(311);d.exports=n.isSupported},function(d,E,t){"use strict";const i=t(24)().getInputMediaDevices;d.exports=function(e){i().then(o=>e(void 0,o),e)}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));d.exports=function(e){void 0===e&&(e={});const o=e.deviceHelpers||t(24)(),s=o.hasAudioOutputApiSupport,a=o.hasDevice,c=e.getAudioOutputDevices||t(326),u=e.updateSubscribersSinkId||t(328),l=t(13)(),h=t(6);return function(){var y=(0,r.default)(i.default.mark(function O(v){return i.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(s()){w.next=2;break}throw l(h.UNSUPPORTED_BROWSER,new Error("setAudioOutputDevice is not supported in your browser."));case 2:return w.next=4,c();case 4:if(a(w.sent,v)){w.next=8;break}throw l(h.INVALID_AUDIO_OUTPUT_SOURCE,new Error("The requested device is not valid."));case 8:return w.prev=8,w.next=11,u(v);case 11:w.next=16;break;case 13:throw w.prev=13,w.t0=w.catch(8),l(h.REQUESTED_DEVICE_PERMISSION_DENIED,new Error("No permission to use the requested device."));case 16:case"end":return w.stop()}},O,null,[[8,13]])}));return function(v){return y.apply(this,arguments)}}()}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));const e=t(754)(),o=t(24)(),s=o.hasAudioOutputApiSupport,a=o.getNativeMediaDevices;d.exports=()=>{if(s()){const c=a();let u=!1;c.addEventListener("devicechange",(0,r.default)(i.default.mark(function l(){return i.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!u){p.next=2;break}return p.abrupt("return");case 2:return u=!0,p.next=5,e();case 5:u=!1;case 6:case"end":return p.stop()}},l)})))}}},function(d,E,t){"use strict";var n=t(1),i=n(t(4)),r=n(t(5));d.exports=function(e){void 0===e&&(e={});const o=e.deviceHelpers||t(24)(),s=o.getAudioOutputMediaDevices,a=o.getDefaultAudioOutputDeviceId,c=o.hasDevice,u=e.currentAudioOutputDevice||t(105),l=u.getCurrentAudioOutputDeviceId,h=u.setCurrentAudioOutputDeviceId,p=e.updateSubscribersSinkId||t(328),y=e.logging||t(2)("currentAudioOutputDevice");return function(){var v=(0,r.default)(i.default.mark(function b(){var T,w;return i.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,s();case 2:if(0!==(T=k.sent).length){k.next=6;break}return h(""),k.abrupt("return");case 6:if(!c(T,l())){k.next=9;break}return k.abrupt("return");case 9:return w=a(T),h(w),k.prev=11,k.next=14,p(w);case 14:k.next=19;break;case 16:k.prev=16,k.t0=k.catch(11),y.debug("Failed to set the default audio output device.",k.t0);case 19:case"end":return k.stop()}},b,null,[[11,16]])}));return function(){return v.apply(this,arguments)}}()}}])},module.exports=t()},978:(d,E,t)=>{var n;!function(i){"use strict";function r(e){return e&&e.__esModule&&e.default?e.default:e}n=function(e,o,s){s.exports=function(i,r,e,o,s){var a=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function c(C){var w=C.key,N=C.loadUrl,k=C.loadMethod||"GET",L=C.loadParams,D="raw"===C.loadMode,W=C.updateUrl,Z=C.insertUrl,oe=C.deleteUrl,Q=C.onBeforeSend,ne=C.onAjaxError;function he(Oe,ge,ce,pe){var de,ve,Ue=r();function Ae(){i.sendRequest(ce).then(function(Xe,Ye,We){pe?pe(Ue,Xe,We):Ue.resolve()},function(Xe,Ye){var We=function b(C){var w=C.getResponseHeader("Content-Type"),N=C.responseText;if(!w)return null;if(0===w.indexOf("text/plain"))return N;if(0===w.indexOf("application/json")){var k=function T(C){try{return JSON.parse(C)}catch(w){return null}}(N);if("string"==typeof k)return k;if("object"==typeof k)for(var L in k)if("string"==typeof k[L])return k[L];return N}return null}(Xe);if(ne){var at={xhr:Xe,error:We};ne(at),We=at.error}We?Ue.reject(We):Ue.reject(Xe,Ye)})}return ge&&!w?Ue.reject(new Error("Primary key is not specified (operation: '"+Oe+"', url: '"+ce.url+"')")):("load"===Oe?(ce.cache=!1,ce.dataType="json"):ce.dataType="text",Q&&(ve=Q(Oe,ce))&&"function"==typeof ve.then&&(de=ve),de?de.then(Ae,function(Xe){Ue.reject(Xe)}):Ae()),Ue.promise()}function ae(Oe){return Array.isArray(w)?w.map(function(ge){return[ge,Oe[ge]]}):[w,Oe]}function ye(Oe,ge){var ce={};if(ge&&(ce.isCountQuery=ge),Oe){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(Ae){void 0!==Oe[Ae]&&(ce[Ae]=Oe[Ae])});var pe=s.normalizeSortingInfo,Ue=Oe.group,de=Oe.filter,ve=Oe.select;Oe.sort&&(ce.sort=JSON.stringify(pe(Oe.sort))),Ue&&(function v(C){if(!Array.isArray(C))return!1;for(var w=0;w<C.length;w++)if("groupInterval"in C[w]||"isExpanded"in C[w])return!0;return!1}(Ue)||(Ue=pe(Ue)),ce.group=JSON.stringify(Ue)),Array.isArray(de)&&(O(de=e(!0,[],de)),ce.filter=JSON.stringify(de)),Oe.totalSummary&&(ce.totalSummary=JSON.stringify(Oe.totalSummary)),Oe.groupSummary&&(ce.groupSummary=JSON.stringify(Oe.groupSummary)),ve&&(Array.isArray(ve)||(ve=[ve]),ce.select=JSON.stringify(ve))}return e(ce,L),ce}function Le(Oe,ge,ce){var pe=ce.getResponseHeader("Content-Type"),Ue=pe&&pe.indexOf("application/json")>-1;Oe.resolve(Ue?JSON.parse(ge):ge)}var me={key:w,useDefaultSearch:!0,load:function(Oe){return he("load",!1,{url:N,method:k,data:ye(Oe)},function(ge,ce){u(ge,ce,function(pe){return[pe.data,h(pe)]})})},totalCount:!D&&function(Oe){return he("load",!1,{url:N,method:k,data:ye(Oe,!0)},function(ge,ce){u(ge,ce,function(pe){return[pe.totalCount]})})},byKey:!D&&function(Oe){return he("load",!0,{url:N,method:k,data:ye({filter:ae(Oe)})},function(ge,ce){u(ge,ce,function(pe){return[pe.data[0]]})})},update:W&&function(Oe,ge){return he("update",!0,{url:W,method:C.updateMethod||"PUT",data:{key:p(Oe),values:JSON.stringify(ge)}},Le)},insert:Z&&function(Oe){return he("insert",!0,{url:Z,method:C.insertMethod||"POST",data:{values:JSON.stringify(Oe)}},Le)},remove:oe&&function(Oe){return he("delete",!0,{url:oe,method:C.deleteMethod||"DELETE",data:{key:p(Oe)}})}};return a.forEach(function(Oe){var ge=C[Oe];void 0!==ge&&(me[Oe]=ge)}),me}function u(C,w,N){(w=function l(C){return Array.isArray(C)?{data:C}:"number"==typeof C?{totalCount:C}:C}(w))&&"object"==typeof w?C.resolve.apply(C,N(w)):C.reject(new Error("Unexpected response received"))}function h(C){return{totalCount:"totalCount"in C?C.totalCount:-1,groupCount:"groupCount"in C?C.groupCount:-1,summary:C.summary||null}}function p(C){return"object"==typeof C?JSON.stringify(C):C}function O(C){C.forEach(function(w,N){Array.isArray(w)?O(w):"[object Date]"===Object.prototype.toString.call(w)&&(C[N]=function y(C){function w(Z,oe){for(Z=String(Z);Z.length<oe;)Z="0"+Z;return Z}var N=[1+C.getMonth(),"/",C.getDate(),"/",C.getFullYear()],k=C.getHours(),L=C.getMinutes(),D=C.getSeconds(),W=C.getMilliseconds();return k+L+D+W>0&&N.push(" ",w(k,2),":",w(L,2),":",w(D,2),".",w(W,3)),N.join("")}(w))})}return{createStore:function(C){return new o(c(C))}}}(r(t(8948)),t(818).BH,t(3684).l,r(t(2451)),r(t(6059)))}.call(E,t,E,d),void 0!==n&&(d.exports=n)}()},7156:d=>{function E(n,i,r,e,o,s,a){try{var c=n[s](a),u=c.value}catch(l){return void r(l)}c.done?i(u):Promise.resolve(u).then(e,o)}d.exports=function t(n){return function(){var i=this,r=arguments;return new Promise(function(e,o){var s=n.apply(i,r);function a(u){E(s,e,o,a,c,"next",u)}function c(u){E(s,e,o,a,c,"throw",u)}a(void 0)})}},d.exports.__esModule=!0,d.exports.default=d.exports}}]);